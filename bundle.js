/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/.pnpm/reflect-metadata@0.2.2/node_modules/reflect-metadata/Reflect.js":
/*!************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/reflect-metadata@0.2.2/node_modules/reflect-metadata/Reflect.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Reflect;
(function (Reflect) {
    // Metadata Proposal
    // https://rbuckton.github.io/reflect-metadata/
    (function (factory) {
        var root = typeof globalThis === "object" ? globalThis :
            typeof __webpack_require__.g === "object" ? __webpack_require__.g :
                typeof self === "object" ? self :
                    typeof this === "object" ? this :
                        sloppyModeThis();
        var exporter = makeExporter(Reflect);
        if (typeof root.Reflect !== "undefined") {
            exporter = makeExporter(root.Reflect, exporter);
        }
        factory(exporter, root);
        if (typeof root.Reflect === "undefined") {
            root.Reflect = Reflect;
        }
        function makeExporter(target, previous) {
            return function (key, value) {
                Object.defineProperty(target, key, { configurable: true, writable: true, value: value });
                if (previous)
                    previous(key, value);
            };
        }
        function functionThis() {
            try {
                return Function("return this;")();
            }
            catch (_) { }
        }
        function indirectEvalThis() {
            try {
                return (void 0, eval)("(function() { return this; })()");
            }
            catch (_) { }
        }
        function sloppyModeThis() {
            return functionThis() || indirectEvalThis();
        }
    })(function (exporter, root) {
        var hasOwn = Object.prototype.hasOwnProperty;
        // feature test for Symbol support
        var supportsSymbol = typeof Symbol === "function";
        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== "undefined" ? Symbol.toPrimitive : "@@toPrimitive";
        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== "undefined" ? Symbol.iterator : "@@iterator";
        var supportsCreate = typeof Object.create === "function"; // feature test for Object.create support
        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support
        var downLevel = !supportsCreate && !supportsProto;
        var HashMap = {
            // create an object in dictionary mode (a.k.a. "slow" mode in v8)
            create: supportsCreate
                ? function () { return MakeDictionary(Object.create(null)); }
                : supportsProto
                    ? function () { return MakeDictionary({ __proto__: null }); }
                    : function () { return MakeDictionary({}); },
            has: downLevel
                ? function (map, key) { return hasOwn.call(map, key); }
                : function (map, key) { return key in map; },
            get: downLevel
                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }
                : function (map, key) { return map[key]; },
        };
        // Load global or shim versions of Map, Set, and WeakMap
        var functionPrototype = Object.getPrototypeOf(Function);
        var _Map = typeof Map === "function" && typeof Map.prototype.entries === "function" ? Map : CreateMapPolyfill();
        var _Set = typeof Set === "function" && typeof Set.prototype.entries === "function" ? Set : CreateSetPolyfill();
        var _WeakMap = typeof WeakMap === "function" ? WeakMap : CreateWeakMapPolyfill();
        var registrySymbol = supportsSymbol ? Symbol.for("@reflect-metadata:registry") : undefined;
        var metadataRegistry = GetOrCreateMetadataRegistry();
        var metadataProvider = CreateMetadataProvider(metadataRegistry);
        /**
         * Applies a set of decorators to a property of a target object.
         * @param decorators An array of decorators.
         * @param target The target object.
         * @param propertyKey (Optional) The property key to decorate.
         * @param attributes (Optional) The property descriptor for the target key.
         * @remarks Decorators are applied in reverse order.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     Example = Reflect.decorate(decoratorsArray, Example);
         *
         *     // property (on constructor)
         *     Reflect.decorate(decoratorsArray, Example, "staticProperty");
         *
         *     // property (on prototype)
         *     Reflect.decorate(decoratorsArray, Example.prototype, "property");
         *
         *     // method (on constructor)
         *     Object.defineProperty(Example, "staticMethod",
         *         Reflect.decorate(decoratorsArray, Example, "staticMethod",
         *             Object.getOwnPropertyDescriptor(Example, "staticMethod")));
         *
         *     // method (on prototype)
         *     Object.defineProperty(Example.prototype, "method",
         *         Reflect.decorate(decoratorsArray, Example.prototype, "method",
         *             Object.getOwnPropertyDescriptor(Example.prototype, "method")));
         *
         */
        function decorate(decorators, target, propertyKey, attributes) {
            if (!IsUndefined(propertyKey)) {
                if (!IsArray(decorators))
                    throw new TypeError();
                if (!IsObject(target))
                    throw new TypeError();
                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))
                    throw new TypeError();
                if (IsNull(attributes))
                    attributes = undefined;
                propertyKey = ToPropertyKey(propertyKey);
                return DecorateProperty(decorators, target, propertyKey, attributes);
            }
            else {
                if (!IsArray(decorators))
                    throw new TypeError();
                if (!IsConstructor(target))
                    throw new TypeError();
                return DecorateConstructor(decorators, target);
            }
        }
        exporter("decorate", decorate);
        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)
        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata
        /**
         * A default metadata decorator factory that can be used on a class, class member, or parameter.
         * @param metadataKey The key for the metadata entry.
         * @param metadataValue The value for the metadata entry.
         * @returns A decorator function.
         * @remarks
         * If `metadataKey` is already defined for the target and target key, the
         * metadataValue for that key will be overwritten.
         * @example
         *
         *     // constructor
         *     @Reflect.metadata(key, value)
         *     class Example {
         *     }
         *
         *     // property (on constructor, TypeScript only)
         *     class Example {
         *         @Reflect.metadata(key, value)
         *         static staticProperty;
         *     }
         *
         *     // property (on prototype, TypeScript only)
         *     class Example {
         *         @Reflect.metadata(key, value)
         *         property;
         *     }
         *
         *     // method (on constructor)
         *     class Example {
         *         @Reflect.metadata(key, value)
         *         static staticMethod() { }
         *     }
         *
         *     // method (on prototype)
         *     class Example {
         *         @Reflect.metadata(key, value)
         *         method() { }
         *     }
         *
         */
        function metadata(metadataKey, metadataValue) {
            function decorator(target, propertyKey) {
                if (!IsObject(target))
                    throw new TypeError();
                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))
                    throw new TypeError();
                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);
            }
            return decorator;
        }
        exporter("metadata", metadata);
        /**
         * Define a unique metadata entry on the target.
         * @param metadataKey A key used to store and retrieve metadata.
         * @param metadataValue A value that contains attached metadata.
         * @param target The target object on which to define metadata.
         * @param propertyKey (Optional) The property key for the target.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     Reflect.defineMetadata("custom:annotation", options, Example);
         *
         *     // property (on constructor)
         *     Reflect.defineMetadata("custom:annotation", options, Example, "staticProperty");
         *
         *     // property (on prototype)
         *     Reflect.defineMetadata("custom:annotation", options, Example.prototype, "property");
         *
         *     // method (on constructor)
         *     Reflect.defineMetadata("custom:annotation", options, Example, "staticMethod");
         *
         *     // method (on prototype)
         *     Reflect.defineMetadata("custom:annotation", options, Example.prototype, "method");
         *
         *     // decorator factory as metadata-producing annotation.
         *     function MyAnnotation(options): Decorator {
         *         return (target, key?) => Reflect.defineMetadata("custom:annotation", options, target, key);
         *     }
         *
         */
        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);
        }
        exporter("defineMetadata", defineMetadata);
        /**
         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.
         * @param metadataKey A key used to store and retrieve metadata.
         * @param target The target object on which the metadata is defined.
         * @param propertyKey (Optional) The property key for the target.
         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     result = Reflect.hasMetadata("custom:annotation", Example);
         *
         *     // property (on constructor)
         *     result = Reflect.hasMetadata("custom:annotation", Example, "staticProperty");
         *
         *     // property (on prototype)
         *     result = Reflect.hasMetadata("custom:annotation", Example.prototype, "property");
         *
         *     // method (on constructor)
         *     result = Reflect.hasMetadata("custom:annotation", Example, "staticMethod");
         *
         *     // method (on prototype)
         *     result = Reflect.hasMetadata("custom:annotation", Example.prototype, "method");
         *
         */
        function hasMetadata(metadataKey, target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            return OrdinaryHasMetadata(metadataKey, target, propertyKey);
        }
        exporter("hasMetadata", hasMetadata);
        /**
         * Gets a value indicating whether the target object has the provided metadata key defined.
         * @param metadataKey A key used to store and retrieve metadata.
         * @param target The target object on which the metadata is defined.
         * @param propertyKey (Optional) The property key for the target.
         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     result = Reflect.hasOwnMetadata("custom:annotation", Example);
         *
         *     // property (on constructor)
         *     result = Reflect.hasOwnMetadata("custom:annotation", Example, "staticProperty");
         *
         *     // property (on prototype)
         *     result = Reflect.hasOwnMetadata("custom:annotation", Example.prototype, "property");
         *
         *     // method (on constructor)
         *     result = Reflect.hasOwnMetadata("custom:annotation", Example, "staticMethod");
         *
         *     // method (on prototype)
         *     result = Reflect.hasOwnMetadata("custom:annotation", Example.prototype, "method");
         *
         */
        function hasOwnMetadata(metadataKey, target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);
        }
        exporter("hasOwnMetadata", hasOwnMetadata);
        /**
         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.
         * @param metadataKey A key used to store and retrieve metadata.
         * @param target The target object on which the metadata is defined.
         * @param propertyKey (Optional) The property key for the target.
         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     result = Reflect.getMetadata("custom:annotation", Example);
         *
         *     // property (on constructor)
         *     result = Reflect.getMetadata("custom:annotation", Example, "staticProperty");
         *
         *     // property (on prototype)
         *     result = Reflect.getMetadata("custom:annotation", Example.prototype, "property");
         *
         *     // method (on constructor)
         *     result = Reflect.getMetadata("custom:annotation", Example, "staticMethod");
         *
         *     // method (on prototype)
         *     result = Reflect.getMetadata("custom:annotation", Example.prototype, "method");
         *
         */
        function getMetadata(metadataKey, target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            return OrdinaryGetMetadata(metadataKey, target, propertyKey);
        }
        exporter("getMetadata", getMetadata);
        /**
         * Gets the metadata value for the provided metadata key on the target object.
         * @param metadataKey A key used to store and retrieve metadata.
         * @param target The target object on which the metadata is defined.
         * @param propertyKey (Optional) The property key for the target.
         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     result = Reflect.getOwnMetadata("custom:annotation", Example);
         *
         *     // property (on constructor)
         *     result = Reflect.getOwnMetadata("custom:annotation", Example, "staticProperty");
         *
         *     // property (on prototype)
         *     result = Reflect.getOwnMetadata("custom:annotation", Example.prototype, "property");
         *
         *     // method (on constructor)
         *     result = Reflect.getOwnMetadata("custom:annotation", Example, "staticMethod");
         *
         *     // method (on prototype)
         *     result = Reflect.getOwnMetadata("custom:annotation", Example.prototype, "method");
         *
         */
        function getOwnMetadata(metadataKey, target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);
        }
        exporter("getOwnMetadata", getOwnMetadata);
        /**
         * Gets the metadata keys defined on the target object or its prototype chain.
         * @param target The target object on which the metadata is defined.
         * @param propertyKey (Optional) The property key for the target.
         * @returns An array of unique metadata keys.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     result = Reflect.getMetadataKeys(Example);
         *
         *     // property (on constructor)
         *     result = Reflect.getMetadataKeys(Example, "staticProperty");
         *
         *     // property (on prototype)
         *     result = Reflect.getMetadataKeys(Example.prototype, "property");
         *
         *     // method (on constructor)
         *     result = Reflect.getMetadataKeys(Example, "staticMethod");
         *
         *     // method (on prototype)
         *     result = Reflect.getMetadataKeys(Example.prototype, "method");
         *
         */
        function getMetadataKeys(target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            return OrdinaryMetadataKeys(target, propertyKey);
        }
        exporter("getMetadataKeys", getMetadataKeys);
        /**
         * Gets the unique metadata keys defined on the target object.
         * @param target The target object on which the metadata is defined.
         * @param propertyKey (Optional) The property key for the target.
         * @returns An array of unique metadata keys.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     result = Reflect.getOwnMetadataKeys(Example);
         *
         *     // property (on constructor)
         *     result = Reflect.getOwnMetadataKeys(Example, "staticProperty");
         *
         *     // property (on prototype)
         *     result = Reflect.getOwnMetadataKeys(Example.prototype, "property");
         *
         *     // method (on constructor)
         *     result = Reflect.getOwnMetadataKeys(Example, "staticMethod");
         *
         *     // method (on prototype)
         *     result = Reflect.getOwnMetadataKeys(Example.prototype, "method");
         *
         */
        function getOwnMetadataKeys(target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            return OrdinaryOwnMetadataKeys(target, propertyKey);
        }
        exporter("getOwnMetadataKeys", getOwnMetadataKeys);
        /**
         * Deletes the metadata entry from the target object with the provided key.
         * @param metadataKey A key used to store and retrieve metadata.
         * @param target The target object on which the metadata is defined.
         * @param propertyKey (Optional) The property key for the target.
         * @returns `true` if the metadata entry was found and deleted; otherwise, false.
         * @example
         *
         *     class Example {
         *         // property declarations are not part of ES6, though they are valid in TypeScript:
         *         // static staticProperty;
         *         // property;
         *
         *         constructor(p) { }
         *         static staticMethod(p) { }
         *         method(p) { }
         *     }
         *
         *     // constructor
         *     result = Reflect.deleteMetadata("custom:annotation", Example);
         *
         *     // property (on constructor)
         *     result = Reflect.deleteMetadata("custom:annotation", Example, "staticProperty");
         *
         *     // property (on prototype)
         *     result = Reflect.deleteMetadata("custom:annotation", Example.prototype, "property");
         *
         *     // method (on constructor)
         *     result = Reflect.deleteMetadata("custom:annotation", Example, "staticMethod");
         *
         *     // method (on prototype)
         *     result = Reflect.deleteMetadata("custom:annotation", Example.prototype, "method");
         *
         */
        function deleteMetadata(metadataKey, target, propertyKey) {
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            if (!IsObject(target))
                throw new TypeError();
            if (!IsUndefined(propertyKey))
                propertyKey = ToPropertyKey(propertyKey);
            var provider = GetMetadataProvider(target, propertyKey, /*Create*/ false);
            if (IsUndefined(provider))
                return false;
            return provider.OrdinaryDeleteMetadata(metadataKey, target, propertyKey);
        }
        exporter("deleteMetadata", deleteMetadata);
        function DecorateConstructor(decorators, target) {
            for (var i = decorators.length - 1; i >= 0; --i) {
                var decorator = decorators[i];
                var decorated = decorator(target);
                if (!IsUndefined(decorated) && !IsNull(decorated)) {
                    if (!IsConstructor(decorated))
                        throw new TypeError();
                    target = decorated;
                }
            }
            return target;
        }
        function DecorateProperty(decorators, target, propertyKey, descriptor) {
            for (var i = decorators.length - 1; i >= 0; --i) {
                var decorator = decorators[i];
                var decorated = decorator(target, propertyKey, descriptor);
                if (!IsUndefined(decorated) && !IsNull(decorated)) {
                    if (!IsObject(decorated))
                        throw new TypeError();
                    descriptor = decorated;
                }
            }
            return descriptor;
        }
        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)
        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata
        function OrdinaryHasMetadata(MetadataKey, O, P) {
            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);
            if (hasOwn)
                return true;
            var parent = OrdinaryGetPrototypeOf(O);
            if (!IsNull(parent))
                return OrdinaryHasMetadata(MetadataKey, parent, P);
            return false;
        }
        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)
        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata
        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {
            var provider = GetMetadataProvider(O, P, /*Create*/ false);
            if (IsUndefined(provider))
                return false;
            return ToBoolean(provider.OrdinaryHasOwnMetadata(MetadataKey, O, P));
        }
        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)
        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata
        function OrdinaryGetMetadata(MetadataKey, O, P) {
            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);
            if (hasOwn)
                return OrdinaryGetOwnMetadata(MetadataKey, O, P);
            var parent = OrdinaryGetPrototypeOf(O);
            if (!IsNull(parent))
                return OrdinaryGetMetadata(MetadataKey, parent, P);
            return undefined;
        }
        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)
        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata
        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {
            var provider = GetMetadataProvider(O, P, /*Create*/ false);
            if (IsUndefined(provider))
                return;
            return provider.OrdinaryGetOwnMetadata(MetadataKey, O, P);
        }
        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)
        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata
        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {
            var provider = GetMetadataProvider(O, P, /*Create*/ true);
            provider.OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P);
        }
        // 3.1.6.1 OrdinaryMetadataKeys(O, P)
        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys
        function OrdinaryMetadataKeys(O, P) {
            var ownKeys = OrdinaryOwnMetadataKeys(O, P);
            var parent = OrdinaryGetPrototypeOf(O);
            if (parent === null)
                return ownKeys;
            var parentKeys = OrdinaryMetadataKeys(parent, P);
            if (parentKeys.length <= 0)
                return ownKeys;
            if (ownKeys.length <= 0)
                return parentKeys;
            var set = new _Set();
            var keys = [];
            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {
                var key = ownKeys_1[_i];
                var hasKey = set.has(key);
                if (!hasKey) {
                    set.add(key);
                    keys.push(key);
                }
            }
            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {
                var key = parentKeys_1[_a];
                var hasKey = set.has(key);
                if (!hasKey) {
                    set.add(key);
                    keys.push(key);
                }
            }
            return keys;
        }
        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)
        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys
        function OrdinaryOwnMetadataKeys(O, P) {
            var provider = GetMetadataProvider(O, P, /*create*/ false);
            if (!provider) {
                return [];
            }
            return provider.OrdinaryOwnMetadataKeys(O, P);
        }
        // 6 ECMAScript Data Types and Values
        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values
        function Type(x) {
            if (x === null)
                return 1 /* Null */;
            switch (typeof x) {
                case "undefined": return 0 /* Undefined */;
                case "boolean": return 2 /* Boolean */;
                case "string": return 3 /* String */;
                case "symbol": return 4 /* Symbol */;
                case "number": return 5 /* Number */;
                case "object": return x === null ? 1 /* Null */ : 6 /* Object */;
                default: return 6 /* Object */;
            }
        }
        // 6.1.1 The Undefined Type
        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type
        function IsUndefined(x) {
            return x === undefined;
        }
        // 6.1.2 The Null Type
        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type
        function IsNull(x) {
            return x === null;
        }
        // 6.1.5 The Symbol Type
        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type
        function IsSymbol(x) {
            return typeof x === "symbol";
        }
        // 6.1.7 The Object Type
        // https://tc39.github.io/ecma262/#sec-object-type
        function IsObject(x) {
            return typeof x === "object" ? x !== null : typeof x === "function";
        }
        // 7.1 Type Conversion
        // https://tc39.github.io/ecma262/#sec-type-conversion
        // 7.1.1 ToPrimitive(input [, PreferredType])
        // https://tc39.github.io/ecma262/#sec-toprimitive
        function ToPrimitive(input, PreferredType) {
            switch (Type(input)) {
                case 0 /* Undefined */: return input;
                case 1 /* Null */: return input;
                case 2 /* Boolean */: return input;
                case 3 /* String */: return input;
                case 4 /* Symbol */: return input;
                case 5 /* Number */: return input;
            }
            var hint = PreferredType === 3 /* String */ ? "string" : PreferredType === 5 /* Number */ ? "number" : "default";
            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);
            if (exoticToPrim !== undefined) {
                var result = exoticToPrim.call(input, hint);
                if (IsObject(result))
                    throw new TypeError();
                return result;
            }
            return OrdinaryToPrimitive(input, hint === "default" ? "number" : hint);
        }
        // 7.1.1.1 OrdinaryToPrimitive(O, hint)
        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive
        function OrdinaryToPrimitive(O, hint) {
            if (hint === "string") {
                var toString_1 = O.toString;
                if (IsCallable(toString_1)) {
                    var result = toString_1.call(O);
                    if (!IsObject(result))
                        return result;
                }
                var valueOf = O.valueOf;
                if (IsCallable(valueOf)) {
                    var result = valueOf.call(O);
                    if (!IsObject(result))
                        return result;
                }
            }
            else {
                var valueOf = O.valueOf;
                if (IsCallable(valueOf)) {
                    var result = valueOf.call(O);
                    if (!IsObject(result))
                        return result;
                }
                var toString_2 = O.toString;
                if (IsCallable(toString_2)) {
                    var result = toString_2.call(O);
                    if (!IsObject(result))
                        return result;
                }
            }
            throw new TypeError();
        }
        // 7.1.2 ToBoolean(argument)
        // https://tc39.github.io/ecma262/2016/#sec-toboolean
        function ToBoolean(argument) {
            return !!argument;
        }
        // 7.1.12 ToString(argument)
        // https://tc39.github.io/ecma262/#sec-tostring
        function ToString(argument) {
            return "" + argument;
        }
        // 7.1.14 ToPropertyKey(argument)
        // https://tc39.github.io/ecma262/#sec-topropertykey
        function ToPropertyKey(argument) {
            var key = ToPrimitive(argument, 3 /* String */);
            if (IsSymbol(key))
                return key;
            return ToString(key);
        }
        // 7.2 Testing and Comparison Operations
        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations
        // 7.2.2 IsArray(argument)
        // https://tc39.github.io/ecma262/#sec-isarray
        function IsArray(argument) {
            return Array.isArray
                ? Array.isArray(argument)
                : argument instanceof Object
                    ? argument instanceof Array
                    : Object.prototype.toString.call(argument) === "[object Array]";
        }
        // 7.2.3 IsCallable(argument)
        // https://tc39.github.io/ecma262/#sec-iscallable
        function IsCallable(argument) {
            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.
            return typeof argument === "function";
        }
        // 7.2.4 IsConstructor(argument)
        // https://tc39.github.io/ecma262/#sec-isconstructor
        function IsConstructor(argument) {
            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.
            return typeof argument === "function";
        }
        // 7.2.7 IsPropertyKey(argument)
        // https://tc39.github.io/ecma262/#sec-ispropertykey
        function IsPropertyKey(argument) {
            switch (Type(argument)) {
                case 3 /* String */: return true;
                case 4 /* Symbol */: return true;
                default: return false;
            }
        }
        function SameValueZero(x, y) {
            return x === y || x !== x && y !== y;
        }
        // 7.3 Operations on Objects
        // https://tc39.github.io/ecma262/#sec-operations-on-objects
        // 7.3.9 GetMethod(V, P)
        // https://tc39.github.io/ecma262/#sec-getmethod
        function GetMethod(V, P) {
            var func = V[P];
            if (func === undefined || func === null)
                return undefined;
            if (!IsCallable(func))
                throw new TypeError();
            return func;
        }
        // 7.4 Operations on Iterator Objects
        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects
        function GetIterator(obj) {
            var method = GetMethod(obj, iteratorSymbol);
            if (!IsCallable(method))
                throw new TypeError(); // from Call
            var iterator = method.call(obj);
            if (!IsObject(iterator))
                throw new TypeError();
            return iterator;
        }
        // 7.4.4 IteratorValue(iterResult)
        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue
        function IteratorValue(iterResult) {
            return iterResult.value;
        }
        // 7.4.5 IteratorStep(iterator)
        // https://tc39.github.io/ecma262/#sec-iteratorstep
        function IteratorStep(iterator) {
            var result = iterator.next();
            return result.done ? false : result;
        }
        // 7.4.6 IteratorClose(iterator, completion)
        // https://tc39.github.io/ecma262/#sec-iteratorclose
        function IteratorClose(iterator) {
            var f = iterator["return"];
            if (f)
                f.call(iterator);
        }
        // 9.1 Ordinary Object Internal Methods and Internal Slots
        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots
        // 9.1.1.1 OrdinaryGetPrototypeOf(O)
        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof
        function OrdinaryGetPrototypeOf(O) {
            var proto = Object.getPrototypeOf(O);
            if (typeof O !== "function" || O === functionPrototype)
                return proto;
            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.
            // Try to determine the superclass constructor. Compatible implementations
            // must either set __proto__ on a subclass constructor to the superclass constructor,
            // or ensure each class has a valid `constructor` property on its prototype that
            // points back to the constructor.
            // If this is not the same as Function.[[Prototype]], then this is definately inherited.
            // This is the case when in ES6 or when using __proto__ in a compatible browser.
            if (proto !== functionPrototype)
                return proto;
            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.
            var prototype = O.prototype;
            var prototypeProto = prototype && Object.getPrototypeOf(prototype);
            if (prototypeProto == null || prototypeProto === Object.prototype)
                return proto;
            // If the constructor was not a function, then we cannot determine the heritage.
            var constructor = prototypeProto.constructor;
            if (typeof constructor !== "function")
                return proto;
            // If we have some kind of self-reference, then we cannot determine the heritage.
            if (constructor === O)
                return proto;
            // we have a pretty good guess at the heritage.
            return constructor;
        }
        // Global metadata registry
        // - Allows `import "reflect-metadata"` and `import "reflect-metadata/no-conflict"` to interoperate.
        // - Uses isolated metadata if `Reflect` is frozen before the registry can be installed.
        /**
         * Creates a registry used to allow multiple `reflect-metadata` providers.
         */
        function CreateMetadataRegistry() {
            var fallback;
            if (!IsUndefined(registrySymbol) &&
                typeof root.Reflect !== "undefined" &&
                !(registrySymbol in root.Reflect) &&
                typeof root.Reflect.defineMetadata === "function") {
                // interoperate with older version of `reflect-metadata` that did not support a registry.
                fallback = CreateFallbackProvider(root.Reflect);
            }
            var first;
            var second;
            var rest;
            var targetProviderMap = new _WeakMap();
            var registry = {
                registerProvider: registerProvider,
                getProvider: getProvider,
                setProvider: setProvider,
            };
            return registry;
            function registerProvider(provider) {
                if (!Object.isExtensible(registry)) {
                    throw new Error("Cannot add provider to a frozen registry.");
                }
                switch (true) {
                    case fallback === provider: break;
                    case IsUndefined(first):
                        first = provider;
                        break;
                    case first === provider: break;
                    case IsUndefined(second):
                        second = provider;
                        break;
                    case second === provider: break;
                    default:
                        if (rest === undefined)
                            rest = new _Set();
                        rest.add(provider);
                        break;
                }
            }
            function getProviderNoCache(O, P) {
                if (!IsUndefined(first)) {
                    if (first.isProviderFor(O, P))
                        return first;
                    if (!IsUndefined(second)) {
                        if (second.isProviderFor(O, P))
                            return first;
                        if (!IsUndefined(rest)) {
                            var iterator = GetIterator(rest);
                            while (true) {
                                var next = IteratorStep(iterator);
                                if (!next) {
                                    return undefined;
                                }
                                var provider = IteratorValue(next);
                                if (provider.isProviderFor(O, P)) {
                                    IteratorClose(iterator);
                                    return provider;
                                }
                            }
                        }
                    }
                }
                if (!IsUndefined(fallback) && fallback.isProviderFor(O, P)) {
                    return fallback;
                }
                return undefined;
            }
            function getProvider(O, P) {
                var providerMap = targetProviderMap.get(O);
                var provider;
                if (!IsUndefined(providerMap)) {
                    provider = providerMap.get(P);
                }
                if (!IsUndefined(provider)) {
                    return provider;
                }
                provider = getProviderNoCache(O, P);
                if (!IsUndefined(provider)) {
                    if (IsUndefined(providerMap)) {
                        providerMap = new _Map();
                        targetProviderMap.set(O, providerMap);
                    }
                    providerMap.set(P, provider);
                }
                return provider;
            }
            function hasProvider(provider) {
                if (IsUndefined(provider))
                    throw new TypeError();
                return first === provider || second === provider || !IsUndefined(rest) && rest.has(provider);
            }
            function setProvider(O, P, provider) {
                if (!hasProvider(provider)) {
                    throw new Error("Metadata provider not registered.");
                }
                var existingProvider = getProvider(O, P);
                if (existingProvider !== provider) {
                    if (!IsUndefined(existingProvider)) {
                        return false;
                    }
                    var providerMap = targetProviderMap.get(O);
                    if (IsUndefined(providerMap)) {
                        providerMap = new _Map();
                        targetProviderMap.set(O, providerMap);
                    }
                    providerMap.set(P, provider);
                }
                return true;
            }
        }
        /**
         * Gets or creates the shared registry of metadata providers.
         */
        function GetOrCreateMetadataRegistry() {
            var metadataRegistry;
            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {
                metadataRegistry = root.Reflect[registrySymbol];
            }
            if (IsUndefined(metadataRegistry)) {
                metadataRegistry = CreateMetadataRegistry();
            }
            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {
                Object.defineProperty(root.Reflect, registrySymbol, {
                    enumerable: false,
                    configurable: false,
                    writable: false,
                    value: metadataRegistry
                });
            }
            return metadataRegistry;
        }
        function CreateMetadataProvider(registry) {
            // [[Metadata]] internal slot
            // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots
            var metadata = new _WeakMap();
            var provider = {
                isProviderFor: function (O, P) {
                    var targetMetadata = metadata.get(O);
                    if (IsUndefined(targetMetadata))
                        return false;
                    return targetMetadata.has(P);
                },
                OrdinaryDefineOwnMetadata: OrdinaryDefineOwnMetadata,
                OrdinaryHasOwnMetadata: OrdinaryHasOwnMetadata,
                OrdinaryGetOwnMetadata: OrdinaryGetOwnMetadata,
                OrdinaryOwnMetadataKeys: OrdinaryOwnMetadataKeys,
                OrdinaryDeleteMetadata: OrdinaryDeleteMetadata,
            };
            metadataRegistry.registerProvider(provider);
            return provider;
            function GetOrCreateMetadataMap(O, P, Create) {
                var targetMetadata = metadata.get(O);
                var createdTargetMetadata = false;
                if (IsUndefined(targetMetadata)) {
                    if (!Create)
                        return undefined;
                    targetMetadata = new _Map();
                    metadata.set(O, targetMetadata);
                    createdTargetMetadata = true;
                }
                var metadataMap = targetMetadata.get(P);
                if (IsUndefined(metadataMap)) {
                    if (!Create)
                        return undefined;
                    metadataMap = new _Map();
                    targetMetadata.set(P, metadataMap);
                    if (!registry.setProvider(O, P, provider)) {
                        targetMetadata.delete(P);
                        if (createdTargetMetadata) {
                            metadata.delete(O);
                        }
                        throw new Error("Wrong provider for target.");
                    }
                }
                return metadataMap;
            }
            // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)
            // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata
            function OrdinaryHasOwnMetadata(MetadataKey, O, P) {
                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);
                if (IsUndefined(metadataMap))
                    return false;
                return ToBoolean(metadataMap.has(MetadataKey));
            }
            // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)
            // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata
            function OrdinaryGetOwnMetadata(MetadataKey, O, P) {
                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);
                if (IsUndefined(metadataMap))
                    return undefined;
                return metadataMap.get(MetadataKey);
            }
            // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)
            // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata
            function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {
                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);
                metadataMap.set(MetadataKey, MetadataValue);
            }
            // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)
            // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys
            function OrdinaryOwnMetadataKeys(O, P) {
                var keys = [];
                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);
                if (IsUndefined(metadataMap))
                    return keys;
                var keysObj = metadataMap.keys();
                var iterator = GetIterator(keysObj);
                var k = 0;
                while (true) {
                    var next = IteratorStep(iterator);
                    if (!next) {
                        keys.length = k;
                        return keys;
                    }
                    var nextValue = IteratorValue(next);
                    try {
                        keys[k] = nextValue;
                    }
                    catch (e) {
                        try {
                            IteratorClose(iterator);
                        }
                        finally {
                            throw e;
                        }
                    }
                    k++;
                }
            }
            function OrdinaryDeleteMetadata(MetadataKey, O, P) {
                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);
                if (IsUndefined(metadataMap))
                    return false;
                if (!metadataMap.delete(MetadataKey))
                    return false;
                if (metadataMap.size === 0) {
                    var targetMetadata = metadata.get(O);
                    if (!IsUndefined(targetMetadata)) {
                        targetMetadata.delete(P);
                        if (targetMetadata.size === 0) {
                            metadata.delete(targetMetadata);
                        }
                    }
                }
                return true;
            }
        }
        function CreateFallbackProvider(reflect) {
            var defineMetadata = reflect.defineMetadata, hasOwnMetadata = reflect.hasOwnMetadata, getOwnMetadata = reflect.getOwnMetadata, getOwnMetadataKeys = reflect.getOwnMetadataKeys, deleteMetadata = reflect.deleteMetadata;
            var metadataOwner = new _WeakMap();
            var provider = {
                isProviderFor: function (O, P) {
                    var metadataPropertySet = metadataOwner.get(O);
                    if (!IsUndefined(metadataPropertySet) && metadataPropertySet.has(P)) {
                        return true;
                    }
                    if (getOwnMetadataKeys(O, P).length) {
                        if (IsUndefined(metadataPropertySet)) {
                            metadataPropertySet = new _Set();
                            metadataOwner.set(O, metadataPropertySet);
                        }
                        metadataPropertySet.add(P);
                        return true;
                    }
                    return false;
                },
                OrdinaryDefineOwnMetadata: defineMetadata,
                OrdinaryHasOwnMetadata: hasOwnMetadata,
                OrdinaryGetOwnMetadata: getOwnMetadata,
                OrdinaryOwnMetadataKeys: getOwnMetadataKeys,
                OrdinaryDeleteMetadata: deleteMetadata,
            };
            return provider;
        }
        /**
         * Gets the metadata provider for an object. If the object has no metadata provider and this is for a create operation,
         * then this module's metadata provider is assigned to the object.
         */
        function GetMetadataProvider(O, P, Create) {
            var registeredProvider = metadataRegistry.getProvider(O, P);
            if (!IsUndefined(registeredProvider)) {
                return registeredProvider;
            }
            if (Create) {
                if (metadataRegistry.setProvider(O, P, metadataProvider)) {
                    return metadataProvider;
                }
                throw new Error("Illegal state.");
            }
            return undefined;
        }
        // naive Map shim
        function CreateMapPolyfill() {
            var cacheSentinel = {};
            var arraySentinel = [];
            var MapIterator = /** @class */ (function () {
                function MapIterator(keys, values, selector) {
                    this._index = 0;
                    this._keys = keys;
                    this._values = values;
                    this._selector = selector;
                }
                MapIterator.prototype["@@iterator"] = function () { return this; };
                MapIterator.prototype[iteratorSymbol] = function () { return this; };
                MapIterator.prototype.next = function () {
                    var index = this._index;
                    if (index >= 0 && index < this._keys.length) {
                        var result = this._selector(this._keys[index], this._values[index]);
                        if (index + 1 >= this._keys.length) {
                            this._index = -1;
                            this._keys = arraySentinel;
                            this._values = arraySentinel;
                        }
                        else {
                            this._index++;
                        }
                        return { value: result, done: false };
                    }
                    return { value: undefined, done: true };
                };
                MapIterator.prototype.throw = function (error) {
                    if (this._index >= 0) {
                        this._index = -1;
                        this._keys = arraySentinel;
                        this._values = arraySentinel;
                    }
                    throw error;
                };
                MapIterator.prototype.return = function (value) {
                    if (this._index >= 0) {
                        this._index = -1;
                        this._keys = arraySentinel;
                        this._values = arraySentinel;
                    }
                    return { value: value, done: true };
                };
                return MapIterator;
            }());
            var Map = /** @class */ (function () {
                function Map() {
                    this._keys = [];
                    this._values = [];
                    this._cacheKey = cacheSentinel;
                    this._cacheIndex = -2;
                }
                Object.defineProperty(Map.prototype, "size", {
                    get: function () { return this._keys.length; },
                    enumerable: true,
                    configurable: true
                });
                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };
                Map.prototype.get = function (key) {
                    var index = this._find(key, /*insert*/ false);
                    return index >= 0 ? this._values[index] : undefined;
                };
                Map.prototype.set = function (key, value) {
                    var index = this._find(key, /*insert*/ true);
                    this._values[index] = value;
                    return this;
                };
                Map.prototype.delete = function (key) {
                    var index = this._find(key, /*insert*/ false);
                    if (index >= 0) {
                        var size = this._keys.length;
                        for (var i = index + 1; i < size; i++) {
                            this._keys[i - 1] = this._keys[i];
                            this._values[i - 1] = this._values[i];
                        }
                        this._keys.length--;
                        this._values.length--;
                        if (SameValueZero(key, this._cacheKey)) {
                            this._cacheKey = cacheSentinel;
                            this._cacheIndex = -2;
                        }
                        return true;
                    }
                    return false;
                };
                Map.prototype.clear = function () {
                    this._keys.length = 0;
                    this._values.length = 0;
                    this._cacheKey = cacheSentinel;
                    this._cacheIndex = -2;
                };
                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };
                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };
                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };
                Map.prototype["@@iterator"] = function () { return this.entries(); };
                Map.prototype[iteratorSymbol] = function () { return this.entries(); };
                Map.prototype._find = function (key, insert) {
                    if (!SameValueZero(this._cacheKey, key)) {
                        this._cacheIndex = -1;
                        for (var i = 0; i < this._keys.length; i++) {
                            if (SameValueZero(this._keys[i], key)) {
                                this._cacheIndex = i;
                                break;
                            }
                        }
                    }
                    if (this._cacheIndex < 0 && insert) {
                        this._cacheIndex = this._keys.length;
                        this._keys.push(key);
                        this._values.push(undefined);
                    }
                    return this._cacheIndex;
                };
                return Map;
            }());
            return Map;
            function getKey(key, _) {
                return key;
            }
            function getValue(_, value) {
                return value;
            }
            function getEntry(key, value) {
                return [key, value];
            }
        }
        // naive Set shim
        function CreateSetPolyfill() {
            var Set = /** @class */ (function () {
                function Set() {
                    this._map = new _Map();
                }
                Object.defineProperty(Set.prototype, "size", {
                    get: function () { return this._map.size; },
                    enumerable: true,
                    configurable: true
                });
                Set.prototype.has = function (value) { return this._map.has(value); };
                Set.prototype.add = function (value) { return this._map.set(value, value), this; };
                Set.prototype.delete = function (value) { return this._map.delete(value); };
                Set.prototype.clear = function () { this._map.clear(); };
                Set.prototype.keys = function () { return this._map.keys(); };
                Set.prototype.values = function () { return this._map.keys(); };
                Set.prototype.entries = function () { return this._map.entries(); };
                Set.prototype["@@iterator"] = function () { return this.keys(); };
                Set.prototype[iteratorSymbol] = function () { return this.keys(); };
                return Set;
            }());
            return Set;
        }
        // naive WeakMap shim
        function CreateWeakMapPolyfill() {
            var UUID_SIZE = 16;
            var keys = HashMap.create();
            var rootKey = CreateUniqueKey();
            return /** @class */ (function () {
                function WeakMap() {
                    this._key = CreateUniqueKey();
                }
                WeakMap.prototype.has = function (target) {
                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);
                    return table !== undefined ? HashMap.has(table, this._key) : false;
                };
                WeakMap.prototype.get = function (target) {
                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);
                    return table !== undefined ? HashMap.get(table, this._key) : undefined;
                };
                WeakMap.prototype.set = function (target, value) {
                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);
                    table[this._key] = value;
                    return this;
                };
                WeakMap.prototype.delete = function (target) {
                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);
                    return table !== undefined ? delete table[this._key] : false;
                };
                WeakMap.prototype.clear = function () {
                    // NOTE: not a real clear, just makes the previous data unreachable
                    this._key = CreateUniqueKey();
                };
                return WeakMap;
            }());
            function CreateUniqueKey() {
                var key;
                do
                    key = "@@WeakMap@@" + CreateUUID();
                while (HashMap.has(keys, key));
                keys[key] = true;
                return key;
            }
            function GetOrCreateWeakMapTable(target, create) {
                if (!hasOwn.call(target, rootKey)) {
                    if (!create)
                        return undefined;
                    Object.defineProperty(target, rootKey, { value: HashMap.create() });
                }
                return target[rootKey];
            }
            function FillRandomBytes(buffer, size) {
                for (var i = 0; i < size; ++i)
                    buffer[i] = Math.random() * 0xff | 0;
                return buffer;
            }
            function GenRandomBytes(size) {
                if (typeof Uint8Array === "function") {
                    var array = new Uint8Array(size);
                    if (typeof crypto !== "undefined") {
                        crypto.getRandomValues(array);
                    }
                    else if (typeof msCrypto !== "undefined") {
                        msCrypto.getRandomValues(array);
                    }
                    else {
                        FillRandomBytes(array, size);
                    }
                    return array;
                }
                return FillRandomBytes(new Array(size), size);
            }
            function CreateUUID() {
                var data = GenRandomBytes(UUID_SIZE);
                // mark as random - RFC 4122 § 4.4
                data[6] = data[6] & 0x4f | 0x40;
                data[8] = data[8] & 0xbf | 0x80;
                var result = "";
                for (var offset = 0; offset < UUID_SIZE; ++offset) {
                    var byte = data[offset];
                    if (offset === 4 || offset === 6 || offset === 8)
                        result += "-";
                    if (byte < 16)
                        result += "0";
                    result += byte.toString(16).toLowerCase();
                }
                return result;
            }
        }
        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.
        function MakeDictionary(obj) {
            obj.__ = undefined;
            delete obj.__;
            return obj;
        }
    });
})(Reflect || (Reflect = {}));


/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/NotificationFactories.js":
/*!*********************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/NotificationFactories.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   COMPLETE_NOTIFICATION: () => (/* binding */ COMPLETE_NOTIFICATION),
/* harmony export */   createNotification: () => (/* binding */ createNotification),
/* harmony export */   errorNotification: () => (/* binding */ errorNotification),
/* harmony export */   nextNotification: () => (/* binding */ nextNotification)
/* harmony export */ });
var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();
function errorNotification(error) {
    return createNotification('E', undefined, error);
}
function nextNotification(value) {
    return createNotification('N', value, undefined);
}
function createNotification(kind, value, error) {
    return {
        kind: kind,
        value: value,
        error: error,
    };
}
//# sourceMappingURL=NotificationFactories.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Observable.js":
/*!**********************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Observable.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Observable: () => (/* binding */ Observable)
/* harmony export */ });
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subscriber */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscriber.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subscription */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscription.js");
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./symbol/observable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/observable.js");
/* harmony import */ var _util_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/pipe */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/pipe.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/config.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");
/* harmony import */ var _util_errorContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util/errorContext */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/errorContext.js");







var Observable = (function () {
    function Observable(subscribe) {
        if (subscribe) {
            this._subscribe = subscribe;
        }
    }
    Observable.prototype.lift = function (operator) {
        var observable = new Observable();
        observable.source = this;
        observable.operator = operator;
        return observable;
    };
    Observable.prototype.subscribe = function (observerOrNext, error, complete) {
        var _this = this;
        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.SafeSubscriber(observerOrNext, error, complete);
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_6__.errorContext)(function () {
            var _a = _this, operator = _a.operator, source = _a.source;
            subscriber.add(operator
                ?
                    operator.call(subscriber, source)
                : source
                    ?
                        _this._subscribe(subscriber)
                    :
                        _this._trySubscribe(subscriber));
        });
        return subscriber;
    };
    Observable.prototype._trySubscribe = function (sink) {
        try {
            return this._subscribe(sink);
        }
        catch (err) {
            sink.error(err);
        }
    };
    Observable.prototype.forEach = function (next, promiseCtor) {
        var _this = this;
        promiseCtor = getPromiseCtor(promiseCtor);
        return new promiseCtor(function (resolve, reject) {
            var subscriber = new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.SafeSubscriber({
                next: function (value) {
                    try {
                        next(value);
                    }
                    catch (err) {
                        reject(err);
                        subscriber.unsubscribe();
                    }
                },
                error: reject,
                complete: resolve,
            });
            _this.subscribe(subscriber);
        });
    };
    Observable.prototype._subscribe = function (subscriber) {
        var _a;
        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);
    };
    Observable.prototype[_symbol_observable__WEBPACK_IMPORTED_MODULE_2__.observable] = function () {
        return this;
    };
    Observable.prototype.pipe = function () {
        var operations = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            operations[_i] = arguments[_i];
        }
        return (0,_util_pipe__WEBPACK_IMPORTED_MODULE_3__.pipeFromArray)(operations)(this);
    };
    Observable.prototype.toPromise = function (promiseCtor) {
        var _this = this;
        promiseCtor = getPromiseCtor(promiseCtor);
        return new promiseCtor(function (resolve, reject) {
            var value;
            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });
        });
    };
    Observable.create = function (subscribe) {
        return new Observable(subscribe);
    };
    return Observable;
}());

function getPromiseCtor(promiseCtor) {
    var _a;
    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : _config__WEBPACK_IMPORTED_MODULE_4__.config.Promise) !== null && _a !== void 0 ? _a : Promise;
}
function isObserver(value) {
    return value && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.isFunction)(value.next) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.isFunction)(value.error) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.isFunction)(value.complete);
}
function isSubscriber(value) {
    return (value && value instanceof _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Subscriber) || (isObserver(value) && (0,_Subscription__WEBPACK_IMPORTED_MODULE_1__.isSubscription)(value));
}
//# sourceMappingURL=Observable.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subject.js":
/*!*******************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subject.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AnonymousSubject: () => (/* binding */ AnonymousSubject),
/* harmony export */   Subject: () => (/* binding */ Subject)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Observable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Observable.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Subscription */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscription.js");
/* harmony import */ var _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/ObjectUnsubscribedError */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js");
/* harmony import */ var _util_arrRemove__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util/arrRemove */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js");
/* harmony import */ var _util_errorContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/errorContext */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/errorContext.js");






var Subject = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Subject, _super);
    function Subject() {
        var _this = _super.call(this) || this;
        _this.closed = false;
        _this.currentObservers = null;
        _this.observers = [];
        _this.isStopped = false;
        _this.hasError = false;
        _this.thrownError = null;
        return _this;
    }
    Subject.prototype.lift = function (operator) {
        var subject = new AnonymousSubject(this, this);
        subject.operator = operator;
        return subject;
    };
    Subject.prototype._throwIfClosed = function () {
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_3__.ObjectUnsubscribedError();
        }
    };
    Subject.prototype.next = function (value) {
        var _this = this;
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_5__.errorContext)(function () {
            var e_1, _a;
            _this._throwIfClosed();
            if (!_this.isStopped) {
                if (!_this.currentObservers) {
                    _this.currentObservers = Array.from(_this.observers);
                }
                try {
                    for (var _b = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var observer = _c.value;
                        observer.next(value);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        });
    };
    Subject.prototype.error = function (err) {
        var _this = this;
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_5__.errorContext)(function () {
            _this._throwIfClosed();
            if (!_this.isStopped) {
                _this.hasError = _this.isStopped = true;
                _this.thrownError = err;
                var observers = _this.observers;
                while (observers.length) {
                    observers.shift().error(err);
                }
            }
        });
    };
    Subject.prototype.complete = function () {
        var _this = this;
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_5__.errorContext)(function () {
            _this._throwIfClosed();
            if (!_this.isStopped) {
                _this.isStopped = true;
                var observers = _this.observers;
                while (observers.length) {
                    observers.shift().complete();
                }
            }
        });
    };
    Subject.prototype.unsubscribe = function () {
        this.isStopped = this.closed = true;
        this.observers = this.currentObservers = null;
    };
    Object.defineProperty(Subject.prototype, "observed", {
        get: function () {
            var _a;
            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;
        },
        enumerable: false,
        configurable: true
    });
    Subject.prototype._trySubscribe = function (subscriber) {
        this._throwIfClosed();
        return _super.prototype._trySubscribe.call(this, subscriber);
    };
    Subject.prototype._subscribe = function (subscriber) {
        this._throwIfClosed();
        this._checkFinalizedStatuses(subscriber);
        return this._innerSubscribe(subscriber);
    };
    Subject.prototype._innerSubscribe = function (subscriber) {
        var _this = this;
        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;
        if (hasError || isStopped) {
            return _Subscription__WEBPACK_IMPORTED_MODULE_2__.EMPTY_SUBSCRIPTION;
        }
        this.currentObservers = null;
        observers.push(subscriber);
        return new _Subscription__WEBPACK_IMPORTED_MODULE_2__.Subscription(function () {
            _this.currentObservers = null;
            (0,_util_arrRemove__WEBPACK_IMPORTED_MODULE_4__.arrRemove)(observers, subscriber);
        });
    };
    Subject.prototype._checkFinalizedStatuses = function (subscriber) {
        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;
        if (hasError) {
            subscriber.error(thrownError);
        }
        else if (isStopped) {
            subscriber.complete();
        }
    };
    Subject.prototype.asObservable = function () {
        var observable = new _Observable__WEBPACK_IMPORTED_MODULE_1__.Observable();
        observable.source = this;
        return observable;
    };
    Subject.create = function (destination, source) {
        return new AnonymousSubject(destination, source);
    };
    return Subject;
}(_Observable__WEBPACK_IMPORTED_MODULE_1__.Observable));

var AnonymousSubject = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(AnonymousSubject, _super);
    function AnonymousSubject(destination, source) {
        var _this = _super.call(this) || this;
        _this.destination = destination;
        _this.source = source;
        return _this;
    }
    AnonymousSubject.prototype.next = function (value) {
        var _a, _b;
        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);
    };
    AnonymousSubject.prototype.error = function (err) {
        var _a, _b;
        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);
    };
    AnonymousSubject.prototype.complete = function () {
        var _a, _b;
        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);
    };
    AnonymousSubject.prototype._subscribe = function (subscriber) {
        var _a, _b;
        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : _Subscription__WEBPACK_IMPORTED_MODULE_2__.EMPTY_SUBSCRIPTION;
    };
    return AnonymousSubject;
}(Subject));

//# sourceMappingURL=Subject.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscriber.js":
/*!**********************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscriber.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EMPTY_OBSERVER: () => (/* binding */ EMPTY_OBSERVER),
/* harmony export */   SafeSubscriber: () => (/* binding */ SafeSubscriber),
/* harmony export */   Subscriber: () => (/* binding */ Subscriber)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Subscription */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscription.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/config.js");
/* harmony import */ var _util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util/reportUnhandledError */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js");
/* harmony import */ var _util_noop__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/noop */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/noop.js");
/* harmony import */ var _NotificationFactories__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./NotificationFactories */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/NotificationFactories.js");
/* harmony import */ var _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./scheduler/timeoutProvider */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js");
/* harmony import */ var _util_errorContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./util/errorContext */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/errorContext.js");









var Subscriber = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Subscriber, _super);
    function Subscriber(destination) {
        var _this = _super.call(this) || this;
        _this.isStopped = false;
        if (destination) {
            _this.destination = destination;
            if ((0,_Subscription__WEBPACK_IMPORTED_MODULE_2__.isSubscription)(destination)) {
                destination.add(_this);
            }
        }
        else {
            _this.destination = EMPTY_OBSERVER;
        }
        return _this;
    }
    Subscriber.create = function (next, error, complete) {
        return new SafeSubscriber(next, error, complete);
    };
    Subscriber.prototype.next = function (value) {
        if (this.isStopped) {
            handleStoppedNotification((0,_NotificationFactories__WEBPACK_IMPORTED_MODULE_6__.nextNotification)(value), this);
        }
        else {
            this._next(value);
        }
    };
    Subscriber.prototype.error = function (err) {
        if (this.isStopped) {
            handleStoppedNotification((0,_NotificationFactories__WEBPACK_IMPORTED_MODULE_6__.errorNotification)(err), this);
        }
        else {
            this.isStopped = true;
            this._error(err);
        }
    };
    Subscriber.prototype.complete = function () {
        if (this.isStopped) {
            handleStoppedNotification(_NotificationFactories__WEBPACK_IMPORTED_MODULE_6__.COMPLETE_NOTIFICATION, this);
        }
        else {
            this.isStopped = true;
            this._complete();
        }
    };
    Subscriber.prototype.unsubscribe = function () {
        if (!this.closed) {
            this.isStopped = true;
            _super.prototype.unsubscribe.call(this);
            this.destination = null;
        }
    };
    Subscriber.prototype._next = function (value) {
        this.destination.next(value);
    };
    Subscriber.prototype._error = function (err) {
        try {
            this.destination.error(err);
        }
        finally {
            this.unsubscribe();
        }
    };
    Subscriber.prototype._complete = function () {
        try {
            this.destination.complete();
        }
        finally {
            this.unsubscribe();
        }
    };
    return Subscriber;
}(_Subscription__WEBPACK_IMPORTED_MODULE_2__.Subscription));

var _bind = Function.prototype.bind;
function bind(fn, thisArg) {
    return _bind.call(fn, thisArg);
}
var ConsumerObserver = (function () {
    function ConsumerObserver(partialObserver) {
        this.partialObserver = partialObserver;
    }
    ConsumerObserver.prototype.next = function (value) {
        var partialObserver = this.partialObserver;
        if (partialObserver.next) {
            try {
                partialObserver.next(value);
            }
            catch (error) {
                handleUnhandledError(error);
            }
        }
    };
    ConsumerObserver.prototype.error = function (err) {
        var partialObserver = this.partialObserver;
        if (partialObserver.error) {
            try {
                partialObserver.error(err);
            }
            catch (error) {
                handleUnhandledError(error);
            }
        }
        else {
            handleUnhandledError(err);
        }
    };
    ConsumerObserver.prototype.complete = function () {
        var partialObserver = this.partialObserver;
        if (partialObserver.complete) {
            try {
                partialObserver.complete();
            }
            catch (error) {
                handleUnhandledError(error);
            }
        }
    };
    return ConsumerObserver;
}());
var SafeSubscriber = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(SafeSubscriber, _super);
    function SafeSubscriber(observerOrNext, error, complete) {
        var _this = _super.call(this) || this;
        var partialObserver;
        if ((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(observerOrNext) || !observerOrNext) {
            partialObserver = {
                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),
                error: error !== null && error !== void 0 ? error : undefined,
                complete: complete !== null && complete !== void 0 ? complete : undefined,
            };
        }
        else {
            var context_1;
            if (_this && _config__WEBPACK_IMPORTED_MODULE_3__.config.useDeprecatedNextContext) {
                context_1 = Object.create(observerOrNext);
                context_1.unsubscribe = function () { return _this.unsubscribe(); };
                partialObserver = {
                    next: observerOrNext.next && bind(observerOrNext.next, context_1),
                    error: observerOrNext.error && bind(observerOrNext.error, context_1),
                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),
                };
            }
            else {
                partialObserver = observerOrNext;
            }
        }
        _this.destination = new ConsumerObserver(partialObserver);
        return _this;
    }
    return SafeSubscriber;
}(Subscriber));

function handleUnhandledError(error) {
    if (_config__WEBPACK_IMPORTED_MODULE_3__.config.useDeprecatedSynchronousErrorHandling) {
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_8__.captureError)(error);
    }
    else {
        (0,_util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_4__.reportUnhandledError)(error);
    }
}
function defaultErrorHandler(err) {
    throw err;
}
function handleStoppedNotification(notification, subscriber) {
    var onStoppedNotification = _config__WEBPACK_IMPORTED_MODULE_3__.config.onStoppedNotification;
    onStoppedNotification && _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_7__.timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });
}
var EMPTY_OBSERVER = {
    closed: true,
    next: _util_noop__WEBPACK_IMPORTED_MODULE_5__.noop,
    error: defaultErrorHandler,
    complete: _util_noop__WEBPACK_IMPORTED_MODULE_5__.noop,
};
//# sourceMappingURL=Subscriber.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscription.js":
/*!************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscription.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EMPTY_SUBSCRIPTION: () => (/* binding */ EMPTY_SUBSCRIPTION),
/* harmony export */   Subscription: () => (/* binding */ Subscription),
/* harmony export */   isSubscription: () => (/* binding */ isSubscription)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");
/* harmony import */ var _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util/UnsubscriptionError */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js");
/* harmony import */ var _util_arrRemove__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/arrRemove */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js");




var Subscription = (function () {
    function Subscription(initialTeardown) {
        this.initialTeardown = initialTeardown;
        this.closed = false;
        this._parentage = null;
        this._finalizers = null;
    }
    Subscription.prototype.unsubscribe = function () {
        var e_1, _a, e_2, _b;
        var errors;
        if (!this.closed) {
            this.closed = true;
            var _parentage = this._parentage;
            if (_parentage) {
                this._parentage = null;
                if (Array.isArray(_parentage)) {
                    try {
                        for (var _parentage_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {
                            var parent_1 = _parentage_1_1.value;
                            parent_1.remove(this);
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                }
                else {
                    _parentage.remove(this);
                }
            }
            var initialFinalizer = this.initialTeardown;
            if ((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(initialFinalizer)) {
                try {
                    initialFinalizer();
                }
                catch (e) {
                    errors = e instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__.UnsubscriptionError ? e.errors : [e];
                }
            }
            var _finalizers = this._finalizers;
            if (_finalizers) {
                this._finalizers = null;
                try {
                    for (var _finalizers_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {
                        var finalizer = _finalizers_1_1.value;
                        try {
                            execFinalizer(finalizer);
                        }
                        catch (err) {
                            errors = errors !== null && errors !== void 0 ? errors : [];
                            if (err instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__.UnsubscriptionError) {
                                errors = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(errors)), (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(err.errors));
                            }
                            else {
                                errors.push(err);
                            }
                        }
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
            }
            if (errors) {
                throw new _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__.UnsubscriptionError(errors);
            }
        }
    };
    Subscription.prototype.add = function (teardown) {
        var _a;
        if (teardown && teardown !== this) {
            if (this.closed) {
                execFinalizer(teardown);
            }
            else {
                if (teardown instanceof Subscription) {
                    if (teardown.closed || teardown._hasParent(this)) {
                        return;
                    }
                    teardown._addParent(this);
                }
                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);
            }
        }
    };
    Subscription.prototype._hasParent = function (parent) {
        var _parentage = this._parentage;
        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));
    };
    Subscription.prototype._addParent = function (parent) {
        var _parentage = this._parentage;
        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;
    };
    Subscription.prototype._removeParent = function (parent) {
        var _parentage = this._parentage;
        if (_parentage === parent) {
            this._parentage = null;
        }
        else if (Array.isArray(_parentage)) {
            (0,_util_arrRemove__WEBPACK_IMPORTED_MODULE_3__.arrRemove)(_parentage, parent);
        }
    };
    Subscription.prototype.remove = function (teardown) {
        var _finalizers = this._finalizers;
        _finalizers && (0,_util_arrRemove__WEBPACK_IMPORTED_MODULE_3__.arrRemove)(_finalizers, teardown);
        if (teardown instanceof Subscription) {
            teardown._removeParent(this);
        }
    };
    Subscription.EMPTY = (function () {
        var empty = new Subscription();
        empty.closed = true;
        return empty;
    })();
    return Subscription;
}());

var EMPTY_SUBSCRIPTION = Subscription.EMPTY;
function isSubscription(value) {
    return (value instanceof Subscription ||
        (value && 'closed' in value && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value.remove) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value.add) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value.unsubscribe)));
}
function execFinalizer(finalizer) {
    if ((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(finalizer)) {
        finalizer();
    }
    else {
        finalizer.unsubscribe();
    }
}
//# sourceMappingURL=Subscription.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/config.js":
/*!******************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/config.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   config: () => (/* binding */ config)
/* harmony export */ });
var config = {
    onUnhandledError: null,
    onStoppedNotification: null,
    Promise: undefined,
    useDeprecatedSynchronousErrorHandling: false,
    useDeprecatedNextContext: false,
};
//# sourceMappingURL=config.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js":
/*!********************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromArrayLike: () => (/* binding */ fromArrayLike),
/* harmony export */   fromAsyncIterable: () => (/* binding */ fromAsyncIterable),
/* harmony export */   fromInteropObservable: () => (/* binding */ fromInteropObservable),
/* harmony export */   fromIterable: () => (/* binding */ fromIterable),
/* harmony export */   fromPromise: () => (/* binding */ fromPromise),
/* harmony export */   fromReadableStreamLike: () => (/* binding */ fromReadableStreamLike),
/* harmony export */   innerFrom: () => (/* binding */ innerFrom)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _util_isArrayLike__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/isArrayLike */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js");
/* harmony import */ var _util_isPromise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/isPromise */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isPromise.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Observable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Observable.js");
/* harmony import */ var _util_isInteropObservable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/isInteropObservable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js");
/* harmony import */ var _util_isAsyncIterable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/isAsyncIterable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js");
/* harmony import */ var _util_throwUnobservableError__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/throwUnobservableError */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js");
/* harmony import */ var _util_isIterable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/isIterable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isIterable.js");
/* harmony import */ var _util_isReadableStreamLike__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util/isReadableStreamLike */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../util/isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");
/* harmony import */ var _util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../util/reportUnhandledError */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js");
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../symbol/observable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/observable.js");












function innerFrom(input) {
    if (input instanceof _Observable__WEBPACK_IMPORTED_MODULE_3__.Observable) {
        return input;
    }
    if (input != null) {
        if ((0,_util_isInteropObservable__WEBPACK_IMPORTED_MODULE_4__.isInteropObservable)(input)) {
            return fromInteropObservable(input);
        }
        if ((0,_util_isArrayLike__WEBPACK_IMPORTED_MODULE_1__.isArrayLike)(input)) {
            return fromArrayLike(input);
        }
        if ((0,_util_isPromise__WEBPACK_IMPORTED_MODULE_2__.isPromise)(input)) {
            return fromPromise(input);
        }
        if ((0,_util_isAsyncIterable__WEBPACK_IMPORTED_MODULE_5__.isAsyncIterable)(input)) {
            return fromAsyncIterable(input);
        }
        if ((0,_util_isIterable__WEBPACK_IMPORTED_MODULE_7__.isIterable)(input)) {
            return fromIterable(input);
        }
        if ((0,_util_isReadableStreamLike__WEBPACK_IMPORTED_MODULE_8__.isReadableStreamLike)(input)) {
            return fromReadableStreamLike(input);
        }
    }
    throw (0,_util_throwUnobservableError__WEBPACK_IMPORTED_MODULE_6__.createInvalidObservableTypeError)(input);
}
function fromInteropObservable(obj) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_3__.Observable(function (subscriber) {
        var obs = obj[_symbol_observable__WEBPACK_IMPORTED_MODULE_11__.observable]();
        if ((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_9__.isFunction)(obs.subscribe)) {
            return obs.subscribe(subscriber);
        }
        throw new TypeError('Provided object does not correctly implement Symbol.observable');
    });
}
function fromArrayLike(array) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_3__.Observable(function (subscriber) {
        for (var i = 0; i < array.length && !subscriber.closed; i++) {
            subscriber.next(array[i]);
        }
        subscriber.complete();
    });
}
function fromPromise(promise) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_3__.Observable(function (subscriber) {
        promise
            .then(function (value) {
            if (!subscriber.closed) {
                subscriber.next(value);
                subscriber.complete();
            }
        }, function (err) { return subscriber.error(err); })
            .then(null, _util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_10__.reportUnhandledError);
    });
}
function fromIterable(iterable) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_3__.Observable(function (subscriber) {
        var e_1, _a;
        try {
            for (var iterable_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {
                var value = iterable_1_1.value;
                subscriber.next(value);
                if (subscriber.closed) {
                    return;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        subscriber.complete();
    });
}
function fromAsyncIterable(asyncIterable) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_3__.Observable(function (subscriber) {
        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });
    });
}
function fromReadableStreamLike(readableStream) {
    return fromAsyncIterable((0,_util_isReadableStreamLike__WEBPACK_IMPORTED_MODULE_8__.readableStreamLikeToAsyncGenerator)(readableStream));
}
function process(asyncIterable, subscriber) {
    var asyncIterable_1, asyncIterable_1_1;
    var e_2, _a;
    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {
        var value, e_2_1;
        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {
            switch (_b.label) {
                case 0:
                    _b.trys.push([0, 5, 6, 11]);
                    asyncIterable_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__asyncValues)(asyncIterable);
                    _b.label = 1;
                case 1: return [4, asyncIterable_1.next()];
                case 2:
                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];
                    value = asyncIterable_1_1.value;
                    subscriber.next(value);
                    if (subscriber.closed) {
                        return [2];
                    }
                    _b.label = 3;
                case 3: return [3, 1];
                case 4: return [3, 11];
                case 5:
                    e_2_1 = _b.sent();
                    e_2 = { error: e_2_1 };
                    return [3, 11];
                case 6:
                    _b.trys.push([6, , 9, 10]);
                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];
                    return [4, _a.call(asyncIterable_1)];
                case 7:
                    _b.sent();
                    _b.label = 8;
                case 8: return [3, 10];
                case 9:
                    if (e_2) throw e_2.error;
                    return [7];
                case 10: return [7];
                case 11:
                    subscriber.complete();
                    return [2];
            }
        });
    });
}
//# sourceMappingURL=innerFrom.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js":
/*!****************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OperatorSubscriber: () => (/* binding */ OperatorSubscriber),
/* harmony export */   createOperatorSubscriber: () => (/* binding */ createOperatorSubscriber)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscriber.js");


function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {
    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);
}
var OperatorSubscriber = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(OperatorSubscriber, _super);
    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {
        var _this = _super.call(this, destination) || this;
        _this.onFinalize = onFinalize;
        _this.shouldUnsubscribe = shouldUnsubscribe;
        _this._next = onNext
            ? function (value) {
                try {
                    onNext(value);
                }
                catch (err) {
                    destination.error(err);
                }
            }
            : _super.prototype._next;
        _this._error = onError
            ? function (err) {
                try {
                    onError(err);
                }
                catch (err) {
                    destination.error(err);
                }
                finally {
                    this.unsubscribe();
                }
            }
            : _super.prototype._error;
        _this._complete = onComplete
            ? function () {
                try {
                    onComplete();
                }
                catch (err) {
                    destination.error(err);
                }
                finally {
                    this.unsubscribe();
                }
            }
            : _super.prototype._complete;
        return _this;
    }
    OperatorSubscriber.prototype.unsubscribe = function () {
        var _a;
        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
            var closed_1 = this.closed;
            _super.prototype.unsubscribe.call(this);
            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));
        }
    };
    return OperatorSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__.Subscriber));

//# sourceMappingURL=OperatorSubscriber.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/operators/window.js":
/*!****************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/operators/window.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   window: () => (/* binding */ window)
/* harmony export */ });
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Subject */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var _util_lift__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/lift */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/lift.js");
/* harmony import */ var _OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OperatorSubscriber */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");
/* harmony import */ var _util_noop__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/noop */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/noop.js");
/* harmony import */ var _observable_innerFrom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../observable/innerFrom */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js");





function window(windowBoundaries) {
    return (0,_util_lift__WEBPACK_IMPORTED_MODULE_1__.operate)(function (source, subscriber) {
        var windowSubject = new _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject();
        subscriber.next(windowSubject.asObservable());
        var errorHandler = function (err) {
            windowSubject.error(err);
            subscriber.error(err);
        };
        source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__.createOperatorSubscriber)(subscriber, function (value) { return windowSubject === null || windowSubject === void 0 ? void 0 : windowSubject.next(value); }, function () {
            windowSubject.complete();
            subscriber.complete();
        }, errorHandler));
        (0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_4__.innerFrom)(windowBoundaries).subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__.createOperatorSubscriber)(subscriber, function () {
            windowSubject.complete();
            subscriber.next((windowSubject = new _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject()));
        }, _util_noop__WEBPACK_IMPORTED_MODULE_3__.noop, errorHandler));
        return function () {
            windowSubject === null || windowSubject === void 0 ? void 0 : windowSubject.unsubscribe();
            windowSubject = null;
        };
    });
}
//# sourceMappingURL=window.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js":
/*!*************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   timeoutProvider: () => (/* binding */ timeoutProvider)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");

var timeoutProvider = {
    setTimeout: function (handler, timeout) {
        var args = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            args[_i - 2] = arguments[_i];
        }
        var delegate = timeoutProvider.delegate;
        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {
            return delegate.setTimeout.apply(delegate, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([handler, timeout], (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(args)));
        }
        return setTimeout.apply(void 0, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([handler, timeout], (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(args)));
    },
    clearTimeout: function (handle) {
        var delegate = timeoutProvider.delegate;
        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);
    },
    delegate: undefined,
};
//# sourceMappingURL=timeoutProvider.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/iterator.js":
/*!***************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/iterator.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSymbolIterator: () => (/* binding */ getSymbolIterator),
/* harmony export */   iterator: () => (/* binding */ iterator)
/* harmony export */ });
function getSymbolIterator() {
    if (typeof Symbol !== 'function' || !Symbol.iterator) {
        return '@@iterator';
    }
    return Symbol.iterator;
}
var iterator = getSymbolIterator();
//# sourceMappingURL=iterator.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/observable.js":
/*!*****************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/observable.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   observable: () => (/* binding */ observable)
/* harmony export */ });
var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();
//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js":
/*!****************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ObjectUnsubscribedError: () => (/* binding */ ObjectUnsubscribedError)
/* harmony export */ });
/* harmony import */ var _createErrorClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createErrorClass */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js");

var ObjectUnsubscribedError = (0,_createErrorClass__WEBPACK_IMPORTED_MODULE_0__.createErrorClass)(function (_super) {
    return function ObjectUnsubscribedErrorImpl() {
        _super(this);
        this.name = 'ObjectUnsubscribedError';
        this.message = 'object unsubscribed';
    };
});
//# sourceMappingURL=ObjectUnsubscribedError.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js":
/*!************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UnsubscriptionError: () => (/* binding */ UnsubscriptionError)
/* harmony export */ });
/* harmony import */ var _createErrorClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createErrorClass */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js");

var UnsubscriptionError = (0,_createErrorClass__WEBPACK_IMPORTED_MODULE_0__.createErrorClass)(function (_super) {
    return function UnsubscriptionErrorImpl(errors) {
        _super(this);
        this.message = errors
            ? errors.length + " errors occurred during unsubscription:\n" + errors.map(function (err, i) { return i + 1 + ") " + err.toString(); }).join('\n  ')
            : '';
        this.name = 'UnsubscriptionError';
        this.errors = errors;
    };
});
//# sourceMappingURL=UnsubscriptionError.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js":
/*!**************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arrRemove: () => (/* binding */ arrRemove)
/* harmony export */ });
function arrRemove(arr, item) {
    if (arr) {
        var index = arr.indexOf(item);
        0 <= index && arr.splice(index, 1);
    }
}
//# sourceMappingURL=arrRemove.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js":
/*!*********************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createErrorClass: () => (/* binding */ createErrorClass)
/* harmony export */ });
function createErrorClass(createImpl) {
    var _super = function (instance) {
        Error.call(instance);
        instance.stack = new Error().stack;
    };
    var ctorFunc = createImpl(_super);
    ctorFunc.prototype = Object.create(Error.prototype);
    ctorFunc.prototype.constructor = ctorFunc;
    return ctorFunc;
}
//# sourceMappingURL=createErrorClass.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/errorContext.js":
/*!*****************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/errorContext.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   captureError: () => (/* binding */ captureError),
/* harmony export */   errorContext: () => (/* binding */ errorContext)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/config.js");

var context = null;
function errorContext(cb) {
    if (_config__WEBPACK_IMPORTED_MODULE_0__.config.useDeprecatedSynchronousErrorHandling) {
        var isRoot = !context;
        if (isRoot) {
            context = { errorThrown: false, error: null };
        }
        cb();
        if (isRoot) {
            var _a = context, errorThrown = _a.errorThrown, error = _a.error;
            context = null;
            if (errorThrown) {
                throw error;
            }
        }
    }
    else {
        cb();
    }
}
function captureError(err) {
    if (_config__WEBPACK_IMPORTED_MODULE_0__.config.useDeprecatedSynchronousErrorHandling && context) {
        context.errorThrown = true;
        context.error = err;
    }
}
//# sourceMappingURL=errorContext.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/identity.js":
/*!*************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/identity.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   identity: () => (/* binding */ identity)
/* harmony export */ });
function identity(x) {
    return x;
}
//# sourceMappingURL=identity.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js":
/*!****************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isArrayLike: () => (/* binding */ isArrayLike)
/* harmony export */ });
var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });
//# sourceMappingURL=isArrayLike.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js":
/*!********************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isAsyncIterable: () => (/* binding */ isAsyncIterable)
/* harmony export */ });
/* harmony import */ var _isFunction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");

function isAsyncIterable(obj) {
    return Symbol.asyncIterator && (0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.isFunction)(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);
}
//# sourceMappingURL=isAsyncIterable.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js":
/*!***************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isFunction: () => (/* binding */ isFunction)
/* harmony export */ });
function isFunction(value) {
    return typeof value === 'function';
}
//# sourceMappingURL=isFunction.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js":
/*!************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isInteropObservable: () => (/* binding */ isInteropObservable)
/* harmony export */ });
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbol/observable */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/observable.js");
/* harmony import */ var _isFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");


function isInteropObservable(input) {
    return (0,_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(input[_symbol_observable__WEBPACK_IMPORTED_MODULE_0__.observable]);
}
//# sourceMappingURL=isInteropObservable.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isIterable.js":
/*!***************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isIterable.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isIterable: () => (/* binding */ isIterable)
/* harmony export */ });
/* harmony import */ var _symbol_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbol/iterator */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/symbol/iterator.js");
/* harmony import */ var _isFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");


function isIterable(input) {
    return (0,_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(input === null || input === void 0 ? void 0 : input[_symbol_iterator__WEBPACK_IMPORTED_MODULE_0__.iterator]);
}
//# sourceMappingURL=isIterable.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isPromise.js":
/*!**************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isPromise.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isPromise: () => (/* binding */ isPromise)
/* harmony export */ });
/* harmony import */ var _isFunction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");

function isPromise(value) {
    return (0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.isFunction)(value === null || value === void 0 ? void 0 : value.then);
}
//# sourceMappingURL=isPromise.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js":
/*!*************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isReadableStreamLike: () => (/* binding */ isReadableStreamLike),
/* harmony export */   readableStreamLikeToAsyncGenerator: () => (/* binding */ readableStreamLikeToAsyncGenerator)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _isFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");


function readableStreamLikeToAsyncGenerator(readableStream) {
    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__asyncGenerator)(this, arguments, function readableStreamLikeToAsyncGenerator_1() {
        var reader, _a, value, done;
        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {
            switch (_b.label) {
                case 0:
                    reader = readableStream.getReader();
                    _b.label = 1;
                case 1:
                    _b.trys.push([1, , 9, 10]);
                    _b.label = 2;
                case 2:
                    if (false) // removed by dead control flow
{}
                    return [4, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__await)(reader.read())];
                case 3:
                    _a = _b.sent(), value = _a.value, done = _a.done;
                    if (!done) return [3, 5];
                    return [4, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__await)(void 0)];
                case 4: return [2, _b.sent()];
                case 5: return [4, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__await)(value)];
                case 6: return [4, _b.sent()];
                case 7:
                    _b.sent();
                    return [3, 2];
                case 8: return [3, 10];
                case 9:
                    reader.releaseLock();
                    return [7];
                case 10: return [2];
            }
        });
    });
}
function isReadableStreamLike(obj) {
    return (0,_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(obj === null || obj === void 0 ? void 0 : obj.getReader);
}
//# sourceMappingURL=isReadableStreamLike.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/lift.js":
/*!*********************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/lift.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   hasLift: () => (/* binding */ hasLift),
/* harmony export */   operate: () => (/* binding */ operate)
/* harmony export */ });
/* harmony import */ var _isFunction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isFunction */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/isFunction.js");

function hasLift(source) {
    return (0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.isFunction)(source === null || source === void 0 ? void 0 : source.lift);
}
function operate(init) {
    return function (source) {
        if (hasLift(source)) {
            return source.lift(function (liftedSource) {
                try {
                    return init(liftedSource, this);
                }
                catch (err) {
                    this.error(err);
                }
            });
        }
        throw new TypeError('Unable to lift unknown Observable type');
    };
}
//# sourceMappingURL=lift.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/noop.js":
/*!*********************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/noop.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   noop: () => (/* binding */ noop)
/* harmony export */ });
function noop() { }
//# sourceMappingURL=noop.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/pipe.js":
/*!*********************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/pipe.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pipe: () => (/* binding */ pipe),
/* harmony export */   pipeFromArray: () => (/* binding */ pipeFromArray)
/* harmony export */ });
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./identity */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/identity.js");

function pipe() {
    var fns = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        fns[_i] = arguments[_i];
    }
    return pipeFromArray(fns);
}
function pipeFromArray(fns) {
    if (fns.length === 0) {
        return _identity__WEBPACK_IMPORTED_MODULE_0__.identity;
    }
    if (fns.length === 1) {
        return fns[0];
    }
    return function piped(input) {
        return fns.reduce(function (prev, fn) { return fn(prev); }, input);
    };
}
//# sourceMappingURL=pipe.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js":
/*!*************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   reportUnhandledError: () => (/* binding */ reportUnhandledError)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/config.js");
/* harmony import */ var _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scheduler/timeoutProvider */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js");


function reportUnhandledError(err) {
    _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_1__.timeoutProvider.setTimeout(function () {
        var onUnhandledError = _config__WEBPACK_IMPORTED_MODULE_0__.config.onUnhandledError;
        if (onUnhandledError) {
            onUnhandledError(err);
        }
        else {
            throw err;
        }
    });
}
//# sourceMappingURL=reportUnhandledError.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js":
/*!***************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createInvalidObservableTypeError: () => (/* binding */ createInvalidObservableTypeError)
/* harmony export */ });
function createInvalidObservableTypeError(input) {
    return new TypeError("You provided " + (input !== null && typeof input === 'object' ? 'an invalid object' : "'" + input + "'") + " where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.");
}
//# sourceMappingURL=throwUnobservableError.js.map

/***/ }),

/***/ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs":
/*!*****************************************************************************!*\
  !*** ../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __addDisposableResource: () => (/* binding */ __addDisposableResource),
/* harmony export */   __assign: () => (/* binding */ __assign),
/* harmony export */   __asyncDelegator: () => (/* binding */ __asyncDelegator),
/* harmony export */   __asyncGenerator: () => (/* binding */ __asyncGenerator),
/* harmony export */   __asyncValues: () => (/* binding */ __asyncValues),
/* harmony export */   __await: () => (/* binding */ __await),
/* harmony export */   __awaiter: () => (/* binding */ __awaiter),
/* harmony export */   __classPrivateFieldGet: () => (/* binding */ __classPrivateFieldGet),
/* harmony export */   __classPrivateFieldIn: () => (/* binding */ __classPrivateFieldIn),
/* harmony export */   __classPrivateFieldSet: () => (/* binding */ __classPrivateFieldSet),
/* harmony export */   __createBinding: () => (/* binding */ __createBinding),
/* harmony export */   __decorate: () => (/* binding */ __decorate),
/* harmony export */   __disposeResources: () => (/* binding */ __disposeResources),
/* harmony export */   __esDecorate: () => (/* binding */ __esDecorate),
/* harmony export */   __exportStar: () => (/* binding */ __exportStar),
/* harmony export */   __extends: () => (/* binding */ __extends),
/* harmony export */   __generator: () => (/* binding */ __generator),
/* harmony export */   __importDefault: () => (/* binding */ __importDefault),
/* harmony export */   __importStar: () => (/* binding */ __importStar),
/* harmony export */   __makeTemplateObject: () => (/* binding */ __makeTemplateObject),
/* harmony export */   __metadata: () => (/* binding */ __metadata),
/* harmony export */   __param: () => (/* binding */ __param),
/* harmony export */   __propKey: () => (/* binding */ __propKey),
/* harmony export */   __read: () => (/* binding */ __read),
/* harmony export */   __rest: () => (/* binding */ __rest),
/* harmony export */   __rewriteRelativeImportExtension: () => (/* binding */ __rewriteRelativeImportExtension),
/* harmony export */   __runInitializers: () => (/* binding */ __runInitializers),
/* harmony export */   __setFunctionName: () => (/* binding */ __setFunctionName),
/* harmony export */   __spread: () => (/* binding */ __spread),
/* harmony export */   __spreadArray: () => (/* binding */ __spreadArray),
/* harmony export */   __spreadArrays: () => (/* binding */ __spreadArrays),
/* harmony export */   __values: () => (/* binding */ __values),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol, Iterator */

var extendStatics = function(d, b) {
  extendStatics = Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
  return extendStatics(d, b);
};

function __extends(d, b) {
  if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
  extendStatics(d, b);
  function __() { this.constructor = d; }
  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
  __assign = Object.assign || function __assign(t) {
      for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
      return t;
  }
  return __assign.apply(this, arguments);
}

function __rest(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
      t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
              t[p[i]] = s[p[i]];
      }
  return t;
}

function __decorate(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
  return function (target, key) { decorator(target, key, paramIndex); }
}

function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
  function accept(f) { if (f !== void 0 && typeof f !== "function") throw new TypeError("Function expected"); return f; }
  var kind = contextIn.kind, key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
  var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
  var _, done = false;
  for (var i = decorators.length - 1; i >= 0; i--) {
      var context = {};
      for (var p in contextIn) context[p] = p === "access" ? {} : contextIn[p];
      for (var p in contextIn.access) context.access[p] = contextIn.access[p];
      context.addInitializer = function (f) { if (done) throw new TypeError("Cannot add initializers after decoration has completed"); extraInitializers.push(accept(f || null)); };
      var result = (0, decorators[i])(kind === "accessor" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);
      if (kind === "accessor") {
          if (result === void 0) continue;
          if (result === null || typeof result !== "object") throw new TypeError("Object expected");
          if (_ = accept(result.get)) descriptor.get = _;
          if (_ = accept(result.set)) descriptor.set = _;
          if (_ = accept(result.init)) initializers.unshift(_);
      }
      else if (_ = accept(result)) {
          if (kind === "field") initializers.unshift(_);
          else descriptor[key] = _;
      }
  }
  if (target) Object.defineProperty(target, contextIn.name, descriptor);
  done = true;
};

function __runInitializers(thisArg, initializers, value) {
  var useValue = arguments.length > 2;
  for (var i = 0; i < initializers.length; i++) {
      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
  }
  return useValue ? value : void 0;
};

function __propKey(x) {
  return typeof x === "symbol" ? x : "".concat(x);
};

function __setFunctionName(f, name, prefix) {
  if (typeof name === "symbol") name = name.description ? "[".concat(name.description, "]") : "";
  return Object.defineProperty(f, "name", { configurable: true, value: prefix ? "".concat(prefix, " ", name) : name });
};

function __metadata(metadataKey, metadataValue) {
  if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
  return new (P || (P = Promise))(function (resolve, reject) {
      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
      function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}

function __generator(thisArg, body) {
  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === "function" ? Iterator : Object).prototype);
  return g.next = verb(0), g["throw"] = verb(1), g["return"] = verb(2), typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
  function verb(n) { return function (v) { return step([n, v]); }; }
  function step(op) {
      if (f) throw new TypeError("Generator is already executing.");
      while (g && (g = 0, op[0] && (_ = 0)), _) try {
          if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
          if (y = 0, t) op = [op[0] & 2, t.value];
          switch (op[0]) {
              case 0: case 1: t = op; break;
              case 4: _.label++; return { value: op[1], done: false };
              case 5: _.label++; y = op[1]; op = [0]; continue;
              case 7: op = _.ops.pop(); _.trys.pop(); continue;
              default:
                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                  if (t[2]) _.ops.pop();
                  _.trys.pop(); continue;
          }
          op = body.call(thisArg, _);
      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
  }
}

var __createBinding = Object.create ? (function(o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
  }
  Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});

function __exportStar(m, o) {
  for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);
}

function __values(o) {
  var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
  if (m) return m.call(o);
  if (o && typeof o.length === "number") return {
      next: function () {
          if (o && i >= o.length) o = void 0;
          return { value: o && o[i++], done: !o };
      }
  };
  throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m) return o;
  var i = m.call(o), r, ar = [], e;
  try {
      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
  }
  catch (error) { e = { error: error }; }
  finally {
      try {
          if (r && !r.done && (m = i["return"])) m.call(i);
      }
      finally { if (e) throw e.error; }
  }
  return ar;
}

/** @deprecated */
function __spread() {
  for (var ar = [], i = 0; i < arguments.length; i++)
      ar = ar.concat(__read(arguments[i]));
  return ar;
}

/** @deprecated */
function __spreadArrays() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
          r[k] = a[j];
  return r;
}

function __spreadArray(to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
      if (ar || !(i in from)) {
          if (!ar) ar = Array.prototype.slice.call(from, 0, i);
          ar[i] = from[i];
      }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
}

function __await(v) {
  return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var g = generator.apply(thisArg, _arguments || []), i, q = [];
  return i = Object.create((typeof AsyncIterator === "function" ? AsyncIterator : Object).prototype), verb("next"), verb("throw"), verb("return", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;
  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }
  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }
  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
  function fulfill(value) { resume("next", value); }
  function reject(value) { resume("throw", value); }
  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
  var i, p;
  return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var m = o[Symbol.asyncIterator], i;
  return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
  if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
  return cooked;
};

var __setModuleDefault = Object.create ? (function(o, v) {
  Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
  o["default"] = v;
};

var ownKeys = function(o) {
  ownKeys = Object.getOwnPropertyNames || function (o) {
    var ar = [];
    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
    return ar;
  };
  return ownKeys(o);
};

function __importStar(mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
  __setModuleDefault(result, mod);
  return result;
}

function __importDefault(mod) {
  return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, state, kind, f) {
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
}

function __classPrivateFieldSet(receiver, state, value, kind, f) {
  if (kind === "m") throw new TypeError("Private method is not writable");
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
}

function __classPrivateFieldIn(state, receiver) {
  if (receiver === null || (typeof receiver !== "object" && typeof receiver !== "function")) throw new TypeError("Cannot use 'in' operator on non-object");
  return typeof state === "function" ? receiver === state : state.has(receiver);
}

function __addDisposableResource(env, value, async) {
  if (value !== null && value !== void 0) {
    if (typeof value !== "object" && typeof value !== "function") throw new TypeError("Object expected.");
    var dispose, inner;
    if (async) {
      if (!Symbol.asyncDispose) throw new TypeError("Symbol.asyncDispose is not defined.");
      dispose = value[Symbol.asyncDispose];
    }
    if (dispose === void 0) {
      if (!Symbol.dispose) throw new TypeError("Symbol.dispose is not defined.");
      dispose = value[Symbol.dispose];
      if (async) inner = dispose;
    }
    if (typeof dispose !== "function") throw new TypeError("Object not disposable.");
    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };
    env.stack.push({ value: value, dispose: dispose, async: async });
  }
  else if (async) {
    env.stack.push({ async: true });
  }
  return value;
}

var _SuppressedError = typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
  var e = new Error(message);
  return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

function __disposeResources(env) {
  function fail(e) {
    env.error = env.hasError ? new _SuppressedError(e, env.error, "An error was suppressed during disposal.") : e;
    env.hasError = true;
  }
  var r, s = 0;
  function next() {
    while (r = env.stack.pop()) {
      try {
        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);
        if (r.dispose) {
          var result = r.dispose.call(r.value);
          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });
        }
        else s |= 1;
      }
      catch (e) {
        fail(e);
      }
    }
    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();
    if (env.hasError) throw env.error;
  }
  return next();
}

function __rewriteRelativeImportExtension(path, preserveJsx) {
  if (typeof path === "string" && /^\.\.?\//.test(path)) {
      return path.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {
          return tsx ? preserveJsx ? ".jsx" : ".js" : d && (!ext || !cm) ? m : (d + ext + "." + cm.toLowerCase() + "js");
      });
  }
  return path;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  __extends,
  __assign,
  __rest,
  __decorate,
  __param,
  __esDecorate,
  __runInitializers,
  __propKey,
  __setFunctionName,
  __metadata,
  __awaiter,
  __generator,
  __createBinding,
  __exportStar,
  __values,
  __read,
  __spread,
  __spreadArrays,
  __spreadArray,
  __await,
  __asyncGenerator,
  __asyncDelegator,
  __asyncValues,
  __makeTemplateObject,
  __importStar,
  __importDefault,
  __classPrivateFieldGet,
  __classPrivateFieldSet,
  __classPrivateFieldIn,
  __addDisposableResource,
  __disposeResources,
  __rewriteRelativeImportExtension,
});


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/clipboard/ClipBoardUtils.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/clipboard/ClipBoardUtils.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ClipBoardUtils: () => (/* binding */ ClipBoardUtils)
/* harmony export */ });
var ClipBoardUtils;
(function (ClipBoardUtils) {
    ClipBoardUtils.readText = (window) => {
        return window.navigator.clipboard.readText();
    };
    ClipBoardUtils.read = (window) => {
        return window.navigator.clipboard.read();
    };
    ClipBoardUtils.writeText = (data, window) => {
        if (window.navigator.clipboard) {
            return window.navigator.clipboard
                .writeText(data);
        }
        else {
            // console.log('copy exec command use');
            return new Promise((resolve, reject) => {
                try {
                    const textarea = document.createElement('textarea');
                    textarea.value = data;
                    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in MS Edge.
                    textarea.style.opacity = '0'; // Hide the textarea
                    document.body.appendChild(textarea);
                    textarea.focus();
                    textarea.select();
                    const copyExec = document.execCommand('copy');
                    document.body.removeChild(textarea);
                    if (copyExec) {
                        resolve();
                        // alert('copied!');
                    }
                    else {
                        reject(new Error('copy failed'));
                    }
                }
                catch (err) {
                    reject(err);
                }
            });
        }
    };
    ClipBoardUtils.write = (data, clipboard = navigator.clipboard) => {
        return clipboard.write(data);
    };
})(ClipBoardUtils || (ClipBoardUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/document/DocumentUtils.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/document/DocumentUtils.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DocumentUtils: () => (/* binding */ DocumentUtils)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_message_Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/message/Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

var DocumentUtils;
(function (DocumentUtils) {
    DocumentUtils.querySelectorAllByAttributeName = (document, attributeName) => {
        const elements = [];
        document.querySelectorAll(`[${attributeName}]`)?.forEach((element) => {
            elements.push({ element: element, value: element.getAttribute(attributeName) });
        });
        return elements;
    };
    DocumentUtils.eventObservable = (document, type, options) => {
        return new _dooboostore_core_message_Observable__WEBPACK_IMPORTED_MODULE_0__.Observable((subscriber) => {
            const handler = (event) => subscriber.next(event);
            window.addEventListener(type, handler, options);
            return () => {
                window.removeEventListener(type, handler, options);
            };
        });
    };
})(DocumentUtils || (DocumentUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/element/ElementUtils.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/element/ElementUtils.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ElementUtils: () => (/* binding */ ElementUtils)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_promise_Promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/promise/Promises */ "../../packages/@dooboostore/core/src/promise/Promises.ts");

var ElementUtils;
(function (ElementUtils) {
    function loadImage(src, callback) {
        let targetCallback;
        let promise = undefined;
        if (callback) {
            targetCallback = callback.onload;
        }
        else {
            const r = _dooboostore_core_promise_Promises__WEBPACK_IMPORTED_MODULE_0__.Promises.withResolvers();
            promise = r.promise;
            targetCallback = r.resolve;
        }
        const img = new Image();
        // img.crossOrigin = 'Anonymous';
        img.onload = () => {
            targetCallback(img);
        };
        if (callback && callback.onerror) {
            img.onerror = callback.onerror;
        }
        img.src = src;
        return promise;
    }
    ElementUtils.loadImage = loadImage;
    function loadAudio(src, callback) {
        let targetCallback;
        let error;
        let promise = undefined;
        if (callback) {
            targetCallback = callback.onload;
            error = callback.onerror;
        }
        else {
            const r = _dooboostore_core_promise_Promises__WEBPACK_IMPORTED_MODULE_0__.Promises.withResolvers();
            promise = r.promise;
            error = r.reject;
            targetCallback = r.resolve;
        }
        const audio = new Audio('path/to/audio1.mp3');
        audio.addEventListener('canplay', () => {
            targetCallback?.(audio);
        });
        audio.addEventListener('error', (e) => {
            callback?.onerror(e);
        });
        audio.load();
        return promise;
    }
    ElementUtils.loadAudio = loadAudio;
    ElementUtils.toInnerHTML = (documentFragment, config) => {
        // if (documentFragment) {
        const tempDiv = config.document.createElement('div');
        tempDiv.appendChild(documentFragment.cloneNode(true));
        // console.log('DocumentFragment innerHTML:', tempDiv.innerHTML);
        return tempDiv.innerHTML;
        // }
    };
    // export const fragmentToHTML = (fragment: DocumentFragment, config: { document: Document } = { document }): string => {
    //    const tempDiv = config.document.createElement('div');
    //    tempDiv.appendChild(fragment.cloneNode(true));
    //    return tempDiv.innerHTML;
    //  }
    ElementUtils.htmlToFragment = (html, config = { document }) => {
        const tempDiv = config.document.createElement('div');
        tempDiv.innerHTML = html;
        const fragment = config.document.createDocumentFragment();
        while (tempDiv.firstChild) {
            fragment.appendChild(tempDiv.firstChild);
        }
        return fragment;
    };
    /*
       17 // originalDiv 자체와 속성만 복사하고, childSpan은 복사하지 않습니다.
       18 const shallowCopy = originalDiv.cloneNode(false);
       19 shallowCopy.id = 'shallowCopyDiv'; // ID 변경 (중복 방지)
       20 console.log('\n--- 얕은 복사본 ---');
       21 console.log(shallowCopy.outerHTML);
       22 // 예상 출력: <div id="shallowCopyDiv" data-custom="원본 데이터"></div>
       23
       24 // 2. 깊은 복사 (deep: true)
       25 // originalDiv와 그 자식인 childSpan까지 모두 복사합니다.
       26 const deepCopy = originalDiv.cloneNode(true);
       27 deepCopy.id = 'deepCopyDiv'; // ID 변경 (중복 방지)
       28 console.log('\n--- 깊은 복사본 ---');
       29 console.log(deepCopy.outerHTML);
     */
    ElementUtils.replaceWith = (targetElement, replaceElement) => {
        targetElement.replaceWith(replaceElement);
    };
    ElementUtils.nodeList = (documentFragment) => {
        return Array.from(documentFragment.childNodes);
    };
    ElementUtils.cloneNodeList = (documentFragment) => {
        return Array.from(documentFragment.childNodes).map(node => node.cloneNode(true));
    };
    ElementUtils.querySelector = (e, selector) => {
        const elements = ElementUtils.querySelectorAll(e, selector);
        if (elements.length > 0) {
            return elements[0];
        }
        else {
            return null;
        }
    };
    ElementUtils.querySelectorAll = (e, selector) => {
        if (e instanceof Element) {
            return Array.from(e.querySelectorAll(selector));
        }
        else {
            const startNode = e.start;
            const endNode = e.end;
            if (startNode && endNode && startNode.parentNode === endNode.parentNode) {
                const elements = [];
                let currentNode = startNode.nextSibling;
                while (currentNode && currentNode !== endNode) {
                    if (currentNode.nodeType === Node.ELEMENT_NODE) {
                        const currentElement = currentNode;
                        if (currentElement.matches(selector)) {
                            elements.push(currentElement);
                        }
                        elements.push(...Array.from(currentElement.querySelectorAll(selector)));
                    }
                    currentNode = currentNode.nextSibling;
                }
                return elements;
            }
        }
        return [];
    };
    ElementUtils.selectorElements = (selector, element = document) => {
        return Array.prototype.slice.call(element.querySelectorAll(selector));
    };
    ElementUtils.selectorNodes = (selector, element = document) => {
        return element.querySelectorAll(selector);
    };
    ElementUtils.removeAttribute = (result, attrs) => {
        attrs.forEach(it => {
            result.removeAttribute(it);
        });
    };
    ElementUtils.setAttribute = (result, attrs) => {
        attrs.forEach(it => {
            result.setAttribute(it, '');
        });
    };
    ElementUtils.setAttributeAttr = (result, attrs) => {
        attrs.forEach(it => {
            result.setAttribute(it.name, it.value);
        });
    };
    ElementUtils.getAttributeToObject = (input) => {
        const attribute = {};
        input.getAttributeNames().forEach(ait => {
            attribute[ait] = input.getAttribute(ait);
        });
        return attribute;
    };
    ElementUtils.getStyleToObject = (input) => {
        const style = {};
        for (let i = 0; i < input.style.length; i++) {
            const key = input.style[i];
            style[key] = input.style[key];
        }
        return style;
    };
})(ElementUtils || (ElementUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/event/EventUtils.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/event/EventUtils.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventUtils: () => (/* binding */ EventUtils)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_message_Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/message/Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

var EventUtils;
(function (EventUtils) {
    EventUtils.htmlElementEventObservable = (element, type, options) => {
        return new _dooboostore_core_message_Observable__WEBPACK_IMPORTED_MODULE_0__.Observable((subscriber) => {
            const handler = (event) => subscriber.next(event);
            element.addEventListener(type, handler, options);
            return () => {
                element.removeEventListener(type, handler, options);
            };
        });
    };
})(EventUtils || (EventUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/location/LocationUtils.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/location/LocationUtils.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LocationUtils: () => (/* binding */ LocationUtils)
/* harmony export */ });
class LocationUtils {
    static hash(window) {
        return window.location.hash.replace('#', '');
    }
    static hashPath(window) {
        return window.location.hash.replace('#', '').split('?')[0];
    }
    static hashSearch(window) {
        return window.location.hash.replace('#', '').split('?')[1];
    }
    static hashQueryParams(window) {
        const s = window.location.hash.replace('#', '').split('?')[1] || '';
        return this.queryStringToMap(s);
    }
    static path(window) {
        return window.location.pathname;
    }
    static pathQueryParamsObject(window) {
        return this.queryStringToObject(window.location.search.substring(1));
    }
    static hashQueryParamsObject(window) {
        const s = window.location.hash.split('?').pop() ?? '';
        if (s.startsWith('#')) {
            return {};
        }
        else {
            return this.queryStringToObject(s);
        }
    }
    static pathQueryParams(window) {
        return this.queryStringToMap(window.location.search.substring(1));
    }
    static queryStringToMap(s) {
        const params = new Map();
        const vars = s.split('&') || [];
        vars.forEach(it => {
            const kv = it.split('=') || [];
            if (kv[0] && kv[0].length > 0) {
                params.set(kv[0], kv[1]);
            }
        });
        return params;
    }
    static queryStringToObject(s) {
        const params = {};
        const vars = s.split('&') || [];
        vars.forEach(it => {
            const kv = it.split('=') || [];
            if (kv[0] && kv[0].length > 0) {
                params[kv[0]] = kv[1];
            }
        });
        return params;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/node/NodeUtils.ts":
/*!******************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/node/NodeUtils.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NodeUtils: () => (/* binding */ NodeUtils)
/* harmony export */ });
var NodeUtils;
(function (NodeUtils) {
    let FindNodesFilterResult;
    (function (FindNodesFilterResult) {
        FindNodesFilterResult["MATCH_AND_CONTINUE"] = "MATCH_AND_CONTINUE";
        FindNodesFilterResult["MATCH_AND_SKIP_CHILDREN"] = "MATCH_AND_SKIP_CHILDREN";
        FindNodesFilterResult["NO_MATCH_AND_CONTINUE"] = "NO_MATCH_AND_CONTINUE";
        FindNodesFilterResult["NO_MATCH_AND_SKIP_CHILDREN"] = "NO_MATCH_AND_SKIP_CHILDREN"; // Don't match the node, and also skip its children
    })(FindNodesFilterResult = NodeUtils.FindNodesFilterResult || (NodeUtils.FindNodesFilterResult = {}));
    // https://stackoverflow.com/questions/3955229/remove-all-child-elements-of-a-dom-node-in-javascript
    NodeUtils.removeAllChildNode = (node) => {
        while (node?.firstChild) {
            node.firstChild.remove();
        }
    };
    NodeUtils.appendChild = (parentNode, childNode) => {
        return parentNode.appendChild(childNode);
    };
    NodeUtils.replaceNode = (targetNode, newNode) => {
        // console.log('repalceNode', targetNode, newNode, targetNode.parentNode)
        return targetNode.parentNode?.replaceChild(newNode, targetNode);
    };
    NodeUtils.addNode = (targetNode, newNode) => {
        return targetNode.parentNode?.insertBefore(newNode, targetNode.nextSibling);
    };
    NodeUtils.cloneNode = (element, deep) => {
        return element.cloneNode(deep ?? false);
    };
    NodeUtils.findNodes = (rootNode, filter) => {
        const foundNodes = [];
        function traverse(node) {
            if (!node) {
                return;
            }
            // console.log('----------',node.childNodes)
            node.childNodes.forEach(child => {
                const result = filter(child);
                if (result === FindNodesFilterResult.MATCH_AND_CONTINUE ||
                    result === FindNodesFilterResult.MATCH_AND_SKIP_CHILDREN) {
                    foundNodes.push(child);
                }
                if (result === FindNodesFilterResult.MATCH_AND_CONTINUE ||
                    result === FindNodesFilterResult.NO_MATCH_AND_CONTINUE) {
                    traverse(child);
                }
            });
        }
        traverse(rootNode);
        return foundNodes;
    };
})(NodeUtils || (NodeUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts":
/*!**********************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScriptUtils: () => (/* binding */ ScriptUtils)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");

class ScriptUtils {
    /**
     * @deprecated Use ObjectUtils.Script.evalReturn instead
     */
    static evaluateReturn(script, thisTarget = {}) {
        return _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__.ObjectUtils.Script.evaluateReturn(script, thisTarget);
    }
    /**
     * @deprecated Use ObjectUtils.Script.eval instead
     */
    static evaluate(script, thisTarget = {}) {
        return _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__.ObjectUtils.Script.evaluate(script, thisTarget); // Changed from eval to runScript
    }
    /**
     * @deprecated Use ObjectUtils.Script.eval instead
     */
    // public static getVariablePaths(script: string): Set<string> {
    //   const usingVars = new Set<string>();
    //
    //   class GetDetectProxy implements ProxyHandler<any> {
    //     public usingVars = usingVars;
    //
    //     constructor(public prefix?: string) {}
    //
    //     set(target: any, p: string | symbol, value: any, receiver: any): boolean {
    //       return true;
    //     }
    //
    //     get(target: any, p: string | symbol, receiver: any): any {
    //       let items;
    //       if (typeof p === 'string' && isNaN(Number(p))) {
    //         items = this.prefix ? this.prefix + '.' + p : p;
    //         this.usingVars.add(items);
    //       } else if (typeof p === 'string' && !isNaN(Number(p))) {
    //         items = this.prefix ? this.prefix + '[' + p + ']' : p;
    //         this.usingVars.add(items);
    //       }
    //       return new Proxy(() => {}, new GetDetectProxy(items));
    //     }
    //   }
    //
    //   const destUser = new Proxy(() => {}, new GetDetectProxy());
    //
    //   try {
    //     // 동적으로 함수 생성 후 bind
    //     // const boundFunc = new Function("return this.value").bind(obj);
    //     // console.log(boundFunc()); // 42
    //
    //     // eslint-disable-next-line no-new-func,no-unused-expressions
    //     Function(`"use strict"; ${script}; `).bind(destUser)();
    //   } catch (e) {
    //     console.error(e);
    //   }
    //   console.log('-------usingV', usingVars)
    //   return usingVars;
    // }
    static loadElement(document, name, option) {
        return new Promise((resolve, reject) => {
            const tag = document.createElement(name);
            if (option?.body) {
                tag.innerHTML = option.body;
            }
            else {
                tag.onload = resolve;
            }
            tag.onerror = reject;
            if (option?.attribute) {
                for (const [key, value] of Object.entries(option.attribute)) {
                    tag.setAttribute(key, value);
                }
            }
            option.created(tag);
            if (option?.body && tag.parentNode) {
                resolve(tag);
            }
            // document.head.append(tag);
        });
    }
    static loadStyleSheet(document, href, attribute = {}) {
        // const tag = document.createElement('link');
        // tag.type = 'text/css';
        // tag.setAttribute('rel', 'stylesheet');
        // tag.href = href;
        // for (const [key, value] of Object.entries(attribute)) {
        //     tag.setAttribute(key, value);
        // }
        // target.append(tag)
        attribute.type = 'text/css';
        attribute.rel = 'stylesheet';
        attribute.href = href;
        return ScriptUtils.loadElement(document, 'link', {
            attribute,
            created: e => {
                document.head.append(e);
            }
        });
    }
    static loadScript(document, src, attribute = {}) {
        attribute.type = attribute?.type ?? 'text/javascript';
        attribute.src = src;
        return ScriptUtils.loadElement(document, 'script', { attribute, created: e => document.head.append(e) });
    }
    static loadScriptBody(document, body, attribute = {}) {
        attribute.type = attribute?.type ?? 'text/javascript';
        return ScriptUtils.loadElement(document, 'script', { body, attribute, created: e => document.head.append(e) });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/valid/ValidUtils.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/valid/ValidUtils.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ValidUtils: () => (/* binding */ ValidUtils)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");

var ValidUtils;
(function (ValidUtils) {
    ValidUtils.coreValidUtils = _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils;
    ValidUtils.isBrowser = (callBack) => {
        const boolean = (typeof window !== 'undefined') && (typeof Window !== 'undefined');
        if (boolean && callBack) {
            callBack(window);
        }
        return boolean;
    };
    ValidUtils.hasParentWindow = (win) => ValidUtils.isBrowser() && win.parent && win !== win.parent;
    //////////////
    /**
     *  SNS Inapp Browser Check
     *  카카오톡 / 네이버 / 페이스북 / 인스타그램 지원
     */
    ValidUtils.isSocialNetworkServiceInappBrowser = () => {
        const userAgent = ValidUtils.isBrowser() ? window.navigator.userAgent.toLowerCase() : 'none';
        return /kakaotalk|naver|facebook|insta|FBAN|FBAV/.test(userAgent);
    };
    /**
     *  IOS Webview 접속인지 체크
     */
    ValidUtils.isWkWebview = () => ValidUtils.isBrowser() &&
        window['webkit'] != null &&
        window['webkit'].messageHandlers != null &&
        window['webkit'].messageHandlers['System'] != null;
    function isiPhone() {
        return ValidUtils.isBrowser() && /iphone|ipad|ipod/i.test(navigator.userAgent.toLowerCase());
    }
    ValidUtils.isiPhone = isiPhone;
    /**
     *  Android Webview 접속인지 체크
     */
    ValidUtils.isAndroidWebview = () => {
        return ValidUtils.isBrowser() && window['System'] != null;
    };
    ValidUtils.isMobile = (win) => {
        const targetWindow = win ?? (ValidUtils.isBrowser() ? window : undefined);
        if (!targetWindow) {
            return false;
        }
        return /Mobi/i.test(targetWindow.navigator.userAgent);
    };
})(ValidUtils || (ValidUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core-web/src/window/WindowUtils.ts":
/*!**********************************************************************!*\
  !*** ../../packages/@dooboostore/core-web/src/window/WindowUtils.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WindowUtils: () => (/* binding */ WindowUtils)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_message_Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/message/Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

var WindowUtils;
(function (WindowUtils) {
    WindowUtils.eventObservable = (window, type, options) => {
        return new _dooboostore_core_message_Observable__WEBPACK_IMPORTED_MODULE_0__.Observable((subscriber) => {
            const handler = (event) => subscriber.next(event);
            window.addEventListener(type, handler, options);
            return () => {
                window.removeEventListener(type, handler, options);
            };
        });
    };
})(WindowUtils || (WindowUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/convert/ConvertUtils.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConvertUtils: () => (/* binding */ ConvertUtils)
/* harmony export */ });
/* harmony import */ var _valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");
/* harmony import */ var _entity_Point2D__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../entity/Point2D */ "../../packages/@dooboostore/core/src/entity/Point2D.ts");
/* harmony import */ var _entity_Point3D__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entity/Point3D */ "../../packages/@dooboostore/core/src/entity/Point3D.ts");
/* harmony import */ var _entity_Rect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entity/Rect */ "../../packages/@dooboostore/core/src/entity/Rect.ts");
/* harmony import */ var _object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");





var ConvertUtils;
(function (ConvertUtils) {
    ConvertUtils.objToGetURL = (obj) => {
        return Object.keys(obj).reduce((prev, key, i) => (`${prev}${i !== 0 ? '&' : ''}${key}=${obj[key]}`), '');
    };
    ConvertUtils.mapToJson = (map) => {
        return JSON.stringify(Array.from(map.entries()).reduce((o, [key, value]) => {
            o[key] = value;
            return o;
        }, {}));
    };
    ConvertUtils.jsonToMap = (jsonStr) => {
        return new Map(JSON.parse(jsonStr));
    };
    ConvertUtils.decodeURIString = (data) => {
        return decodeURIComponent(data);
    };
    ConvertUtils.encodeURIString = (data) => {
        return encodeURIComponent(data);
    };
    ConvertUtils.objToStrMap = (obj) => {
        const strMap = new Map();
        for (const k of Object.keys(obj)) {
            strMap.set(k, obj[k]);
        }
        return strMap;
    };
    ConvertUtils.jsonToStrMap = (jsonStr) => {
        return ConvertUtils.objToStrMap(JSON.parse(jsonStr));
    };
    ConvertUtils.strToObject = (message) => {
        return JSON.parse(message);
    };
    ConvertUtils.objToJson = (obj) => {
        return JSON.stringify(obj);
    };
    ConvertUtils.objToMap = (obj) => {
        const mp = new Map();
        Object.keys(obj).forEach((k) => {
            mp.set(k, obj[k]);
        });
        return mp;
    };
    ConvertUtils.mapToObj = (map) => {
        const obj = {};
        map.forEach((v, k) => {
            obj[k] = v;
        });
        return obj;
    };
    ConvertUtils.snakeToCamelCase = (str) => {
        return str.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());
    };
    ConvertUtils.camelToSnakeCase = (str) => {
        return str.replace(/([a-z])([A-Z])/g, '$1_$2').toLowerCase();
    };
    function toFormData(obj) {
        const formData = new FormData();
        for (const key in obj)
            formData.append(key, obj[key]);
        return formData;
    }
    ConvertUtils.toFormData = toFormData;
    function toObject(obj, config) {
        if (obj instanceof URLSearchParams) {
            const robj = {};
            obj.forEach((v, k) => {
                if (config?.firstValue && robj[k] === undefined) {
                    robj[k] = v;
                }
                else if (!config?.firstValue) {
                    if (robj[k]) {
                        if (Array.isArray(robj[k])) {
                            robj[k].push(v);
                        }
                        else {
                            robj[k] = [robj[k], v];
                        }
                    }
                    else {
                        robj[k] = v;
                    }
                }
            });
            return robj;
        }
        else if (obj instanceof FormData) {
            // new Map().entries()
            // Object.entries({})
            // obj = Object.fromEntries(obj.entries());
            const formDataToObject = (formData) => {
                const obj = {};
                // FormData의 모든 키를 순회
                for (const key of formData.keys()) {
                    const values = formData.getAll(key); // 동일 키의 모든 값 가져오기
                    // 값이 하나면 단일 값으로, 여러 개면 배열로 저장
                    obj[key] = values.length > 1 ? values : values[0];
                }
                return obj;
            };
            return formDataToObject(obj);
        }
        else if (obj && typeof obj[Symbol.iterator] === 'function') {
            return Object.fromEntries(obj);
        }
        else if (Array.isArray(obj)) {
            return Object.fromEntries(obj);
        }
        else {
            // console.log(Object.prototype.toString.call(obj));
            if (_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isMap(obj)) {
                const map = obj;
                obj = ConvertUtils.mapToObj(map);
            }
            if (_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isArray(obj)) {
                const arr = obj;
                for (let i = 0; i < arr.length; i++) {
                    arr[i] = ConvertUtils.toObject(arr[i]);
                }
            }
            if (_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isObject(obj)) {
                for (const property in obj) {
                    obj[property] = ConvertUtils.toObject(obj[property]);
                }
            }
            return obj;
        }
    }
    ConvertUtils.toObject = toObject;
    ;
    ConvertUtils.toArray = (data) => {
        if (data instanceof Set) {
            return Array.from(data.values());
        }
        const datas = (Array.isArray(data) ? data : (data ? [data] : []));
        return datas;
    };
    ConvertUtils.flatArray = (...data) => {
        const datas = data.flatMap((item) => (item instanceof Object && Symbol.iterator in item ? Array.from(item) : [item]));
        return datas;
    };
    ConvertUtils.iteratorToArray = (it) => {
        return Array.from(it);
    };
    ConvertUtils.toJson = (obj) => {
        const at = ConvertUtils.toObject(obj);
        return JSON.stringify(at);
    };
    ConvertUtils.concatenateToAttribute = (object_o) => {
        return ConvertUtils.concatenateToString(object_o, '=', ' ', '\'');
    };
    ConvertUtils.concatenateToParameter = (object_o) => {
        return ConvertUtils.concatenateToString(object_o, '=', '&', '');
    };
    ConvertUtils.concatenateToString = (object_o, unionString_s = '=', spilString_s = ' ', pairString_s = '') => {
        const results = [];
        for (const property in object_o) {
            const value = object_o[property];
            if (value) {
                results.push(property.toString() + unionString_s + pairString_s + value + pairString_s);
            }
        }
        return results.join(spilString_s);
    };
    ConvertUtils.specialCharsToEscape = (data) => {
        return data.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    };
    ConvertUtils.decodeHTMLEscape = (data) => {
        // HTML 엔티티 이스케이프를 디코드합니다.
        return data.replace(/&amp;/g, '&')
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>')
            .replace(/&quot;/g, '"')
            .replace(/&#39;/g, "'")
            .replace(/&#x2F;/g, '/');
    };
    function escapeHTML(htmlString, option) {
        if (!htmlString)
            return '';
        // HTML escape map - 순서 중요: & 를 먼저 처리해야 함
        // https://dev-handbook.tistory.com/23
        const escapeMap = {
            '&': '&amp;', // 반드시 먼저 처리
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#39;', // or &apos; (하지만 HTML4에서는 &#39; 권장)
            '/': '&#x2F;',
            '`': '&#x60;',
            '=': '&#x3D;',
            '{': '&#123;',
            '}': '&#125;',
            '#': '&#35;',
            '$': '&#36;',
            '\n': '&#10;', // newline
            '\r': '&#13;', // carriage return
            '\t': '&#9;', // tab
            '\u00A0': '&nbsp;', // non-breaking space
            '¢': '&cent;',
            '£': '&pound;',
            '¥': '&yen;',
            '€': '&euro;',
            '©': '&copy;',
            '®': '&reg;',
            '™': '&trade;',
            '°': '&deg;',
            '±': '&plusmn;',
            '×': '&times;',
            '÷': '&divide;',
            '−': '&minus;',
            '•': '&bull;',
            '…': '&hellip;',
            '←': '&larr;',
            '→': '&rarr;',
            '↑': '&uarr;',
            '↓': '&darr;',
            '↔': '&harr;',
        };
        // targets 옵션이 있으면 해당 문자만 필터링
        const targetsSet = option?.targets ? new Set(option.targets) : null;
        const filteredEscapeMap = targetsSet
            ? Object.fromEntries(Object.entries(escapeMap).filter(([key]) => targetsSet.has(key)))
            : escapeMap;
        // & 가 targets에 포함되어 있거나 targets가 없으면 & 를 먼저 처리
        const shouldEscapeAmpersand = !targetsSet || targetsSet.has('&');
        // 이스케이프할 문자들로 정규식 패턴 생성
        const charsToEscape = Object.keys(filteredEscapeMap).filter(char => char !== '&');
        if (charsToEscape.length === 0 && !shouldEscapeAmpersand) {
            return htmlString; // 이스케이프할 문자가 없으면 원본 반환
        }
        // 정규식 생성 (특수 문자 이스케이프 필요)
        const escapedChars = charsToEscape.map(char => {
            // 정규식에서 특별한 의미를 가진 문자들을 이스케이프
            return char.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }).join('');
        let result = htmlString;
        // & 를 먼저 처리 (옵션에 포함된 경우)
        if (shouldEscapeAmpersand) {
            result = result.replace(/&/g, '&amp;');
        }
        // 나머지 문자 처리
        if (escapedChars.length > 0) {
            const regex = new RegExp(`[${escapedChars}]`, 'g');
            result = result.replace(regex, (match) => {
                return filteredEscapeMap[match] || match;
            });
        }
        return result;
    }
    ConvertUtils.escapeHTML = escapeHTML;
    ConvertUtils.copyObject = (obj, update = {}) => {
        return { ...obj, ...update };
    };
    ConvertUtils.copyArrayWithAddition = (arr, update) => {
        return [...arr, ...(update || [])];
    };
    ConvertUtils.hexToInt = (hex) => {
        if (hex.startsWith('#')) {
            hex = hex.slice(1);
        }
        if (hex.length === 3) {
            hex = hex.split('').map((c) => c + c).join('');
        }
        return parseInt(hex, 16);
    };
    // export const toHex = (val: number): string => {
    //   const hex = Math.floor(val).toString(16).toUpperCase();
    //   return (hex.length === 1 ? '0' + hex : hex);
    // };
    ConvertUtils.toHex = (num) => {
        if (num < 0) {
            num = 0xFFFFFFFF + num + 1;
        }
        num = Number(num.toFixed(0));
        return num.toString(16).padStart(2, '0').toUpperCase();
    };
    ConvertUtils.toHexColor = (rgba) => {
        const r = ConvertUtils.toHex(rgba.r ?? 0);
        const g = ConvertUtils.toHex(rgba.g ?? 0);
        const b = ConvertUtils.toHex(rgba.b ?? 0);
        const a = ConvertUtils.toHex(rgba.a ?? 255);
        return `#${r}${g}${b}${a}`;
    };
    ConvertUtils.avgColor = (color) => {
        const sum = color.reduce((acc, c) => {
            acc.r += c.r ?? 0;
            acc.g += c.g ?? 0;
            acc.b += c.b ?? 0;
            acc.a += c.a ?? 0;
            return acc;
        }, { r: 0, g: 0, b: 0, a: 0 });
        const avg = { r: Math.floor(sum.r / color.length), g: Math.floor(sum.g / color.length), b: Math.floor(sum.b / color.length), a: Math.floor(sum.a / color.length) };
        return avg;
    };
    ConvertUtils.toRGBA = (hex) => {
        hex ??= '#000000FF';
        const hexColor = hex.replace('#', '');
        const r = parseInt(hexColor.slice(0, 2) || '0', 16);
        const g = parseInt(hexColor.slice(2, 4) || '0', 16);
        const b = parseInt(hexColor.slice(4, 6) || '0', 16);
        const a = hexColor.length > 6 ? parseInt(hexColor.slice(6, 8) || '0', 16) : 255;
        return { r, g, b, a };
    };
    ConvertUtils.minMaxCenterAvg = (obj) => {
        const result = {};
        const allKeys = _object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.uniqueKeys(obj);
        for (const key of allKeys) {
            const values = obj.map(item => item[key]);
            const min = Math.min(...values);
            const max = Math.max(...values);
            const center = (min + max) / 2;
            const avg = values.reduce((sum, val) => sum + val, 0) / values.length;
            result[key] = { min, max, center, avg, diff: max - min };
        }
        return result;
    };
    ConvertUtils.minMaxCenterRectAvg2D = (point2Ds) => {
        const min = new _entity_Point2D__WEBPACK_IMPORTED_MODULE_1__.Point2D(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);
        const max = new _entity_Point2D__WEBPACK_IMPORTED_MODULE_1__.Point2D(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
        let sum = new _entity_Point2D__WEBPACK_IMPORTED_MODULE_1__.Point2D(0, 0);
        point2Ds.forEach((p) => {
            min.x = Math.min(min.x, p.x);
            min.y = Math.min(min.y, p.y);
            max.x = Math.max(max.x, p.x);
            max.y = Math.max(max.y, p.y);
            sum.x += p.x;
            sum.y += p.y;
        });
        const center = new _entity_Point2D__WEBPACK_IMPORTED_MODULE_1__.Point2D((min.x + max.x) / 2, (min.y + max.y) / 2);
        const avg = new _entity_Point2D__WEBPACK_IMPORTED_MODULE_1__.Point2D(sum.x / point2Ds.length, sum.y / point2Ds.length);
        const minMaxRect = new _entity_Rect__WEBPACK_IMPORTED_MODULE_3__.Rect(min.x, min.y, max.x - min.x, max.y - min.y);
        return { min, max, center, avg, minMaxRect };
    };
    ConvertUtils.minMaxCenterAvg3D = (point3Ds) => {
        const min = new _entity_Point3D__WEBPACK_IMPORTED_MODULE_2__.Point3D(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        const max = new _entity_Point3D__WEBPACK_IMPORTED_MODULE_2__.Point3D(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);
        let sum = new _entity_Point3D__WEBPACK_IMPORTED_MODULE_2__.Point3D(0, 0, 0);
        point3Ds.forEach((p) => {
            min.x = Math.min(min.x, p.x);
            min.y = Math.min(min.y, p.y);
            min.z = Math.max(min.z, p.z);
            max.x = Math.max(max.x, p.x);
            max.y = Math.max(max.y, p.y);
            max.z = Math.max(max.z, p.y);
            sum.x += p.x;
            sum.y += p.y;
            sum.z += p.z;
        });
        const center = new _entity_Point3D__WEBPACK_IMPORTED_MODULE_2__.Point3D((min.x + max.x) / 2, (min.y + max.y) / 2, (min.z + max.z) / 2);
        const avg = new _entity_Point3D__WEBPACK_IMPORTED_MODULE_2__.Point3D(sum.x / point3Ds.length, sum.y / point3Ds.length, sum.z / point3Ds.length);
        return { min, max, center, avg };
    };
    ConvertUtils.roundRectRadiiToFullRadii = (radii) => {
        if (!radii) {
            return [0, 0, 0, 0];
        }
        if (radii.length === 1) {
            return [radii[0] ?? 0, radii[0] ?? 0, radii[0] ?? 0, radii[0] ?? 0];
        }
        else if (radii.length === 2) {
            return [radii[0] ?? 0, radii[1] ?? 0, radii[0] ?? 0, radii[1] ?? 0];
        }
        else if (radii.length === 3) {
            return [radii[0] ?? 0, radii[1] ?? 0, radii[2] ?? 0, radii[1] ?? 0];
        }
        else {
            return radii;
        }
    };
    ConvertUtils.toArrayDirectionChange = (array) => {
        // 입력 배열이 비어있거나 첫 번째 행이 비어있으면 빈 배열 반환
        if (!array || array.length === 0 || !array[0] || array[0].length === 0) {
            return [];
        }
        const result = [];
        const numCols = array[0].length; // 기준 열 개수 (첫 행 기준)
        const numRows = array.length; // 행 개수
        for (let i = 0; i < numCols; i++) {
            const newRow = [];
            for (let j = 0; j < numRows; j++) {
                // 만약 jagged array 가능성을 엄격히 다루려면 여기서 array[j].length > i 인지 확인 필요
                // 하지만 T[][] 타입 시그니처는 보통 rectangular array를 기대함
                newRow.push(array[j][i]);
            }
            result.push(newRow);
        }
        return result;
    };
    // groupBy 함수 구현
    ConvertUtils.groupByMap = (array, keySelector) => {
        return array.reduce((map, item) => {
            const key = keySelector(item);
            const group = map.get(key) || [];
            group.push(item);
            map.set(key, group);
            return map;
        }, new Map());
    };
    ConvertUtils.groupByObject = (array, keySelector) => {
        // groupByMap 호출
        const map = ConvertUtils.groupByMap(array, keySelector);
        // Map을 Record로 변환
        return Object.fromEntries(map);
    };
    ConvertUtils.toURLSearchParams = (data) => {
        const searchParams = new URLSearchParams();
        if (typeof data === 'string') {
            new URLSearchParams(data).forEach((value, key) => {
                searchParams.append(key, value);
            });
        }
        else if (typeof data === 'object') {
            const forTarget = data instanceof URLSearchParams ? data.entries() : (Array.isArray(data) ? data : Object.entries(data));
            for (const [k, v] of Array.from(forTarget)) {
                if (Array.isArray(v)) {
                    v.forEach(it => searchParams.append(k, it));
                }
                else {
                    searchParams.append(k, v);
                }
            }
        }
        return searchParams;
    };
    // export const RelativeHumanReadableTimeLabels = {
    //   [IOS3166_1_Code.KOR]: {
    //     justNow: '방금 전',
    //     minutesAgo: '분 전',
    //     hoursAgo: '시간 전',
    //     daysAgo: '일 전',
    //   }
    //
    // }
    // export type RelativeHumanReadableTimeLabel = {
    //   justNow: string,
    //   minutesAgo: string,
    //   hoursAgo: string,
    //   daysAgo: string,
    // };
    // export type RelativeHumanReadableTimeConfig = {
    //   label:  RelativeHumanReadableTimeLabel;
    // }
    // export const formatRelativeHumanReadableTime = (date: Date | string | number, config: RelativeHumanReadableTimeConfig): string => {
    //   if (!(date instanceof Date)) {
    //     date = new Date(date);
    //   }
    //   const now = new Date();
    //   const diffMs = now.getTime() - date.getTime();
    //   const diffMinutes = Math.floor(diffMs / (1000 * 60));
    //   const diffHours = Math.floor(diffMinutes / 60);
    //
    //   if (diffMinutes < 1) return config.label.justNow;
    //   if (diffMinutes < 60) return `${diffMinutes}${config.label.minutesAgo}`;
    //   if (diffHours < 24) return `${diffHours}${}`;
    //   return `${Math.floor(diffHours / 24)}일 전`;
    // }
    /**
     * 문자열 JSON을 키-값 쌍 배열로 변환합니다.
     *
     * @param {string} stringJson - JSON 형식의 문자열 (예: "{value: this.child.obj.name}")
     * @return {Array<{ key: string, value: string }>} 키-값 쌍 배열
     */
    ConvertUtils.stringJsonToKeyPairs = (stringJson) => {
        return Array.from(stringJson.matchAll(/(\w+):\s*([^,}]+)/g)).map(match => ({ key: match[1], value: match[2] }));
    };
    // const formDataToFormDataEntryValueObj = <T = { [key: string]: FormDataEntryValue | FormDataEntryValue[] }>(
    //   data: FormData | HTMLFormElement
    // ): T => {
    //     if (typeof HTMLFormElement !== 'undefined' && data instanceof HTMLFormElement) {
    //         data = new FormData(data);
    //     }
    //     const obj: any = {};
    //     data.forEach((value, key) => {
    //         if (Array.isArray(obj[key])) {
    //             obj[key].push(value);
    //         } else if (obj[key] !== undefined || !isNaN(obj[key])) {
    //             obj[key] = [obj[key], value];
    //         } else {
    //             obj[key] = value;
    //         }
    //     });
    //     return obj;
    // }
})(ConvertUtils || (ConvertUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/entity/Point2D.ts":
/*!**************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/entity/Point2D.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Point2D: () => (/* binding */ Point2D)
/* harmony export */ });
class Point2D {
    x;
    y;
    constructor(x, y) {
        if (typeof x === 'object') {
            this.x = x.x ?? 0;
            this.y = x.y ?? 0;
        }
        else {
            this.x = x ?? 0;
            this.y = y ?? 0;
        }
    }
    copy() {
        return new Point2D(this.x, this.y);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/entity/Point3D.ts":
/*!**************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/entity/Point3D.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Point3D: () => (/* binding */ Point3D)
/* harmony export */ });
/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector */ "../../packages/@dooboostore/core/src/entity/Vector.ts");
/* harmony import */ var _Point2D__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Point2D */ "../../packages/@dooboostore/core/src/entity/Point2D.ts");


class Point3D extends _Point2D__WEBPACK_IMPORTED_MODULE_1__.Point2D {
    z;
    constructor(x, y, z) {
        if (x instanceof _Vector__WEBPACK_IMPORTED_MODULE_0__.Vector) {
            super(x.x, x.y);
            this.z = x.z;
        }
        else if (typeof x === 'object') {
            super({ x: x.x ?? 0, y: x.y ?? 0 });
            this.z = x.z ?? 0;
        }
        else {
            super(x, y);
            this.z = z ?? 0;
        }
    }
    copy() {
        return new Point3D(this.x, this.y, this.z);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/entity/Rect.ts":
/*!***********************************************************!*\
  !*** ../../packages/@dooboostore/core/src/entity/Rect.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Rect: () => (/* binding */ Rect)
/* harmony export */ });
/* harmony import */ var _Point2D__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Point2D */ "../../packages/@dooboostore/core/src/entity/Point2D.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MathUtil */ "../../packages/@dooboostore/core/src/math/MathUtil.ts");
/* harmony import */ var _SizeType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SizeType */ "../../packages/@dooboostore/core/src/entity/SizeType.ts");



const isValueLinkControl = (data) => {
    return typeof data === 'object' && 'value' in data && 'noLink' in data;
    // return data.value !== undefined && data.noLink !== undefined && typeof data.value === 'object' && typeof data.noLink === 'boolean';
};
class Rect {
    _start;
    _width;
    _height;
    linkRects;
    constructor(xOrPoint, yOrPointOrWidth, widthOrHeight = 0, heightOrUndefined = 0) {
        if ((0,_SizeType__WEBPACK_IMPORTED_MODULE_2__.isSizeType)(xOrPoint)) {
            this._start = new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(0, 0);
            this._width = xOrPoint.width;
            this._height = xOrPoint.height;
        }
        else if (typeof xOrPoint === 'object' && typeof yOrPointOrWidth === 'object') {
            this._start = xOrPoint instanceof _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D ? xOrPoint : new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(xOrPoint.x, xOrPoint.y);
            this.end = yOrPointOrWidth instanceof _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D ? yOrPointOrWidth : new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(yOrPointOrWidth.x, yOrPointOrWidth.y);
        }
        else if (typeof xOrPoint === 'object' && typeof yOrPointOrWidth === 'number') {
            this._start = xOrPoint instanceof _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D ? xOrPoint : new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(xOrPoint.x, xOrPoint.y);
            this._width = yOrPointOrWidth;
            this._height = widthOrHeight;
        }
        else if (typeof xOrPoint === 'number' && typeof yOrPointOrWidth === 'number') {
            this._start = new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(xOrPoint, yOrPointOrWidth);
            this._width = widthOrHeight;
            this._height = heightOrUndefined;
        }
    }
    valueLinkControl(value) {
        let v;
        let noLink = false;
        if (isValueLinkControl(value)) {
            v = value.value;
            noLink = value.noLink;
        }
        else {
            v = value;
        }
        return { value: v, noLink };
    }
    get width() {
        return this._width;
    }
    get height() {
        return this._height;
    }
    get start() {
        return this._start.copy();
    }
    ////////////////////
    set width(width) {
        this.setWidth(width);
    }
    setWidth(width) {
        let { value, noLink } = this.valueLinkControl(width);
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this._width, value);
        this._width = value;
        this.applyWidthPercentLinks({ value: percentDiff, noLink });
    }
    set height(height) {
        this.setHeight(height);
    }
    setHeight(height) {
        let { value, noLink } = this.valueLinkControl(height);
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this._height, value);
        this._height = value;
        this.applyHeightPercentLinks({ value: percentDiff, noLink });
    }
    set start(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const percentDiff = new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D({ x: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this._start.x, value.x), y: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this._start.y, value.y) });
        this._start = value;
        this.applyStartPercentLinks({ value: percentDiff, noLink });
    }
    // 언제쓰는거지 ㅡㅡ?
    setWidthFromEnd(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.start.x, value);
        this._start.x = this.end.x - value;
        this.applyStartXPercentLinks({ value: percentDiff, noLink });
    }
    set widthFromEnd(inputValue) {
        this.setWidthFromEnd(inputValue);
    }
    // 언제쓰는거지 ㅡㅡ?
    setHeightFromEnd(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const diff = this.end.y - value;
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.start.y, diff);
        this._start.y = diff;
        this.applyStartYPercentLinks({ value: percentDiff, noLink });
    }
    set heightFromEnd(inputValue) {
        this.setHeightFromEnd(inputValue);
    }
    setWidthFromCenter(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const diff = this.center.x - (value / 2);
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.start.x, diff);
        this._start.x = diff;
        this.applyStartXPercentLinks(percentDiff);
    }
    set widthFromCenter(inputValue) {
        this.setWidthFromCenter(inputValue);
    }
    setHeightFromCenter(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const diff = this.center.y - (value / 2);
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.start.y, diff);
        this._start.y = diff;
        this.applyStartYPercentLinks(percentDiff);
    }
    set heightFromCenter(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const diff = this.center.y - (value / 2);
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.start.y, diff);
        this._start.y = diff;
        this.applyStartYPercentLinks(percentDiff);
    }
    set x(inputValue) {
        this.setX(inputValue);
    }
    setX(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const diff = value - this._start.x;
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.width, diff);
        this._start.x = value;
        this.applyStartXPercentLinks({ value: percentDiff, noLink });
    }
    set y(inputValue) {
        this.setY(inputValue);
    }
    setY(inputValue) {
        let { value, noLink } = this.valueLinkControl(inputValue);
        const diff = value - this._start.y;
        const percentDiff = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.height, diff);
        this._start.y = value;
        this.applyStartYPercentLinks({ value: percentDiff, noLink });
    }
    ////////////////////////////
    applyWidthPercentLinks(widthPercent) {
        let { value, noLink } = this.valueLinkControl(widthPercent);
        if (this.linkRects && (typeof noLink === 'boolean' ? !noLink : true)) {
            Array.from(this.linkRects.values()).filter(it => {
                return typeof noLink === 'boolean' ? true : it !== noLink;
            }).forEach(it => {
                it.setWidthByWidthPercent({ value: value, noLink: this });
            });
        }
    }
    applyHeightPercentLinks(heightPercent) {
        let { value, noLink } = this.valueLinkControl(heightPercent);
        if (this.linkRects && (typeof noLink === 'boolean' ? !noLink : true)) {
            Array.from(this.linkRects.values()).filter(it => {
                return typeof noLink === 'boolean' ? true : it !== noLink;
            }).forEach(it => {
                it.setHeightByHeightPercent({ value: value, noLink: this });
            });
        }
    }
    applyStartPercentLinks(startPercent) {
        let { value, noLink } = this.valueLinkControl(startPercent);
        this.applyStartXPercentLinks({ value: value.x, noLink });
        this.applyStartYPercentLinks({ value: value.y, noLink });
    }
    applyStartXPercentLinks(xPercent) {
        let { value, noLink } = this.valueLinkControl(xPercent);
        if (this.linkRects && (typeof noLink === 'boolean' ? !noLink : true)) {
            Array.from(this.linkRects.values()).filter(it => {
                return typeof noLink === 'boolean' ? true : it !== noLink;
            }).forEach(it => {
                it.addXByWidthPercent({ value: value, noLink: this });
            });
        }
    }
    applyStartYPercentLinks(yPercent) {
        let { value, noLink } = this.valueLinkControl(yPercent);
        if (this.linkRects && (typeof noLink === 'boolean' ? !noLink : true)) {
            Array.from(this.linkRects.values()).filter(it => {
                return typeof noLink === 'boolean' ? true : it !== noLink;
            }).forEach(it => {
                it.addYByHeightPercent({ value: value, noLink: this });
            });
        }
    }
    hasLink(rect) {
        return this.linkRects?.has(rect);
    }
    isLinked() {
        return !!this.linkRects?.size;
    }
    addLink(...rect) {
        this.linkRects ??= new Set();
        rect.filter(it => !this.linkRects?.has(it)).forEach(it => {
            this.linkRects?.add(it);
            it.addLink(this);
        });
    }
    setLinks(rects) {
        this.unLinkAll();
        this.addLink(...rects);
    }
    unLinkAll() {
        if (this.linkRects) {
            Array.from(this.linkRects.values()).forEach(it => {
                this.unLink(it);
            });
            this.linkRects.clear();
        }
    }
    unLink(rect) {
        let { value, noLink } = this.valueLinkControl(rect);
        if (this.linkRects) {
            this.linkRects.delete(value);
        }
        if (!noLink)
            value.unLink({ value: this, noLink: this });
    }
    addWidthPercent(wPercent) {
        let { value, noLink } = this.valueLinkControl(wPercent);
        this.setWidth({ value: this.width + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, value), noLink });
    }
    addHeightPercent(hPercent) {
        let { value, noLink } = this.valueLinkControl(hPercent);
        this.setHeight({ value: this.height + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, value), noLink });
    }
    addWidthRatio(wRatio) {
        this.width = this.width + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, wRatio);
    }
    addHeightRatio(hRatio) {
        this.height = this.height + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, hRatio);
    }
    addXPercent(wPercent) {
        let { value, noLink } = this.valueLinkControl(wPercent);
        this.setX({ value: this.x + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, value), noLink });
    }
    addYPercent(hPercent) {
        let { value, noLink } = this.valueLinkControl(hPercent);
        this.setY({ value: this.y + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, value), noLink });
    }
    addXRatio(wRatio) {
        let { value, noLink } = this.valueLinkControl(wRatio);
        this.setX({ value: this.x + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, value), noLink });
    }
    addYRatio(hRatio) {
        let { value, noLink } = this.valueLinkControl(hRatio);
        this.setY({ value: this.y + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, value), noLink });
    }
    ////////////
    set endX(value) {
        const diff = value - this.x;
        this.width = diff;
    }
    set endXPercent(endXPercent) {
        this.endX = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, endXPercent);
    }
    set endYPercent(endYPercent) {
        this.endY = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, endYPercent);
    }
    set endY(value) {
        this.height = value - this.y;
    }
    set end(value) {
        this.width = value.x - this.x;
        this.height = value.y - this.y;
    }
    get x() {
        return this.start.x;
    }
    get y() {
        return this.start.y;
    }
    get endX() {
        return this.end.x;
    }
    get endY() {
        return this.end.y;
    }
    to(startPoint) {
        const r = this.copy();
        r.start = startPoint;
        return r;
    }
    toRotate(r, { rotatePoint = this.center, type = 'degreeAngle' }) {
        const angle = _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.radians(r, { type });
        const centerPoint = rotatePoint instanceof _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D ? rotatePoint : new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(rotatePoint.x, rotatePoint.y);
        const points = [
            this.leftTop,
            this.rightTop,
            this.rightBottom,
            this.leftBottom
        ];
        return points.map(p => _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.rotatePoint(p, centerPoint, angle));
    }
    get center() {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.start.x + (this.width / 2), this.start.y + (this.height / 2));
    }
    get end() {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.start.x + this.width, this.start.y + this.height);
    }
    get leftTop() {
        return this.start.copy();
    }
    get leftBottom() {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.start.x, this.end.y);
    }
    get rightTop() {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.end.x, this.start.y);
    }
    get rightBottom() {
        return this.end;
    }
    copy() {
        return new Rect(this.x, this.y, this.width, this.height);
    }
    /////////////////
    getWidthPercent(width) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.width, width);
    }
    getWidthRatio(width) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getRatioByTotal(this.width, width);
    }
    getWidthByPercent(percent) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, percent);
    }
    getWidthByRatio(percent) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, percent);
    }
    getHeightPercent(height) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.height, height);
    }
    getHeightRatio(height) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getRatioByTotal(this.height, height);
    }
    getHeightByPercent(percentY) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, percentY);
    }
    getHeightByRatio(ratio) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, ratio);
    }
    getXPercent(x) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.width, x - this.x);
    }
    getXRatio(x) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getRatioByTotal(this.width, x - this.x);
    }
    getXByPercent(xPercent) {
        return this.x + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, xPercent);
    }
    getXByRatio(ratio) {
        return this.x + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, ratio);
    }
    getYPercent(y) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getPercentByTotal(this.height, y - this.y);
    }
    getYRatio(y) {
        return _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getRatioByTotal(this.height, y - this.y);
    }
    getYByPercent(yPercent) {
        return this.y + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, yPercent);
    }
    getYByRatio(ratio) {
        return this.y + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, ratio);
    }
    getPercent(point) {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.getXPercent(point.x), this.getYPercent(point.y));
    }
    /**
     * 주어진 width에 맞춰 비율에 따라 height를 스케일링하여 새로운 Rect를 반환합니다.
     * @param width 새로운 width 값
     * @returns 비율에 맞게 height가 조정된 Rect
     */
    toScaleByWidth(width) {
        const ratio = this.height / this.width;
        return new Rect(this.x, this.y, width, width * ratio);
    }
    /**
     * 주어진 height에 맞춰 비율에 따라 width를 스케일링하여 새로운 Rect를 반환합니다.
     * @param height 새로운 height 값
     * @returns 비율에 맞게 width가 조정된 Rect
     */
    toScaleByHeight(height) {
        const ratio = this.width / this.height;
        return new Rect(this.x, this.y, height * ratio, height);
    }
    toRatio(point) {
        return new Rect(this.getXRatio(point.x), this.getYRatio(point.y), this.getWidthRatio(point instanceof Rect ? point.width : point.w), this.getHeightRatio(point instanceof Rect ? point.height : point.h));
    }
    getRatio(point) {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.getXRatio(point.x), this.getYRatio(point.y));
    }
    getByPercent(percent) {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.getXByPercent(percent.x), this.getYByPercent(percent.y));
    }
    getByRatio(ratio) {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_0__.Point2D(this.getXByRatio(ratio.x), this.getYByRatio(ratio.y));
    }
    getDiffX(x) {
        return x - this.x;
    }
    getDiffY(y) {
        return y - this.y;
    }
    getDiffLeft(x) {
        this.getDiffX(x);
    }
    getDiffTop(y) {
        this.getDiffY(y);
    }
    getDiffRight(x) {
        return x - this.end.x;
    }
    getDiffBottom(y) {
        return y - this.end.y;
    }
    getDiffWidth(width) {
        return width - this.width;
    }
    getDiffHeight(height) {
        return height - this.height;
    }
    toDiff(rect) {
        return new Rect(rect.x - this.x, rect.y - this.y, rect.width - this.width, rect.height - this.height);
    }
    setXByWidthPercent(wPercent) {
        let { value, noLink } = this.valueLinkControl(wPercent);
        this.setX({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, value), noLink });
    }
    set xByWidthPercent(wPercent) {
        this.setXByWidthPercent(wPercent);
    }
    setXByWidthRatio(wRatio) {
        let { value, noLink } = this.valueLinkControl(wRatio);
        this.setX({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, value), noLink });
    }
    set xByWidthRatio(wRatio) {
        this.setXByWidthRatio(wRatio);
    }
    setYByHeightPercent(hPercent) {
        let { value, noLink } = this.valueLinkControl(hPercent);
        this.setY({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, value), noLink });
    }
    set yByHeightPercent(hPercent) {
        this.setYByHeightPercent(hPercent);
    }
    setYByHeightRatio(ratio) {
        let { value, noLink } = this.valueLinkControl(ratio);
        this.setY({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, value), noLink });
    }
    set yByHeightRatio(ratio) {
        this.setYByHeightRatio(ratio);
    }
    addXByWidthPercent(wPercent) {
        let { value, noLink } = this.valueLinkControl(wPercent);
        this.setX({ value: this.x + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, value), noLink });
    }
    addXByWidthRatio(wRatio) {
        let { value, noLink } = this.valueLinkControl(wRatio);
        this.setX({ value: this.x + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, value), noLink });
    }
    addYByHeightPercent(hPercent) {
        let { value, noLink } = this.valueLinkControl(hPercent);
        this.setY({ value: this.y + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, value), noLink });
    }
    addYByHeightRatio(ratio) {
        let { value, noLink } = this.valueLinkControl(ratio);
        this.setY({ value: this.y + _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, value), noLink });
    }
    setWidthByWidthPercent(wPercent) {
        let { value, noLink } = this.valueLinkControl(wPercent);
        this.setWidth({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, value), noLink });
    }
    set widthByWidthPercent(wPercent) {
        this.setWidthByWidthPercent(wPercent);
    }
    setWidthByWidthRatio(wRatio) {
        let { value, noLink } = this.valueLinkControl(wRatio);
        this.setWidth({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, value), noLink });
    }
    set widthByWidthRatio(wRatio) {
        this.setWidthByWidthRatio(wRatio);
    }
    setHeightByHeightPercent(hPercent) {
        let { value, noLink } = this.valueLinkControl(hPercent);
        this.setHeight({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, value), noLink });
    }
    set heightByHeightPercent(hPercent) {
        this.setHeightByHeightPercent(hPercent);
    }
    setHeightByHeightRatio(hRatio) {
        let { value, noLink } = this.valueLinkControl(hRatio);
        this.setHeight({ value: _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, value), noLink });
    }
    set heightByHeightRatio(hRatio) {
        this.setHeightByHeightRatio(hRatio);
    }
    copyByPercent(percentOrX, percentY) {
        return new Rect(this.x, this.y, _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.width, percentOrX), _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInPercent(this.height, percentY ?? percentOrX));
    }
    copyByRatio(ratioOrX, ratioY) {
        return new Rect(this.x, this.y, _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.width, ratioOrX), _math_MathUtil__WEBPACK_IMPORTED_MODULE_1__.MathUtil.getValueByTotalInRatio(this.height, ratioY ?? ratioOrX));
    }
    isIn(data) {
        if (data instanceof Rect) {
            return this.isIn(data.start) && this.isIn(data.end);
        }
        else {
            return data.x >= this.start.x && data.x <= this.end.x && data.y >= this.start.y && data.y <= this.end.y;
        }
    }
    isOut(data) {
        if (data instanceof Rect) {
            return !this.isOverlap(data);
        }
        else {
            return !this.isIn(data);
        }
    }
    isOverlap(data) {
        if (data instanceof Rect) {
            /*
       새로운 로직은 반대로 "겹치지 않는 조건"을 찾고, 그 조건에 해당하지 않으면 "겹친다"고 판단하는
        방식입니다. 이 방법이 훨씬 간단하고 모든 경우를 처리할 수 있습니다.
      
        두 사각형(A와 B)이 겹치지 않으려면, 다음 네 가지 조건 중 하나라도 만족해야 합니다.
         1. A가 B의 완전히 왼쪽에 있을 때
             * A의 오른쪽 끝(this.endX)이 B의 왼쪽 시작(data.x)보다 왼쪽에 있는 경우
             * 코드: this.endX < data.x
      
      
         2. A가 B의 완전히 오른쪽에 있을 때
             * A의 왼쪽 시작(this.x)이 B의 오른쪽 끝(data.endX)보다 오른쪽에 있는 경우
             * 코드: this.x > data.endX
      
      
         3. A가 B의 완전히 위쪽에 있을 때
             * A의 아래쪽 끝(this.endY)이 B의 위쪽 시작(data.y)보다 위쪽에 있는 경우
             * 코드: this.endY < data.y
      
      
         4. A가 B의 완전히 아래쪽에 있을 때
             * A의 위쪽 시작(this.y)이 B의 아래쪽 끝(data.endY)보다 아래쪽에 있는 경우
             * 코드: this.y > data.endY
             */
            const noOverlap = this.endX < data.x ||
                this.x > data.endX ||
                this.endY < data.y ||
                this.y > data.endY;
            return !noOverlap;
            // return (
            //   this.isOverlap(data.leftTop) ||
            //   this.isOverlap(data.rightTop) ||
            //   this.isOverlap(data.rightBottom) ||
            //   this.isOverlap(data.leftBottom)) ||
            //   (
            //     data.start.x < this.x && data.start.y < this.y &&
            //     data.end.x > this.end.x && data.end.y > this.end.y
            //   );
        }
        else {
            return this.isIn(data);
        }
    }
    toString() {
        return `x:${this.x}, y:${this.y}, width: ${this.width}, height: ${this.height}`;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/entity/SizeType.ts":
/*!***************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/entity/SizeType.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isSizeType: () => (/* binding */ isSizeType)
/* harmony export */ });
const isSizeType = (obj) => !!obj &&
    typeof obj.width === 'number' &&
    typeof obj.height === 'number';


/***/ }),

/***/ "../../packages/@dooboostore/core/src/entity/Vector.ts":
/*!*************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/entity/Vector.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Vector: () => (/* binding */ Vector)
/* harmony export */ });
/* harmony import */ var _Point3D__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Point3D */ "../../packages/@dooboostore/core/src/entity/Point3D.ts");
/* harmony import */ var _Point2D__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Point2D */ "../../packages/@dooboostore/core/src/entity/Point2D.ts");
// https://p5js.org/ko/


class Vector {
    x;
    y;
    z;
    constructor(x, y, z) {
        if (x instanceof _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            this.x = x.x;
            this.y = x.y;
            this.z = x.z;
        }
        else if (typeof x === 'object') {
            this.x = x.x ?? 0;
            this.y = x.y ?? 0;
            this.z = x.z ?? 0;
        }
        else {
            this.x = x ?? 0;
            this.y = y ?? 0;
            this.z = z ?? 0;
        }
    }
    set(v, y = 0, z = 0) {
        if (v instanceof Vector || v instanceof _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            this.set(v.x || 0, v.y || 0, v.z || 0);
        }
        else {
            this.x = v;
            this.y = y;
            this.z = z;
        }
        return this;
    }
    get() {
        return new Vector(this.x, this.y, this.z);
    }
    // 피타고라스의 정리는 a의 제곱 더하기 b 의 제곱은 c 의 제곱과 같다는 것을 정의합니다.
    mag() {
        const x = this.x;
        const y = this.y;
        const z = this.z;
        return Math.sqrt(x * x + y * y + z * z); // 의 제곱근을 리턴하면 길이가 반환된다.
    }
    add(v, y = 0, z = 0) {
        if (v instanceof Vector || v instanceof _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            this.x += v.x;
            this.y += v.y;
            this.z += v.z;
        }
        else {
            this.x += v;
            this.y += y;
            this.z += z;
        }
    }
    toAdd(v1, v2) {
        return new Vector(v1.x + v2.x, v1.y + v2.y, v1.x + v2.y);
    }
    // public static add(v1: Vector, v2: Vector): Vector {
    //   return new Vector(v1.x + v2.x, v1.y + v2.y, v1.x + v2.y);
    // }
    sub(v, y = 0, z = 0) {
        if (v instanceof Vector || v instanceof _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            this.x -= v.x;
            this.y -= v.y;
            this.z -= v.z;
        }
        else {
            this.x -= v;
            this.y -= y;
            this.z -= z;
        }
    }
    toSub(v2) {
        const v1 = this;
        return new Vector(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);
    }
    //
    // public static sub(v1: Vector, v2: Vector): Vector {
    //     return new Vector(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);
    // }
    mult(v) {
        if (v instanceof Vector || v instanceof _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            this.x *= v.x;
            this.y *= v.y;
            this.z *= v.z;
        }
        else {
            this.x *= v;
            this.y *= v;
            this.z *= v;
        }
        return this;
    }
    toMult(v2) {
        const v1 = this;
        return new Vector(v1.x *= v2.x, v1.y *= v2.y, v1.z *= v2.z);
    }
    // public static mult(v1: Vector, v2: Vector) {
    //   return new Vector(v1.x *= v2.x, v1.y *= v2.y, v1.z *= v2.z);
    // }
    div(v) {
        if (v instanceof Vector || v instanceof _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            this.x /= v.x;
            this.y /= v.y;
            this.z /= v.z;
        }
        else {
            this.x /= v;
            this.y /= v;
            this.z /= v;
        }
        return this;
    }
    toDiv(d) {
        const v = this;
        const rv = v.get();
        rv.x /= d;
        rv.y /= d;
        rv.z /= d;
        return rv;
    }
    // public static div(v: Vector, d: number): Vector {
    //   const rv = v.get();
    //   rv.x /= d;
    //   rv.y /= d;
    //   rv.z /= d;
    //   return rv;
    // }
    dist(v) {
        const dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;
        return Math.sqrt(dx * dx + dy * dy + dz * dz);
    }
    toDist(v2) {
        const v1 = this;
        const dx = v1.x - v2.x, dy = v1.y - v2.y, dz = v1.z - v2.z;
        return Math.sqrt(dx * dx + dy * dy + dz * dz);
    }
    // public static dist(v1: Vector, v2: Vector): number {
    //   const dx = v1.x - v2.x,
    //     dy = v1.y - v2.y,
    //     dz = v1.z - v2.z;
    //   return Math.sqrt(dx * dx + dy * dy + dz * dz);
    // }
    dot(v, y, z) {
        if (v instanceof Vector || v instanceof _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            return this.x * v.x + this.y * v.y + this.z * v.z;
        }
        ;
        return this.x * v + this.y * y + this.z * z;
    }
    cross(v) {
        const x = this.x, y = this.y, z = this.z;
        return new Vector(y * v.z - v.y * z, z * v.x - v.z * x, x * v.y - v.x * y);
    }
    normalize() {
        const m = this.mag();
        if (m > 0)
            this.div(m);
    }
    limit(high) {
        if (this.mag() > high) {
            this.normalize();
            this.mult(high);
        }
    }
    heading2D() {
        return -Math.atan2(-this.y, this.x);
    }
    random2D() {
        return this.fromAngle(Math.random() * (2 * Math.PI));
    }
    fromAngle(angle, length = 1) {
        return new Vector(length * Math.cos(angle), length * Math.sin(angle), 0);
    }
    ;
    fromAngles(theta, phi, length = 1) {
        const cosPhi = Math.cos(phi);
        const sinPhi = Math.sin(phi);
        const cosTheta = Math.cos(theta);
        const sinTheta = Math.sin(theta);
        return new Vector(length * sinTheta * sinPhi, -length * cosTheta, length * sinTheta * cosPhi);
    }
    ;
    array() {
        return [this.x, this.y, this.z];
    }
    toPoint3D() {
        return new _Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D(this.x, this.y, this.z);
    }
    toPoint2D() {
        return new _Point2D__WEBPACK_IMPORTED_MODULE_1__.Point2D(this.x, this.y);
    }
    copy() {
        return new Vector(this.x, this.y, this.z);
    }
    toString() {
        return '[' + this.x + ', ' + this.y + ', ' + this.z + ']';
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/entity/object/obj/Obj.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/entity/object/obj/Obj.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Obj: () => (/* binding */ Obj)
/* harmony export */ });
/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Vector */ "../../packages/@dooboostore/core/src/entity/Vector.ts");
/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Rect */ "../../packages/@dooboostore/core/src/entity/Rect.ts");


class Obj extends _Vector__WEBPACK_IMPORTED_MODULE_0__.Vector {
    volume = 0; // 부피
    mass = 0; // 질량
    e = 0; // 탄성
    rotate = 0; // 회전
    width = 0; // 너비
    height = 0; // 높이
    data;
    // public age = 0; // 생성된 시간 가중치
    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform
    /*
    a, d: 가로/세로 스케일
    b, c: 기울이기(skew)
    e, f: 이동(translate)
    --------------
    a, b, c, d, e, f
   */
    transform = [1, 0, 0, 1, 0, 0];
    color = {
        r: 0,
        g: 0,
        b: 0,
        a: 255
    };
    id;
    // public data?: T;
    constructor(data) {
        super();
        this.updateObjWithDefaults(data);
    }
    copyObj() {
        return new Obj({
            x: this.x,
            y: this.y,
            z: this.z,
            volume: this.volume,
            mass: this.mass,
            e: this.e,
            rotate: this.rotate,
            width: this.width,
            height: this.height,
            transform: [...this.transform],
            color: { ...this.color },
            data: { ...this.data }
        });
    }
    updateObjWithDefaults(data) {
        if (data) {
            this.x = data.x ?? this.x;
            this.y = data.y ?? this.y;
            this.z = data.z ?? this.z;
            this.volume = data.volume ?? this.volume;
            this.mass = data.mass ?? this.mass;
            this.e = data.e ?? this.e;
            this.rotate = data.rotate ?? this.rotate;
            this.width = data.width ?? this.width;
            this.height = data.height ?? this.height;
            this.transform = [...(data.transform ?? this.transform)];
            this.color = { ...(data.color ?? this.color) };
            const t = data.data ?? this.data;
            this.data = t ? { ...t } : undefined;
        }
    }
    setObj(data) {
        if (data) {
            this.x = data.x ?? 0;
            this.y = data.y ?? 0;
            this.z = data.z ?? 0;
            this.volume = data.volume ?? 0;
            this.mass = data.mass ?? 0;
            this.e = data.e ?? 0;
            this.rotate = data.rotate ?? 0;
            this.width = data.width ?? 0;
            this.height = data.height ?? 0;
            this.transform = [...(data.transform ?? [1, 0, 0, 1, 0, 0])];
            this.color = { ...(data.color ?? { r: 0, g: 0, b: 0, a: 255 }) };
            const data1 = data.data;
            this.data = data1 ? { ...data1 } : undefined;
        }
    }
    toRect() {
        return new _Rect__WEBPACK_IMPORTED_MODULE_1__.Rect(this.x, this.y, this.width, this.height);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/expression/Expression.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/expression/Expression.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Expression: () => (/* binding */ Expression)
/* harmony export */ });
var Expression;
(function (Expression) {
    // html = html.replace(/\$\{[\s\S]*?\}\$/g, '');
    Expression.bindExpression = (expression, bind) => {
        // ${data}  wow  ${wow:parameter}
        // expression에서 ${...} 형태를 모두 찾아서 처리
        return (expression ?? '').replace(/\$\{([\s\S.]*?)\}/g, (_, group) => {
            // 파라미터가 있는 경우: name:param
            const [name, param] = group.split(':');
            const binder = bind[name];
            if (!binder)
                return '';
            if (typeof binder === 'function') {
                return binder(bind[param]);
            }
            return binder;
        });
    };
    /**
     * @deprecated
     */
    // export namespace Group {
    // export const isExpression = (data: string | null) => {
    //     // const reg = /(?:[$#]\{(?:(([$#]\{)??[^$#]?[^{]*?)\}[$#]))/g;
    //     const reg = /[$#]\{([\s\S.]*?)\}[$#]/g;
    //     return reg.test(data ?? '');
    //   }
    //
    // export const expressionGroups = (data: string | null) => {
    //     // const reg = /(?:[$#]\{(?:(([$#]\{)??[^$#]*?)\}[$#]))/g;
    //     // const reg = /(?:[$#]\{(?:(([$#]\{)??[^$#]?[^{]*?)\}[$#]))/g;
    //     const reg = /[$#]\{([\s\S.]*?)\}[$#]/g;
    //     return StringUtils.regexExec(reg, data ?? '');
    //   }
    // }
    let Path;
    (function (Path) {
        Path.pathNameData = (pathName, urlExpression) => {
            const urls = pathName.split('/');
            const urlExpressions = urlExpression.split('/');
            if (urls.length !== urlExpressions.length) {
                return;
            }
            const data = {};
            for (let i = 0; i < urlExpressions.length; i++) {
                const it = urlExpressions[i];
                const urlit = urls[i];
                // ex) {serialNo:[0-9]+} or {no}  ..
                const execResult = /^\{(.+)\}$/g.exec(it);
                if (!execResult) {
                    if (it !== urlit) {
                        return;
                    }
                    continue;
                }
                // regex check
                const [name, regex] = execResult[1].split(':'); // group1
                if (regex && !new RegExp(regex).test(urlit)) {
                    return;
                }
                data[name] = urlit;
            }
            return data;
        };
    })(Path = Expression.Path || (Expression.Path = {}));
})(Expression || (Expression = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/fetch/Fetcher.ts":
/*!*************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/fetch/Fetcher.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Fetcher: () => (/* binding */ Fetcher)
/* harmony export */ });
class Fetcher {
    createPipe(config) {
        return {};
    }
    fetch(config) {
        return new Promise((resolve, reject) => {
            const pipe = this.createPipe(config);
            Promise.resolve()
                .then(() => {
                this.before(config, pipe);
                config?.before?.();
            })
                .then(() => {
                return this.execute(config);
                // return this.execute(config.target, config?.config);
            })
                .then(data => {
                const hasError = config.config?.hasErrorChecker?.(data);
                if (hasError) {
                    throw hasError;
                }
                pipe.responseData = data;
                this.afterSuccess(config, pipe);
                config?.afterSuccess?.();
                const gdata = (config?.transform ? config.transform(data) : data);
                this.afterSuccessTransform(config, pipe);
                resolve(gdata);
            })
                .catch(async (e) => {
                this.error(config, pipe, e);
                config?.error?.();
                if (config?.errorTransform) {
                    e = await config.errorTransform(e);
                }
                e = await this.errorTransform(e);
                reject(e);
            })
                .finally(() => {
                this.finally(config, pipe);
                config?.finally?.();
            });
        });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/fetch/HttpFetcher.ts":
/*!*****************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/fetch/HttpFetcher.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpFetcher: () => (/* binding */ HttpFetcher),
/* harmony export */   HttpResponseError: () => (/* binding */ HttpResponseError),
/* harmony export */   isHttpResponseError: () => (/* binding */ isHttpResponseError)
/* harmony export */ });
/* harmony import */ var _Fetcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fetcher */ "../../packages/@dooboostore/core/src/fetch/Fetcher.ts");
/* harmony import */ var _convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../convert/ConvertUtils */ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts");


class HttpResponseError extends Error {
    error;
    body;
    response;
}
const isHttpResponseError = (data) => {
    return data instanceof HttpResponseError;
};
class HttpFetcher extends _Fetcher__WEBPACK_IMPORTED_MODULE_0__.Fetcher {
    get(config) {
        config.config ??= {};
        config.config.fetch = config.config?.fetch ?? {};
        config.config.fetch.method = 'GET';
        return this.fetch(config);
    }
    post(config) {
        config.config ??= {};
        config.config.fetch = config.config?.fetch ?? {};
        config.config.fetch.method = 'POST';
        return this.fetch(config);
    }
    patch(config) {
        config.config ??= {};
        config.config.fetch = config.config?.fetch ?? {};
        config.config.fetch.method = 'PATCH';
        return this.fetch(config);
    }
    put(config) {
        config.config ??= {};
        config.config.fetch = config.config?.fetch ?? {};
        config.config.fetch.method = 'PUT';
        return this.fetch(config);
    }
    head(config) {
        config.config ??= {};
        config.config.fetch = config.config?.fetch ?? {};
        config.config.fetch.method = 'HEAD';
        return this.fetch(config);
    }
    delete(config) {
        config.config ??= {};
        config.config.fetch = config.config?.fetch ?? {};
        config.config.fetch.method = 'DELETE';
        return this.fetch(config);
    }
    async beforeProxyFetch(config) {
        return config;
    }
    async afterProxyFetch(config) {
        return config.response;
    }
    afterSuccess(config, pipe) { }
    afterSuccessTransform(config, pipe) { }
    before(config, pipe) { }
    error(config, pipe, e) { }
    finally(config, pipe) { }
    beforeFetch(fetch) { }
    afterFetch(fetch, response) { }
    // protected async errorTransform(e: any): Promise<HttpResponseError<any>> {
    async errorTransform(e) {
        const httpResponseError = new HttpResponseError();
        httpResponseError.error = e;
        if (e instanceof Response) {
            httpResponseError.response = e;
            try {
                httpResponseError.body = await e.clone().text();
                httpResponseError.message = e.statusText;
            }
            catch (e) {
                httpResponseError.body = e;
                httpResponseError.message = e.message;
            }
        }
        else {
            httpResponseError.body = e;
            httpResponseError.message = e.message;
        }
        return httpResponseError;
    }
    async execute(fetcherRequest) {
        let target = fetcherRequest.target;
        let config = fetcherRequest.config;
        // target data setting
        if (!(target instanceof URL) && typeof target !== 'string') {
            // const url: URL |  string = target.url;
            // if (typeof target.url === 'string') {
            // }
            const searchParams = _convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_1__.ConvertUtils.toURLSearchParams(target.searchParams ?? {});
            try {
                const url = typeof target.url === 'string' ? new URL(target.url) : target.url;
                searchParams.forEach((value, key) => {
                    url.searchParams.append(key, value);
                });
                target = url;
            }
            catch (e) {
                if (typeof target.url === 'string') {
                    const searchParamString = searchParams.toString();
                    target = target.url + (searchParamString ? '?' + searchParamString : '');
                }
                else {
                    target = '';
                }
            }
        }
        // before proxy fetch
        const beforeProxyData = { requestInfo: target, init: config?.fetch };
        let beforeData = config?.beforeProxyFetch
            ? await config?.beforeProxyFetch(config)
            : beforeProxyData.requestInfo;
        beforeData = config?.skipGlobalBeforeProxyFetch ? beforeProxyData : await this.beforeProxyFetch(beforeProxyData);
        target = beforeData.requestInfo;
        if (beforeData.init) {
            config ??= {};
            config.fetch = beforeData.init;
        }
        let abortedTimeout;
        if (config?.fetch && 'timeout' in config.fetch) {
            const abortController = new AbortController();
            abortedTimeout = setTimeout(() => {
                if (config?.fetch?.signal) {
                    const inputSignal = config.fetch.signal;
                    const listener = () => {
                        if (!abortController.signal.aborted) {
                            abortController.abort();
                        }
                        inputSignal.removeEventListener('abort', listener);
                    };
                    inputSignal.addEventListener('abort', listener);
                }
                if (!abortController.signal.aborted) {
                    abortController.abort();
                }
            }, config.fetch.timeout);
            config.fetch.signal = abortController.signal;
        }
        this.beforeFetch({ target, requestInit: config?.fetch });
        return (config.fetcher ?? fetch)(target, config?.fetch)
            .then(async (it) => {
            // console.log('httpFetch!!!', Array.from(it.headers))
            this.afterFetch({ target: target, requestInit: config?.fetch }, it);
            // after proxy fetch
            // @ts-ignore
            const afterProxyData = {
                fetch: { target: target, requestInit: config.fetch },
                config: beforeData,
                response: it
            };
            it = config?.afterProxyFetch ? await config.afterProxyFetch(afterProxyData) : it;
            // @ts-ignore
            it = config?.skipGlobalAfterProxyFetch ? it : await this.afterProxyFetch(afterProxyData);
            config?.fetchResponseAfterCallBack?.(it, config);
            if (!config?.allowedResponseNotOk && !it.ok) {
                throw it;
            }
            const data = config?.hasResponseErrorChecker?.(it, config);
            if (data) {
                throw data;
            }
            return it;
        })
            .finally(() => {
            if (abortedTimeout) {
                clearTimeout(abortedTimeout);
            }
        });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/fetch/HttpJsonFetcher.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/fetch/HttpJsonFetcher.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpJsonFetcher: () => (/* binding */ HttpJsonFetcher)
/* harmony export */ });
/* harmony import */ var _HttpFetcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HttpFetcher */ "../../packages/@dooboostore/core/src/fetch/HttpFetcher.ts");

class HttpJsonFetcher extends _HttpFetcher__WEBPACK_IMPORTED_MODULE_0__.HttpFetcher {
    updateJsonFetchConfigAndData(config) {
        const headers = {
            'Content-Type': 'application/json',
            Accept: 'application/json, text/plain, */*'
        };
        config.config ??= {};
        config.config.fetch ??= {};
        config.config.fetch.headers ??= {};
        config.config.fetch.headers = { ...headers, ...config.config.fetch?.headers };
        if (config.config?.fetch?.body && typeof config.config?.fetch?.body !== 'string') {
            config.config.fetch.body = JSON.stringify(config.config.fetch.body);
        }
        return config;
    }
    get(config) {
        return super.get(config);
    }
    delete(config) {
        return super.delete(config);
    }
    post(config) {
        return super.post(config);
    }
    patch(config) {
        return super.patch(config);
    }
    put(config) {
        return super.put(config);
    }
    head(config) {
        return super.head(config);
    }
    postJson(config) {
        return super.post(this.updateJsonFetchConfigAndData(config));
    }
    patchJson(config) {
        return super.patch(this.updateJsonFetchConfigAndData(config));
    }
    putJson(config) {
        return super.put(this.updateJsonFetchConfigAndData(config));
    }
    async errorTransform(e) {
        const httpResponseError = new _HttpFetcher__WEBPACK_IMPORTED_MODULE_0__.HttpResponseError();
        httpResponseError.error = e;
        if (e instanceof Response) {
            httpResponseError.response = e;
            try {
                httpResponseError.body = await e.clone().json();
                httpResponseError.message = e.statusText;
            }
            catch (parseError) {
                httpResponseError.body = parseError; // Store the parsing error
                httpResponseError.message = parseError.message; // Use parsing error message
            }
        }
        else {
            httpResponseError.body = e;
            httpResponseError.message = e.message;
        }
        return httpResponseError;
    }
    // protected execute(target: HttpFetcherTarget, config?: HttpJsonFetcherConfig<C, any>): Promise<any> {
    execute(fetcherRequest) {
        return super.execute(fetcherRequest).then((response) => {
            // fetch에 있는 content-length는 서버에서 보낸값이 0 이여도 자체적으로 따로 판단해서 0이상이 나오는경우가 있다. 그리고 서버에서주는 header값도 믿긴 어렵다.
            // const contentLength = response.headers.get('Content-Length');
            // const hasBody = contentLength && parseInt(contentLength, 10) > 0;
            // console.log('hgasbody', hasBody)
            const config = fetcherRequest.config;
            if (config?.bypassTransform) {
                return response;
            }
            if (config?.executeTransform) {
                return config.executeTransform(response);
            }
            else {
                if (config?.transformText) {
                    return response?.text();
                }
                else {
                    return response?.text().then(it => {
                        if ((it ?? '').length > 0) {
                            return JSON.parse(it);
                        }
                    });
                }
            }
        });
        // .catch(e => {
        //   if (config?.parsingExceptionDefault) {
        //     return config.parsingExceptionDefault(e);
        //   } else {
        //     throw e;
        //   }
        // });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/math/MathUtil.ts":
/*!*************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/math/MathUtil.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MathUtil: () => (/* binding */ MathUtil)
/* harmony export */ });
/* harmony import */ var _entity_Point3D__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../entity/Point3D */ "../../packages/@dooboostore/core/src/entity/Point3D.ts");
/* harmony import */ var _entity_Vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../entity/Vector */ "../../packages/@dooboostore/core/src/entity/Vector.ts");
/* harmony import */ var _entity_object_obj_Obj__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entity/object/obj/Obj */ "../../packages/@dooboostore/core/src/entity/object/obj/Obj.ts");
/* harmony import */ var _entity_Point2D__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entity/Point2D */ "../../packages/@dooboostore/core/src/entity/Point2D.ts");




var MathUtil;
(function (MathUtil) {
    MathUtil.getMinByObjectArray = (objectArray, varName) => {
        let min;
        if (varName && objectArray && objectArray.length > 0) {
            min = objectArray[0][varName];
            for (let i = 1; i < objectArray.length; i++) {
                min = Math.min(min, objectArray[i][varName]);
            }
        }
        return min;
    };
    MathUtil.hypot = (...data) => {
        // 2차원 예시
        // Math.hypot(3, 4);  // 결과: 5 (3² + 4² = 9 + 16 = 25, √25 = 5)
        // 3차원 예시
        //     Math.hypot(3, 4, 5);  // 결과: 7.0710678118654755
        return Math.hypot(...data);
    };
    // 피타고라스 정리 함수
    MathUtil.pythagorean = (a, b) => {
        /*
        피타고라스 정리
        a^2 + b^2 = c^2
        c = √(a^2 + b^2)
         */
        // return Math.sqrt(start * start + end * end);
        return Math.sqrt(a * a + b * b);
    };
    MathUtil.getMaxByObjectArray = (objectArray, varName) => {
        let max;
        if (varName && objectArray && objectArray.length > 0) {
            max = objectArray[0][varName];
            for (let i = 1; i < objectArray.length; i++) {
                max = Math.max(max, objectArray[i][varName]);
            }
        }
        return max;
    };
    MathUtil.sum = (array) => {
        return array.reduce((acc, curr) => acc + curr, 0);
    };
    MathUtil.avg = (array) => {
        return array.length > 0 ? MathUtil.sum(array) / array.length : 0;
    };
    MathUtil.minMax = (data, minMax) => {
        return Math.min(Math.max(data, minMax.min), minMax.max);
    };
    MathUtil.max = (array) => {
        return array.length > 0 ? Math.max(...array) : undefined;
    };
    MathUtil.min = (array) => {
        return array.length > 0 ? Math.min(...array) : undefined;
    };
    MathUtil.getSumByObjectArray = (objectArray, varName) => {
        let sum = 0;
        if (varName && objectArray && objectArray.length > 0) {
            for (let i = 0; i < objectArray.length; i++) {
                sum += objectArray[i][varName];
            }
        }
        return sum;
    };
    /**
     * Converts value to radians based on given type.
     * @param data - The value to convert to radians
     * @param option - Conversion type configuration
     * @param option.type - Type of conversion:
     *                      'degreeAngle' - Converts from degrees to radians
     *                      'ratio' - Multiplies value by 2π (input range 0-1)
     *                      'percent' - Converts percentage to 2π ratio (input range 0-100)
     * @returns The converted value in radians
     * @example
     * // Convert 180 degrees to radians (3.14...)
     * radians(180, {type: 'degreeAngle'})
     *
     * // Convert 0.5 ratio to radians (3.14...)
     * radians(0.5, {type: 'ratio'})
     *
     * // Convert 50% to radians (3.14...)
     * radians(50, {type: 'percent'})
     */
    MathUtil.radians = (data, { type = 'degreeAngle' }) => {
        /*
         radian
         * 1.57..: 90도, PI/2
         * 3.14..: 180도, PI
         * 4.71..: 270도, PI + PI/2
         * 6.28..: 360도, PI * 2
         */
        if (type === 'ratio') {
            return (data * 2) * Math.PI;
        }
        else if (type === 'percent') {
            return ((data / 100) * 2) * Math.PI;
        }
        else {
            // return data * Math.PI / 180;
            return data / 180 * Math.PI;
        }
    };
    MathUtil.degrees = (data, { type = 'degreeAngle' }) => {
        if (type === 'ratio') {
            return data * 360;
        }
        else if (type === 'percent') {
            return (data / 100) * 360;
        }
        else {
            return data * 180 / Math.PI;
        }
    };
    // static createCanvas(w, h) {
    //     let canvas = document.createElement('canvas');
    //     canvas.width = w;
    //     canvas.height = h;
    //     return canvas;
    // }
    //
    // static copyCanvas(canvas) {
    //     let newCanvas = document.createElement('canvas');
    //     newCanvas.width = canvas.width;
    //     newCanvas.height = canvas.height;
    //     context = newCanvas.getContext('2d');
    //     context.drawImage(canvas, 0, 0);
    //     return newCanvas;
    // }
    /**
     1. 비율의 개념
     비율(Ratio): 두 양의 상대적인 크기를 비교한 값으로, 일반적으로 분수나 소수로 표현됩니다. 예를 들어, "2:3" 비율은 두 수의 비가 2 대 3이라는 뜻이며, 이는 2/3로도 나타낼 수 있습니다.
     단위 비율(Normalized Ratio): 한 값을 기준으로 다른 값을 조정한 비율을 의미합니다. 여기서는 너비(w)를 1로 정규화(normalize)하여 높이(h)의 상대적 값을 구하는 것이 목표입니다.
     이미지 비율: 이미지의 너비와 높이 비율은 보통 "w:h" 형식으로 표현되며, 이 비율을 유지하면서 크기를 조정할 때 유용합니다.
     2. 계산 방법
     주어진 데이터:
  
     너비(w) = 1652 픽셀
     높이(h) = 421 픽셀
     목표: 너비를 1로 보았을 때 높이의 값 구하기
     단계별 계산
     원래 비율 구하기:
     이미지의 비율은 w:h = 1652:421입니다.
     이를 분수로 표현하면 1652 / 421입니다.
     너비를 1로 정규화:
     너비를 1로 만들기 위해, 원래 너비(1652)를 1로 나누고, 이를 높이에도 동일하게 적용합니다.
     정규화된 높이 = 원래 높이(h) ÷ 원래 너비(w)
     수식: h' = h / w (여기서 h'는 정규화된 높이)
     계산 적용:
     정규화된 높이 = 421 / 1652
     계산: 421 ÷ 1652 ≈ 0.25485 (소수점 약 5자리까지)
     결과 해석:
     너비가 1일 때 높이는 약 0.25485입니다. 이는 높이가 너비의 약 25.485%에 해당함을 의미합니다.
     검증
     원래 비율을 유지하려면, 정규화된 값을 역으로 적용해 원래 값을 복원할 수 있어야 합니다.
     정규화된 비율(0.25485)을 1652에 곱하면: 1652 * 0.25485 ≈ 421, 이는 원래 높이와 일치하므로 계산이 올바름.
     3. 수식 정리
     일반적인 정규화 수식:
     정규화된 높이(h') = h / w
     정규화된 너비(w') = w / w = 1 (기준값)
     이 문제 적용:
     h' = 421 / 1652 ≈ 0.25485
     4. 대안: 비율로 표현
     비율을 "1:비율값" 형식으로 표현하려면, 높이를 너비로 나눈 값을 그대로 사용.
     결과: 1 : 0.25485 또는 약 1 : 0.255 (소수점 반올림).
     5. 추가 개념
     비례식: 이미지 크기를 조정할 때 비율을 유지하려면, w1 / h1 = w2 / h2를 만족해야 합니다. 여기서 w2 = 1로 설정한 경우, h2 = h1 / w1이 됩니다.
     실제 적용: 웹 디자인이나 그래픽에서 이미지를 리사이징할 때, 원본 비율(1652:421)을 유지하려면 이 정규화된 값을 사용해 높이를 계산.
     <script>
     const w = 1652;
     const h = 421;
     const normalizedHeight = h / w;
     console.log(`정규화된 높이: ${normalizedHeight.toFixed(5)}`); // 0.25485
     console.log(`원래 비율 확인: ${w * normalizedHeight} ≈ ${h}`); // 약 421
     </script>
     */
    MathUtil.ratio = (numerator, denominator, multiplier = 1) => {
        // numerator(분자) : denominator(분모) = multiplier : x
        // x = multiplier * denominator / numerator
        return multiplier * (denominator / numerator);
        // a:b = c:x 비례식을 이용해 x 값을 구함
        // ax = bc
        // x = bc/a
    };
    //end - start    끝과 시작의 사이길이를 취득한다.
    MathUtil.getBetweenLength = (start, end) => {
        return end - start;
    };
    //전체값에서 일부값은 몇 퍼센트? 계산법 공식    tot에서  data는 몇%인가.
    MathUtil.getPercentByTotal = (tot, data) => {
        /*
        전체값에서 일부값은 몇 퍼센트? 계산법 공식
        일부값 ÷ 전체값 X 100
        예제) 300에서 105는 몇퍼센트?
        답: 35%
        */
        return (data / tot) * 100;
    };
    MathUtil.getRatioByTotal = (tot, data) => {
        return (data / tot);
    };
    //전체값의 몇 퍼센트는 얼마? 계산법 공식    tot에서  wantPercent는 몇인가?
    MathUtil.getValueByTotalInPercent = (tot, wantPercent) => {
        /*
        전체값 X 퍼센트 ÷ 100
        예제) 300의 35퍼센트는 얼마?
        답) 105
         */
        return (tot * wantPercent) / 100;
    };
    MathUtil.getValueByTotalInRatio = (tot, ratio) => {
        return (tot * ratio);
    };
    //숫자를 몇 퍼센트 증가시키는 공식    tot에서  wantPercent을 증가 시킨다
    MathUtil.getValuePercentUp = (tot, wantPercent) => {
        /*
        숫자를 몇 퍼센트 증가시키는 공식
        숫자 X (1 + 퍼센트 ÷ 100)
        예제) 1548을 66퍼센트 증가하면?
        답) 2569.68
         */
        return tot * (1 + wantPercent / 100);
    };
    MathUtil.getValueRatioUp = (tot, ratio) => {
        return tot * (1 + ratio);
    };
    //숫자를 몇 퍼센트 감소하는 공식    tot에서  wantPercent을 증감 시킨다
    MathUtil.getValuePercentDown = (tot, wantPercent) => {
        /*
        숫자를 몇 퍼센트 감소하는 공식
        숫자 X (1 - 퍼센트 ÷ 100)
        예제) 1548을 66퍼센트 감소하면?
        답) 526.32
         */
        return tot * (1 - wantPercent / 100);
    };
    MathUtil.getValueRatioDown = (tot, ratio) => {
        return tot * (1 - ratio);
    };
    //바례식
    // A:B = C:X    => 30:50 = 33 : x
    // 30X = 50*33
    // X = BC / 30
    // Bezier
    // https://cubic-bezier.com/#.17,.67,.83,.67
    // https://matthewlein.com/tools/ceaser
    // https://easings.net/ko#
    // (0.250, 0.250, 0.750, 0.750); /* linear */
    MathUtil.beziers = (points, frame) => {
        const datas = new Array(frame).fill(undefined);
        for (let i = 0; i < datas.length; i++) {
            datas[i] = MathUtil.bezier(points, frame, i);
        }
        return datas;
    };
    // 처음점은 포함되지 않는다, 끝점은 포함된다.
    MathUtil.bezier = (points, frame, idx) => {
        if (points && points.length > 0) {
            const pv = points.map(it => new _entity_Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(it.x, it.y, it.z));
            const steps = [];
            pv.reduce((a, b) => {
                const step = a.toSub(b).div(frame).mult(idx + 1);
                steps.push(a.toSub(step));
                return b;
            });
            if (steps.length <= 1) {
                return steps[0];
            }
            return MathUtil.bezier(steps.map(it => new _entity_Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D(it)), frame, idx);
        }
        else {
            return new _entity_Vector__WEBPACK_IMPORTED_MODULE_1__.Vector();
        }
    };
    function cubicBezier(position, frameConfig, bezierConfig) {
        if (position.start instanceof _entity_object_obj_Obj__WEBPACK_IMPORTED_MODULE_2__.Obj && position.end instanceof _entity_object_obj_Obj__WEBPACK_IMPORTED_MODULE_2__.Obj) {
            const x = MathUtil.cubicBezier({ start: position.start.x, end: position.end.x }, frameConfig, bezierConfig);
            const y = MathUtil.cubicBezier({ start: position.start.y, end: position.end.y }, frameConfig, bezierConfig);
            const z = MathUtil.cubicBezier({ start: position.start.z, end: position.end.z }, frameConfig, bezierConfig);
            const v = MathUtil.cubicBezier({ start: position.start.volume, end: position.end.volume }, frameConfig, bezierConfig);
            const m = MathUtil.cubicBezier({ start: position.start.mass, end: position.end.mass }, frameConfig, bezierConfig);
            const e = MathUtil.cubicBezier({ start: position.start.e, end: position.end.e }, frameConfig, bezierConfig);
            const r = MathUtil.cubicBezier({ start: position.start.rotate, end: position.end.rotate }, frameConfig, bezierConfig);
            const w = MathUtil.cubicBezier({ start: position.start.width, end: position.end.width }, frameConfig, bezierConfig);
            const h = MathUtil.cubicBezier({ start: position.start.height, end: position.end.height }, frameConfig, bezierConfig);
            const t0 = MathUtil.cubicBezier({ start: position.start.transform[0], end: position.end.transform[0] }, frameConfig, bezierConfig);
            const t1 = MathUtil.cubicBezier({ start: position.start.transform[1], end: position.end.transform[1] }, frameConfig, bezierConfig);
            const t2 = MathUtil.cubicBezier({ start: position.start.transform[2], end: position.end.transform[2] }, frameConfig, bezierConfig);
            const t3 = MathUtil.cubicBezier({ start: position.start.transform[3], end: position.end.transform[3] }, frameConfig, bezierConfig);
            const t4 = MathUtil.cubicBezier({ start: position.start.transform[4], end: position.end.transform[4] }, frameConfig, bezierConfig);
            const t5 = MathUtil.cubicBezier({ start: position.start.transform[5], end: position.end.transform[5] }, frameConfig, bezierConfig);
            const colorR = MathUtil.cubicBezier({ start: position.start.color.r ?? 0, end: position.end.color.r ?? 0 }, frameConfig, bezierConfig);
            const colorG = MathUtil.cubicBezier({ start: position.start.color.g ?? 0, end: position.end.color.g ?? 0 }, frameConfig, bezierConfig);
            const colorB = MathUtil.cubicBezier({ start: position.start.color.b ?? 0, end: position.end.color.b ?? 0 }, frameConfig, bezierConfig);
            const colorA = MathUtil.cubicBezier({ start: position.start.color.a ?? 255, end: position.end.color.a ?? 255 }, frameConfig, bezierConfig);
            const objs = x.map((x, idx) => {
                const obj = new _entity_object_obj_Obj__WEBPACK_IMPORTED_MODULE_2__.Obj({ x, y: y[idx], z: z[idx] });
                obj.volume = v[idx];
                obj.mass = m[idx];
                obj.e = e[idx];
                obj.rotate = r[idx];
                obj.width = w[idx];
                obj.height = h[idx];
                obj.transform = [t0[idx], t1[idx], t2[idx], t3[idx], t4[idx], t5[idx]];
                obj.color = { r: colorR[idx], g: colorG[idx], b: colorB[idx], a: colorA[idx] };
                return obj;
            });
            return objs;
        }
        else if (position.start instanceof _entity_Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D && position.end instanceof _entity_Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D) {
            const x = MathUtil.cubicBezier({ start: position.start.x, end: position.end.x }, frameConfig, bezierConfig);
            const y = MathUtil.cubicBezier({ start: position.start.y, end: position.end.y }, frameConfig, bezierConfig);
            const z = MathUtil.cubicBezier({ start: position.start.z, end: position.end.z }, frameConfig, bezierConfig);
            return x.map((x, idx) => new _entity_Point3D__WEBPACK_IMPORTED_MODULE_0__.Point3D(x, y[idx], z[idx]));
        }
        const { start, end } = position;
        // ----
        const { frame } = frameConfig;
        let { p1x, p1y, p2x, p2y } = Array.isArray(bezierConfig) ? { p1x: bezierConfig[0], p1y: bezierConfig[1], p2x: bezierConfig[2], p2y: bezierConfig[3] } : bezierConfig;
        p1x = p1x === 'random' ? Math.random() : p1x;
        p1y = p1y === 'random' ? Math.random() : p1y;
        p2x = p2x === 'random' ? Math.random() : p2x;
        p2y = p2y === 'random' ? Math.random() : p2y;
        const result = [];
        const totalChange = end - start;
        // console.log('----222->',totalChange);
        // 3차 베지어 곡선 공식
        const bezier = (t) => {
            const t2 = Number(t * t);
            const t3 = Number(t2 * t);
            const mt = Number(1 - t);
            const mt2 = Number(mt * mt);
            const mt3 = Number(mt2 * mt);
            return mt3 * 0 + 3 * mt2 * t * Number(p1y) + 3 * mt * t2 * Number(p2y) + t3 * 1;
        };
        // frame 수만큼 계산, 시작점, 끝점 제외
        const targetFrame = frame + 1;
        for (let i = 1; i < targetFrame; i++) {
            // const t = frame <= 1 ? 1 : (i + 1) / frame;
            // const t = frame <= 1 ? 1 : (i + 1) / frame;
            const t = i / targetFrame;
            const progress = bezier(t);
            // console.log('pppppppp', progress);
            const value = start + totalChange * progress;
            result.push(value);
        }
        return result;
    }
    MathUtil.cubicBezier = cubicBezier;
    MathUtil.diff = (a, b) => {
        return Math.abs(a - b);
    };
    /*
    > 투영부분? 저부분 핵심부분 더  자세하게 알려줄래
  
  ✦ 네, 그럼요. 이 부분이 기하학적으로 어떤 의미를 가지는지 그림과 함께 머릿속으로 상상하며 이해하면
    쉽습니다.
  
    핵심 아이디어: 그림자 내리기 (Projection)
  
    가장 간단한 비유는 그림자입니다.
  
  
     * `선분 vw`: 땅에 놓여있는 막대기라고 상상해 보세요. (v는 시작점, w는 끝점)
     * `점 p`: 공중에 떠 있는 마우스 커서라고 상상해 보세요.
     * 목표: 마우스 커서(p)에서 막대기(vw)까지 가장 가까운 지점을 찾는 것.
  
  
    가장 가까운 지점은 p에서 막대기로 수직으로 선을 내렸을 때 만나는 점입니다. 마치 p 바로 위에 손전등을
    켜서 막대기에 그림자를 만드는 것과 같습니다. 이 그림자가 떨어지는 지점이 바로 투영(projection)입니다.
  
    ---
  
    코드 상세 분석
  
  
    let t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;
  
    이 한 줄의 코드는 바로 그 '그림자가 막대기의 어디에 떨어지는가'를 계산하는 과정입니다. 여기서 t는
    비율을 의미합니다.
  
    1. 벡터(Vector)로 생각하기
  
  
    코드를 이해하기 위해 두 개의 벡터를 생각해야 합니다.
  
  
     * 벡터 1 (`vw`): 막대기 자체의 방향과 길이를 나타내는 벡터입니다.
         * w.x - v.x (x방향)
         * w.y - v.y (y방향)
     * 벡터 2 (`vp`): 막대기 시작점에서 마우스 커서까지의 벡터입니다.
         * p.x - v.x (x방향)
         * p.y - v.y (y방향)
  
  
    2. 분자: 벡터 내적 (Dot Product)
  
    ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y))
  
  
    이 부분은 두 벡터 vp와 vw의 내적(dot product)을 계산하는 공식입니다. 벡터 내적은 두 벡터가 얼마나
    "같은 방향을 바라보고 있는지"를 나타내는 수치입니다.
  
  
     * 두 벡터가 서로 수직이면 내적은 0입니다.
     * 두 벡터가 같은 방향을 볼수록 내적 값은 커집니다.
  
    기하학적으로, `vp` 벡터를 `vw` 벡터 위로 투영(그림자)시켰을 때의 길이와 관련이 있습니다.
  
    3. 분모: l2
  
  
    l2는 앞에서 계산했듯이 막대기 벡터 vw의 길이의 제곱입니다.
  
    4. t의 의미: 비율
  
    결국 t는 다음과 같이 계산됩니다.
  
    t = (벡터 vp와 vw의 내적) / (벡터 vw의 길이 제곱)
  
  
    이 t 값이 바로 투영된 그림자 지점이 막대기 시작점 `v`로부터 얼마나 떨어져 있는지를 나타내는 비율이
    됩니다.
  
  
     * `t = 0`: 그림자가 정확히 막대기 시작점 v에 떨어집니다.
     * `t = 1`: 그림자가 정확히 막대기 끝점 w에 떨어집니다.
     * `t = 0.5`: 그림자가 정확히 막대기 한가운데에 떨어집니다.
     * `t < 0` (예: `t = -0.2`): p가 v의 "뒤쪽"에 있어서, 그림자가 막대기 시작점 이전에 떨어집니다.
       (막대기를 무한한 직선으로 봤을 때)
     * `t > 1` (예: `t = 1.5`): p가 w의 "앞쪽"에 있어서, 그림자가 막대기 끝점을 지나서 떨어집니다.
       (막대기를 무한한 직선으로 봤을 때)
  
    결론
  
  
    이 t 값을 계산하는 것이 핵심인 이유는, 마우스 포인터(p)와 가장 가까운 점이 막대기 내부에 있는지,
    아니면 양쪽 끝점 중 하나인지 판단할 수 있는 기준을 제공하기 때문입니다.
  
  
     * t가 0과 1 사이에 있다면, 가장 가까운 점은 막대기 위의 '그림자' 지점입니다.
     * t가 0보다 작다면, 가장 가까운 점은 막대기의 시작점 v입니다.
     * t가 1보다 크다면, 가장 가까운 점은 막대기의 끝점 w입니다.
  
  
    이것이 바로 다음 코드 라인 t = Math.max(0, Math.min(1, t));가 t를 0과 1 사이로 제한하는 이유입니다.
    이로써 가장 가까운 점이 항상 선분 위(양 끝점 포함)에 있도록 보장할 수 있습니다.
     */
    MathUtil.distSqToLineSegment = (p, v, w) => {
        const l2 = (v.x - w.x) ** 2 + (v.y - w.y) ** 2;
        if (l2 === 0)
            return (p.x - v.x) ** 2 + (p.y - v.y) ** 2;
        let t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;
        t = Math.max(0, Math.min(1, t));
        const projection = { x: v.x + t * (w.x - v.x), y: v.y + t * (w.y - v.y) };
        return (p.x - projection.x) ** 2 + (p.y - projection.y) ** 2;
    };
    // static bezirePointToPointVector(point: {point1: Point, point2?: Point, point3?: Point, point4?: Point}) {
    //     if (!point.point2) {
    //         point.point2 = point.point1;
    //     }
    //     if (!point.point3) {
    //         point.point3 = point.point2;
    //     }
    //     if (!point.point4) {
    //         point.point4 = point.point3;
    //     }
    //     return {
    //         point1: new PointVector(point.point1.x, point.point1.y, point.point1.z),
    //         point2: new PointVector(point.point2.x, point.point2.y, point.point2.z),
    //         point3: new PointVector(point.point3.x, point.point3.y, point.point3.z),
    //         point4: new PointVector(point.point4.x, point.point4.y, point.point4.z),
    //     }
    // }
    // static bezier(point: {point1: Point, point2?: Point, point3?: Point, point4?: Point}, frame: number, idx: number) {
    //     const pointVector = MathUtil.bezirePointToPointVector(point);
    //
    //     const point12Step = PointVector.sub(pointVector.point1, pointVector.point2).div(frame).mult(idx + 1);
    //     const point23Step = PointVector.sub(pointVector.point2, pointVector.point3).div(frame).mult(idx + 1);
    //     const point34Step = PointVector.sub(pointVector.point3, pointVector.point4).div(frame).mult(idx + 1);
    //
    //     pointVector.point1.sub(point12Step);
    //     pointVector.point2.sub(point23Step);
    //     pointVector.point3.sub(point34Step);
    //
    //     const point12MoveStep = PointVector.sub(pointVector.point1, pointVector.point2).div(frame);
    //     const point23MoveStep = PointVector.sub(pointVector.point2, pointVector.point3).div(frame);
    //     // const point34MoveStep = PointVector.sub(point3, point4).div(frame); // 더이상갈곳없음
    //
    //     const cnt = idx + 1;
    //     const point12MovePoint = point12MoveStep.mult(cnt)
    //     const point23MovePoint = point23MoveStep.mult(cnt);
    //     const combinationPoint1MovePoint = PointVector.sub(pointVector.point1, point12MovePoint); //new PointVector(point1.x - point12MovePoint.x, point1.y - point12MovePoint.y);
    //     const combinationPoint2MovePoint = PointVector.sub(pointVector.point2, point23MovePoint); // new PointVector(point2.x - point23MovePoint.x, point2.y - point23MovePoint.y);
    //
    //     const finalPointMoveStep =  PointVector.sub(combinationPoint1MovePoint, combinationPoint2MovePoint).div(frame);
    //     const finalPointMovePoint = finalPointMoveStep.mult(cnt);
    //     const final = PointVector.sub(combinationPoint1MovePoint, finalPointMovePoint);
    //     return final;
    // }
    //
    // static beziers(point: {point1: Point, point2?: Point, point3?: Point, point4?: Point}, frame: number) {
    //     const pointVector = MathUtil.bezirePointToPointVector(point);
    //     const frames = new Array(frame).fill(undefined) as PointVector[];
    //     for (let i = 0; i < frame; i++) {
    //         frames[i] = MathUtil.bezier(point, frame, i);
    //         // pointVector.point1.sub(point12Step);
    //         // pointVector.point2.sub(point23Step);
    //         // pointVector.point3.sub(point34Step);
    //         //
    //         // const point12MoveStep = PointVector.sub(pointVector.point1, pointVector.point2).div(frame);
    //         // const point23MoveStep = PointVector.sub(pointVector.point2, pointVector.point3).div(frame);
    //         // // const point34MoveStep = PointVector.sub(point3, point4).div(frame); // 더이상갈곳없음
    //         //
    //         // const cnt = i + 1;
    //         // const point12MovePoint = point12MoveStep.mult(cnt)
    //         // const point23MovePoint = point23MoveStep.mult(cnt);
    //         // const combinationPoint1MovePoint = PointVector.sub(pointVector.point1, point12MovePoint); //new PointVector(point1.x - point12MovePoint.x, point1.y - point12MovePoint.y);
    //         // const combinationPoint2MovePoint = PointVector.sub(pointVector.point2, point23MovePoint); // new PointVector(point2.x - point23MovePoint.x, point2.y - point23MovePoint.y);
    //         //
    //         // const finalPointMoveStep =  PointVector.sub(combinationPoint1MovePoint, combinationPoint2MovePoint).div(frame);
    //         // const finalPointMovePoint = finalPointMoveStep.mult(cnt);
    //         // const final = PointVector.sub(combinationPoint1MovePoint, finalPointMovePoint);
    //     }
    //     return frames;
    // }
    //   interface Point {
    //     x: number;
    //     y: number;
    //   }
    //
    //   interface BezierPathOptions {
    //     /**
    //      * 제어점을 얼마나 멀리 둘지 결정하는 값입니다. (기본값: 0.25)
    //      * 0 이면 거의 직선에 가깝고, 값이 커질수록 곡선의 휘어짐이 커집니다.
    //      * 음수 값을 주면 반대 방향으로 휩니다.
    //      */
    //     controlPointOffsetFactor?: number;
    //
    //     /**
    //      * 점들의 분포를 조절하는 가속도 계수입니다. (기본값: 1)
    //      * 1: 등간격 (선형)
    //      * > 1: 시작 부분에 점들이 모이고 끝으로 갈수록 간격이 넓어짐 (가속, ease-in)
    //      * < 1: 끝 부분에 점들이 모이고 시작 부분의 간격이 넓어짐 (감속, ease-out)
    //      * 예: 2는 제곱 가속, 0.5는 제곱근 감속.
    //      */
    //     accelerationFactor?: number;
    //   }
    //
    //   /**
    //    * 2차 베지에 곡선 위의 특정 t 값에서의 점 좌표를 계산합니다.
    //    * B(t) = (1-t)^2 * P0 + 2 * (1-t) * t * P1 + t^2 * P2
    //    * @param t 매개변수 (0에서 1 사이)
    //    * @param p0 시작점
    //    * @param p1 제어점
    //    * @param p2 끝점
    //    * @returns 계산된 점의 좌표
    //    */
    //   function quadraticBezier(t: number, p0: Point, p1: Point, p2: Point): Point {
    //     const mt = 1 - t; // (1-t)
    //     const mt2 = mt * mt; // (1-t)^2
    //     const t2 = t * t; // t^2
    //
    //     const x = mt2 * p0.x + 2 * mt * t * p1.x + t2 * p2.x;
    //     const y = mt2 * p0.y + 2 * mt * t * p1.y + t2 * p2.y;
    //
    //     return { x, y };
    //   }
    //
    //   /**
    //    * 출발점과 도착점 사이를 잇는 2차 베지에 곡선을 따라 이동할 좌표들을 계산합니다.
    //    * @param startPoint 출발점 좌표 { x, y }
    //    * @param endPoint 도착점 좌표 { x, y }
    //    * @param options 베지에 곡선 및 점 분포 옵션
    //    * @param numberOfSteps 생성할 중간 이동 좌표의 개수 (이동 경로상의 점 개수)
    //    * @returns 계산된 좌표들의 배열 (startPoint는 포함하지 않고, endPoint는 포함)
    //    */
    //   function getPointsOnBezierPath(
    //     startPoint: Point,
    //     endPoint: Point,
    //     options: BezierPathOptions = {}, // 기본값 빈 객체
    //     numberOfSteps: number
    //   ): Point[] {
    //     // --- 옵션 기본값 설정 ---
    //     const controlPointOffsetFactor = options.controlPointOffsetFactor ?? 0.25; // 기본값 0.25
    //     const accelerationFactor = options.accelerationFactor ?? 1; // 기본값 1 (선형)
    //
    //     // --- 입력값 유효성 검사 ---
    //     if (numberOfSteps <= 0) {
    //       console.warn("numberOfSteps는 0보다 커야 합니다.");
    //       return []; // 빈 배열 반환 또는 에러 처리
    //     }
    //
    //     const points: Point[] = [];
    //     const p0 = startPoint;
    //     const p2 = endPoint;
    //
    //     // --- 제어점(P1) 자동 계산 ---
    //     const midX = (p0.x + p2.x) / 2;
    //     const midY = (p0.y + p2.y) / 2;
    //
    //     const deltaX = p2.x - p0.x;
    //     const deltaY = p2.y - p0.y;
    //
    //     const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
    //
    //     let p1: Point;
    //
    //     if (distance === 0) {
    //       // 시작점과 끝점이 같으면 제어점도 같은 위치로 설정 (직선 이동 없음)
    //       p1 = { ...p0 };
    //       // 이 경우, 모든 계산된 점은 시작/끝 점과 동일하게 됩니다.
    //       // 요청에 따라 빈 배열을 반환하거나, 끝점을 numberOfSteps만큼 반환할 수도 있습니다.
    //       // 여기서는 계산 로직을 그대로 두어 동일한 점이 반복 생성되도록 합니다.
    //     } else {
    //       // 시작점에서 끝점으로의 벡터에 수직인 방향 벡터 계산 (시계 반대 방향 90도 회전)
    //       const perpX = -deltaY / distance;
    //       const perpY = deltaX / distance;
    //
    //       // 중간 지점에서 수직 방향으로 옵션에 따라 제어점 위치 계산
    //       const offset = distance * controlPointOffsetFactor;
    //       p1 = {
    //         x: midX + perpX * offset,
    //         y: midY + perpY * offset,
    //       };
    //     }
    //
    //     // --- 곡선 상의 점 계산 ---
    //     for (let i = 1; i <= numberOfSteps; i++) {
    //       // 1. 기본 파라미터 u 계산 (0 < u <= 1)
    //       const u = i / numberOfSteps;
    //       // 2. 가속도 적용된 파라미터 t 계산
    //       const t = Math.pow(u, accelerationFactor);
    //       // 3. 베지에 곡선 위의 점 계산
    //       const pointOnCurve = quadraticBezier(t, p0, p1, p2);
    //       points.push(pointOnCurve);
    //     }
    //
    //     return points; // 계산된 중간 좌표들의 배열 반환
    //   }
    //
    // // --- 사용 예시 ---
    //   const start: Point = { x: 4, y: 10 };
    //   const end: Point = { x: 50, y: 20 };
    //   const steps = 10; // 10개의 중간 지점 계산
    //
    // // 예시 1: 기본 옵션 (약간의 곡선, 등간격)
    //   const path1 = getPointsOnBezierPath(start, end, {}, steps);
    //   console.log("기본 옵션 경로:", path1.map(p => `(${p.x.toFixed(1)}, ${p.y.toFixed(1)})`).join(" -> "));
    //
    // // 예시 2: 더 많이 휘어지게 (offset 증가), 가속 효과 추가 (acceleration > 1)
    //   const path2 = getPointsOnBezierPath(start, end, { controlPointOffsetFactor: 0.6, accelerationFactor: 2 }, steps);
    //   console.log("강한 곡선 + 가속 경로:", path2.map(p => `(${p.x.toFixed(1)}, ${p.y.toFixed(1)})`).join(" -> "));
    //
    // // 예시 3: 반대 방향으로 휘게 (offset 음수), 감속 효과 추가 (acceleration < 1)
    //   const path3 = getPointsOnBezierPath(start, end, { controlPointOffsetFactor: -0.3, accelerationFactor: 0.5 }, steps);
    //   console.log("반대 곡선 + 감속 경로:", path3.map(p => `(${p.x.toFixed(1)}, ${p.y.toFixed(1)})`).join(" -> "));
    MathUtil.rotatePoint = (point, center, angleInRadians) => {
        // Translate point to origin so that center is the origin
        const translatedX = point.x - center.x;
        const translatedY = point.y - center.y;
        // Rotate point
        const rotatedX = translatedX * Math.cos(angleInRadians) - translatedY * Math.sin(angleInRadians);
        const rotatedY = translatedX * Math.sin(angleInRadians) + translatedY * Math.cos(angleInRadians);
        // Translate point back
        return new _entity_Point2D__WEBPACK_IMPORTED_MODULE_3__.Point2D(rotatedX + center.x, rotatedY + center.y);
    };
})(MathUtil || (MathUtil = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/BehaviorSubject.ts":
/*!***********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/BehaviorSubject.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BehaviorSubject: () => (/* binding */ BehaviorSubject)
/* harmony export */ });
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subject */ "../../packages/@dooboostore/core/src/message/Subject.ts");

class BehaviorSubject extends _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject {
    _value; // BehaviorSubject always has a current value
    constructor(initialValue) {
        super();
        this._value = initialValue; // Store the initial value
    }
    next(data) {
        this._value = data; // Update the current value
        super.next(data); // Multicast to all current subscribers
    }
    _subscribeToSubject(subscriber) {
        // Call parent's subscribe logic first
        const subscription = super._subscribeToSubject(subscriber);
        // Immediately emit the current value to the new subscriber
        // Only if the subject has not completed or errored
        if (!this._isStopped) { // _isStopped is from Subject
            subscriber.next(this._value);
        }
        else if (this._hasError) { // _hasError is from Subject
            subscriber.error(this._error); // _error is from Subject
        }
        else {
            subscriber.complete();
        }
        return subscription;
    }
    getValue() {
        if (this._hasError) {
            throw this._error;
        }
        return this._value;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/Observable.ts":
/*!******************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/Observable.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Observable: () => (/* binding */ Observable)
/* harmony export */ });
/* harmony import */ var _Subscriber___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subscriber. */ "../../packages/@dooboostore/core/src/message/Subscriber..ts");

class Observable {
    _producerFunction;
    constructor(producerFunction) {
        this._producerFunction = producerFunction;
    }
    subscribe(observer, e, c) {
        const partialObserver = {
            next: typeof observer === 'object' ? observer.next : observer,
            error: typeof observer === 'object' ? observer.error : e,
            complete: typeof observer === 'object' ? observer.complete : c
        };
        // Create a new internal subscriber for this specific subscription
        const internalSubscriber = new _Subscriber___WEBPACK_IMPORTED_MODULE_0__.Subscriber({
            next: (data) => {
                partialObserver.next?.(data);
            },
            error: (e) => {
                partialObserver.error?.(e);
            },
            complete: () => {
                partialObserver.complete?.();
            }
        });
        let teardownLogic;
        if (this._producerFunction) {
            teardownLogic = this._producerFunction(internalSubscriber);
        }
        let closed = false;
        return {
            get closed() {
                return closed;
            },
            unsubscribe: () => {
                // console.log('unsubscribe-->', teardownLogic)
                // Execute the teardown logic returned by the producer function
                if (typeof teardownLogic === 'function') {
                    teardownLogic();
                }
                else if (teardownLogic && typeof teardownLogic.unsubscribe === 'function') {
                    teardownLogic.unsubscribe();
                }
                closed = true;
            }
        };
    }
    toPromise() {
        return new Promise((resolve, reject) => {
            let lastValue;
            let subscription;
            subscription = this.subscribe({
                next: (value) => {
                    lastValue = value;
                },
                error: (err) => {
                    reject(err);
                    subscription.unsubscribe();
                },
                complete: () => {
                    resolve(lastValue);
                    subscription.unsubscribe();
                }
            });
        });
    }
    pipe(...operators) {
        if (operators.length === 0) {
            return this;
        }
        return operators.reduce((prev, operator) => operator(prev), this);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/ReplaySubject.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/ReplaySubject.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ReplaySubject: () => (/* binding */ ReplaySubject)
/* harmony export */ });
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subject */ "../../packages/@dooboostore/core/src/message/Subject.ts");

class ReplaySubject extends _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject {
    bufferSize;
    _buffer = [];
    // Removed: private _error: E | undefined;
    // Removed: private _isStopped = false;
    constructor(bufferSize = Infinity) {
        super();
        this.bufferSize = bufferSize;
    }
    next(data) {
        // Rely on parent Subject's _isStopped
        if (this._isStopped) {
            return; // Cannot emit after stopped
        }
        this._buffer.push(data);
        if (this._buffer.length > this.bufferSize) {
            this._buffer.shift(); // Remove oldest if buffer exceeds size
        }
        super.next(data); // Multicast to current subscribers
    }
    error(err) {
        // Rely on parent Subject to manage _isStopped and _error
        super.error(err); // Multicast error and stop
    }
    complete() {
        // Rely on parent Subject to manage _isStopped
        super.complete(); // Multicast complete and stop
    }
    _subscribeToSubject(subscriber) {
        // Emit buffered values to the new subscriber first
        this._buffer.forEach(value => subscriber.next(value));
        // If the subject has already completed or errored, emit that status
        // Rely on parent Subject's _isStopped, _hasError, _error
        if (this._isStopped) {
            if (this._hasError) {
                subscriber.error(this._error);
            }
            else {
                subscriber.complete();
            }
            return { closed: true, unsubscribe: () => { } }; // Return dummy subscription as it's already done
        }
        // Then, call super._subscribeToSubject to add the observer for future values
        return super._subscribeToSubject(subscriber);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/Subject.ts":
/*!***************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/Subject.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Subject: () => (/* binding */ Subject)
/* harmony export */ });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

class Subject extends _Observable__WEBPACK_IMPORTED_MODULE_0__.Observable {
    _observers = new Set();
    _isStopped = false;
    _hasError = false;
    _error;
    constructor() {
        // Call parent Observable constructor with our own subscribe logic
        super((subscriber) => {
            return this._subscribeToSubject(subscriber);
        });
    }
    _subscribeToSubject(subscriber) {
        const partialObserver = {
            next: subscriber.next.bind(subscriber),
            error: subscriber.error.bind(subscriber),
            complete: subscriber.complete.bind(subscriber)
        };
        if (this._isStopped) {
            if (this._hasError) {
                partialObserver.error?.(this._error);
            }
            else {
                partialObserver.complete?.();
            }
            return { closed: true, unsubscribe: () => { } }; // Already stopped, return dummy subscription
        }
        this._observers.add(partialObserver);
        let closed = false;
        return {
            get closed() {
                return closed;
            },
            unsubscribe: () => {
                this._observers.delete(partialObserver);
                closed = true;
            }
        };
    }
    next(data) {
        if (this._isStopped) {
            return; // Subject is stopped, no more emissions
        }
        this._observers.forEach(observer => {
            observer.next?.(data);
        });
    }
    error(err) {
        if (this._isStopped) {
            return; // Subject is stopped, no more errors
        }
        this._hasError = true;
        this._error = err;
        this._isStopped = true; // Subject stops after error
        this._observers.forEach(observer => observer.error?.(err));
        this._observers.clear(); // Clear observers after error
    }
    complete() {
        if (this._isStopped) {
            return; // Subject is stopped, no more completions
        }
        this._isStopped = true; // Subject stops after completion
        this._observers.forEach(observer => observer.complete?.());
        this._observers.clear(); // Clear observers after completion
    }
    asObservable() {
        // Returns a new Observable that wraps this Subject's subscribe method.
        // This hides the next/error/complete methods from the consumer.
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__.Observable(subscriber => {
            return this._subscribeToSubject(subscriber);
        });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/Subscriber..ts":
/*!*******************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/Subscriber..ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Subscriber: () => (/* binding */ Subscriber)
/* harmony export */ });
class Subscriber {
    destination;
    closed = false;
    constructor(destination) {
        this.destination = destination;
    }
    next(value) {
        if (this.closed) {
            return;
        }
        this.destination.next(value);
    }
    error(err) {
        if (this.closed) {
            return;
        }
        this.closed = true;
        this.destination.error(err);
        this.unsubscribe();
    }
    complete() {
        if (this.closed) {
            return;
        }
        this.closed = true;
        this.destination.complete();
        this.unsubscribe();
    }
    unsubscribe() {
        this.closed = true;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/operators/debounceTime.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/operators/debounceTime.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   debounceTime: () => (/* binding */ debounceTime)
/* harmony export */ });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

function debounceTime(duration) {
    return (source) => {
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__.Observable(subscriber => {
            let timeoutId = null;
            let lastValue;
            let hasValue = false;
            const subscription = source.subscribe({
                next: (value) => {
                    clearTimeout(timeoutId);
                    lastValue = value;
                    hasValue = true;
                    timeoutId = setTimeout(() => {
                        if (hasValue) {
                            subscriber.next(lastValue);
                            hasValue = false; // Reset after emitting
                        }
                    }, duration);
                },
                error: (err) => {
                    clearTimeout(timeoutId);
                    subscriber.error(err);
                },
                complete: () => {
                    clearTimeout(timeoutId);
                    // Emit the last value if it's pending
                    if (hasValue) {
                        subscriber.next(lastValue);
                    }
                    subscriber.complete();
                }
            });
            return subscription; // Return the subscription for teardown
        });
    };
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/operators/distinctUntilChanged.ts":
/*!**************************************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/operators/distinctUntilChanged.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   distinctUntilChanged: () => (/* binding */ distinctUntilChanged)
/* harmony export */ });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

function distinctUntilChanged(comparator) {
    return (source) => {
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__.Observable(subscriber => {
            let hasValue = false;
            let previousValue;
            const subscription = source.subscribe({
                next: (value) => {
                    const areEqual = hasValue
                        ? comparator
                            ? comparator(previousValue, value)
                            : previousValue === value
                        : false;
                    if (!areEqual) {
                        hasValue = true;
                        previousValue = value;
                        subscriber.next(value);
                    }
                },
                error: (err) => {
                    subscriber.error(err);
                },
                complete: () => {
                    subscriber.complete();
                }
            });
            return subscription; // Return the subscription for teardown
        });
    };
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/operators/filter.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/operators/filter.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   filter: () => (/* binding */ filter)
/* harmony export */ });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

function filter(predicate) {
    return (source) => {
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__.Observable(subscriber => {
            let index = 0;
            const subscription = source.subscribe({
                next: (value) => {
                    try {
                        if (predicate(value, index++)) {
                            subscriber.next(value);
                        }
                    }
                    catch (err) {
                        subscriber.error(err);
                    }
                },
                error: (err) => {
                    subscriber.error(err);
                },
                complete: () => {
                    subscriber.complete();
                }
            });
            return subscription; // Return the subscription for teardown
        });
    };
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/message/operators/map.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/message/operators/map.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   map: () => (/* binding */ map)
/* harmony export */ });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../../packages/@dooboostore/core/src/message/Observable.ts");

function map(project) {
    return (source) => {
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__.Observable(subscriber => {
            let index = 0;
            const subscription = source.subscribe({
                next: (value) => {
                    try {
                        subscriber.next(project(value, index++));
                    }
                    catch (err) {
                        subscriber.error(err);
                    }
                },
                error: (err) => {
                    subscriber.error(err);
                },
                complete: () => {
                    subscriber.complete();
                }
            });
            return subscription; // Return the subscription for teardown
        });
    };
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts":
/*!******************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/object/ObjectUtils.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ObjectUtils: () => (/* binding */ ObjectUtils)
/* harmony export */ });
/* harmony import */ var _valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "../../packages/@dooboostore/core/src/types.ts");


var ObjectUtils;
(function (ObjectUtils) {
    ObjectUtils.constructorName = (target) => {
        if (target && target.constructor && target.constructor.name) {
            return target.constructor.name;
        }
        else if (target && target.name) {
            return target.name;
        }
    };
    ObjectUtils.deepCopy = (obj) => {
        if (obj instanceof Map) {
            return new Map(JSON.parse(JSON.stringify(Array.from(obj.entries()))));
        }
        else if (obj instanceof Set) {
            return new Set(JSON.parse(JSON.stringify(Array.from(obj.values()))));
        }
        else if (_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isNullOrUndefined(obj)) {
            return obj;
        }
        return JSON.parse(JSON.stringify(obj));
    };
    ObjectUtils.allProtoTypeName = (target, filter) => {
        let data = [];
        if (target) {
            const proto = Object.getPrototypeOf(target);
            if (proto && (data = Object.keys(proto) || []).length > 0) {
                data = data.concat(ObjectUtils.allProtoTypeName(proto, filter));
            }
        }
        let result = data.filter(it => it !== 'constructor');
        if (filter && target) {
            const proto = Object.getPrototypeOf(target);
            result = result.filter(key => filter(key, proto?.[key]));
        }
        return result;
    };
    ObjectUtils.uniqueKeys = (obj) => {
        const allKeys = Array.from(new Set((Array.isArray(obj) ? obj : [obj]).flatMap(item => Object.keys(item))));
        return allKeys;
    };
    ObjectUtils.ownPropertyNames = (target) => {
        const data = [];
        if (target) {
            if (!target.prototype) {
                const a = Object.getPrototypeOf(target);
                data.push(...Object.getOwnPropertyNames(a));
            }
            else {
                data.push(...Object.getOwnPropertyNames(Object.getPrototypeOf(target)));
            }
        }
        return data.filter(it => it !== 'constructor');
    };
    ObjectUtils.protoTypeName = (target) => {
        let data = [];
        if (target) {
            const proto = Object.getPrototypeOf(target);
            data = Object.keys(proto) || [];
        }
        return data.filter(it => it !== 'constructor');
    };
    ObjectUtils.protoTypes = (target) => {
        const data = [];
        if (target) {
            const proto = Object.getPrototypeOf(target);
            (Object.keys(proto) || []).filter(it => it !== 'constructor').forEach(it => {
                data.push(proto[it]);
            });
        }
        return data;
    };
    ObjectUtils.seal = (target) => {
        return Object.seal(target);
    };
    /*
    Object.prototype.isPrototypeOf()
    isPrototypeOf() 메소드는 해당 객체가 다른 객체의 프로토타입 체인에 속한 객체인지 확인하기 위해 사용됩니다.
     */
    ObjectUtils.isPrototypeOfTarget = (start, target) => {
        if (start && target) {
            return Object.prototype.isPrototypeOf.call(start.prototype, target);
        }
        else {
            return false;
        }
    };
    ObjectUtils.prototypeOfDepth = (target, dest) => {
        let object = target;
        const r = [];
        if (dest) {
            do {
                object = Object.getPrototypeOf(object);
                if (object?.constructor === dest) {
                    break;
                }
                r.push(object);
            } while (object);
        }
        return r;
    };
    ObjectUtils.allProtoType = (start) => {
        const depth = (target, bowl = []) => {
            if (target.prototype) {
                bowl.push(target);
                depth(Object.getPrototypeOf(target), bowl);
            }
            return bowl;
        };
        const d = depth(start);
        return d;
        // const protos: (ConstructorType<any> | Function)[] = []
        // while (start) {
        //     protos.push(start);
        //     start = Object.getPrototypeOf(start)
        // }
        // return protos;
    };
    ObjectUtils.prototypeOf = (start) => {
        return Object.getPrototypeOf(start);
    };
    ObjectUtils.prototypeKeyMap = (target) => {
        const data = new Map();
        if (target) {
            const proto = Object.getPrototypeOf(target);
            (Object.keys(proto) || []).filter(it => it !== 'constructor').forEach(it => {
                data.set(proto[it], it);
            });
        }
        return data;
    };
    ObjectUtils.prototypeName = (target, fnc) => {
        return ObjectUtils.prototypeKeyMap(target).get(fnc);
    };
    ObjectUtils.pickRandomKey = (target) => {
        const keys = Object.keys(target);
        return keys[Math.floor(Math.random() * keys.length)];
    };
    ObjectUtils.pickRandomValue = (target) => {
        const keys = Object.keys(target);
        return target[keys[Math.floor(Math.random() * keys.length)]];
    };
    ObjectUtils.pickRandomKeyValue = (target) => {
        const keys = Object.keys(target);
        const key = keys[Math.floor(Math.random() * keys.length)];
        return { key, value: target[key] };
    };
    ObjectUtils.keyValues = (target) => {
        const keys = Object.keys(target);
        return keys.map(key => ({ key, value: target[key] }));
    };
    ObjectUtils.entries = (target) => {
        return Object.entries(target);
    };
    ObjectUtils.values = (target) => {
        return Object.values(target);
    };
    ObjectUtils.keys = (target) => {
        return Object.keys(target);
    };
    ObjectUtils.keyLength = (target) => {
        return ObjectUtils.keys(target).length;
    };
    ObjectUtils.toDeleteUndefinedAndNull = (target, config) => {
        const cleanValue = (value) => {
            if (Array.isArray(value)) {
                return value.filter(item => item !== undefined && item !== null).map(cleanValue);
            }
            else if (value && typeof value === 'object') {
                if (config?.deep) {
                    return Object.fromEntries(Object.entries(value).filter(([_, v]) => v !== undefined && v !== null).map(([k, v]) => [k, cleanValue(v)]));
                }
                else {
                    return Object.fromEntries(Object.entries(value).filter(([_, v]) => v !== undefined && v !== null));
                }
            }
            return value;
        };
        return cleanValue(target);
    };
    let Path;
    (function (Path) {
        Path.isFunctionScript = (script) => {
            return script.trim().startsWith('function');
        };
        Path.isArrowFunctionScript = (script) => {
            return /^\s*\([^)]*\)\s*=>/.test(script);
        };
        Path.toOptionalChainPath = (path) => {
            if (!path) {
                return '';
            }
            // Add this check for object literals
            if (path.trim().startsWith('{') && path.trim().endsWith('}')) {
                return path;
            }
            if (Path.isFunctionScript(path) || Path.isArrowFunctionScript(path)) {
                return path;
            }
            // Check for ternary operator pattern (? :)
            if (path.includes(' ? ') && path.includes(' : ')) {
                // Handle ternary operator - only convert property access parts, not the ternary operator itself
                const parts = path.split(/(\s+\?\s+|\s+:\s+)/);
                const result = parts.map((part, index) => {
                    // Only process the first part (before ?) for optional chaining
                    if (index === 0) {
                        const tokens = part.match(/[^?.[\]]+|\[[^\]]*\]/g);
                        if (tokens && tokens.length > 1) {
                            return tokens.join('?.');
                        }
                    }
                    return part;
                });
                return result.join('');
            }
            // Handle function calls by processing the entire path with regex replacement
            if (path.includes('(')) {
                // Replace function calls with a placeholder, process the path, then restore function calls
                const functionCallMatches = [];
                let tempPath = path;
                let counter = 0;
                // Find and process function calls with their arguments
                const functionCallRegex = /(\w+)\(([^()]*(?:\([^()]*\)[^()]*)*)\)/g;
                let match;
                while ((match = functionCallRegex.exec(path)) !== null) {
                    const fullMatch = match[0];
                    const funcName = match[1];
                    const funcArgs = match[2];
                    const placeholder = `__FUNC_CALL_${counter}__`;
                    // Process function arguments recursively
                    const processedArgs = funcArgs ? Path.toOptionalChainPath(funcArgs) : '';
                    const processedFuncCall = `${funcName}?.(${processedArgs})`;
                    functionCallMatches.push({
                        original: fullMatch,
                        processed: processedFuncCall,
                        placeholder: placeholder
                    });
                    tempPath = tempPath.replace(fullMatch, placeholder);
                    counter++;
                }
                // Process the path without function calls
                const tokens = tempPath.match(/[^?.[\]]+|\[[^\]]*\]/g);
                let processedPath = '';
                if (tokens && tokens.length > 1) {
                    processedPath = tokens.join('?.');
                }
                else {
                    processedPath = tempPath;
                }
                // Restore function calls
                for (const funcMatch of functionCallMatches) {
                    processedPath = processedPath.replace(funcMatch.placeholder, funcMatch.processed);
                }
                return processedPath;
            }
            // Tokenize the path by '.', '[', ']', and '?' to handle property access and existing optional chaining.
            const tokens = path.match(/[^?.[\]]+|\[[^\]]*\]/g);
            if (!tokens) {
                return path; // Return original path if no tokens are found (e.g., path is just '.')
            }
            // Join tokens with '?.', effectively creating the optional chain path.
            return tokens.join('?.');
        };
        Path.removeOptionalChainOperator = (path) => {
            if (!path) {
                return '';
            }
            // Replace all optional chaining operators with standard ones.
            return path.replace(/\?\./g, '.').replace(/\.\[/g, '[');
        };
        const parsePath = (path) => {
            const result = [];
            const regex = /\.([^.\[]+)|\[(\d+)\]|\[(['"])(.*?)\3\]/g;
            let match;
            let lastIndex = 0;
            const firstMatch = path.match(regex);
            if (firstMatch && (firstMatch?.index ?? 0) > 0) {
                result.push(path.substring(0, firstMatch.index));
                lastIndex = firstMatch.index;
            }
            else if (!firstMatch && path.length > 0) {
                result.push(path);
                return result;
            }
            while ((match = regex.exec(path)) !== null) {
                if (match.index > lastIndex) {
                    const segment = path.substring(lastIndex, match.index);
                    if (segment.startsWith('.')) {
                        result.push(segment.substring(1));
                    }
                    else {
                        result.push(segment);
                    }
                }
                if (match[1]) {
                    result.push(match[1]);
                }
                else if (match[2]) {
                    result.push(parseInt(match[2], 10));
                }
                else if (match[4]) {
                    result.push(match[4]);
                }
                lastIndex = regex.lastIndex;
            }
            if (lastIndex < path.length) {
                const remaining = path.substring(lastIndex);
                if (remaining.startsWith('.')) {
                    result.push(remaining.substring(1));
                }
                else {
                    result.push(remaining);
                }
            }
            return result;
        };
        Path.to = (obj) => {
            const destination = {};
            Object.entries(obj).forEach(([path, value]) => {
                Path.set(destination, path, value);
            });
            return destination;
        };
        Path.set = (obj, path, value) => {
            const pathParts = parsePath(path);
            let current = obj;
            for (let i = 0; i < pathParts.length; i++) {
                const part = pathParts[i];
                const isLastPart = i === pathParts.length - 1;
                if (isLastPart) {
                    current[part] = value;
                }
                else {
                    // Ensure current[part] is of the correct type for the next part
                    const nextPart = pathParts[i + 1];
                    if (typeof nextPart === 'number') { // Next part is an array index
                        if (!Array.isArray(current[part])) {
                            current[part] = [];
                        }
                        // Fill holes if current[part] is an array and nextPart is a skipped index
                        if (Array.isArray(current[part])) {
                            while (current[part].length <= nextPart) {
                                current[part].push({}); // Fill with empty objects
                            }
                        }
                    }
                    else { // Next part is a string (object property)
                        if (typeof current[part] !== 'object' || current[part] === null) {
                            current[part] = {};
                        }
                    }
                    current = current[part];
                }
            }
        };
        Path.get = (obj, path, defaultValue) => {
            const pathParts = parsePath(path);
            let current = obj;
            for (let i = 0; i < pathParts.length; i++) {
                const part = pathParts[i];
                if (current === null || current === undefined) {
                    return defaultValue;
                }
                // Check if the current object has the property/index
                if (typeof current === 'object' && current !== null && part in current) {
                    current = current[part];
                }
                else {
                    // Property/index not found
                    return defaultValue;
                }
            }
            return current;
        };
        Path.deletePath = (obj, path) => {
            const pathParts = parsePath(path);
            if (pathParts.length === 0) {
                return false;
            }
            let current = obj;
            // Navigate to the parent of the target property
            for (let i = 0; i < pathParts.length - 1; i++) {
                const part = pathParts[i];
                if (current === null || current === undefined) {
                    return false;
                }
                if (typeof current === 'object' && current !== null && part in current) {
                    current = current[part];
                }
                else {
                    return false;
                }
            }
            // Delete the final property
            const finalPart = pathParts[pathParts.length - 1];
            if (current !== null && typeof current === 'object' && finalPart in current) {
                if (Array.isArray(current) && typeof finalPart === 'number') {
                    current.splice(finalPart, 1);
                }
                else {
                    delete current[finalPart];
                }
                return true;
            }
            return false;
        };
        Path.availablePath = (obj, filter) => {
            const paths = [];
            const formatKey = (key) => {
                if (typeof key === 'number') {
                    return '[' + key + ']'; // Array index
                }
                // Check if the key is a valid JavaScript identifier.
                // If not, it needs to be quoted.
                // A valid identifier starts with a letter, _, or $, followed by letters, digits, _, or $.
                // This regex checks for characters that are NOT valid in an identifier.
                if (!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(key)) {
                    // If it's not a valid identifier, quote it.
                    // Use single quotes without escaping for test compatibility
                    return "['" + key + "']";
                }
                return key;
            };
            const traverse = (current, currentPath, visited) => {
                if (current === null || typeof current !== 'object') {
                    return;
                }
                // Detect circular references
                if (visited.has(current)) {
                    return;
                }
                visited.add(current);
                if (Array.isArray(current)) {
                    current.forEach((item, index) => {
                        const formattedIndex = formatKey(index); // This will be [index]
                        const newPath = currentPath ? `${currentPath}${formattedIndex}` : formattedIndex;
                        // Apply filter if provided
                        if (!filter || filter(newPath, item)) {
                            paths.push(newPath);
                        }
                        traverse(item, newPath, visited);
                    });
                }
                else {
                    Object.keys(current).forEach(key => {
                        const formattedKey = formatKey(key);
                        let newPath;
                        // If the key needs brackets (special characters), don't add a dot before brackets
                        if (formattedKey.startsWith('[')) {
                            newPath = currentPath ? `${currentPath}${formattedKey}` : formattedKey;
                        }
                        else {
                            newPath = currentPath ? `${currentPath}.${formattedKey}` : formattedKey;
                        }
                        // Apply filter if provided
                        if (!filter || filter(newPath, current[key])) {
                            paths.push(newPath);
                        }
                        traverse(current[key], newPath, visited);
                    });
                }
            };
            traverse(obj, '', new Set());
            return paths;
        };
        /**
         * 스크립트에서 사용되는 변수 경로들을 감지합니다.
         * 프록시를 사용하여 스크립트 실행 중 접근되는 모든 속성 경로를 추적합니다.
         *
         * @param script 분석할 JavaScript 스크립트 문자열
         * @param options 감지 옵션
         * @param options.excludeThis true일 경우 'this' 키워드를 결과에서 제외
         * @returns 스크립트에서 사용된 변수 경로들의 Set
         */
        Path.detectPathFromScript = (script, options) => {
            const usingVars = new Set();
            class GetDetectProxy {
                prefix;
                usingVars = usingVars;
                constructor(prefix) {
                    this.prefix = prefix;
                }
                set(target, p, value, receiver) {
                    return true;
                }
                get(target, p, receiver) {
                    // Symbol 속성들은 무시 (toString, valueOf 등)
                    if (typeof p === 'symbol') {
                        return this.createSafeProxy(this.prefix);
                    }
                    let items;
                    const propStr = String(p);
                    // 숫자 인덱스 처리
                    if (!isNaN(Number(propStr))) {
                        items = this.prefix ? `${this.prefix}[${propStr}]` : propStr;
                    }
                    // 일반 속성 처리
                    else {
                        items = this.prefix ? `${this.prefix}.${propStr}` : propStr;
                    }
                    // 유효한 변수 경로만 추가
                    if (items) {
                        this.usingVars.add(items);
                    }
                    return this.createSafeProxy(items);
                }
                apply(target, thisArg, argArray) {
                    // 함수 호출 시에도 안전한 프록시 반환 (체이닝 가능)
                    return this.createSafeProxy(this.prefix);
                }
                createSafeProxy(prefix) {
                    const dummyFunction = () => { };
                    const handler = new GetDetectProxy(prefix);
                    return new Proxy(dummyFunction, {
                        get: (target, prop, receiver) => {
                            if (prop === Symbol.toPrimitive) {
                                return () => '';
                            }
                            if (prop === 'valueOf') {
                                return () => handler.createSafeProxy(prefix);
                            }
                            if (prop === 'toString') {
                                return () => '';
                            }
                            return handler.get(target, prop, receiver);
                        },
                        set: handler.set.bind(handler),
                        apply: handler.apply.bind(handler)
                    });
                }
            }
            // 전역 변수들을 안전하게 처리하기 위한 컨텍스트 생성
            const globalContext = {
                window: new Proxy(() => { }, new GetDetectProxy('window')),
                document: new Proxy(() => { }, new GetDetectProxy('document')),
                console: new Proxy(() => { }, new GetDetectProxy('console')),
                // this는 destUser 자체가 됨
            };
            const destUser = new Proxy(() => { }, new GetDetectProxy('this'));
            try {
                // 전역 컨텍스트와 함께 실행
                const func = new Function('window', 'document', 'console', `"use strict"; ${script}; `);
                func.call(destUser, globalContext.window, globalContext.document, globalContext.console);
                // console.log('------->', script);
            }
            catch (e) {
                console.error('detectPathFromScript error:', script, e);
            }
            // excludeThis 옵션이 true면 'this'로 시작하는 경로에서 'this' 제거
            if (options?.excludeThis) {
                const filteredVars = new Set();
                usingVars.forEach(path => {
                    if (path === 'this') {
                        // 'this' 자체는 제외
                        return;
                    }
                    else if (path.startsWith('this.')) {
                        // 'this.'로 시작하는 경우 'this.' 부분 제거
                        filteredVars.add(path.substring(5));
                    }
                    else {
                        // 그 외는 그대로 추가
                        filteredVars.add(path);
                    }
                });
                return filteredVars;
            }
            return usingVars;
        };
    })(Path = ObjectUtils.Path || (ObjectUtils.Path = {}));
    ObjectUtils.toDeleteKey = (obj, keys) => {
        const target = { ...obj };
        ObjectUtils.deleteKey(target, keys);
        return target;
    };
    ObjectUtils.deleteKey = (obj, keys) => {
        keys.filter(it => (0,_types__WEBPACK_IMPORTED_MODULE_1__.isDefined)(it)).forEach(it => {
            delete obj[it];
        });
    };
    let Script;
    (function (Script) {
        /**
         * JavaScript 스크립트를 실행하고 결과를 반환합니다.
         *
         * @param script 실행할 스크립트 문자열 또는 {bodyScript, returnScript} 객체
         * @param thisTarget 스크립트 실행 시 this로 바인딩될 객체
         * @returns 스크립트 실행 결과
         */
        Script.evaluateReturn = (script, thisTarget = {}) => {
            let bodyScript = '';
            let returnScript = '';
            if (typeof script === 'object') {
                bodyScript = script.bodyScript;
                returnScript = script.returnScript;
            }
            else {
                returnScript = script;
            }
            return Script.evaluate(`${bodyScript}; return ${returnScript} `, thisTarget);
        };
        /**
         * JavaScript 스크립트를 안전하게 실행합니다.
         *
         * @param script 실행할 스크립트 문자열
         * @param thisTarget 스크립트 실행 시 this로 바인딩될 객체
         * @returns 스크립트 실행 결과 또는 undefined (에러 시)
         */
        // @ts-ignore
        Script.evaluate = (script, thisTarget = {}) => {
            try {
                return Function(`"use strict"; ${script} `).bind(thisTarget)();
            }
            catch (e) {
                console.error('eval error', e);
                console.error(script);
                return undefined;
            }
        };
    })(Script = ObjectUtils.Script || (ObjectUtils.Script = {}));
})(ObjectUtils || (ObjectUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/parser/css/CssParser.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/parser/css/CssParser.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AtRule: () => (/* binding */ AtRule),
/* harmony export */   CssNode: () => (/* binding */ CssNode),
/* harmony export */   CssParser: () => (/* binding */ CssParser),
/* harmony export */   StyleRule: () => (/* binding */ StyleRule),
/* harmony export */   isAtRule: () => (/* binding */ isAtRule),
/* harmony export */   isCssCommentItem: () => (/* binding */ isCssCommentItem),
/* harmony export */   isCssDeclarationItem: () => (/* binding */ isCssDeclarationItem),
/* harmony export */   isCssRuleItem: () => (/* binding */ isCssRuleItem),
/* harmony export */   isRule: () => (/* binding */ isRule),
/* harmony export */   isStyleRule: () => (/* binding */ isStyleRule)
/* harmony export */ });
// --- Base CSS Node Class with common functionality ---
class CssNode {
    content; // Maintains order of declarations and rules
    constructor(content = []) {
        this.content = content;
    }
    // --- Computed properties for backward compatibility ---
    get declarations() {
        const declarations = {};
        this.content.forEach(item => {
            if (item.type === 'declaration') {
                declarations[item.property] = item.value;
            }
        });
        return declarations;
    }
    get children() {
        return this.content
            .filter(item => item.type === 'rule')
            .map(item => item.rule);
    }
    // --- Common Manipulation Methods for content ---
    _addRules(rulesToAdd, atIndex) {
        const ruleItems = rulesToAdd.map(rule => ({ type: 'rule', rule }));
        if (atIndex === undefined) {
            this.content.push(...ruleItems);
        }
        else {
            // Find the actual content index for the rule at the given children index
            const ruleContentIndices = this.content
                .map((item, idx) => ({ item, idx }))
                .filter(({ item }) => item.type === 'rule')
                .map(({ idx }) => idx);
            const insertIndex = atIndex < ruleContentIndices.length ? ruleContentIndices[atIndex] : this.content.length;
            this.content.splice(insertIndex, 0, ...ruleItems);
        }
        return this;
    }
    append(ruleOrCss) {
        const rulesToAdd = CssParser._parseInputToRules(ruleOrCss);
        return this._addRules(rulesToAdd);
    }
    prepend(ruleOrCss) {
        const rulesToAdd = CssParser._parseInputToRules(ruleOrCss);
        return this._addRules(rulesToAdd, 0);
    }
    insertAt(index, ruleOrCss) {
        const rulesToAdd = CssParser._parseInputToRules(ruleOrCss);
        return this._addRules(rulesToAdd, index);
    }
    insertBefore(target, newRuleOrCss) {
        const contentIndex = this.content.findIndex(item => item.type === 'rule' && item.rule === target);
        if (contentIndex > -1) {
            const rulesToAdd = CssParser._parseInputToRules(newRuleOrCss);
            const ruleItems = rulesToAdd.map(rule => ({ type: 'rule', rule }));
            this.content.splice(contentIndex, 0, ...ruleItems);
        }
        return this;
    }
    insertAfter(target, newRuleOrCss) {
        const contentIndex = this.content.findIndex(item => item.type === 'rule' && item.rule === target);
        if (contentIndex > -1) {
            const rulesToAdd = CssParser._parseInputToRules(newRuleOrCss);
            const ruleItems = rulesToAdd.map(rule => ({ type: 'rule', rule }));
            this.content.splice(contentIndex + 1, 0, ...ruleItems);
        }
        return this;
    }
    replace(target, newRuleOrCss) {
        const contentIndex = this.content.findIndex(item => item.type === 'rule' && item.rule === target);
        if (contentIndex > -1) {
            const rulesToReplace = CssParser._parseInputToRules(newRuleOrCss);
            const ruleItems = rulesToReplace.map(rule => ({ type: 'rule', rule }));
            this.content.splice(contentIndex, 1, ...ruleItems);
        }
        return this;
    }
    remove(target) {
        const contentIndex = this.content.findIndex(item => item.type === 'rule' && item.rule === target);
        if (contentIndex > -1) {
            this.content.splice(contentIndex, 1);
        }
        return this;
    }
}
// --- Style Rule Class ---
class StyleRule extends CssNode {
    selector;
    constructor(selector, content = []) {
        super(content);
        this.selector = selector;
    }
    stringify(indent = 0) {
        const indentStr = '  '.repeat(indent);
        const innerIndentStr = '  '.repeat(indent + 1);
        if (this.content.length === 0) {
            return `${indentStr}${this.selector} {}`;
        }
        const contentLines = [];
        for (const item of this.content) {
            if (item.type === 'declaration') {
                const kebabProperty = CssParser._camelToKebab(item.property);
                contentLines.push(`${innerIndentStr}${kebabProperty}: ${item.value};`);
            }
            else if (item.type === 'rule') {
                contentLines.push(item.rule.stringify(indent + 1));
            }
            else if (item.type === 'comment') {
                contentLines.push(`${innerIndentStr}/* ${item.text} */`);
            }
        }
        const innerContent = contentLines.join('\n');
        return `${indentStr}${this.selector} {\n${innerContent}\n${indentStr}}`;
    }
}
// --- At Rule Class ---
class AtRule extends CssNode {
    name;
    condition;
    constructor(name, condition, content = []) {
        super(content);
        this.name = name;
        this.condition = condition;
    }
    stringify(indent = 0) {
        const indentStr = '  '.repeat(indent);
        const innerIndentStr = '  '.repeat(indent + 1);
        const prelude = `@${this.name}${this.condition ? ' ' + this.condition : ''}`;
        if (this.content.length === 0) {
            return `${indentStr}${prelude};`;
        }
        const contentLines = [];
        for (const item of this.content) {
            if (item.type === 'declaration') {
                const kebabProperty = CssParser._camelToKebab(item.property);
                contentLines.push(`${innerIndentStr}${kebabProperty}: ${item.value};`);
            }
            else if (item.type === 'rule') {
                contentLines.push(item.rule.stringify(indent + 1));
            }
            else if (item.type === 'comment') {
                contentLines.push(`${innerIndentStr}/* ${item.text} */`);
            }
        }
        const innerContent = contentLines.join('\n');
        return `${indentStr}${prelude} {\n${innerContent}\n${indentStr}}`;
    }
}
// --- The main parser class ---
class CssParser extends CssNode {
    constructor(css = '') {
        const content = CssParser._parseTopLevel(css);
        super(content);
    }
    // --- Accessors ---
    get rules() {
        return this.children;
    }
    // --- Stringify ---
    stringify(indent = 0) {
        if (this.content.length === 0) {
            return '';
        }
        const contentLines = [];
        for (const item of this.content) {
            if (item.type === 'declaration') {
                const kebabProperty = CssParser._camelToKebab(item.property);
                contentLines.push(`${kebabProperty}: ${item.value};`);
            }
            else if (item.type === 'rule') {
                contentLines.push(item.rule.stringify(indent));
            }
            else if (item.type === 'comment') {
                contentLines.push(`/* ${item.text} */`);
            }
        }
        return contentLines.join('\n');
    }
    // --- Static parsing method ---
    static _parseTopLevel(css) {
        const cleanedCss = CssParser._cleanCss(css);
        // Parse top-level content including comments, declarations, and rules
        return CssParser._parseContent(cleanedCss);
    }
    // --- Parsing Logic ---
    static _cleanCss(css) {
        // Don't remove comments - we'll parse them as content items
        return css.trim();
    }
    // --- Universal content parser that handles comments, declarations, and rules ---
    static _parseContent(css) {
        const content = [];
        let i = 0;
        while (i < css.length) {
            // Skip whitespace
            while (i < css.length && /\s/.test(css[i])) {
                i++;
            }
            if (i >= css.length)
                break;
            // Handle comments
            if (css[i] === '/' && i + 1 < css.length && css[i + 1] === '*') {
                const commentStart = i + 2;
                let commentEnd = css.indexOf('*/', commentStart);
                if (commentEnd === -1) {
                    commentEnd = css.length;
                    i = css.length;
                }
                else {
                    const commentText = css.substring(commentStart, commentEnd).trim();
                    content.push({ type: 'comment', text: commentText });
                    i = commentEnd + 2;
                }
                continue;
            }
            // Find the next significant token
            const nextBraceIndex = css.indexOf('{', i);
            const nextSemicolonIndex = css.indexOf(';', i);
            const nextCommentIndex = css.indexOf('/*', i);
            // Determine what comes first
            const nextTokens = [
                { type: 'brace', index: nextBraceIndex },
                { type: 'semicolon', index: nextSemicolonIndex },
                { type: 'comment', index: nextCommentIndex }
            ].filter(token => token.index !== -1).sort((a, b) => a.index - b.index);
            if (nextTokens.length === 0) {
                // No more tokens, parse remaining as declaration if it contains ':'
                const remaining = css.substring(i).trim();
                if (remaining && remaining.includes(':')) {
                    const parts = remaining.split(':');
                    if (parts.length >= 2) {
                        const prop = parts[0].trim();
                        const val = parts.slice(1).join(':').trim();
                        if (prop && val) {
                            content.push({ type: 'declaration', property: prop, value: val });
                        }
                    }
                }
                break;
            }
            const nextToken = nextTokens[0];
            if (nextToken.type === 'comment') {
                // Handle comment (already handled above, but just in case)
                i = nextToken.index;
                continue;
            }
            if (nextToken.type === 'brace') {
                // This is a rule (selector or at-rule)
                const prelude = css.substring(i, nextToken.index).trim();
                if (prelude) {
                    const blockEndIndex = CssParser._findMatchingBrace(css, nextToken.index);
                    if (blockEndIndex !== -1) {
                        const blockContent = css.substring(nextToken.index + 1, blockEndIndex).trim();
                        if (prelude.startsWith('@')) {
                            // At-rule
                            const name = prelude.match(/^@([^\s]+)/)?.[1] || 'unknown';
                            const condition = prelude.replace(/^@[^\s]+\s*/, '').trim();
                            const childContent = CssParser._parseContent(blockContent);
                            content.push({ type: 'rule', rule: new AtRule(name, condition, childContent) });
                        }
                        else {
                            // Style rule
                            const childContent = CssParser._parseContent(blockContent);
                            content.push({ type: 'rule', rule: new StyleRule(prelude, childContent) });
                        }
                        i = blockEndIndex + 1;
                        continue;
                    }
                }
            }
            if (nextToken.type === 'semicolon') {
                // This could be a declaration or at-rule without block
                const statement = css.substring(i, nextToken.index).trim();
                if (statement) {
                    if (statement.startsWith('@')) {
                        // At-rule without block
                        const name = statement.match(/^@([^\s]+)/)?.[1] || 'unknown';
                        const condition = statement.replace(/^@[^\s]+\s*/, '').trim();
                        content.push({ type: 'rule', rule: new AtRule(name, condition, []) });
                    }
                    else if (statement.includes(':')) {
                        // Declaration
                        const parts = statement.split(':');
                        if (parts.length >= 2) {
                            const prop = parts[0].trim();
                            const val = parts.slice(1).join(':').trim();
                            if (prop && val) {
                                content.push({ type: 'declaration', property: prop, value: val });
                            }
                        }
                    }
                }
                i = nextToken.index + 1;
                continue;
            }
            // Fallback: move to next character
            i++;
        }
        return content;
    }
    static _parseBlockContent(css) {
        // Use the universal content parser
        return { content: CssParser._parseContent(css) };
    }
    static _parseRules(css) {
        const rules = [];
        let currentIndex = 0;
        css = css.trim();
        const recursiveAtRules = ['media', 'supports', 'container', 'scope', 'layer'];
        while (currentIndex < css.length) {
            while (currentIndex < css.length && /\s/.test(css[currentIndex])) {
                currentIndex++;
            }
            if (currentIndex >= css.length) {
                break;
            }
            const nextBraceIndex = css.indexOf('{', currentIndex);
            const nextSemicolonIndex = css.indexOf(';', currentIndex);
            if (nextBraceIndex !== -1 && (nextBraceIndex < nextSemicolonIndex || nextSemicolonIndex === -1)) {
                const prelude = css.substring(currentIndex, nextBraceIndex).trim();
                if (!prelude) {
                    currentIndex = nextBraceIndex + 1;
                    continue;
                }
                const blockEndIndex = CssParser._findMatchingBrace(css, nextBraceIndex);
                if (blockEndIndex === -1) {
                    console.error("Malformed CSS: No matching brace for selector -> ", prelude);
                    return rules;
                }
                const blockContent = css.substring(nextBraceIndex + 1, blockEndIndex).trim();
                if (prelude.startsWith('@')) {
                    const name = prelude.match(/^@([^\s]+)/)?.[1] || 'unknown';
                    const condition = prelude.replace(/^@[^\s]+\s*/, '').trim();
                    const content = CssParser._parseContent(blockContent);
                    rules.push(new AtRule(name, condition, content));
                }
                else {
                    const content = CssParser._parseContent(blockContent);
                    rules.push(new StyleRule(prelude, content));
                }
                currentIndex = blockEndIndex + 1;
            }
            else if (nextSemicolonIndex !== -1) {
                const statement = css.substring(currentIndex, nextSemicolonIndex).trim();
                if (statement.startsWith('@')) {
                    const name = statement.match(/^@([^\s]+)/)?.[1] || 'unknown';
                    const condition = statement.replace(/^@[^\s]+\s*/, '').trim();
                    rules.push(new AtRule(name, condition, []));
                }
                currentIndex = nextSemicolonIndex + 1;
            }
            else {
                break;
            }
        }
        return rules;
    }
    static _findMatchingBrace(str, startIndex) {
        let depth = 1;
        for (let i = startIndex + 1; i < str.length; i++) {
            if (str[i] === '{') {
                depth++;
            }
            else if (str[i] === '}') {
                depth--;
                if (depth === 0) {
                    return i;
                }
            }
        }
        return -1;
    }
    static _parseDeclarations(declarationString) {
        const declarations = {};
        const declarationPairs = declarationString.split(';');
        for (const pair of declarationPairs) {
            if (pair.trim() === '') {
                continue;
            }
            const parts = pair.split(':');
            if (parts.length >= 2) {
                const property = parts[0].trim();
                const value = parts.slice(1).join(':').trim();
                if (property && value) {
                    declarations[property] = value;
                }
            }
        }
        return declarations;
    }
    static _declarationsToCSS(declarations, indent) {
        const indentStr = '  '.repeat(indent);
        return Object.entries(declarations)
            .map(([prop, value]) => `${indentStr}${CssParser._camelToKebab(prop)}: ${value};`)
            .join('\n');
    }
    static _camelToKebab(camelCase) {
        return camelCase.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2').toLowerCase();
    }
    // Helper to parse string input to CssRule[]
    static _parseInputToRules(ruleOrCss) {
        if (typeof ruleOrCss === 'string') {
            const parsed = new CssParser(ruleOrCss).rules;
            if (parsed.length === 0) {
                console.warn('Provided CSS string resulted in no rules.');
            }
            return [...parsed];
        }
        else {
            return [ruleOrCss];
        }
    }
}
// --- Type Guards ---
function isRule(obj) {
    return obj instanceof StyleRule || obj instanceof AtRule;
}
function isStyleRule(rule) {
    return rule instanceof StyleRule;
}
function isAtRule(rule) {
    return rule instanceof AtRule;
}
function isCssDeclarationItem(item) {
    return item && typeof item === 'object' && item.type === 'declaration' &&
        typeof item.property === 'string' && typeof item.value === 'string';
}
function isCssRuleItem(item) {
    return item && typeof item === 'object' && item.type === 'rule' && isRule(item.rule);
}
function isCssCommentItem(item) {
    return item && typeof item === 'object' && item.type === 'comment' && typeof item.text === 'string';
}


/***/ }),

/***/ "../../packages/@dooboostore/core/src/promise/Promises.ts":
/*!****************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/promise/Promises.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Promises: () => (/* binding */ Promises)
/* harmony export */ });
/* harmony import */ var _valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");

var Promises;
(function (Promises) {
    Promises.filterCatch = async (promise, has) => {
        try {
            await promise;
            return undefined;
        }
        catch (e) {
            const targetHas = Array.isArray(has) ? has : [has];
            for (let ha of targetHas) {
                if (_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isConstructor(ha)) {
                    if (e instanceof ha) {
                        return e;
                    }
                }
                else {
                    if (ha(e)) {
                        return e;
                    }
                }
            }
            throw e;
        }
        // removed by dead control flow

    };
    Promises.sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));
    Promises.sleepReject = (ms) => new Promise((resolve, reject) => setTimeout(reject, ms));
    Promises.settle = async (promise) => {
        return Promise.allSettled([promise]).then(results => results[0]);
    };
    Promises.settles = async (...promises) => {
        return Promise.allSettled(promises);
    };
    Promises.loop = (config) => {
        return {
            subscribe: (callback) => {
                let stop = false;
                let age = 0;
                const loopExecute = async () => {
                    const start = Date.now();
                    let end = start;
                    age++;
                    const executeConfig = { age: age };
                    let t;
                    let isCatch = false;
                    try {
                        t = await config.factory(executeConfig);
                        end = Date.now();
                        callback.then?.(t, { ...executeConfig, duration: end - start });
                    }
                    catch (e) {
                        isCatch = true;
                        end = Date.now();
                        callback.catch?.(e, { ...executeConfig, duration: end - start });
                    }
                    await Promises.sleep(config.loopDelay ?? 0);
                    // @ts-ignore
                    callback.delayThen?.({ ...executeConfig, duration: end - start, isCatch: isCatch, data: t });
                    if (!stop)
                        return loopExecute();
                };
                setTimeout(() => {
                    loopExecute();
                }, config.delay ?? 0);
                return {
                    get closed() {
                        return stop;
                    },
                    unsubscribe: () => {
                        stop = true;
                    }
                };
            }
        };
    };
    Promises.delayExecute = (value, delay = 0) => {
        return new Promise(resolve => {
            setTimeout(async () => {
                const t = await value();
                resolve(t);
            }, delay);
        });
    };
    Promises.transaction = (promise, config) => {
        const p = typeof promise === 'function' ? promise() : promise;
        let after;
        let before;
        let promiseData;
        new Promise((resolve, reject) => {
            const execute = () => {
                before = config?.before?.();
                p.then(data => {
                    resolve(data);
                });
                after = config?.after?.();
            };
            setTimeout(() => {
                execute();
            }, config?.delay ?? 0);
            // if (config?.delay) {
            // } else {
            //   setTimeout(() => {
            //     execute();
            //   },1000);
            // }
        })
            .then(data => {
            promiseData = data;
            config?.then?.(data, { before: before });
        })
            .catch(e => {
            config?.catch?.(e, { before: before, after: after });
            if (!config?.disabledCatchThrow) {
                throw e;
            }
        })
            .finally(() => {
            config?.finally?.({ before: before, after: after, data: promiseData });
        });
    };
    Promises.withResolvers = () => {
        let resolve;
        let reject;
        const promise = new Promise((res, rej) => {
            resolve = res;
            reject = rej;
        });
        return { promise, resolve, reject };
    };
    /**
     * Execute promises in chunks with concurrency limit to prevent network overload
     * @param promiseFactories Array of promise factories (functions that return promises)
     * @param chunkSize Number of promises to execute concurrently
     * @returns Promise that resolves with all results
     */
    Promises.executeInChunks = async (promiseFactories, chunkSize = 10) => {
        const results = [];
        for (let i = 0; i < promiseFactories.length; i += chunkSize) {
            const chunk = promiseFactories.slice(i, i + chunkSize);
            const chunkResults = await Promise.all(chunk.map(factory => factory()));
            results.push(...chunkResults);
            // Add small delay between chunks to be extra safe
            if (i + chunkSize < promiseFactories.length) {
                await Promises.sleep(100);
            }
        }
        return results;
    };
    /**
     * Execute promises with concurrency limit using a pool pattern
     * @param promiseFactories Array of promise factories
     * @param concurrency Maximum number of concurrent executions
     * @returns Promise that resolves with all results
     */
    Promises.executeWithConcurrency = async (promiseFactories, concurrency = 10) => {
        const results = new Array(promiseFactories.length);
        let currentIndex = 0;
        const executeNext = async (index) => {
            while (currentIndex < promiseFactories.length) {
                const factoryIndex = currentIndex++;
                results[factoryIndex] = await promiseFactories[factoryIndex]();
            }
        };
        // Create pool of concurrent workers
        const workers = Array(Math.min(concurrency, promiseFactories.length))
            .fill(0)
            .map((_, i) => executeNext(i));
        await Promise.all(workers);
        return results;
    };
    /**
     * Execute promises with concurrency limit using race pattern (most efficient)
     * Automatically starts a new promise as soon as one completes
     * @param promiseFactories Array of promise factories
     * @param limit Maximum number of concurrent executions (default: 5)
     * @returns Promise that resolves with all results
     */
    Promises.executeWithLimit = async (promiseFactories, limit = 5) => {
        const results = new Array(promiseFactories.length);
        const executing = [];
        for (const [index, factory] of promiseFactories.entries()) {
            const promise = factory()
                .then(result => {
                results[index] = result;
            })
                .finally(() => {
                executing.splice(executing.indexOf(promise), 1);
            });
            executing.push(promise);
            if (executing.length >= limit) {
                await Promise.race(executing);
            }
        }
        await Promise.all(executing);
        return results;
    };
    let Result;
    (function (Result) {
        async function awaitWrap(promise) {
            const data = typeof promise === 'function' ? wrap(promise) : wrap(promise);
            // try {
            try {
                await data;
            }
            catch (e) {
            }
            const rData = {
                status: data.status,
                isFulfilled: data.isFulfilled,
                isRejected: data.isRejected,
                isPending: data.isPending,
                value: data.value,
                reason: data.reason,
            };
            if (typeof promise === 'function') {
                rData.factory = () => {
                    return awaitWrap(promise);
                };
                return rData;
            }
            else {
                return rData;
            }
        }
        Result.awaitWrap = awaitWrap;
        function wrap(promise) {
            const promiseResult = (typeof promise === 'function' ? promise() : promise);
            if (typeof promise === 'function') {
                const p = promiseResult;
                p.factory = () => {
                    return wrap(promise);
                };
            }
            if (promiseResult.status === undefined) {
                const p = promiseResult;
                p.status = 'pending';
                p.isPending = true;
                p.isFulfilled = false;
                p.isRejected = false;
                p.then(result => {
                    console.log('result??', result);
                    const p = promiseResult;
                    p.status = 'fulfilled';
                    p.isFulfilled = true;
                    p.isRejected = false;
                    p.isPending = false;
                    p.value = result;
                }, reason => {
                    console.log('rejet??', reason);
                    const p = promiseResult;
                    p.status = 'rejected';
                    p.isFulfilled = false;
                    p.isRejected = true;
                    p.isPending = false;
                    p.reason = reason;
                });
            }
            return promiseResult;
        }
        Result.wrap = wrap;
    })(Result = Promises.Result || (Promises.Result = {}));
})(Promises || (Promises = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/random/RandomUtils.ts":
/*!******************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/random/RandomUtils.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RandomUtils: () => (/* binding */ RandomUtils)
/* harmony export */ });
/* harmony import */ var _valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");

var RandomUtils;
(function (RandomUtils) {
    // export const readonly d = ''
    // export const getUniqueNumbers = (max: number, length: number) => {
    //   max = Math.max(max, 0);
    //   length = Math.max(Math.min(max, length), 0);
    //   const array: number[] = [];
    //   while (array.length < length) {
    //     const num = Math.floor(Math.random() * max);
    //     if (!array.includes(num)) array.push(num);
    //   }
    //   return array;
    // };
    RandomUtils.uniqueInts = (min, max, count) => {
        const result = [];
        if (count > max - min) {
            throw new Error('Count is greater than the range of unique integers');
        }
        while (result.length < count) {
            const randomInt = RandomUtils.int(min, max);
            if (!result.includes(randomInt)) {
                result.push(randomInt);
            }
        }
        return result;
    };
    RandomUtils.chance = (percentage) => {
        if (percentage < 0 || percentage > 1) {
            throw new Error('Percentage must be between 0 and 1');
        }
        return Math.random() < percentage;
    };
    // max는 포함하지 않음
    RandomUtils.int = (min, max) => {
        return Math.floor(RandomUtils.float(min, max));
    };
    // ex) 0,5   0~<5   <5는 포함하지 않습니다.   소수점포함
    RandomUtils.float = (min, max) => {
        if (_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isNullOrUndefined(min)) {
            return Math.random();
        }
        else if (!_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isNullOrUndefined(min) && _valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isNullOrUndefined(max)) {
            return Math.random() * (min || 0);
        }
        else {
            return Math.random() * ((max || 0) - (min || 0)) + (min || 0);
        }
    };
    RandomUtils.uuid = (format = 'xxxx-xxxx-xxxx-xxxx') => {
        return format.replace(/[xy]/g, function (c) {
            const r = Math.random() * 16 | 0;
            const v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    };
    RandomUtils.uuid4 = () => {
        // // return uuid of form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx
        let uuid = '';
        let ii;
        for (ii = 0; ii < 32; ii += 1) {
            switch (ii) {
                case 8:
                case 20:
                    uuid += '-';
                    uuid += ((Math.random() * 16) | 0).toString(16);
                    break;
                case 12:
                    uuid += '-';
                    uuid += '4';
                    break;
                case 16:
                    uuid += '-';
                    uuid += ((Math.random() * 4) | 8).toString(16);
                    break;
                default:
                    uuid += ((Math.random() * 16) | 0).toString(16);
            }
        }
        return uuid;
    };
    RandomUtils.hex = () => {
        const letters = '0123456789ABCDEF'.split('');
        let hex = '';
        for (let i = 0; i < 6; i++) {
            hex += letters[Math.floor(Math.random() * 16)];
        }
        return hex;
    };
    RandomUtils.rgb = () => {
        const letters = '0123456789ABCDEF'.split('');
        let color = '#';
        for (let i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    };
    RandomUtils.rgba = () => {
        const letters = '0123456789ABCDEF'.split('');
        let color = '#';
        for (let i = 0; i < 8; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    };
    // (Math.random().toString(36)+'00000000000000000').slice(2, 10) + Date.now()
    RandomUtils.alphabet = (len) => {
        const letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        let color = '';
        for (let i = 0; i < len; i++) {
            color += letters[Math.floor(Math.random() * letters.length)];
        }
        return color;
    };
})(RandomUtils || (RandomUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ReflectUtils: () => (/* binding */ ReflectUtils)
/* harmony export */ });
var ReflectUtils;
(function (ReflectUtils) {
    ReflectUtils.getParameterTypes = (target, propertyKey) => {
        // console.log('---------param')
        if (propertyKey) {
            return Reflect.getMetadata('design:paramtypes', target, propertyKey) || [];
        }
        else {
            return Reflect.getMetadata('design:paramtypes', target) || [];
        }
    };
    ReflectUtils.getReturnType = (target, propertyKey) => {
        return Reflect.getMetadata('design:returntype', target, propertyKey);
    };
    // @Reflect.metadata("design:type", Point)
    ReflectUtils.getType = (target, propertyKey) => {
        if (propertyKey) {
            return Reflect.getMetadata('design:type', target, propertyKey);
        }
        else {
            return Reflect.getMetadata('design:type', target);
        }
    };
    ReflectUtils.getMetadata = (metadataKey, target, propertyKey) => {
        if (propertyKey) {
            return Reflect.getMetadata(metadataKey, target, propertyKey);
        }
        else {
            return Reflect.getMetadata(metadataKey, target);
        }
    };
    ReflectUtils.getMetadataKeys = (target) => {
        return Reflect.getMetadataKeys(target);
    };
    ReflectUtils.getOwnMetadata = (metadataKey, target, propertyKey) => {
        if (propertyKey) {
            return Reflect.getOwnMetadata(metadataKey, target, propertyKey);
        }
        else {
            return Reflect.getOwnMetadata(metadataKey, target);
        }
    };
    ReflectUtils.getMetadatas = (target) => {
        return ReflectUtils.getMetadataKeys(target).map(it => ReflectUtils.getMetadata(it, target));
    };
    ReflectUtils.metadata = (metadataKey, data) => {
        return Reflect.metadata(metadataKey, data);
    };
    ReflectUtils.defineMetadata = (metadataKey, value, target, propertyKey) => {
        // console.log("Reflect:",Reflect)
        if (propertyKey && Reflect.defineMetadata) {
            Reflect.defineMetadata(metadataKey, value, target, propertyKey);
        }
        else if (Reflect.defineMetadata) {
            Reflect.defineMetadata(metadataKey, value, target);
            // Reflect.defineMetadata("design:paramtypes", value, target);
        }
        // console.log("Reflect:",Reflect.getMetadata(metadataKey, target))
        // console.log("Reflect:",Reflect.getMetadata('design:paramtypes', target))
    };
})(ReflectUtils || (ReflectUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/string/StringUtils.ts":
/*!******************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/string/StringUtils.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StringUtils: () => (/* binding */ StringUtils)
/* harmony export */ });
/* harmony import */ var _valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");

var StringUtils;
(function (StringUtils) {
    StringUtils.deleteEnter = (data) => {
        return data.replace(/\r?\n/g, '');
    };
    StringUtils.pickEmoji = (data) => {
        return data.match(/[\p{Emoji}]/gu) ?? [];
    };
    StringUtils.regexExec = (regex, text) => {
        let varExec = regex.exec(text);
        const usingVars = [];
        while (varExec) {
            usingVars.push(varExec);
            varExec = regex.exec(varExec.input);
        }
        return usingVars;
    };
    StringUtils.escapeSpecialCharacterRegExp = (data) => {
        return data.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    };
    StringUtils.trim = (data) => data.trim();
    StringUtils.rsubString = (data_s, blen_n) => data_s.substring(data_s.length - blen_n, data_s.length);
    StringUtils.lsubString = (data_s, alen_n) => data_s.substring(0, alen_n);
    StringUtils.lpad = (fill_s, len_n, full_s) => {
        while (len_n > full_s.length) {
            full_s = fill_s + full_s;
        }
        return StringUtils.rsubString(full_s, len_n);
    };
    StringUtils.rpad = (fill_s, len_n, full_s) => {
        while (len_n > full_s.length) {
            full_s += fill_s;
        }
        return StringUtils.lsubString(full_s, len_n);
    };
    StringUtils.lappend = (count_n, input_s) => {
        let s = '';
        let i = 0;
        while (i++ < count_n) {
            s += input_s;
        }
        return s;
    };
    StringUtils.unescape = (html) => {
        if (!html)
            return '';
        const htmlEntity = {
            quot: '"',
            amp: '&',
            apos: "'",
            lt: '<',
            gt: '>',
            nbsp: '\u00A0',
            iexcl: '¡',
            cent: '¢',
            pound: '£',
            curren: '¤',
            yen: '¥',
            brvbar: '¦',
            sect: '§',
            uml: '¨',
            copy: '©',
            ordf: 'ª',
            laquo: '«',
            not: '¬',
            shy: '\u00AD',
            reg: '®',
            macr: '¯',
            deg: '°',
            plusmn: '±',
            sup2: '²',
            sup3: '³',
            acute: '´',
            micro: 'µ',
            para: '¶',
            middot: '·',
            cedil: '¸',
            sup1: '¹',
            ordm: 'º',
            raquo: '»',
            frac14: '¼',
            frac12: '½',
            frac34: '¾',
            iquest: '¿',
            '#x27': "'"
        };
        return html.replace(/&((?:(?:[a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});?)+);/gi, (match, entity) => {
            const entities = entity.toLowerCase().split(';');
            return entities.map(it => (it in htmlEntity ? htmlEntity[it] : match)).join('');
        });
    };
    StringUtils.executeExpression = (formatString, object) => {
        return formatString.replace(/\${([^{}]*)}/g, (matched, piece) => String(object[piece] ?? matched));
    };
    StringUtils.ellipsis = (text, length) => {
        if (text.length > length)
            return `${text.slice(0, length)}...`;
        return text;
    };
    /*
    const str = 'dr-class:set("MycLasS")'; // 또는 'dr-class'
    const regex = /^([^\s:]+)(?::(\w+)\("([^"]+)"\))?$/;
    const match = str.match(regex);
    
    if (match) {
      const className = match[1]; // dr-class
      const functionName = match[2] || ''; // set 또는 ''
      const argument = match[3] || ''; // MycLasS 또는 ''
      console.log('Class Name:', className);
      console.log('Function Name:', functionName);
      console.log('Argument:', argument);
    } else {
      console.log('Invalid format');
    }
     */
    // type Postposition =
    /**
     * Appends a postposition to the given text based on the provided options.
     * @param {string} text - The text to append the postposition to.
     * @param {object} options - The options for postposition.
     * @param {string} options.vowel - The postposition to append if the text ends with a vowel(모음).
     * @param {string} options.consonant - The postposition to append if the text ends with a consonant(자음).
     * @returns {string} - The text with the appropriate postposition appended.
     */
    StringUtils.appendPostposition = (text, { vowel, consonant }) => {
        return `${text}${_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.lastConsonantLetter(text) ? consonant : vowel}`;
    };
    StringUtils.replaceSequentially = (text, replacements) => {
        let remainingText = text;
        let result = '';
        // console.log('Executing replaceSequentially with robust fix');
        while (remainingText.length > 0) {
            let bestMatch = null;
            // Find the earliest match in the remaining text
            for (const replacement of replacements) {
                const newRegex = new RegExp(replacement.regex);
                const match = newRegex.exec(remainingText);
                if (match) {
                    if (bestMatch === null || match.index < bestMatch.index) {
                        bestMatch = { index: match.index, match, replacement };
                    }
                }
            }
            if (bestMatch) {
                const { index, match, replacement } = bestMatch;
                const matchedString = match[0];
                // Append the text before the match and the replacement
                result += remainingText.substring(0, index);
                result += replacement.callback(matchedString);
                // Update remainingText to be the part after the match
                remainingText = remainingText.substring(index + matchedString.length);
            }
            else {
                // No more matches, append the rest of the text and finish
                result += remainingText;
                break;
            }
        }
        return result;
    };
})(StringUtils || (StringUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/core/src/types.ts":
/*!*****************************************************!*\
  !*** ../../packages/@dooboostore/core/src/types.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isDefined: () => (/* binding */ isDefined)
/* harmony export */ });
// export const isDefined = <T>(value: T | undefined | null): value is T => value !== undefined && value !== null;
// export const isDefined = <T>(value: T | undefined | null): value is NonNullable<T> => value !== undefined && value !== null;
const isDefined = (value) => value !== undefined && value !== null;


/***/ }),

/***/ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts":
/*!****************************************************************!*\
  !*** ../../packages/@dooboostore/core/src/valid/ValidUtils.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ValidUtils: () => (/* binding */ ValidUtils)
/* harmony export */ });
var ValidUtils;
(function (ValidUtils) {
    ValidUtils.isArrowFunction = (fn) => {
        // 1. 함수가 아니면 false
        if (typeof fn !== 'function') {
            return false;
        }
        // 2. prototype 속성이 없으면 화살표 함수 (또는 prototype이 없는 다른 callable)
        // 3. 클래스는 'class' 키워드로 시작하므로 제외
        return typeof fn.prototype === 'undefined' && !fn.toString().startsWith('class');
    };
    ValidUtils.isPlainObject = (obj) => {
        return obj !== null && typeof obj === 'object' && obj.constructor === Object;
    };
    const isConstructorLike = (fn) => {
        // 1. 함수여야 하고,
        // 2. prototype 속성을 가져야 함
        return typeof fn === 'function' && typeof fn.prototype !== 'undefined';
    };
    ValidUtils.isFrozen = (obj) => {
        return Object.isFrozen(obj);
    };
    ValidUtils.isSealed = (obj) => {
        return Object.isSealed(obj);
    };
    ValidUtils.isFrozenOrSealed = (obj) => {
        return ValidUtils.isFrozen(obj) || ValidUtils.isSealed(obj);
    };
    ValidUtils.isFrozenAndSealed = (obj) => {
        return ValidUtils.isFrozen(obj) && ValidUtils.isSealed(obj);
    };
    ValidUtils.isNotFrozen = (obj) => {
        return !Object.isFrozen(obj);
    };
    ValidUtils.isNotSealed = (obj) => {
        return !Object.isSealed(obj);
    };
    ValidUtils.isNotFrozenOrSealed = (obj) => {
        return !ValidUtils.isFrozen(obj) && !ValidUtils.isSealed(obj);
    };
    ValidUtils.isNotFrozenAndSealed = (obj) => {
        return !ValidUtils.isFrozen(obj) || !ValidUtils.isSealed(obj);
    };
    ValidUtils.isNullOrUndefined = (data) => {
        return data == null || undefined === data;
    };
    ValidUtils.isConstructor = (obj) => {
        // 함수이면서 prototype 속성이 있고 prototype이 객체인지 확인
        return typeof obj === 'function'
            && obj.prototype !== undefined
            && obj.prototype.constructor === obj;
        // && Object.getOwnPropertyNames(obj.prototype).length > 1; // constructor 외에 다른 속성이 있는지 확인
    };
    ValidUtils.isFunction = (obj) => {
        return typeof obj === 'function' && !ValidUtils.isConstructor(obj);
    };
    ValidUtils.isNullish = (data) => {
        return ValidUtils.isNotNullish(data);
    };
    ValidUtils.isNotNullish = (data) => {
        if ((Array.isArray(data) || ValidUtils.isString(data))) {
            return data.length > 0;
        }
        if (data instanceof Set || data instanceof Map) {
            return data.size > 0;
        }
        if (typeof data === 'object' && data !== null) {
            return Object.keys(data).length > 0;
        }
        return data !== null && data !== undefined;
    };
    ValidUtils.isNotNullUndefined = (data) => {
        return data !== null && data !== undefined;
    };
    ValidUtils.isNull = (data) => {
        return data === null;
    };
    ValidUtils.isUndefined = (data) => {
        return data === undefined;
    };
    ValidUtils.isArray = (object_o) => {
        if (ValidUtils.isNullOrUndefined(object_o)) {
            return false;
        }
        else {
            return Object.prototype.toString.call(object_o).trim() === '[object Array]';
        }
    };
    ValidUtils.isStringNumber = (value) => {
        if (typeof value === 'number') {
            return !isNaN(value);
        }
        return typeof value === 'string' && value.trim() !== '' && !isNaN(Number(value));
    };
    ValidUtils.isNumber = (object_o) => {
        if (ValidUtils.isNullOrUndefined(object_o)) {
            return false;
        }
        else {
            return Object.prototype.toString.call(object_o).trim() === '[object Number]';
        }
    };
    ValidUtils.isIterator = (object_o) => {
        return object_o != null && typeof object_o[Symbol.iterator] === 'function';
    };
    ValidUtils.isString = (object_o) => {
        if (ValidUtils.isNullOrUndefined(object_o)) {
            return false;
        }
        else {
            return Object.prototype.toString.call(object_o).trim() === '[object String]';
        }
    };
    // export const isFunction = (object_o: any): boolean => {
    //   if (ValidUtils.isNullOrUndefined(object_o)) {
    //     return false
    //   } else {
    //     return Object.prototype.toString.call(object_o).trim() === '[object Function]'
    //   }
    //   // if (typeof object_o === 'function') {
    //   //     return true;
    //   // }else {
    //   //     return false;
    //   // }
    // }
    ValidUtils.isObject = (object_o) => {
        if (ValidUtils.isNullOrUndefined(object_o)) {
            return false;
        }
        else {
            return Object.prototype.toString.call(object_o).trim() === '[object Object]';
        }
    };
    ValidUtils.isMap = (object_o) => {
        if (ValidUtils.isNullOrUndefined(object_o)) {
            return false;
        }
        else {
            return Object.prototype.toString.call(object_o).trim() === '[object Map]';
        }
    };
    ValidUtils.isEmpty = (object_o) => {
        if (ValidUtils.isNullOrUndefined(object_o)) {
            return true;
        }
        else if (ValidUtils.isArray(object_o)) {
            return object_o.length === 0;
        }
        else if (ValidUtils.isString(object_o)) {
            return object_o.trim().length === 0;
        }
        else if (ValidUtils.isMap(object_o)) {
            return object_o.size === 0;
        }
        else if (ValidUtils.isObject(object_o)) {
            return Object.keys(object_o).length === 0;
        }
        else {
            return false;
        }
    };
    ValidUtils.isSet = (data) => {
        return data instanceof Set;
    };
    ValidUtils.isNullishFiltered = (value) => {
        if (Array.isArray(value)) {
            return value.every(it => it !== undefined && it !== null);
        }
        return value !== undefined && value !== null;
    };
    ValidUtils.isFalsyFiltered = (value) => {
        if (Array.isArray(value)) {
            return value.every(it => {
                return it;
            });
        }
        return !!value;
    };
    ValidUtils.includeValue = (obj, value) => {
        return Object.values(obj).includes(value);
    };
    ValidUtils.includeKey = (obj, key) => {
        return Object.keys(obj).includes(key);
    };
    /** 종성이 있는지 확인하는 함수 */
    ValidUtils.lastConsonantLetter = (value) => {
        const lastLetter = value.charCodeAt(value.length - 1);
        return (lastLetter - 0xac00) % 28 > 0;
    };
    ValidUtils.inRange = (value, min, max) => {
        return min <= value && value <= max;
    };
    ValidUtils.isBase64 = (inputString) => {
        // data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAA
        // const isValidBase64 = /^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;
        // return isValidBase64.test(base64String);
        let base64Data = inputString;
        // Data URL 접두사 제거 (예: "data:image/png;base64,")
        const parts = inputString.split(';base64,');
        if (parts.length > 1) {
            base64Data = parts[1];
        }
        else {
            // "data:"만 있고 ";base64,"가 없는 경우도 고려 (엄밀히는 base64가 아닐 수 있음)
            if (inputString.startsWith('data:')) {
                // 이 경우는 유효한 base64로 간주할지 정책에 따라 다름
                // 여기서는 일단 base64 부분이 없다고 가정하고 false 처리
                // return false;
                // 또는 접두사만 제거하고 남은 부분을 테스트할 수도 있음
                const commaIndex = inputString.indexOf(',');
                if (commaIndex > -1) {
                    base64Data = inputString.substring(commaIndex + 1);
                }
                else {
                    // 순수 base64가 아닐 가능성 높음
                    // return false;
                }
            }
        }
        // Base64 유효성 검사 정규식
        // - 문자열 길이는 4의 배수여야 함 (패딩 제외)
        // - 패딩 '='는 최대 2개까지 문자열 끝에만 올 수 있음
        // - 패딩이 1개일 경우, 그 앞 문자는 [A-Za-z0-9+/]
        // - 패딩이 2개일 경우, 그 앞 두 문자는 [A-Za-z0-9+/]
        // 조금 더 엄격하고 효율적인 정규식:
        const base64Regex = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;
        // 추가적으로, 실제 base64 문자열은 패딩을 제외한 길이가 4의 배수여야 합니다.
        // 정규식만으로는 이 부분을 완벽히 커버하기 어려울 수 있어, 길이 체크를 추가하는 것이 좋습니다.
        // 하지만 현재 제공된 정규식은 이 부분을 어느 정도 고려하고 있습니다.
        // (([A-Za-z0-9+/]{4})* 부분과 패딩 부분)
        if (base64Data === '' || base64Data.length % 4 !== 0) {
            // 빈 문자열이거나, 길이가 4의 배수가 아니면 (일반적으로) 유효한 base64가 아님.
            // (단, 일부 라이브러리는 패딩이 없는 base64도 허용하므로, 엄격한 기준에 따라 다름)
            // 현재 정규식은 패딩이 올바르게 적용된 경우 길이가 4의 배수가 아닌 경우도 통과시킬 수 있음
            // 예: "QQ" (길이 2) -> false, "QQQ" (길이 3) -> false
            // "QQ==" (길이 4) -> true, "QQQ=" (길이 4) -> true
            // "QQQ"는 `base64Regex.test("QQQ")`는 false이지만, `Buffer.from("QQQ", "base64").toString("base64")`는 "QQ=="를 반환.
            // 엄밀하게는 디코딩 시도 후 다시 인코딩해서 원본과 같은지 비교하는 것이 가장 확실하지만, 성능 이슈가 있을 수 있음.
        }
        return base64Regex.test(base64Data);
    };
})(ValidUtils || (ValidUtils = {}));


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/DomRender.ts":
/*!***************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/DomRender.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomRender: () => (/* binding */ DomRender)
/* harmony export */ });
/* harmony import */ var _DomRenderProxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DomRenderProxy */ "../../packages/@dooboostore/dom-render/src/DomRenderProxy.ts");
/* harmony import */ var _routers_PathRouter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routers/PathRouter */ "../../packages/@dooboostore/dom-render/src/routers/PathRouter.ts");
/* harmony import */ var _routers_HashRouter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./routers/HashRouter */ "../../packages/@dooboostore/dom-render/src/routers/HashRouter.ts");
/* harmony import */ var _types_Types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/Types */ "../../packages/@dooboostore/dom-render/src/types/Types.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _messenger_DefaultMessenger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./messenger/DefaultMessenger */ "../../packages/@dooboostore/dom-render/src/messenger/DefaultMessenger.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components */ "../../packages/@dooboostore/dom-render/src/components/index.ts");
/* harmony import */ var _events_EventManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./events/EventManager */ "../../packages/@dooboostore/dom-render/src/events/EventManager.ts");
/* harmony import */ var _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @dooboostore/core/random/RandomUtils */ "../../packages/@dooboostore/core/src/random/RandomUtils.ts");









let eventManager = null;
class DomRender {
    _config;
    _target;
    _rootObject;
    _router;
    _eventManager;
    constructor(parameter, executeConfig) {
        const s = DomRender.runSet(parameter, executeConfig);
        this._config = s.config;
        this._target = s.target;
        this._rootObject = s.rootObject;
        this._router = s.config.router;
        this._eventManager = s.config.eventManager;
        // if (executeConfig && executeConfig?.autoGo) {
        //   this._config.router?.go(executeConfig.autoGo);
        // }
    }
    get rootObject() {
        return this._rootObject;
    }
    get config() {
        return this._config;
    }
    get router() {
        return this._router;
    }
    get eventManager() {
        return this._eventManager;
    }
    get target() {
        return this._target;
    }
    static run(data) {
        return DomRender.runSet(data).rootObject;
    }
    static runSet({ rootObject, target, config }, executeConfig) {
        // public static run<T extends object>({rootObject, target, config}: DomRenderRunParameter<T>): T {
        //   console.log('runSet')
        rootObject = typeof rootObject === 'function' ? rootObject() : rootObject;
        let targetObject = rootObject;
        if ('_DomRender_isProxy' in rootObject) {
            if (target) {
                rootObject._DomRender_proxy.initRender(target);
            }
            targetObject = rootObject;
            // return targetObject;
            return { rootObject: targetObject, target, config: rootObject._domRender_config };
        }
        const targetConfig = Object.assign({}, config);
        eventManager ??= new _events_EventManager__WEBPACK_IMPORTED_MODULE_7__.EventManager(targetConfig.window);
        targetConfig.uuid = _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_8__.RandomUtils.uuid4();
        targetConfig.messenger = _types_Types__WEBPACK_IMPORTED_MODULE_3__.DomRenderFinalProxy.final(targetConfig.messenger ?? new _messenger_DefaultMessenger__WEBPACK_IMPORTED_MODULE_5__.DefaultMessenger(targetConfig));
        targetConfig.proxyExcludeTyps = targetConfig.proxyExcludeTyps ?? [];
        targetConfig.targetElements ??= [];
        if (typeof Window !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === Window)) {
            targetConfig.proxyExcludeTyps.push(Window);
        }
        if (typeof Map !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === Map)) {
            targetConfig.proxyExcludeTyps.push(Map);
        }
        if (typeof Set !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === Set)) {
            targetConfig.proxyExcludeTyps.push(Set);
        }
        if (typeof Promise !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === Promise)) {
            targetConfig.proxyExcludeTyps.push(Promise);
        }
        if (typeof ResizeObserver !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === ResizeObserver)) {
            targetConfig.proxyExcludeTyps.push(ResizeObserver);
        }
        if (typeof ImageBitmap !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === ImageBitmap)) {
            targetConfig.proxyExcludeTyps.push(ImageBitmap);
        }
        if (typeof CanvasRenderingContext2D !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === CanvasRenderingContext2D)) {
            targetConfig.proxyExcludeTyps.push(CanvasRenderingContext2D);
        }
        if (typeof CSSStyleDeclaration !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === CSSStyleDeclaration)) {
            targetConfig.proxyExcludeTyps.push(CSSStyleDeclaration);
        }
        if (typeof Date !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === Date)) {
            targetConfig.proxyExcludeTyps.push(Date);
        }
        if (typeof MutationObserver !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === IntersectionObserver)) {
            targetConfig.proxyExcludeTyps.push(IntersectionObserver);
        }
        if (typeof IntersectionObserver !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === IntersectionObserver)) {
            targetConfig.proxyExcludeTyps.push(IntersectionObserver);
        }
        if (typeof HTMLElement !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === HTMLElement)) {
            targetConfig.proxyExcludeTyps.push(HTMLElement);
        }
        // if (typeof HTMLCanvasElement !== 'undefined' && !targetConfig.proxyExcludeTyps.some(it => it === HTMLCanvasElement)) {
        //   targetConfig.proxyExcludeTyps.push(HTMLCanvasElement);
        // }
        if (!targetConfig.proxyExcludeTyps.some(it => it === _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_4__.RawSet)) {
            targetConfig.proxyExcludeTyps.push(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_4__.RawSet);
        }
        if (!targetConfig.proxyExcludeTyps.some(it => it === DomRender)) {
            targetConfig.proxyExcludeTyps.push(DomRender);
        }
        targetConfig.rootElement = target;
        targetConfig.eventManager = eventManager;
        // (targetConfig.window as any).domRender ??= {configs: []};
        // (targetConfig.window as any).domRender.configs.push(targetConfig);
        const domRender = new _DomRenderProxy__WEBPACK_IMPORTED_MODULE_0__.DomRenderProxy(rootObject, target, targetConfig);
        const dest = new Proxy(rootObject, domRender);
        targetObject = dest;
        targetConfig.root = targetObject;
        // proxy 된 targetObject를 넣어줘야되서 뒤쪽에서 router를 생성해야함
        if (!targetConfig.router) {
            let targetRouter;
            if ('routerType' in config && config?.routerType === 'hash') {
                targetRouter = new _routers_HashRouter__WEBPACK_IMPORTED_MODULE_2__.HashRouter({ rootObject: targetObject, window: targetConfig.window, firstUrl: executeConfig?.firstUrl });
            }
            else if ('routerType' in config && config?.routerType === 'path') {
                targetRouter = new _routers_PathRouter__WEBPACK_IMPORTED_MODULE_1__.PathRouter({ rootObject: targetObject, window: targetConfig.window, firstUrl: executeConfig?.firstUrl });
            }
            else if ('routerType' in config && typeof config?.routerType === 'function') {
                targetRouter = config.routerType(targetObject, targetConfig);
            }
            else if ('routerType' in config && typeof config?.routerType === 'object') {
                targetRouter = config.routerType;
            }
            targetConfig.router = targetRouter;
        }
        for (const value of Object.values(_components__WEBPACK_IMPORTED_MODULE_6__.drComponent)) {
            const a = value(targetConfig, DomRender);
            if (!targetConfig.targetElements.some(it => it.name === a.name)) {
                targetConfig.targetElements.push(a);
            }
        }
        // console.log('cccccccccccccccccc', targetRouter)
        // targetRouter.go({path: targetRouter.getUrl()})
        // if (!config.router) {
        //   if (config.routerType === 'path') {
        //     config.router = new PathRouter(targetObject, config.window);
        //   } else if (config.routerType === 'hash') {
        //     config.router = new HashRouter(targetObject, config.window);
        //   } else { // none
        //     config.router = new HashRouter(targetObject, config.window);
        //   }
        // }
        domRender.run(targetObject);
        return { rootObject: targetObject, config: targetConfig, target };
        // return targetObject;
    }
    static createComponent(param) {
        // console.log('===>', typeof param.type, param.type.name, param.type.constructor.name)
        const component = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_4__.RawSet.createComponentTargetElement({
            name: param.tagName ?? (typeof param.type === 'function' ? param.type.name : param.type.constructor.name),
            objFactory: (e, o, r2, counstructorParam) => {
                return typeof param.type === 'function' ? new param.type(...counstructorParam) : param.type;
            },
            noStrip: param.noStrip,
            template: param.template ?? '',
            styles: Array.isArray(param.styles) ? param.styles : param.styles ? [param.styles] : undefined
        });
        return component;
    }
    // ?? 언제 쓰는거지?? 훔..
    static createAttribute(attrName, getThisObj, factory) {
        const targetAttribute = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_4__.RawSet.createComponentTargetAttribute(attrName, getThisObj, factory);
        return targetAttribute;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/DomRenderProxy.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/DomRenderProxy.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomRenderProxy: () => (/* binding */ DomRenderProxy),
/* harmony export */   getDomRenderConfig: () => (/* binding */ getDomRenderConfig),
/* harmony export */   getDomRenderOriginObject: () => (/* binding */ getDomRenderOriginObject),
/* harmony export */   getDomRenderProxy: () => (/* binding */ getDomRenderProxy),
/* harmony export */   isWrapProxyDomRenderProxy: () => (/* binding */ isWrapProxyDomRenderProxy)
/* harmony export */ });
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _events_EventManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events/EventManager */ "../../packages/@dooboostore/dom-render/src/events/EventManager.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _types_Types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/Types */ "../../packages/@dooboostore/dom-render/src/types/Types.ts");
/* harmony import */ var _rawsets_RawSetType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rawsets/RawSetType */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSetType.ts");
/* harmony import */ var _operators_DrThisProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./operators/DrThisProperty */ "../../packages/@dooboostore/dom-render/src/operators/DrThisProperty.ts");
/* harmony import */ var _rawsets_RawSetOperatorType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./rawsets/RawSetOperatorType */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSetOperatorType.ts");
/* harmony import */ var _components_ComponentSet__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/ComponentSet */ "../../packages/@dooboostore/dom-render/src/components/ComponentSet.ts");
/* harmony import */ var _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./decorators/DomRenderNoProxy */ "../../packages/@dooboostore/dom-render/src/decorators/DomRenderNoProxy.ts");
/* harmony import */ var _lifecycle_OnCreateRender__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lifecycle/OnCreateRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRender.ts");
/* harmony import */ var _lifecycle_OnInitRender__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lifecycle/OnInitRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnInitRender.ts");
/* harmony import */ var _lifecycle_OnCreateRenderData__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lifecycle/OnCreateRenderData */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRenderData.ts");
/* harmony import */ var _lifecycle_OnChangeAttrRender__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lifecycle/OnChangeAttrRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnChangeAttrRender.ts");
/* harmony import */ var _dooboostore_core_web_document_DocumentUtils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @dooboostore/core-web/document/DocumentUtils */ "../../packages/@dooboostore/core-web/src/document/DocumentUtils.ts");
/* harmony import */ var _dooboostore_core_types__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @dooboostore/core/types */ "../../packages/@dooboostore/core/src/types.ts");
/* harmony import */ var _lifecycle_OnBeforeReturnSet__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lifecycle/OnBeforeReturnSet */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnBeforeReturnSet.ts");
/* harmony import */ var _lifecycle_OnChildRenderedByProperty__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lifecycle/OnChildRenderedByProperty */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnChildRenderedByProperty.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");
/* harmony import */ var _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @dooboostore/core/valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");
/* harmony import */ var _lifecycle_OnProxyDomRender__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./lifecycle/OnProxyDomRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnProxyDomRender.ts");
/* harmony import */ var _lifecycle_OnRawSetRendered__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./lifecycle/OnRawSetRendered */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnRawSetRendered.ts");





















const excludeGetSetPropertys = [
    'onBeforeReturnGet',
    'onBeforeReturnSet',
    '__domrender_components',
    '__render',
    '_DomRender_isFinal',
    '_domRender_ref',
    '_rawSets',
    '_domRender_proxy',
    '_targets',
    '_DomRender_origin',
    '_DomRender_ref',
    '_DomRender_proxy'
];
const isWrapProxyDomRenderProxy = (obj) => {
    return obj && typeof obj === 'object' && '_DomRender_isProxy' in obj;
};
const getDomRenderOriginObject = (obj) => {
    if (isWrapProxyDomRenderProxy(obj)) {
        return obj._domRender_origin;
    }
    return obj;
};
const getDomRenderConfig = (obj) => {
    if (isWrapProxyDomRenderProxy(obj)) {
        return obj._domRender_config;
    }
    return undefined;
};
//@ts-ignore
const getDomRenderProxy = (obj) => {
    if (isWrapProxyDomRenderProxy(obj)) {
        //@ts-ignore
        return obj._domRender_proxy;
    }
    return undefined;
};
class DomRenderProxy {
    _domRender_origin;
    _domRender_config;
    _domRender_ref = new Map();
    _rawSets = new Map();
    _domRender_proxy;
    // public _firstTarget: Node;
    _targets = new Set();
    constructor(_domRender_origin, target, _domRender_config) {
        this._domRender_origin = _domRender_origin;
        this._domRender_config = _domRender_config;
        if (target) {
            this._targets.add(target);
            // this._firstTarget = target;
        }
        // setInterval(() => {
        //   this._rawSets.forEach(it => {
        //     Array.from(it).forEach(it => {
        //       console.log(it, it.isConnected)
        //     })
        //   });
        // }, 1000)
    }
    static unFinal(obj) {
        return _types_Types__WEBPACK_IMPORTED_MODULE_3__.DomRenderFinalProxy.unFinal(obj);
    }
    static final(obj) {
        return _types_Types__WEBPACK_IMPORTED_MODULE_3__.DomRenderFinalProxy.final(obj);
    }
    static isFinal(obj) {
        return _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_18__.ValidUtils.isNull(obj) || _types_Types__WEBPACK_IMPORTED_MODULE_3__.DomRenderFinalProxy.isFinal(obj);
    }
    async run(objProxy) {
        this._domRender_proxy = objProxy;
        if ((0,_lifecycle_OnProxyDomRender__WEBPACK_IMPORTED_MODULE_19__.isOnProxyDomRender)(objProxy)) {
            objProxy.onProxyDomRender(this._domRender_config);
        }
        const obj = getDomRenderOriginObject(objProxy);
        if (obj) {
            Object.keys(obj).forEach(it => {
                // Reflect 메타데이터에서 domRender:NoProxy 여부 확인
                try {
                    const isNoProxy = Reflect.getMetadata(_decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_8__.DomRenderNoProxyKey, obj, it) ||
                        Reflect.getMetadata(_decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_8__.DomRenderNoProxyKey, Object.getPrototypeOf(obj).constructor);
                    if (isNoProxy) {
                        return obj;
                    }
                }
                catch (e) { }
                const target = obj[it];
                if (target !== undefined &&
                    target !== null &&
                    typeof target === 'object' &&
                    !DomRenderProxy.isFinal(target) &&
                    !Object.isFrozen(target) &&
                    !(obj instanceof _types_Types__WEBPACK_IMPORTED_MODULE_3__.Shield)) {
                    const isExcluded = this._domRender_config.proxyExcludeTyps?.some(it => target instanceof it) ?? false;
                    // const filter = this._domRender_config.proxyExcludeTyps?.filter(it => target instanceof it) ?? [];
                    if (!isExcluded) {
                        const proxyAfter = this.proxy(objProxy, target, it);
                        obj[it] = proxyAfter;
                    }
                }
            });
        }
        // console.log('target', this._targets);
        for (let target of this._targets) {
            await this.initRender(target);
        }
    }
    async initRender(target, rawSet) {
        // if (target instanceof Element) {
        //   target.setAttribute('dr-this', 'this');
        //   const rawSets = RawSet.checkPointCreates(target, this._domRender_proxy, this.config);
        //   this.render(rawSets)
        //   return;
        // }
        //
        if (target instanceof Element) {
            // 중요: 나를통해 이어진곳의 위치를 남겨야된다 안그러면 TargetElement는 알수 있는 방법이 없다. 여기서 흔적을 남겨줘야 한다.
            // const targetElementNames = (this.config.targetElements?.map(it => it.name.toLowerCase().replaceAll('.', '\\.')) ?? []).join(',');
            // Array.from(target.querySelectorAll(targetElementNames)).forEach(it => it.setAttribute(EventManager.parentVariablePathAttrName, '@this@'));
            target.innerHTML = target.innerHTML.replace(/@this@/g, 'this');
        }
        // TODO: 한곳에서 처리 필요할듯.. 너무 산발적으로 있음.
        const onCreate = target.getAttribute?.(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.DR_ON_CREATE_ARGUMENTS_OPTIONNAME);
        let createParam = [];
        if (onCreate) {
            createParam = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Script.evaluateReturn(onCreate, this._domRender_proxy);
            if (!Array.isArray(createParam)) {
                createParam = [createParam];
            }
        }
        if ((0,_lifecycle_OnCreateRenderData__WEBPACK_IMPORTED_MODULE_11__.isOnCreateRenderData)(this._domRender_proxy)) {
            this._domRender_proxy?.onCreateRenderData({ rootParent: this._domRender_proxy });
        }
        if ((0,_lifecycle_OnCreateRender__WEBPACK_IMPORTED_MODULE_9__.isOnCreateRender)(this._domRender_proxy)) {
            this._domRender_proxy.onCreateRender(...createParam);
        }
        // const innerHTML = (target as any).innerHTML ?? '';
        this._targets.add(target);
        const rawSets = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.checkPointCreates(target, this._domRender_proxy, this._domRender_config);
        // console.log('initRender -------rawSet', rawSets)
        // 중요 초기에 한번 튕겨줘야함.
        this._domRender_config.eventManager.applyEvent(this._domRender_proxy, this._domRender_config.eventManager.findAttrElements(target, this._domRender_config), this._domRender_config);
        rawSets.forEach(it => {
            const variables = it.getUsingTriggerVariables(this._domRender_config);
            if (variables.size <= 0) {
                this.addRawSet('', it);
            }
            else {
                variables.forEach(sit => {
                    this.addRawSet(sit, it);
                });
            }
        });
        const targetRawSets = await this.render(this.getRawSets());
        for (let targetRawSet of targetRawSets) {
            const onInit = target.getAttribute?.(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.DR_ON_INIT_ARGUMENTS_OPTIONNAME);
            let initParam;
            if (onCreate) {
                initParam = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_2__.ScriptUtils.evaluateReturn(onCreate, this._domRender_proxy);
            }
            if ((0,_lifecycle_OnInitRender__WEBPACK_IMPORTED_MODULE_10__.isOnInitRender)(this._domRender_proxy)) {
                await this._domRender_proxy.onInitRender(initParam, rawSet ?? { dataSet: { config: this._domRender_config } });
            }
        }
    }
    getRawSets() {
        const set = new Set();
        this._rawSets.forEach((v, k) => {
            v.forEach(it => set.add(it));
        });
        return Array.from(set);
    }
    // 중요 important
    async render(raws, fullPathStr) {
        if (typeof raws === 'string') {
            const iter = this._rawSets.get(raws);
            if (iter) {
                raws = Array.from(iter);
            }
            else {
                raws = undefined;
            }
        }
        const removeRawSets = [];
        const rawSets = raws ?? this.getRawSets();
        // console.log('----', rawSets);
        for (const it of rawSets) {
            it.getUsingTriggerVariables(this._domRender_config).forEach(path => {
                // console.log('getUsingTriggerVariables->', path);
                this.addRawSet(path, it);
            });
            let renderResult;
            if (it.isConnected) {
                // 중요 render될때 targetAttribute 체크 해야함.
                const targetAttrMap = it.point.node?.getAttribute?.(_events_EventManager__WEBPACK_IMPORTED_MODULE_1__.EventManager.normalAttrMapAttrName);
                // console.log('sssssssssSSS?',it, targetAttrMap)
                // console.log('----2', it, fullPathStr, targetAttrMap, (it.fragment as any).render, it.isConnected, this.getRawSets());
                if (it.detect?.action) {
                    it.detect.action();
                    // } else if (it.type === RawSetType.TARGET_ELEMENT && it.data && fullPathStr && targetAttrMap && (it.fragment as any).render) {
                }
                else if (it.type === _rawsets_RawSetType__WEBPACK_IMPORTED_MODULE_4__.RawSetType.TARGET_ELEMENT &&
                    it.dataSet?.render?.currentThis &&
                    fullPathStr &&
                    targetAttrMap) {
                    new Map(JSON.parse(targetAttrMap)).forEach((v, k) => {
                        // it?.data.onChangeAttrRender(k, null, v);
                        // console.log('------->?',v,k);
                        const isUsing = v.variablePaths.some(it => _events_EventManager__WEBPACK_IMPORTED_MODULE_1__.EventManager.isUsingThisVar(it.inner, `this.${fullPathStr}`));
                        // console.log('------->?',v,k, isUsing);
                        if (isUsing) {
                            const targetAttrObject = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.getAttributeObject(it.point.node, {
                                script: it.dataSet?.render?.renderScript ?? '',
                                obj: Object.assign(this._domRender_proxy ?? {}, { __render: it.dataSet?.render })
                            });
                            it.dataSet.render ??= {};
                            it.dataSet.render.attribute = targetAttrObject;
                            // const render = it.dataSet?.render;
                            // console.log('render-->!!!!!', it.dataSet.render);
                            // const script = `${render.renderScript} return ${v} `;
                            // const cval = ScriptUtils.eval(script, Object.assign(this._domRender_proxy ?? {}, { __render: render }));
                            if ((0,_lifecycle_OnChangeAttrRender__WEBPACK_IMPORTED_MODULE_12__.isOnChangeAttrRender)(it.dataSet?.render?.currentThis)) {
                                it.dataSet?.render?.currentThis?.onChangeAttrRender?.(k, targetAttrObject[k], { rawSet: it });
                            }
                        }
                        // console.log('---?', v, fullPathStr, isUsing);
                    });
                    // ------------------->
                }
                else {
                    const rawSets = await it.render(this._domRender_proxy, this._domRender_config);
                    renderResult = rawSets;
                    // 그외 자식들 render
                    if (rawSets && rawSets.raws.length > 0) {
                        await this.render(rawSets.raws);
                    }
                }
            }
            else {
                removeRawSets.push(it);
            }
            const t = it.findNearThis(this._domRender_proxy);
            // TODO: 호출된곳에서 또 변수를 수정하게되면 무한루프니깐 왠만하면 사용못하게 해야한다.
            if ((0,_lifecycle_OnRawSetRendered__WEBPACK_IMPORTED_MODULE_20__.isOnRawSetRendered)(t)) {
                await t.onRawSetRendered(it, { path: fullPathStr, value: _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Script.evaluateReturn(`this.${fullPathStr}`, this._domRender_proxy), root: this._domRender_proxy, renderResult });
            }
            // console.log('----', it);
        }
        if (removeRawSets.length > 0) {
            this.removeRawSet(...removeRawSets);
        }
        return this.getRawSets();
    }
    // domrender_ref로 찾는걸로 바꿈
    // public findRootDomRenderProxy(): DomRenderProxy<any> {
    //   let current:DomRenderProxy<any>  = this;
    //   while (current.parentProxy) {
    //     current = current.parentProxy;
    //   }
    //   return current;
    // }
    root(pathInfos, value, lastDoneExecute = true) {
        const rootStartTime = Date.now();
        const pathKey = pathInfos.flat().map(i => i.path).join('.');
        // console.group(`🌳 DomRenderProxy root: ${pathKey}`);
        // console.log('root--->', pathInfos, value, this._domRender_ref, this._domRender_origin);
        const fullPaths = [];
        if (this._domRender_ref.size > 0) {
            this._domRender_ref.forEach((it, key) => {
                if ('_DomRender_isProxy' in key) {
                    it.forEach(sit => {
                        try {
                            const recursiveStartTime = Date.now();
                            const concat = pathInfos.concat([[{ path: sit, obj: key }]]);
                            const items = key._DomRender_proxy?.root(concat, value, lastDoneExecute);
                            // console.log(`🔄 Recursive root call for ${sit}: ${Date.now() - recursiveStartTime}ms`);
                            fullPaths.push(items.flat());
                            // fullPaths.push({path: items.map(it=>it.path).join(','), obj: this._domRender_proxy});
                            // fullPaths.push({path: items.map(it=>it.path).join(','), obj: this._domRender_proxy});
                        }
                        catch (e) {
                            // 오브젝트들 없어졌을수도있다 Destroy시점에서 오류나는경우가 있다. 따라서 참조 하는부분 없어져야한다.
                            // console.error(e)
                            // it.delete(sit);
                        }
                    });
                }
            });
        }
        else {
            const pathProcessStartTime = Date.now();
            // const firstPathStr = paths.slice(1).reverse().join('.');
            const strings = pathInfos.reverse().map(it => it.map(it => it.path).join(','));
            // array같은경우도 키값으로 접근하기때문에 특정 인덱스를 찾아서 그부분만 바꿔줄수 있다.
            const fullPathStr = strings
                .map(it => (isNaN(Number(it)) ? '.' + it : `[${it}]`))
                .join('')
                .slice(1);
            // console.log(`🛤️ Path processing time: ${Date.now() - pathProcessStartTime}ms for path: ${fullPathStr}`);
            if (lastDoneExecute) {
                // const firstData = ScriptUtils.evalReturn('this.' + firstPathStr, this._domRender_proxy);
                // console.log('-------', firstPathStr, firstData);
                // if (firstData instanceof Dictionary) {
                // }
                const iterable = this._rawSets.get(fullPathStr);
                // array check
                const front = strings
                    .slice(0, strings.length - 1)
                    .map(it => (isNaN(Number(it)) ? '.' + it : `[${it}]`))
                    .join('');
                const lastPropertyName = strings[strings.length - 1];
                const path = 'this' + front;
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_2__.ScriptUtils.evaluateReturn(_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Path.toOptionalChainPath(path), this._domRender_proxy);
                // console.log('root-->', this._rawSets, path, data );
                // console.log('--!!!!', fullPathStr, iterable, data, front, last);
                // 왜여기서 promise를 했을까를 생각해보면......훔.. 변수변경과 화면 뿌려주는걸 동기로하면 성능이 안나오고 비현실적이다.  그래서 promise
                const promiseStartTime = Date.now();
                new Promise(async (resolve) => {
                    const promiseInnerStartTime = Date.now();
                    let rData = [];
                    const firstPathStr = front.slice(1);
                    // check dictionary
                    const dictionaryCheckStartTime = Date.now();
                    // console.log('-promise-------', firstPathStr, this)
                    const firstTargets = this._rawSets.get(firstPathStr);
                    const firstTargetDictionary = [];
                    firstTargets?.forEach(it => {
                        // console.log('----forEach---', it);
                        const type = it.point.start?.getAttribute?.('type');
                        if (type === _rawsets_RawSetOperatorType__WEBPACK_IMPORTED_MODULE_6__.RawSetOperatorType.DR_THIS_PROPERTY) {
                            firstTargetDictionary.push(it);
                        }
                    });
                    // console.log(`📚 Dictionary check time: ${Date.now() - dictionaryCheckStartTime}ms (${firstTargetDictionary.length} found)`);
                    if (firstTargetDictionary.length > 0) {
                        // console.log('ddddddddddd', firstTargetDictionary);
                        const rawSets = [];
                        let skip = false;
                        firstTargetDictionary.forEach(it => {
                            const startElement = it.point.start;
                            const keys = startElement.getAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.DR_HAS_KEYS_OPTIONNAME)?.split(',') ?? [];
                            if (value === undefined) {
                                const rawSet = it.getHasRawSet(lastPropertyName);
                                rawSet?.remove();
                                startElement.setAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.DR_HAS_KEYS_OPTIONNAME, keys.filter(it => it !== lastPropertyName).join(','));
                            }
                            if (!keys.includes(lastPropertyName)) {
                                const raws = _operators_DrThisProperty__WEBPACK_IMPORTED_MODULE_5__.DrThisProperty.append(this._domRender_proxy, fullPathStr, lastPropertyName, it, this._domRender_config);
                                if (raws) {
                                    rawSets.push(...raws);
                                }
                            }
                            else {
                                skip = true;
                            }
                        });
                        if (skip === false || rawSets.length > 0) {
                            rData = await this.render(rawSets);
                        }
                    }
                    const renderStartTime = Date.now();
                    if (lastPropertyName === 'length' && Array.isArray(data)) {
                        const aIterable = this._rawSets.get(firstPathStr);
                        if (aIterable) {
                            rData = await this.render(Array.from(aIterable));
                        }
                    }
                    else if (iterable) {
                        // console.log('------------',iterable, fullPaths)
                        rData = await this.render(Array.from(iterable), fullPathStr);
                    }
                    // console.log(`🎨 Render time: ${Date.now() - renderStartTime}ms (${rData?.length || 0} rawSets)`);
                    // console.log('-----------', this, lastPropertyName );
                    // this._targets.forEach(it => {
                    //   // return;
                    //   if (it.nodeType === Node.DOCUMENT_FRAGMENT_NODE || it.nodeType === Node.ELEMENT_NODE) {
                    //     const targets = eventManager.findAttrElements((it as DocumentFragment | Element), this.config);
                    //     eventManager.changeVar(this._domRender_proxy, targets, `this.${fullPathStr}`, this.config);
                    //   }
                    // });
                    const eventProcessStartTime = Date.now();
                    const Node = (this._domRender_config.window.Node);
                    this._targets.forEach(it => {
                        // return;
                        if (it.nodeType === Node.DOCUMENT_FRAGMENT_NODE || it.nodeType === Node.ELEMENT_NODE) {
                            const findAttrStartTime = Date.now();
                            const targets = this._domRender_config.eventManager.findAttrElements(it, this._domRender_config);
                            const targetCount = targets?.size || targets?.length || 0;
                            // console.log(`🔍 findAttrElements time: ${Date.now() - findAttrStartTime}ms (${targetCount} elements)`, it);
                            const changeVarStartTime = Date.now();
                            this._domRender_config.eventManager.changeVar(this._domRender_proxy, targets, `this.${fullPathStr}`, this._domRender_config);
                            // console.log(`🔄 changeVar time: ${Date.now() - changeVarStartTime}ms`);
                        }
                    });
                    // console.log(`⚡ Event processing time: ${Date.now() - eventProcessStartTime}ms (${this._targets.size} targets)`);
                    // console.log(`🔄 Promise inner total time: ${Date.now() - promiseInnerStartTime}ms`);
                    //랜더대상된게있으면
                    if (rData?.length > 0 && (0,_lifecycle_OnChildRenderedByProperty__WEBPACK_IMPORTED_MODULE_16__.isOnChildRenderedByProperty)(data)) {
                        const propertyValue = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Script.evaluateReturn(`this.${lastPropertyName}`, data);
                        data.onChildRenderedByProperty(lastPropertyName, propertyValue);
                        // data
                    }
                    resolve(rData);
                }).then(it => {
                    // console.log('DonrenderProxy root RenderDone')
                });
            }
            fullPaths.push([{ path: fullPathStr, obj: this._domRender_proxy }]);
        }
        // console.log(`🏁 Root method total time: ${Date.now() - rootStartTime}ms`);
        // console.log('dddddd', fullPaths.flatMap(it => it).map(it => it.path))
        // console.groupEnd();
        return fullPaths;
    }
    set(target, p, value, receiver) {
        // console.log('set------->', target, p, value, receiver, Date.now())
        // console.log('set------->', p,value)
        // console.log('set------->', target, p, value, receiver, Date.now())
        // try {
        //   const isNoProxy = Reflect.getMetadata(DomRenderNoProxyKey, target, p) || Reflect.getMetadata(DomRenderNoProxyKey, Object.getPrototypeOf(obj).constructor);
        //   if (isNoProxy) {
        //     return obj;
        //   }
        // }catch (e) {}
        // console.log('set-->', p, value, target, receiver, Reflect.getMetadata(DomRenderNoProxyKey, target, p) );
        if ((typeof p === 'string' && p !== '__domrender_components' && excludeGetSetPropertys.includes(p)) ||
            Reflect.getMetadata(_decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_8__.DomRenderNoProxyKey, target, p)) {
            target[p] = value;
            return true;
        }
        // const old =  (target as any)[p];
        // console.log('set proxy-->', target, p, value, this._rawSets, this._domRender_ref);
        // if (typeof p === 'string' && '__render' === p) {
        //     (target as any)[p] = value;
        //     return true;
        // }
        // console.log('set--?', p, target, value);
        if (typeof p === 'string') {
            value = this.proxy(receiver, value, p);
        }
        // console.log('set typeChecked',  (target as any)[p] instanceof ComponentSet, value instanceof ComponentSet);
        // if ((target as any)[p] instanceof ComponentSet) {
        //   (target as any)[p]?.obj?.onDrThisUnBind?.();
        // }
        // is ComponentSet
        if (value instanceof _components_ComponentSet__WEBPACK_IMPORTED_MODULE_7__.ComponentSet && target[p] instanceof _components_ComponentSet__WEBPACK_IMPORTED_MODULE_7__.ComponentSet) {
            value.config.beforeComponentSet = target[p];
        }
        target[p] = value;
        let fullPathInfo = [];
        if (typeof p === 'string') {
            fullPathInfo = this.root([[{ path: p, obj: this._domRender_proxy }]], value);
        }
        // console.log('setRooot', fullPathInfo);
        //normal attribute 또한 링크랑 같은 증세라서 이렇게 해줘야한다!!
        // const rootDomRenderProxy = this.findRootDomRenderProxy();
        // console.log('set!!!!!!!', fullPathInfo, rootDomRenderProxy)
        // console.log('--------rootDom',fullPathInfo, rootDomRenderProxy, rootDomRenderProxy._domRender_proxy)
        const rootElement = this._domRender_config.rootElement ?? this._domRender_config.window.document;
        _dooboostore_core_web_document_DocumentUtils__WEBPACK_IMPORTED_MODULE_13__.DocumentUtils.querySelectorAllByAttributeName(rootElement, _events_EventManager__WEBPACK_IMPORTED_MODULE_1__.EventManager.normalAttrMapAttrName)?.forEach(elementInfo => {
            // @ts-ignore
            // const optionalPath = ObjectUtils.Path.toOptionalChainPath(elementInfo.value);
            const targets = new Map(_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Script.evaluateReturn(elementInfo.value));
            Array.from(targets.entries())
                .filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_14__.isDefined)
                .flatMap(([key, valueScript]) => {
                return fullPathInfo
                    .flat()
                    .filter(it => valueScript.variablePaths?.some(vit => vit.inner.includes(`this.${it.path}`)))
                    .flatMap(it => ({ key, valueScript: valueScript, pathInfo: it }));
            })
                .forEach(it => {
                // const optionalPaths = it.valueScript.variablePaths.map(it => ObjectUtils.Path.toOptionalChainPath(it))
                const variablePaths = it.valueScript.variablePaths;
                let targetScript = it.valueScript.originalAttrValue;
                let script;
                if (it.valueScript.isStringTemplate) {
                    variablePaths.forEach(it => {
                        let r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Path.toOptionalChainPath(it.inner);
                        targetScript = targetScript.replaceAll(it.origin, `\${${r}}`);
                    });
                    script = '`' + targetScript + '`';
                }
                else {
                    variablePaths.forEach(it => {
                        let r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Path.toOptionalChainPath(it.inner);
                        targetScript = targetScript.replaceAll(it.origin, `${r}`);
                    });
                    script = targetScript;
                }
                // variablePaths.forEach(it => {
                //   let r = ObjectUtils.Path.toOptionalChainPath(it.inner);
                //   targetScript = targetScript.replaceAll(it.origin,`\${${r}}`);
                // })
                const value1 = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_17__.ObjectUtils.Script.evaluateReturn(script, it.pathInfo.obj);
                // console.log('proxy set!Attribut======', it.key, value1)
                if (value1 === null) {
                    elementInfo.element.removeAttribute(it.key);
                    elementInfo.element[it.key] = null;
                }
                else {
                    elementInfo.element.setAttribute(it.key, value1);
                    elementInfo.element[it.key] = value1;
                }
            });
        });
        //여기서 링크 같은거 해줘야함  *-link로 변수값이 변경되면 그걸 참고하고있는 다른것들에도 해줘야한다.
        _dooboostore_core_web_document_DocumentUtils__WEBPACK_IMPORTED_MODULE_13__.DocumentUtils.querySelectorAllByAttributeName(rootElement, _events_EventManager__WEBPACK_IMPORTED_MODULE_1__.EventManager.linkTargetMapAttrName)?.forEach(elementInfo => {
            // @ts-ignore
            const targets = new Map(_dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_2__.ScriptUtils.evaluateReturn(elementInfo.value));
            Array.from(targets.entries())
                .filter(([key, value]) => value.trim())
                .filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_14__.isDefined)
                .flatMap(([key, valueScript]) => {
                return fullPathInfo
                    .flat()
                    .filter(it => valueScript.includes(`this.${it.path}`))
                    .flatMap(it => ({ key, valueScript: valueScript, pathInfo: it }));
            })
                .forEach(info => {
                const value1 = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_2__.ScriptUtils.evaluateReturn(info.valueScript, info.pathInfo.obj);
                const applyAttributeName = _events_EventManager__WEBPACK_IMPORTED_MODULE_1__.EventManager.linkAttrs.find(it => it.name === info.key);
                if (applyAttributeName) {
                    if (value1 === null) {
                        elementInfo.element.removeAttribute(applyAttributeName.property);
                    }
                    else {
                        // console.log('ppppppppppppppppppppppp', applyAttributeName, elementInfo)
                        elementInfo.element.setAttribute(applyAttributeName.property, value1);
                    }
                }
            });
            Array.from(targets.entries())
                .filter(([key, value]) => value.trim())
                .filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_14__.isDefined)
                .flatMap(([key, valueScript]) => {
                return fullPathInfo
                    .flat()
                    .filter(it => valueScript.includes(`this.${it.path}`))
                    .flatMap(it => ({ key, valueScript: valueScript, pathInfo: it }));
            })
                .forEach(info => {
                const linkInfo = _events_EventManager__WEBPACK_IMPORTED_MODULE_1__.EventManager.linkAttrs.find(it => it.name === info.key);
                if (linkInfo) {
                    elementInfo.element[linkInfo.property] = value;
                }
            });
        });
        // console.log('---end',receiver);
        if ('onBeforeReturnSet' in receiver &&
            typeof p === 'string' &&
            !(this._domRender_config.proxyExcludeOnBeforeReturnSets ?? []).concat(excludeGetSetPropertys).includes(p)) {
            if ((0,_lifecycle_OnBeforeReturnSet__WEBPACK_IMPORTED_MODULE_15__.isOnBeforeReturnSet)(receiver)) {
                receiver.onBeforeReturnSet?.(p, value, fullPathInfo.map(it => it.map(it => it.path).join()));
            }
        }
        return true;
    }
    get(target, p, receiver) {
        // console.log('get-->', target, p, receiver);
        if (p === '_DomRender_origin' || p === '_domRender_origin') {
            return this._domRender_origin;
        }
        else if (p === '_DomRender_ref' || p === '_domRender_ref') {
            return this._domRender_ref;
        }
        else if (p === '_DomRender_config' || p === '_domRender_config') {
            return this._domRender_config;
        }
        else if (p === '_DomRender_proxy' || p === '_domRender_proxy') {
            return this;
        }
        else {
            // Date라던지 이런놈들은-_-프록시가 이상하게 동작해서
            // console.log('--->', p, target, target.bind, 'bind' in target)
            // if ((p in target) && ('bind' in target)) {
            //     try{
            //     return (target as any)[p].bind(target);
            //     }catch (e) {
            //         console.error(e)
            //     }
            // } else {
            //     return (target as any)[p]
            // }
            // return (p in target) ? (target as any)[p].bind(target) : (target as any)[p]
            // console.log('-->', p, Object.prototype.toString.call((target as any)[p]), (target as any)[p])
            // return (target as any)[p]
            let it = target[p];
            if (it &&
                typeof it === 'object' &&
                '_DomRender_isProxy' in it &&
                Object.prototype.toString.call(it._DomRender_origin) === '[object Date]') {
                it = it._DomRender_origin;
            }
            if ('onBeforeReturnGet' in receiver &&
                typeof p === 'string' &&
                !(this._domRender_config.proxyExcludeOnBeforeReturnGets ?? []).concat(excludeGetSetPropertys).includes(p)) {
                receiver?.onBeforeReturnGet?.(p, it, this.root([[{ path: p, obj: this._domRender_proxy }]], it, false));
            }
            return it;
        }
    }
    deleteProperty(target, p) {
        delete target[p];
        if (typeof p === 'string') {
            this.root([[{ path: p, obj: this._domRender_proxy }]]);
        }
        return true;
    }
    has(target, p) {
        return p === '_DomRender_isProxy' || p in target;
    }
    proxy(parentProxy, obj, p) {
        try {
            // const isNoProxy = Reflect.getMetadata(DomRenderNoProxyKey, obj, p) || Reflect.getMetadata(DomRenderNoProxyKey, Object.getPrototypeOf(obj).constructor);
            const isObject = typeof obj === 'object';
            const isNoProxy = isObject && (0,_decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_8__.isDomRenderNoProxy)(obj, p);
            const isExclude = this._domRender_config.proxyExcludeTyps?.some(it => obj instanceof it) ?? false;
            const isFinal = isObject && DomRenderProxy.isFinal(obj);
            const isFrozen = Object.isFrozen(obj);
            const isShield = obj instanceof _types_Types__WEBPACK_IMPORTED_MODULE_3__.Shield;
            if (obj === undefined ||
                obj === null ||
                isNoProxy ||
                isExclude ||
                _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_18__.ValidUtils.isNullOrUndefined(obj) ||
                !isObject ||
                isFinal ||
                isFrozen ||
                isShield) {
                return obj;
            }
        }
        catch (e) { }
        /*
        const proxyTarget = (this._domRender_config.proxyExcludeTyps?.filter(it => obj instanceof it) ?? []).length <= 0;
        if (proxyTarget && obj !== undefined && obj !== null && typeof obj === 'object' && !('_DomRender_isProxy' in obj) && !DomRenderProxy.isFinal(obj) && !Object.isFrozen(obj) && !(obj instanceof Shield)) {
          const domRender = new DomRenderProxy(obj, undefined, this._domRender_config);
          domRender.addRef(parentProxy, p);
          const proxy = new Proxy(obj, domRender);
          domRender.run(proxy);
          return proxy;
        }
        if (proxyTarget && obj !== undefined && obj !== null && typeof obj === 'object' && ('_DomRender_isProxy' in obj) && !DomRenderProxy.isFinal(obj) && !Object.isFrozen(obj) && !(obj instanceof Shield)) {
          const d = (obj as any)._DomRender_proxy as DomRenderProxy<T>;
          d.addRef(this._domRender_proxy!, p);
          return obj;
        } else {
          return obj;
        }
     */
        if (!isWrapProxyDomRenderProxy(obj)) {
            const domRender = new DomRenderProxy(obj, undefined, this._domRender_config);
            domRender.addRef(parentProxy, p);
            const proxy = new Proxy(obj, domRender);
            domRender.run(proxy);
            return proxy;
        }
        if (isWrapProxyDomRenderProxy(obj)) {
            const d = obj._DomRender_proxy;
            d.addRef(this._domRender_proxy, p);
            return obj;
        }
        else {
            return obj;
        }
    }
    addRef(parent, path) {
        if (!this._domRender_ref.get(parent)) {
            this._domRender_ref.set(parent, new Set());
        }
        this._domRender_ref.get(parent)?.add(path);
    }
    addRawSetAndRender(path, rawSet) {
        this.addRawSet(path, rawSet);
        this.render([rawSet]);
    }
    addRawSet(path, rawSet) {
        // console.log('addRawSet--> path:', path, 'rawSet:', rawSet)
        if (!this._rawSets.get(path)) {
            this._rawSets.set(path, new Set());
        }
        this._rawSets.get(path)?.add(rawSet);
    }
    // public removeRawSet(...raws: RawSet[]) {
    //     this._rawSets.forEach(it => {
    //         raws.forEach(sit => it.delete(sit));
    //     })
    //     this.garbageRawSet();
    // }
    removeRawSet(...raws) {
        this._rawSets.forEach(it => {
            it.forEach(sit => {
                if (!sit.isConnected) {
                    it.delete(sit);
                }
                else if (raws.includes(sit)) {
                    it.delete(sit);
                }
            });
        });
        this.targetGarbageRawSet();
    }
    targetGarbageRawSet() {
        this._targets.forEach(it => {
            if (!it.isConnected) {
                this._targets.delete(it);
            }
        });
    }
    garbageRawSet() {
        this._targets.forEach(it => {
            if (!it.isConnected) {
                this._targets.delete(it);
            }
        });
        this._rawSets.forEach(it => {
            it.forEach(sit => {
                if (!sit.isConnected) {
                    it.delete(sit);
                }
            });
        });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ATTRIBUTE_METADATA_KEY: () => (/* binding */ ATTRIBUTE_METADATA_KEY),
/* harmony export */   ComponentBase: () => (/* binding */ ComponentBase),
/* harmony export */   EVENT_METADATA_KEY: () => (/* binding */ EVENT_METADATA_KEY),
/* harmony export */   QUERY_METADATA_KEY: () => (/* binding */ QUERY_METADATA_KEY),
/* harmony export */   attribute: () => (/* binding */ attribute),
/* harmony export */   event: () => (/* binding */ event),
/* harmony export */   query: () => (/* binding */ query)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/element/ElementUtils */ "../../packages/@dooboostore/core-web/src/element/ElementUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../decorators/DomRenderNoProxy */ "../../packages/@dooboostore/dom-render/src/decorators/DomRenderNoProxy.ts");
/* harmony import */ var _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core/convert/ConvertUtils */ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts");
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");
/* harmony import */ var _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/core/message/Subject */ "../../packages/@dooboostore/core/src/message/Subject.ts");
/* harmony import */ var _dooboostore_core_message_operators_debounceTime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dooboostore/core/message/operators/debounceTime */ "../../packages/@dooboostore/core/src/message/operators/debounceTime.ts");
var _a, _b;








const ATTRIBUTE_METADATA_KEY = Symbol('attribute');
const QUERY_METADATA_KEY = Symbol('query');
const EVENT_METADATA_KEY = Symbol('event');
function attribute(nameOrOptions) {
    return (target, propertyKey, descriptor) => {
        const attributes = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(ATTRIBUTE_METADATA_KEY, target.constructor) || [];
        let name;
        let converter;
        if (typeof nameOrOptions === 'string') {
            name = nameOrOptions;
        }
        else if (nameOrOptions) {
            name = nameOrOptions.name || String(propertyKey);
            converter = nameOrOptions.converter;
        }
        else {
            name = String(propertyKey);
        }
        const attributeMetadata = {
            propertyKey: propertyKey,
            name: name,
            converter: converter,
            isMethod: !!descriptor
        };
        attributes.push(attributeMetadata);
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.defineMetadata(ATTRIBUTE_METADATA_KEY, attributes, target.constructor);
    };
}
function query(selectorOrOptions) {
    return (target, propertyKey, descriptor) => {
        const queries = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(QUERY_METADATA_KEY, target.constructor) || [];
        let selector;
        let convert;
        let onDestroy;
        let refreshTime;
        let refreshRawSetRendered;
        if (typeof selectorOrOptions === 'string') {
            selector = selectorOrOptions;
        }
        else {
            selector = selectorOrOptions.selector;
            convert = selectorOrOptions.convert;
            onDestroy = selectorOrOptions.onDestroy;
            refreshTime = selectorOrOptions.refreshIntervalTime;
            refreshRawSetRendered = selectorOrOptions.refreshRawSetRendered;
        }
        const queryMetadata = {
            selector: selector,
            propertyKey: propertyKey,
            isMethod: !!descriptor,
            convert: convert,
            onDestroy: onDestroy,
            refreshTime: refreshTime,
            refreshRawSetRendered
        };
        queries.push(queryMetadata);
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.defineMetadata(QUERY_METADATA_KEY, queries, target.constructor);
    };
}
function event(options) {
    return (target, propertyKey, descriptor) => {
        const events = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(EVENT_METADATA_KEY, target.constructor) || [];
        const eventMetadata = {
            query: options.query,
            eventName: options.name,
            methodName: propertyKey,
            onDestroy: options.onDestroy,
            refreshTime: options.refreshTime,
            refreshRawSetRendered: options.refreshRawSetRendered
        };
        events.push(eventMetadata);
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.defineMetadata(EVENT_METADATA_KEY, events, target.constructor);
    };
}
class ComponentBase {
    _config;
    _rawSet;
    _children = [];
    _render;
    _attribute;
    _boundEventListeners = [];
    _queryBindings = [];
    _eventBindings = [];
    _refreshTimers = new Map();
    childrenSetSubject = new _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_6__.Subject();
    createChildrenDebounceSubscription;
    constructor(_config) {
        this._config = _config;
    }
    get componentConfig() {
        return this._config;
    }
    get render() {
        return this._render;
    }
    get rawSet() {
        return this._rawSet;
    }
    get domRenderConfig() {
        return this.rawSet?.dataSet.config;
    }
    _queryElements(selector, rawSet) {
        const e = this.getElement();
        // console.log('queryElement-->', e);
        if (e) {
            return _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.querySelectorAll(e, selector);
        }
        else {
            let startNode = rawSet.point?.start;
            let endNode = rawSet.point?.end;
            // console.log('-----', startNode, endNode)
            // console.log('-----', startNode?.isConnected, endNode?.isConnected)
            if (rawSet.point?.start && startNode && !startNode.isConnected && startNode instanceof HTMLElement && startNode.hasAttribute('id')) {
                rawSet.point.start = startNode = rawSet.dataSet.config.window.document.querySelector('#' + startNode.id);
            }
            if (rawSet.point?.end && endNode && !endNode.isConnected && endNode instanceof HTMLElement && endNode.hasAttribute('id')) {
                rawSet.point.end = endNode = rawSet.dataSet.config.window.document.querySelector('#' + endNode.id);
            }
            if (startNode && endNode) {
                // console.log('query!!', startNode, endNode);
                return _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.querySelectorAll({ start: startNode, end: endNode }, selector);
            }
        }
        return [];
    }
    _cleanupEventListeners() {
        for (const { element, eventName, listener } of this._boundEventListeners) {
            element.removeEventListener(eventName, listener);
        }
        this._boundEventListeners = [];
    }
    _cleanupQueryBindings() {
        for (const { element, metadata } of this._queryBindings) {
            if (metadata.onDestroy) {
                metadata.onDestroy(this, element);
            }
            this._clearRefreshTimer(metadata);
        }
        this._queryBindings = [];
    }
    _cleanupEventBindings() {
        for (const { element, metadata, listener } of this._eventBindings) {
            element.removeEventListener(metadata.eventName, listener);
            if (metadata.onDestroy) {
                metadata.onDestroy(this, element);
            }
            this._clearRefreshTimer(metadata);
        }
        this._eventBindings = [];
    }
    _applyQueryBinding(queryInfo, elements, newElementsOnly = elements) {
        const { propertyKey, isMethod, convert } = queryInfo;
        // Track bindings for cleanup
        elements.forEach(element => {
            this._queryBindings.push({ element, metadata: queryInfo });
        });
        // Apply convert function if provided
        const processedElements = convert ? elements.map(convert) : elements;
        const processedNewElements = convert ? newElementsOnly.map(convert) : newElementsOnly;
        if (isMethod) {
            const method = this[propertyKey];
            if (typeof method === 'function') {
                const paramTypes = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getParameterTypes(this, propertyKey);
                if (paramTypes && paramTypes.length > 0 && paramTypes[0] === Array) {
                    // For array methods, pass only new elements
                    method.call(this, processedNewElements, { all: processedElements });
                }
                else {
                    // For single element methods, pass first new element
                    if (processedNewElements.length > 0) {
                        method.call(this, processedNewElements[0], { all: processedElements, newAll: processedNewElements });
                    }
                }
            }
        }
        else {
            // For properties, always set all elements (not just new ones)
            const propertyType = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getType(this, propertyKey);
            if (propertyType === Array) {
                this[propertyKey] = processedElements;
            }
            else {
                this[propertyKey] = processedElements[0] || null;
            }
        }
    }
    _setupQueryDecorators(rawSet) {
        if (!rawSet)
            return;
        const queries = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(QUERY_METADATA_KEY, this.constructor);
        // console.group('_setupQueryDecorators')
        // console.log('queries', queries);
        if (queries && Array.isArray(queries)) {
            for (const queryInfo of queries) {
                const elements = this._queryElements(queryInfo.selector, rawSet);
                // console.log('------elements', elements);
                this._applyQueryBinding(queryInfo, elements);
                // Setup refresh timer if specified
                this._setupRefreshTimer(queryInfo);
            }
        }
        // console.groupEnd();
    }
    _updateQueryBinding(queryInfo, rawSet, forceUpdate = false) {
        const newElements = this._queryElements(queryInfo.selector, rawSet);
        // Get current bindings for this query
        const currentBindings = this._queryBindings.filter(binding => binding.metadata === queryInfo);
        const currentElements = currentBindings.map(binding => binding.element);
        // Check if elements have changed
        const elementsChanged = forceUpdate || !this._arraysEqual(currentElements, newElements);
        if (elementsChanged) {
            let addedElements = [];
            if (forceUpdate) {
                // Force update: cleanup all old bindings, treat all as new
                currentBindings.forEach(({ element, metadata }) => {
                    if (metadata.onDestroy) {
                        metadata.onDestroy(this, element);
                    }
                });
                addedElements = newElements;
            }
            else {
                // Smart update: only cleanup removed elements, find added elements
                const removedElements = currentElements.filter(element => !newElements.includes(element));
                addedElements = newElements.filter(element => !currentElements.includes(element));
                removedElements.forEach(element => {
                    if (queryInfo.onDestroy) {
                        queryInfo.onDestroy(this, element);
                    }
                });
            }
            // Remove old bindings
            this._queryBindings = this._queryBindings.filter(binding => binding.metadata !== queryInfo);
            // Apply new bindings, but pass only added elements to methods
            this._applyQueryBinding(queryInfo, newElements, addedElements);
        }
    }
    _updateQueryDecorators(rawSet) {
        if (!rawSet)
            return;
        const queries = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(QUERY_METADATA_KEY, this.constructor);
        if (queries && Array.isArray(queries)) {
            for (const queryInfo of queries) {
                this._updateQueryBinding(queryInfo, rawSet);
            }
        }
    }
    _arraysEqual(arr1, arr2) {
        if (arr1.length !== arr2.length)
            return false;
        return arr1.every((element, index) => element === arr2[index]);
    }
    _setupRefreshTimer(metadata) {
        if (!metadata.refreshTime || !this._rawSet)
            return;
        const timer = setInterval(() => {
            if (!this._rawSet)
                return;
            if ('selector' in metadata) {
                // QueryMetadata
                this._updateQueryBinding(metadata, this._rawSet);
            }
            else {
                // EventMetadata
                this._updateEventBinding(metadata, this._rawSet);
            }
        }, metadata.refreshTime);
        this._refreshTimers.set(metadata, timer);
    }
    _clearRefreshTimer(metadata) {
        const timer = this._refreshTimers.get(metadata);
        if (timer) {
            clearInterval(timer);
            this._refreshTimers.delete(metadata);
        }
    }
    _clearAllRefreshTimers() {
        for (const timer of Array.from(this._refreshTimers.values())) {
            clearInterval(timer);
        }
        this._refreshTimers.clear();
    }
    async onRawSetRendered(rawSet, otherData) {
        const queries = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(QUERY_METADATA_KEY, this.constructor);
        if (queries) {
            queries.filter(it => it.refreshRawSetRendered).forEach(queryInfo => {
                this._updateQueryBinding(queryInfo, rawSet, true);
            });
        }
        const events = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(EVENT_METADATA_KEY, this.constructor);
        if (events) {
            events.filter(it => it.refreshRawSetRendered).forEach(eventInfo => {
                this._updateEventBinding(eventInfo, rawSet, true);
            });
        }
    }
    /**
     * Manually refresh all query and event decorators
     * Useful when DOM elements are dynamically added/removed and you want to update bindings
     */
    refreshDecorators() {
        if (this._rawSet) {
            this._updateQueryDecorators(this._rawSet);
            this._updateEventDecorators(this._rawSet);
        }
    }
    /**
     * Manually refresh specific query decorators by property key
     * @param propertyKeys - Array of property keys to refresh, or single property key
     */
    refreshQueryDecorators(propertyKeys) {
        if (!this._rawSet)
            return;
        const keys = Array.isArray(propertyKeys) ? propertyKeys : [propertyKeys];
        const queries = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(QUERY_METADATA_KEY, this.constructor);
        if (queries && Array.isArray(queries)) {
            for (const queryInfo of queries) {
                if (keys.includes(queryInfo.propertyKey)) {
                    this._updateQueryBinding(queryInfo, this._rawSet, true); // Force update
                }
            }
        }
    }
    /**
     * Manually refresh specific event decorators by method name
     * @param methodNames - Array of method names to refresh, or single method name
     */
    refreshEventDecorators(methodNames) {
        if (!this._rawSet)
            return;
        const names = Array.isArray(methodNames) ? methodNames : [methodNames];
        const events = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(EVENT_METADATA_KEY, this.constructor);
        if (events && Array.isArray(events)) {
            for (const eventInfo of events) {
                if (names.includes(eventInfo.methodName)) {
                    this._updateEventBinding(eventInfo, this._rawSet, true); // Force update
                }
            }
        }
    }
    _applyEventBinding(eventInfo, elements) {
        elements.forEach(element => {
            const listener = this[eventInfo.methodName].bind(this);
            // console.log('bind?????', element);
            element.addEventListener(eventInfo.eventName, listener);
            // Track bindings for cleanup
            this._eventBindings.push({ element, metadata: eventInfo, listener });
            this._boundEventListeners.push({ element, eventName: eventInfo.eventName, listener });
        });
    }
    _setupEventDecorators(rawSet) {
        if (!rawSet)
            return;
        const events = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(EVENT_METADATA_KEY, this.constructor);
        if (events && Array.isArray(events)) {
            for (const eventInfo of events) {
                const elements = this._queryElements(eventInfo.query, rawSet);
                this._applyEventBinding(eventInfo, elements);
                // Setup refresh timer if specified
                this._setupRefreshTimer(eventInfo);
            }
        }
    }
    _updateEventBinding(eventInfo, rawSet, forceUpdate = false) {
        const newElements = this._queryElements(eventInfo.query, rawSet);
        // Get current bindings for this event
        const currentBindings = this._eventBindings.filter(binding => binding.metadata === eventInfo);
        const currentElements = currentBindings.map(binding => binding.element);
        // Check if elements have changed
        const elementsChanged = forceUpdate || !this._arraysEqual(currentElements, newElements);
        if (elementsChanged) {
            if (forceUpdate) {
                // Force update: cleanup all old bindings
                currentBindings.forEach(({ element, metadata, listener }) => {
                    element.removeEventListener(metadata.eventName, listener);
                    if (metadata.onDestroy) {
                        metadata.onDestroy(this, element);
                    }
                });
            }
            else {
                // Smart update: only cleanup removed elements
                const removedElements = currentElements.filter(element => !newElements.includes(element));
                const removedBindings = currentBindings.filter(binding => removedElements.includes(binding.element));
                removedBindings.forEach(({ element, metadata, listener }) => {
                    element.removeEventListener(metadata.eventName, listener);
                    if (metadata.onDestroy) {
                        metadata.onDestroy(this, element);
                    }
                });
            }
            // Remove old bindings from tracking arrays
            this._eventBindings = this._eventBindings.filter(binding => binding.metadata !== eventInfo);
            this._boundEventListeners = this._boundEventListeners.filter(binding => !currentBindings.some(cb => cb.element === binding.element && cb.metadata.eventName === binding.eventName));
            // Apply new bindings
            this._applyEventBinding(eventInfo, newElements);
        }
    }
    _updateEventDecorators(rawSet) {
        if (!rawSet)
            return;
        const events = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(EVENT_METADATA_KEY, this.constructor);
        if (events && Array.isArray(events)) {
            for (const eventInfo of events) {
                this._updateEventBinding(eventInfo, rawSet);
            }
        }
    }
    getAttribute(name, attribute = this._attribute) {
        const target = attribute;
        if (!target) {
            return null;
        }
        const nameString = String(name);
        let p = nameString;
        if (p in target) {
            return target[p];
        }
        p = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_4__.ConvertUtils.snakeToCamelCase(nameString);
        if (p in target) {
            return target[p];
        }
        p = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_4__.ConvertUtils.camelToSnakeCase(nameString);
        if (p in target) {
            return target[p];
        }
        p = nameString.toUpperCase();
        if (p in target) {
            return target[p];
        }
        p = nameString.toLowerCase();
        if (p in target) {
            return target[p];
        }
        return null;
    }
    hasAttribute(name) {
        return this.getAttribute(name) !== null;
    }
    equalsAttributeName(n, name) {
        return n === name ||
            _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_4__.ConvertUtils.snakeToCamelCase(n) === name ||
            _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_4__.ConvertUtils.camelToSnakeCase(n) === name ||
            n.toUpperCase() === name.toUpperCase() ||
            n.toLowerCase() === name.toLowerCase();
    }
    get uuid() {
        return this._rawSet?.uuid;
    }
    get childrenSet() {
        return this._children;
    }
    get children() {
        return this._children.map(it => it.instance);
    }
    getElement() {
        return (this.render ?? this.rawSet?.dataSet?.render)?.getElement?.();
    }
    getFirstChild(type) {
        return this._children.find(it => it.instance instanceof type)?.instance;
    }
    getParentThis() {
        return this.render?.parentThis;
    }
    getChildren(typeOrTypes) {
        const targets = Array.isArray(typeOrTypes) ? typeOrTypes : [typeOrTypes];
        return this._children.filter(childSet => targets.some(targetConstructor => childSet.instance instanceof targetConstructor))?.map(it => it.instance);
    }
    setRawSet(rawSet) {
        this._rawSet = rawSet;
        if (this._rawSet) {
            this.setAttribute(this._rawSet.dataSet?.render?.attribute);
        }
    }
    setAttribute(attribute) {
        this._attribute = attribute;
    }
    // TODO: rawSet isConnected로 체크해서 들어가있는것만 처리되도록 또는 이미들어가있는것도 뺴야될것같은데.. 적용하긴했음..지켜봐야될듯.
    onCreatedThisChild(child, data) {
        // console.log('onCreatedThisChild------------------------',child, data, data.render?.rawSet?.isConnected)
        const n = [...this._children];
        n.push({ instance: child, data });
        this._children = n.filter(it => it.data.render?.rawSet?.isConnected);
        this.childrenSetSubject.next(this._children);
        // Update decorators when children change (DOM might have changed)
        // Only update if elements actually changed
        if (this._rawSet) {
            this._updateQueryDecorators(this._rawSet);
            this._updateEventDecorators(this._rawSet);
        }
    }
    onCreatedThisChildDebounce(childrenSet) {
    }
    onCreateRenderData(data) {
        this._render = data.render;
        if (data.render?.rawSet) {
            this.setRawSet(data.render.rawSet);
        }
        if (this._config?.onlyParentType) {
            const isOk = Array.isArray(this._config?.onlyParentType) ? this._config?.onlyParentType : [this._config?.onlyParentType].some(it => data.render?.parentThis instanceof it);
            if (!isOk) {
                throw new Error('only my parentThis ' + this._config?.onlyParentType);
            }
        }
    }
    onChangeAttrRender(name, value, other) {
        if (other.rawSet) {
            this.setRawSet(other.rawSet);
        }
        const attributes = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getMetadata(ATTRIBUTE_METADATA_KEY, this.constructor);
        if (attributes && Array.isArray(attributes)) {
            for (const attrInfo of attributes) {
                if (this.equalsAttributeName(name, attrInfo.name)) {
                    const finalValue = attrInfo.converter ? attrInfo.converter(value) : value;
                    if (attrInfo.isMethod) {
                        const method = this[attrInfo.propertyKey];
                        if (typeof method === 'function') {
                            method.call(this, finalValue);
                        }
                    }
                    else {
                        this[attrInfo.propertyKey] = finalValue;
                    }
                }
            }
        }
    }
    async onInitRender(param, rawSet) {
        this.createChildrenDebounceSubscription = this.childrenSetSubject.pipe((0,_dooboostore_core_message_operators_debounceTime__WEBPACK_IMPORTED_MODULE_7__.debounceTime)(this.componentConfig?.createChildrenDebounce ?? 0)).subscribe(it => {
            this.onCreatedThisChildDebounce(it);
        });
        if (rawSet) {
            this.setRawSet(rawSet);
            const e = this.getElement();
            if (e) {
                e.component = this;
            }
            // Setup decorators
            this._setupQueryDecorators(rawSet);
            this._setupEventDecorators(rawSet);
        }
    }
    onDrThisBind() {
        // Logic moved to onInitRender for robustness
    }
    onDrThisUnBind() {
        this.onDestroy();
    }
    onDestroyRender(data) {
        this.onDestroy();
    }
    onDestroy() {
        this._cleanupEventListeners();
        this._cleanupQueryBindings();
        this._cleanupEventBindings();
        this._clearAllRefreshTimers();
        this.createChildrenDebounceSubscription?.unsubscribe();
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_a = typeof _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet !== "undefined" && _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet) === "function" ? _a : Object)
], ComponentBase.prototype, "_rawSet", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Array)
], ComponentBase.prototype, "_children", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
], ComponentBase.prototype, "_render", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
], ComponentBase.prototype, "_attribute", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Array)
], ComponentBase.prototype, "_boundEventListeners", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Array)
], ComponentBase.prototype, "_queryBindings", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Array)
], ComponentBase.prototype, "_eventBindings", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_b = typeof Map !== "undefined" && Map) === "function" ? _b : Object)
], ComponentBase.prototype, "_refreshTimers", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
], ComponentBase.prototype, "childrenSetSubject", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_3__.DomRenderNoProxy,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
], ComponentBase.prototype, "createChildrenDebounceSubscription", void 0);


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/ComponentRouterBase.ts":
/*!************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/ComponentRouterBase.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentRouterBase: () => (/* binding */ ComponentRouterBase),
/* harmony export */   isOnCreatedOutlet: () => (/* binding */ isOnCreatedOutlet),
/* harmony export */   isOnCreatedOutletDebounce: () => (/* binding */ isOnCreatedOutletDebounce)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _lifecycle_dr_this_OnDrThisUnBind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lifecycle/dr-this/OnDrThisUnBind */ "../../packages/@dooboostore/dom-render/src/lifecycle/dr-this/OnDrThisUnBind.ts");
/* harmony import */ var _components_router_RouterOutlet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/router/RouterOutlet */ "../../packages/@dooboostore/dom-render/src/components/router/RouterOutlet.ts");



const isOnCreatedOutlet = (obj) => typeof obj?.onCreatedOutlet === 'function';
const isOnCreatedOutletDebounce = (obj) => typeof obj?.onCreatedOutletDebounce === 'function';
class ComponentRouterBase extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
    // OnDrThisBind
    child;
    constructor(_config) {
        super(_config);
    }
    // get child() {
    //   return this._child;
    // }
    setChild(child) {
        console.log('setChild!!', child, this.name);
        if (child) {
            this.child = child;
        }
        else {
            this.child = undefined;
        }
        const routerOutletChildren = this.getChildren(_components_router_RouterOutlet__WEBPACK_IMPORTED_MODULE_2__.RouterOutlet.RouterOutlet);
        routerOutletChildren.forEach(it => {
            it.setValue(this.child);
        });
    }
    onDrThisUnBind() {
        super.onDrThisUnBind();
        if (this.child && (0,_lifecycle_dr_this_OnDrThisUnBind__WEBPACK_IMPORTED_MODULE_1__.isOnDrThisUnBind)(this.child?.obj)) {
            this.child.obj.onDrThisUnBind();
        }
    }
    onCreatedThisChildDebounce(childrenSet) {
        super.onCreatedThisChildDebounce(childrenSet);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/ComponentSet.ts":
/*!*****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/ComponentSet.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentSet: () => (/* binding */ ComponentSet)
/* harmony export */ });
/* harmony import */ var _types_Types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/Types */ "../../packages/@dooboostore/dom-render/src/types/Types.ts");

class ComponentSet {
    obj;
    _config;
    _template;
    _styles;
    constructor(obj, source, config) {
        this.obj = obj;
        this._template = source.template;
        this._styles = source.styles;
        this._config = _types_Types__WEBPACK_IMPORTED_MODULE_0__.DomRenderFinalProxy.final(Object.assign({ objPath: 'obj' }, config));
    }
    get template() {
        return this._template;
    }
    get styles() {
        return this._styles;
    }
    get config() {
        return this._config;
    }
    setTemplateStyle(set) {
        this._template = set.template;
        this._styles = set.styles;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/a/A.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/a/A.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ A),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");




var A;
(function (A_1) {
    A_1.selector = 'dr-a';
    class A extends _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        href = null;
        target = null;
        style = null;
        classAttr = null;
        click = null;
        replace = false;
        scrollToTop = true;
        onClick(event) {
            if (this.click) {
                const attributes = {
                    href: this.href,
                    target: this.target,
                    style: this.style,
                    class: this.classAttr,
                    replace: this.replace,
                    scrollToTop: this.scrollToTop
                };
                this.click({ event, attributes });
            }
            if (event.defaultPrevented) {
                return;
            }
            if (this.target !== '_blank' && this.href) {
                event.preventDefault();
                // console.log('scrollTop', this.scrollToTop);
                this.domRenderConfig?.router?.go({ path: this.href, replace: this.replace, scrollToTop: this.scrollToTop });
            }
        }
    }
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ converter: v => v || null }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], A.prototype, "href", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ converter: v => v || null }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], A.prototype, "target", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ converter: v => v || null }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], A.prototype, "style", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'class', converter: v => v || null }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], A.prototype, "classAttr", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)(),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], A.prototype, "click", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ converter: v => v !== null && String(v) !== 'false' }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], A.prototype, "replace", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ converter: v => v !== null && String(v) !== 'false' }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], A.prototype, "scrollToTop", void 0);
    A_1.A = A;
})(A || (A = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    a: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
            name: A.selector,
            template: `<a
        href="\${@this@.href}$"
        target="\${@this@.target}$"
        style="\${@this@.style}$"
        class="\${@this@.classAttr}$"
        dr-event-click="@this@.onClick($event)"
      >#innerHTML#</a>`,
            objFactory: (e, o, r2, constructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new A.A(...constructorParam), config });
            },
        });
    },
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/a/index.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/a/index.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* reexport safe */ _A__WEBPACK_IMPORTED_MODULE_0__.A)
/* harmony export */ });
/* harmony import */ var _A__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./A */ "../../packages/@dooboostore/dom-render/src/components/a/A.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/appender/Appender.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/appender/Appender.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Appender: () => (/* binding */ Appender),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var Appender;
(function (Appender_1) {
    Appender_1.selector = 'dr-appender';
    // @Component({
    //   template: '<div dr-appender="@this@.appender" dr-option-strip="true">#innerHTML#</div>',
    //   selector: `${selector}`
    // })
    class Appender extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        value;
        // onCreateRender(...param: any) {
        //   console.log('--onCreateRender')
        // }
        // test() {
        //   console.log('t', this.getAttribute('appender'))
        // }
        // push(...data:D[]) {
        //   console.log('push/////', data);
        //   this.appender.push(...data);
        // }
        //
        // set(key: string, v: D): void {
        //   this.appender.set(key, v)
        // }
        //
        // delete(key: string): void {
        //   this.appender.delete(key);
        // }
        //
        // clear(): void {
        //   this.appender.clear();
        // }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            if (this.equalsAttributeName(name, 'value')) {
                this.value = value;
            }
            // console.log('------>appender', name, value);
        }
    }
    Appender_1.Appender = Appender;
})(Appender || (Appender = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    appender: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: Appender.selector,
            template: '<div dr-appender="@this@.value" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Appender.Appender(...counstructorParam), config: config });
            }
        });
    },
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/appender/index.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/appender/index.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Appender: () => (/* reexport safe */ _Appender__WEBPACK_IMPORTED_MODULE_0__.Appender)
/* harmony export */ });
/* harmony import */ var _Appender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Appender */ "../../packages/@dooboostore/dom-render/src/components/appender/Appender.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/checkbox/CheckBox.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/checkbox/CheckBox.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CheckBox: () => (/* binding */ CheckBox),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var CheckBox;
(function (CheckBox_1) {
    CheckBox_1.selector = 'dr-checkbox';
    class CheckBoxBase extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        hidden = true;
    }
    // @Component({
    //   template: '<div dr-if="!@this@.hidden" dr-strip="true">#innerHTML#</div>',
    //   styles: '',
    //   selector: `${selector}.Checked`
    // })
    class Checked extends CheckBoxBase {
        name = 'checked';
        constructor() {
            super({ onlyParentType: CheckBox });
        }
    }
    CheckBox_1.Checked = Checked;
    // @Component({
    //   template: '<div dr-if="!@this@.hidden" dr-strip="true">#innerHTML#</div>',
    //   styles: '',
    //   selector: `${selector}.UnChecked`
    // })
    class UnChecked extends CheckBoxBase {
        name = 'unChecked';
        constructor() {
            super({ onlyParentType: CheckBox });
        }
    }
    CheckBox_1.UnChecked = UnChecked;
    // @Component({
    //   template: template,
    //   styles: style,
    //   selector: `${selector}`
    // })
    class CheckBox extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        checked = false;
        inputElement;
        change(option, checked) {
            checked = checked ?? this.checked;
            this.checked = checked;
            this.setChildrenHidden(checked);
            this.getAttribute('change')?.(checked, option);
        }
        setChildrenHidden(checked) {
            this.getChildren(Checked).forEach(it => {
                it.hidden = !checked;
            });
            this.getChildren(UnChecked).forEach(it => {
                it.hidden = checked;
            });
        }
        onCreatedThisChild(child, childData) {
            super.onCreatedThisChild(child, childData);
            this.setChildrenHidden(this.checked);
        }
        onInitInputElement(element) {
            // console.log('---cr', element)
            this.inputElement = element;
            this.inputElement.checked = !!this.getAttribute('checked');
            this.change({ type: 'initialize' }, !!this.getAttribute('checked'));
        }
        onChangeAttrRender(name, val, other) {
            super.onChangeAttrRender(name, val, other);
            // console.log('Checkbox ChangeAttr------', name, val, this.inputElement)
            if (this.inputElement && this.getAttribute('checked') !== this.checked) {
                this.inputElement.checked = !!this.getAttribute('checked');
                this.change({ type: 'attributeChange' }, !!this.getAttribute('checked'));
            }
        }
    }
    CheckBox_1.CheckBox = CheckBox;
})(CheckBox || (CheckBox = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    checkBoxChecked: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${CheckBox.selector}-checked`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new CheckBox.Checked(), config: config });
            }
        });
    },
    checkBoxUnchecked: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${CheckBox.selector}-unchecked`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true" >#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new CheckBox.UnChecked(), config: config });
            }
        });
    },
    checkBox: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${CheckBox.selector}`,
            template: '<label class="${@this@.getAttribute(\'class\')}$">\n' +
                '  <input\n' +
                '    name="${@this@.getAttribute(\'name\')}$"\n' +
                '    dr-on-init="@this@.onInitInputElement($element)"\n' +
                '    dr-event-change="@this@.change({type: \'event\'},$element.checked);"\n' +
                '    type="checkbox" hidden="hidden"/>\n' +
                '  #innerHTML#\n' +
                '</label>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new CheckBox.CheckBox(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/checkbox/index.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/checkbox/index.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CheckBox: () => (/* reexport safe */ _CheckBox__WEBPACK_IMPORTED_MODULE_0__.CheckBox)
/* harmony export */ });
/* harmony import */ var _CheckBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CheckBox */ "../../packages/@dooboostore/dom-render/src/components/checkbox/CheckBox.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/choose/Choose.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/choose/Choose.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Choose: () => (/* binding */ Choose),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var Choose;
(function (Choose_1) {
    Choose_1.selector = 'dr-choose';
    class ChildOtherWiseBase extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        hidden = true;
    }
    class ChildBase extends ChildOtherWiseBase {
        data;
    }
    class When extends ChildBase {
        constructor() {
            super({ onlyParentType: (Choose) });
        }
    }
    Choose_1.When = When;
    class OtherWise extends ChildBase {
        constructor() {
            super({ onlyParentType: (Choose) });
        }
    }
    Choose_1.OtherWise = OtherWise;
    class Choose extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        choose;
        onCreatedThisChild(child, data) {
            super.onCreatedThisChild(child, data);
            this.setChange(child);
        }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            if (this.equalsAttributeName(name, 'data')) {
                this.choose = undefined;
                const children = this.getChildren([When, OtherWise]).sort((a, b) => (a instanceof OtherWise ? 1 : 0) - (b instanceof OtherWise ? 1 : 0));
                children.forEach(it => this.setChange(it));
            }
        }
        setChange(child) {
            child.data = this.getAttribute('data');
            // when.hidden = true;
            console.log('eeeeeee?', child, child.getAttribute('test'), this.getAttribute('data'));
            if (!this.choose && child instanceof When && child.getAttribute('test')?.(this.getAttribute('data'))) {
                console.log('eeeeeee?2');
                // console.log('------------', child.attribute?.test?.(this.attribute?.data))
                this.choose = child;
                if (child.hidden) {
                    child.hidden = false;
                }
                // console.log('--------', when)
            }
            else if (this.choose !== child) {
                child.hidden = true;
            }
            console.log('eeeeeee?3');
            if (!this.choose && child instanceof OtherWise) {
                this.choose = child;
                if (child.hidden) {
                    child.hidden = false;
                }
            }
            console.log('eeeeeee?34');
        }
    }
    Choose_1.Choose = Choose;
})(Choose || (Choose = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    chooseWhen: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Choose.selector}-when`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true" >#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Choose.When(), config: config });
            }
        });
    },
    chooseOtherWise: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Choose.selector}-other-wise`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true" >#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Choose.OtherWise(), config: config });
            }
        });
    },
    choose: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Choose.selector}`,
            template: '#innerHTML#',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Choose.Choose(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/choose/index.ts":
/*!*****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/choose/index.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Choose: () => (/* reexport safe */ _Choose__WEBPACK_IMPORTED_MODULE_0__.Choose)
/* harmony export */ });
/* harmony import */ var _Choose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Choose */ "../../packages/@dooboostore/dom-render/src/components/choose/Choose.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/details/Details.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/details/Details.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Details: () => (/* binding */ Details),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core-web/valid/ValidUtils */ "../../packages/@dooboostore/core-web/src/valid/ValidUtils.ts");
/* harmony import */ var _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core-web/event/EventUtils */ "../../packages/@dooboostore/core-web/src/event/EventUtils.ts");





var Details;
(function (Details_1) {
    Details_1.selector = 'dr-details';
    // @Component({
    //   template: '<summary class="${`${@this@.getAttribute(\'class\')} details-summary-container`}$">#innerHTML#</summary>',
    //   styles: '',
    //   selector: `${selector}.Summary`
    // })
    class Summary extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        constructor() {
            super({ onlyParentType: [Details] });
        }
    }
    Details_1.Summary = Summary;
    // @Component({
    //   template: '<div class="${`${@this@.getAttribute(\'class\')} details-body-container details-body-${@this@.getAttribute(\'float\')}-container`}$" dr-on-init="@this@.$element = $element;">#innerHTML#</div>',
    //   selector: `${selector}.Body`
    // })
    class Body extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        $element;
        constructor() {
            super({ onlyParentType: [Details] });
        }
    }
    Details_1.Body = Body;
    Details_1.isBody = (instance) => {
        return instance instanceof Body;
    };
    // @Component({
    //   template: '<form class="${`${@this@.getAttribute(\'class\')} details-body-container details-body-${@this@.getAttribute(\'float\')}-container details-form-container`}$" dr-on-init="@this@.$element = $element;" dr-event-submit="@this@.submit($element,$event);">#innerHTML#</form>',
    //   styles: detailsFormStyle,
    //   selector: `${selector}.Form`
    // })
    class Form extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        $element;
        constructor() {
            super({ onlyParentType: [Details] });
        }
        submit(element, event) {
            if (this.hasAttribute('disabledSubmit')) {
                event.preventDefault();
            }
            if (this.hasAttribute('submit')) {
                this.getAttribute('submit')?.(event, element);
            }
        }
        reset() {
            this.$element?.reset();
        }
    }
    Details_1.Form = Form;
    Details_1.isForm = (instance) => {
        return instance instanceof Form;
    };
    // @Component({
    //   template: template,
    //   styles: style,
    //   // noStrip: true,
    //   selector: `${selector}`
    // })
    class Details extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        // private detailsElement?: HTMLDetailsElement;
        documentClickSubscription;
        toggleSubscription;
        element;
        onCreateRenderData(data) {
            super.onCreateRenderData(data);
        }
        onCreateRender(...param) { }
        toggle(element) {
            const toggleAttribute = this.getAttribute('toggle');
            if (toggleAttribute) {
                toggleAttribute?.(element.open);
            }
        }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__.ValidUtils.isBrowser() && this.rawSet?.dataSet.config.window) {
                const detailsElement = this.element;
                const document = this.rawSet.dataSet.config.window.document;
                this.documentClickSubscription = _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_4__.EventUtils.htmlElementEventObservable(document, 'click').subscribe(event => {
                    if (this.getAttribute('disableOtherClickClose')) {
                        return;
                    }
                    if (detailsElement && !detailsElement?.contains(event?.target)) {
                        detailsElement.open = false;
                    }
                });
                if (detailsElement) {
                    this.toggleSubscription = _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_4__.EventUtils.htmlElementEventObservable(detailsElement, 'toggle').subscribe(it => {
                        if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__.ValidUtils.coreValidUtils.isNotNullUndefined(this.getAttribute('toggle_form_reset'))) {
                            this.children?.filter(Details_1.isForm).forEach(it => {
                                it.reset();
                            });
                        }
                    });
                }
            }
            // console.log('aaaaaaaaaaaaaaaaaaaaa', rawSet);
        }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
        }
        onDestroyRender(...metaData) {
            this.toggleSubscription?.unsubscribe();
            this.documentClickSubscription?.unsubscribe();
            // console.log('onDestroyRender', metaData);
            // if (ValidUtils.isBrowser()) {
            //   document.removeEventListener('click', this.ccc)
            // }
        }
    }
    Details_1.Details = Details;
})(Details || (Details = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    detailsSummary: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Details.selector}-summary`,
            template: '<summary class="${`${@this@.getAttribute(\'class\')} details-summary-container`}$">#innerHTML#</summary>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Details.Summary(), config: config });
            }
        });
    },
    detailsBody: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Details.selector}-body`,
            template: '<div class="${`${@this@.getAttribute(\'class\')} details-body-container details-body-${@this@.getAttribute(\'float\')}-container`}$" dr-on-init="@this@.$element = $element;">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Details.Body(), config: config });
            }
        });
    },
    detailsForm: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Details.selector}-form`,
            template: '<form class="${`${@this@.getAttribute(\'class\')} details-body-container details-body-${@this@.getAttribute(\'float\')}-container details-form-container`}$" dr-on-init="@this@.$element = $element;" dr-event-submit="@this@.submit($element,$event);">#innerHTML#</form>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Details.Form(), config: config });
            }
        });
    },
    details: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Details.selector}`,
            styles: `
        .details-container {
            position: relative;
        }

        .details-container .details-body-container {
            position: absolute;
        }


        .details-container .details-body-bottom-left-container {
            position: absolute;
            left: 0;
            top: 100%;
            /*margin-top: 0px;*/
            /*width: max-content;*/
        }

        .details-container .details-body-bottom-right-container {
            position: absolute;
            right: 0;
            top: 100%;
            /*margin-top: 0px;*/
            /*width: max-content;*/
        }

        .details-container .details-body-top-left-container {
            position: absolute;
            left: 0;
            bottom: 100%;
            /*margin-bottom: 0px;*/
            /*width: max-content;*/
        }

        .details-container .details-body-top-right-container {
            position: absolute;
            right: 0;
            bottom: 100%;
            /*margin-bottom: 0px;*/
        }
      `,
            template: '<details class="${`${@this@.getAttribute(\'class\')} details-container`}$" dr-on-init="@this@.element = $element;" dr-event-toggle="@this@.toggle($element)"> #innerHTML# </details>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Details.Details(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/details/index.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/details/index.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Details: () => (/* reexport safe */ _Details__WEBPACK_IMPORTED_MODULE_0__.Details)
/* harmony export */ });
/* harmony import */ var _Details__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Details */ "../../packages/@dooboostore/dom-render/src/components/details/Details.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/forOf/ForOf.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/forOf/ForOf.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ForOf: () => (/* binding */ ForOf),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var ForOf;
(function (ForOf_1) {
    ForOf_1.selector = 'dr-for-of';
    // @Component({
    //   template: '<div dr-for-of="@this@.data" dr-option-strip="true">#innerHTML#</div>',
    //   selector: `${selector}`
    // })
    class ForOf extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        value;
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            if (this.equalsAttributeName(name, 'value')) {
                this.value = value;
            }
        }
    }
    ForOf_1.ForOf = ForOf;
})(ForOf || (ForOf = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    forOf: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: ForOf.selector,
            template: '<div dr-for-of="@this@.value" >#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new ForOf.ForOf(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/forOf/index.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/forOf/index.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ForOf: () => (/* reexport safe */ _ForOf__WEBPACK_IMPORTED_MODULE_0__.ForOf)
/* harmony export */ });
/* harmony import */ var _ForOf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ForOf */ "../../packages/@dooboostore/dom-render/src/components/forOf/ForOf.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/if/If.ts":
/*!**********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/if/If.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   If: () => (/* binding */ If),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var If;
(function (If_1) {
    If_1.selector = 'dr-if';
    class If extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        sw = false;
        async onInitRender(param, rawSet) {
            super.onInitRender(param, rawSet);
        }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            if (this.equalsAttributeName(name, 'value')) {
                // console.log('--', value, typeof value);
                this.sw = value;
            }
        }
    }
    If_1.If = If;
})(If || (If = {}));
// const iif = DomRender.createComponent({
//   type: If.If,
//   tagName: If.selector,
//   template: '<div dr-if="@this@.sw" dr-option-strip="true">#innerHTML#</div>' });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    if: (config) => {
        // if (!customElements.get(If.selector)) {
        //   customElements.define(If.selector, class extends HTMLElement {
        //     constructor() {
        //       super();
        //       this.hidden = true;
        //     }
        //   });
        // }
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: If.selector,
            template: '<div dr-if="@this@.sw" dr-option-strip="true" >#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new If.If(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/if/index.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/if/index.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   If: () => (/* reexport safe */ _If__WEBPACK_IMPORTED_MODULE_0__.If)
/* harmony export */ });
/* harmony import */ var _If__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./If */ "../../packages/@dooboostore/dom-render/src/components/if/If.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/index.ts":
/*!**********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/index.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* reexport safe */ _a__WEBPACK_IMPORTED_MODULE_3__.A),
/* harmony export */   ATTRIBUTE_METADATA_KEY: () => (/* reexport safe */ _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ATTRIBUTE_METADATA_KEY),
/* harmony export */   Appender: () => (/* reexport safe */ _appender__WEBPACK_IMPORTED_MODULE_4__.Appender),
/* harmony export */   CheckBox: () => (/* reexport safe */ _checkbox__WEBPACK_IMPORTED_MODULE_5__.CheckBox),
/* harmony export */   Choose: () => (/* reexport safe */ _choose__WEBPACK_IMPORTED_MODULE_6__.Choose),
/* harmony export */   ComponentBase: () => (/* reexport safe */ _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase),
/* harmony export */   ComponentRouterBase: () => (/* reexport safe */ _ComponentRouterBase__WEBPACK_IMPORTED_MODULE_1__.ComponentRouterBase),
/* harmony export */   ComponentSet: () => (/* reexport safe */ _ComponentSet__WEBPACK_IMPORTED_MODULE_2__.ComponentSet),
/* harmony export */   Details: () => (/* reexport safe */ _details__WEBPACK_IMPORTED_MODULE_7__.Details),
/* harmony export */   EVENT_METADATA_KEY: () => (/* reexport safe */ _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.EVENT_METADATA_KEY),
/* harmony export */   ForOf: () => (/* reexport safe */ _forOf__WEBPACK_IMPORTED_MODULE_8__.ForOf),
/* harmony export */   If: () => (/* reexport safe */ _if__WEBPACK_IMPORTED_MODULE_9__.If),
/* harmony export */   Input: () => (/* reexport safe */ _input__WEBPACK_IMPORTED_MODULE_10__.Input),
/* harmony export */   PromiseSwitch: () => (/* reexport safe */ _promise__WEBPACK_IMPORTED_MODULE_11__.PromiseSwitch),
/* harmony export */   QUERY_METADATA_KEY: () => (/* reexport safe */ _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.QUERY_METADATA_KEY),
/* harmony export */   Radio: () => (/* reexport safe */ _radio__WEBPACK_IMPORTED_MODULE_12__.Radio),
/* harmony export */   Route: () => (/* reexport safe */ _router__WEBPACK_IMPORTED_MODULE_13__.Route),
/* harmony export */   RouterOutlet: () => (/* reexport safe */ _router__WEBPACK_IMPORTED_MODULE_13__.RouterOutlet),
/* harmony export */   Select: () => (/* reexport safe */ _select__WEBPACK_IMPORTED_MODULE_14__.Select),
/* harmony export */   This: () => (/* reexport safe */ _this__WEBPACK_IMPORTED_MODULE_15__.This),
/* harmony export */   Timer: () => (/* reexport safe */ _timer__WEBPACK_IMPORTED_MODULE_16__.Timer),
/* harmony export */   attribute: () => (/* reexport safe */ _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.attribute),
/* harmony export */   drComponent: () => (/* binding */ drComponent),
/* harmony export */   event: () => (/* reexport safe */ _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.event),
/* harmony export */   isOnCreatedOutlet: () => (/* reexport safe */ _ComponentRouterBase__WEBPACK_IMPORTED_MODULE_1__.isOnCreatedOutlet),
/* harmony export */   isOnCreatedOutletDebounce: () => (/* reexport safe */ _ComponentRouterBase__WEBPACK_IMPORTED_MODULE_1__.isOnCreatedOutletDebounce),
/* harmony export */   query: () => (/* reexport safe */ _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.query)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _ComponentRouterBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentRouterBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentRouterBase.ts");
/* harmony import */ var _ComponentSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ComponentSet */ "../../packages/@dooboostore/dom-render/src/components/ComponentSet.ts");
/* harmony import */ var _a__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./a */ "../../packages/@dooboostore/dom-render/src/components/a/index.ts");
/* harmony import */ var _appender__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./appender */ "../../packages/@dooboostore/dom-render/src/components/appender/index.ts");
/* harmony import */ var _checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./checkbox */ "../../packages/@dooboostore/dom-render/src/components/checkbox/index.ts");
/* harmony import */ var _choose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./choose */ "../../packages/@dooboostore/dom-render/src/components/choose/index.ts");
/* harmony import */ var _details__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./details */ "../../packages/@dooboostore/dom-render/src/components/details/index.ts");
/* harmony import */ var _forOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./forOf */ "../../packages/@dooboostore/dom-render/src/components/forOf/index.ts");
/* harmony import */ var _if__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./if */ "../../packages/@dooboostore/dom-render/src/components/if/index.ts");
/* harmony import */ var _input__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./input */ "../../packages/@dooboostore/dom-render/src/components/input/index.ts");
/* harmony import */ var _promise__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./promise */ "../../packages/@dooboostore/dom-render/src/components/promise/index.ts");
/* harmony import */ var _radio__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./radio */ "../../packages/@dooboostore/dom-render/src/components/radio/index.ts");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./router */ "../../packages/@dooboostore/dom-render/src/components/router/index.ts");
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./select */ "../../packages/@dooboostore/dom-render/src/components/select/index.ts");
/* harmony import */ var _this__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./this */ "../../packages/@dooboostore/dom-render/src/components/this/index.ts");
/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./timer */ "../../packages/@dooboostore/dom-render/src/components/timer/index.ts");
/* harmony import */ var _if_If__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./if/If */ "../../packages/@dooboostore/dom-render/src/components/if/If.ts");
/* harmony import */ var _this_This__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./this/This */ "../../packages/@dooboostore/dom-render/src/components/this/This.ts");
/* harmony import */ var _appender_Appender__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./appender/Appender */ "../../packages/@dooboostore/dom-render/src/components/appender/Appender.ts");
/* harmony import */ var _promise_PromiseSwitch__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./promise/PromiseSwitch */ "../../packages/@dooboostore/dom-render/src/components/promise/PromiseSwitch.ts");
/* harmony import */ var _choose_Choose__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./choose/Choose */ "../../packages/@dooboostore/dom-render/src/components/choose/Choose.ts");
/* harmony import */ var _checkbox_CheckBox__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./checkbox/CheckBox */ "../../packages/@dooboostore/dom-render/src/components/checkbox/CheckBox.ts");
/* harmony import */ var _radio_Radio__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./radio/Radio */ "../../packages/@dooboostore/dom-render/src/components/radio/Radio.ts");
/* harmony import */ var _router_RouterOutlet__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./router/RouterOutlet */ "../../packages/@dooboostore/dom-render/src/components/router/RouterOutlet.ts");
/* harmony import */ var _select_Select__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./select/Select */ "../../packages/@dooboostore/dom-render/src/components/select/Select.ts");
/* harmony import */ var _timer_Timer__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./timer/Timer */ "../../packages/@dooboostore/dom-render/src/components/timer/Timer.ts");
/* harmony import */ var _details_Details__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./details/Details */ "../../packages/@dooboostore/dom-render/src/components/details/Details.ts");
/* harmony import */ var _input_Input__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./input/Input */ "../../packages/@dooboostore/dom-render/src/components/input/Input.ts");
/* harmony import */ var _router_Route__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./router/Route */ "../../packages/@dooboostore/dom-render/src/components/router/Route.ts");
/* harmony import */ var _a_A__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./a/A */ "../../packages/@dooboostore/dom-render/src/components/a/A.ts");
/* harmony import */ var _forOf_ForOf__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./forOf/ForOf */ "../../packages/@dooboostore/dom-render/src/components/forOf/ForOf.ts");
































const drComponent = {
    ..._if_If__WEBPACK_IMPORTED_MODULE_17__["default"],
    ..._this_This__WEBPACK_IMPORTED_MODULE_18__["default"],
    ..._appender_Appender__WEBPACK_IMPORTED_MODULE_19__["default"],
    ..._promise_PromiseSwitch__WEBPACK_IMPORTED_MODULE_20__["default"],
    ..._choose_Choose__WEBPACK_IMPORTED_MODULE_21__["default"],
    ..._checkbox_CheckBox__WEBPACK_IMPORTED_MODULE_22__["default"],
    ..._radio_Radio__WEBPACK_IMPORTED_MODULE_23__["default"],
    ..._select_Select__WEBPACK_IMPORTED_MODULE_25__["default"],
    ..._timer_Timer__WEBPACK_IMPORTED_MODULE_26__["default"],
    ..._details_Details__WEBPACK_IMPORTED_MODULE_27__["default"],
    ..._input_Input__WEBPACK_IMPORTED_MODULE_28__["default"],
    ..._router_Route__WEBPACK_IMPORTED_MODULE_29__["default"],
    ..._router_RouterOutlet__WEBPACK_IMPORTED_MODULE_24__["default"],
    ..._a_A__WEBPACK_IMPORTED_MODULE_30__["default"],
    ..._forOf_ForOf__WEBPACK_IMPORTED_MODULE_31__["default"]
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/input/Input.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/input/Input.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Input: () => (/* binding */ Input),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core/valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");
/* harmony import */ var _dooboostore_core_message_operators_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core/message/operators/map */ "../../packages/@dooboostore/core/src/message/operators/map.ts");
/* harmony import */ var _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core-web/event/EventUtils */ "../../packages/@dooboostore/core-web/src/event/EventUtils.ts");
/* harmony import */ var _dooboostore_core_message_operators_debounceTime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/core/message/operators/debounceTime */ "../../packages/@dooboostore/core/src/message/operators/debounceTime.ts");
/* harmony import */ var _dooboostore_core_message_operators_distinctUntilChanged__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dooboostore/core/message/operators/distinctUntilChanged */ "../../packages/@dooboostore/core/src/message/operators/distinctUntilChanged.ts");








var Input;
(function (Input_1) {
    Input_1.selector = `dr-input`;
    class Base extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
    }
    Input_1.Base = Base;
    // @Component({
    //   selector: `${selector}`,
    //   template,
    //   styles,
    // })
    class Input extends Base {
        element;
        inputSubscription;
        resetSubscripton;
        onCreateRender(...param) { }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            // console.log('dr-input, rawSet', rawSet)
            const inputElement = this.element;
            const debounceTimeAttribute = this.getAttribute('debounceTime');
            const debounceTimeValue = _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__.ValidUtils.isNotNullUndefined(debounceTimeAttribute)
                ? Number(debounceTimeAttribute)
                : 0;
            const distinct = _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__.ValidUtils.isNotNullUndefined(this.getAttribute('distinct'));
            if (inputElement) {
                const makeDeboundceDistinctUtilChanged = () => {
                    // let result$ = EventUtils.htmlElementEventObservable(inputElement,'input');
                    let result$ = _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_5__.EventUtils.htmlElementEventObservable(inputElement, 'input').pipe((0,_dooboostore_core_message_operators_map__WEBPACK_IMPORTED_MODULE_4__.map)((event) => {
                        const target = event.target;
                        if (target instanceof HTMLInputElement) {
                            return target.value.trim();
                        }
                        console.warn('Input event target is not an HTMLInputElement:', target);
                        return '';
                    }));
                    if (_dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__.ValidUtils.isNotNullUndefined(debounceTimeValue) && debounceTimeValue > 0) {
                        result$ = result$.pipe((0,_dooboostore_core_message_operators_debounceTime__WEBPACK_IMPORTED_MODULE_6__.debounceTime)(debounceTimeValue));
                    }
                    if (_dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__.ValidUtils.isNotNullUndefined(distinct) && distinct === true) {
                        result$ = result$.pipe((0,_dooboostore_core_message_operators_distinctUntilChanged__WEBPACK_IMPORTED_MODULE_7__.distinctUntilChanged)());
                    }
                    return result$;
                };
                this.inputSubscription = makeDeboundceDistinctUtilChanged().subscribe(it => {
                    // console.log('change?????????????', it);
                    this.getAttribute('input')?.(it, inputElement);
                });
                if (inputElement.form) {
                    this.resetSubscripton = _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_5__.EventUtils.htmlElementEventObservable(inputElement.form, 'reset').subscribe(it => {
                        // console.log('rrrraaa?,', this.inputSubscription, it)
                        this.inputSubscription?.unsubscribe();
                        this.inputSubscription = makeDeboundceDistinctUtilChanged().subscribe(it => {
                            // console.log('rrrr?')
                            this.getAttribute('input')?.(it, inputElement);
                        });
                    });
                }
            }
        }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            // console.log('-------->',name, value)
            if (name === 'value') {
                // console.log('changeAttribu', name, value)
                // this.wow = {value: value};
                // this.name = value;
            }
        }
        onDestroyRender(metaData) {
            this.resetSubscripton?.unsubscribe();
            this.inputSubscription?.unsubscribe();
        }
    }
    Input_1.Input = Input;
})(Input || (Input = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    input: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Input.selector}`,
            template: '<Input type="${@this@.getAttribute(\'type\')}$" class="${@this@.getAttribute(\'class\')}$" id="${@this@.getAttribute(\'id\')}$" name="${@this@.getAttribute(\'name\')}$" dr-on-init="@this@.element=$element" >#innerHTML#',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Input.Input(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/input/index.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/input/index.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Input: () => (/* reexport safe */ _Input__WEBPACK_IMPORTED_MODULE_0__.Input)
/* harmony export */ });
/* harmony import */ var _Input__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Input */ "../../packages/@dooboostore/dom-render/src/components/input/Input.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/promise/PromiseSwitch.ts":
/*!**************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/promise/PromiseSwitch.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PromiseSwitch: () => (/* binding */ PromiseSwitch),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core/valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");
/* harmony import */ var _dooboostore_core_promise_Promises__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core/promise/Promises */ "../../packages/@dooboostore/core/src/promise/Promises.ts");





var PromiseSwitch;
(function (PromiseSwitch_1) {
    PromiseSwitch_1.selector = 'dr-promise-switch';
    class ChildBase extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        hidden = true;
    }
    // @Component({
    //   template: '<div dr-if="!@this@.hidden" dr-strip="true">#innerHTML#</div>',
    //   selector: `${selector}.Default`
    // })
    class Default extends ChildBase {
    }
    PromiseSwitch_1.Default = Default;
    // @Component({
    //   template: '<div dr-if="!@this@.hidden" dr-strip="true">#innerHTML#</div>',
    //   selector: `${selector}.Pending`
    //   // selector: `System-PromiseSwitch.Pending`
    // })
    class Pending extends ChildBase {
    }
    PromiseSwitch_1.Pending = Pending;
    // @Component({
    //   template: '<div dr-if="!@this@.hidden" dr-strip="true">#innerHTML#</div>',
    //   selector: `${selector}.Fulfilled`
    // })
    class Fulfilled extends ChildBase {
        data;
        setData(data) {
            this.data = data;
        }
    }
    PromiseSwitch_1.Fulfilled = Fulfilled;
    // @Component({
    //   template: '<div dr-if="!@this@.hidden" dr-strip="true">#innerHTML#</div>',
    //   selector: `${selector}.Rejected`
    // })
    class Rejected extends ChildBase {
        data;
        setData(data) {
            this.data = data;
        }
    }
    PromiseSwitch_1.Rejected = Rejected;
    /*
        <dr-promise-switch data="${@this@.pickWorldPromise}$">
          ${@nearThis@.promiseState.status}$
          <dr-promise-switch-default>
              <button class="random-world-button" dr-event-click="@this@.pickWorld()">
                  <i class="fa-solid fa-dice"></i>
              </button>
          </dr-promise-switch-default>
          <dr-promise-switch-pending>
              <button class="random-world-button disabled spin" >
                  <i class="fa-solid fa-dice"></i>
              </button>
          </dr-promise-switch-pending>
      </dr-promise-switch>
     */
    // @Component({
    //   template: '#innerHTML#',
    //   selector: `${selector}`
    // })
    class PromiseSwitch extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        // private promise?:  {
        //   state: 'reject' | 'resolve',
        //
        // }
        promiseState;
        state;
        onCreatedThisChild(child, data) {
            super.onCreatedThisChild(child, data);
            this.childStateChange();
        }
        childStateChange() {
            const defaults = this.getChildren(Default);
            const pendings = this.getChildren(Pending);
            const fulfilleds = this.getChildren(Fulfilled);
            const rejecteds = this.getChildren(Rejected);
            const full = [...fulfilleds, ...rejecteds, ...pendings, ...defaults];
            // console.log('----!!!!!!-------', this.promiseState, full)
            if (this.promiseState === undefined) {
                this.state = undefined;
                full.filter(it => !it.hidden).forEach(it => (it.hidden = true));
                defaults.filter(it => it.hidden).forEach(it => (it.hidden = false));
                pendings.filter(it => it.getAttribute('defaultView') && it.hidden).forEach(it => (it.hidden = false));
            }
            else if (this.promiseState.status === 'pending') {
                this.state = 'pending';
                full.filter(it => !it.hidden).forEach(it => (it.hidden = true));
                pendings.filter(it => it.hidden).forEach(it => (it.hidden = false));
            }
            else if (this.promiseState.status === 'fulfilled') {
                this.state = 'fulfilled';
                const value = this.promiseState.value;
                // console.log('-----------fulfilled promises', value);
                full.filter(it => !it.hidden).forEach(it => (it.hidden = true));
                fulfilleds.forEach(it => {
                    it.setData(value);
                });
                fulfilleds.filter(it => it.hidden).forEach(it => (it.hidden = false));
            }
            else if (this.promiseState.status === 'rejected') {
                this.state = 'rejected';
                const value = this.promiseState.reason;
                full.filter(it => !it.hidden).forEach(it => (it.hidden = true));
                rejecteds.forEach(it => {
                    it.setData(value);
                });
                rejecteds.filter(it => it.hidden).forEach(it => (it.hidden = false));
            }
            return this.state;
            // console.log('----!!!!!!-end------', this.promiseState, full.map(it=>it.hidden))
        }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            // console.log('-----------changer promises', name, value, this.getChildren(Default));
            if (this.equalsAttributeName(name, 'data') && value) {
                // this.childStateChange();
                this.promiseState = undefined;
                this.state = undefined;
                this.promiseState = _dooboostore_core_promise_Promises__WEBPACK_IMPORTED_MODULE_4__.Promises.Result.wrap(typeof value === 'function' ? value() : value);
                this.getAttribute('change')?.({ status: 'pending' });
                this.childStateChange();
                // console.log('----?', this.promiseState)
                this.promiseState
                    .then(data => {
                    // console.log('------------then', data);
                    this.childStateChange();
                    this.getAttribute('change')?.({ status: 'fulfilled', data: data });
                    return data;
                })
                    .catch(e => {
                    // console.log('catch', e)
                    this.childStateChange();
                    this.getAttribute('change')?.({ status: 'rejected', data: e });
                    throw e;
                })
                    .finally(() => {
                    // console.log('-------------finally--------rrrrrrrrrrr', this.promiseState)
                    // this.childStateChange();
                    this.getAttribute('change')?.({ status: 'finally' });
                });
                // await this.promiseState;
                // console.log('---------------------rrrrrrrrrrr', this.promiseState)
            }
            else if (this.equalsAttributeName(name, 'data') && _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_3__.ValidUtils.isNullOrUndefined(value)) {
                this.promiseState = undefined;
                this.childStateChange();
            }
        }
    }
    PromiseSwitch_1.PromiseSwitch = PromiseSwitch;
})(PromiseSwitch || (PromiseSwitch = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    promiseDefault: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${PromiseSwitch.selector}-default`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new PromiseSwitch.Default(...counstructorParam), config: config });
            }
        });
    },
    promisePending: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${PromiseSwitch.selector}-pending`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new PromiseSwitch.Pending(...counstructorParam), config: config });
            }
        });
    },
    promiseFulfilled: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${PromiseSwitch.selector}-fulfilled`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new PromiseSwitch.Fulfilled(...counstructorParam), config: config });
            }
        });
    },
    promiseRejected: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${PromiseSwitch.selector}-rejected`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new PromiseSwitch.Rejected(...counstructorParam), config: config });
            }
        });
    },
    promiseSwitch: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${PromiseSwitch.selector}`,
            template: '#innerHTML#',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new PromiseSwitch.PromiseSwitch(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/promise/index.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/promise/index.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PromiseSwitch: () => (/* reexport safe */ _PromiseSwitch__WEBPACK_IMPORTED_MODULE_0__.PromiseSwitch)
/* harmony export */ });
/* harmony import */ var _PromiseSwitch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PromiseSwitch */ "../../packages/@dooboostore/dom-render/src/components/promise/PromiseSwitch.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/radio/Radio.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/radio/Radio.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Radio: () => (/* binding */ Radio),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var Radio;
(function (Radio_1) {
    Radio_1.selector = 'System:Radio';
    class RadioBase extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        hidden = true;
    }
    class Checked extends RadioBase {
        name = 'Checked';
        constructor() {
            super({ onlyParentType: Radio });
        }
    }
    Radio_1.Checked = Checked;
    class UnChecked extends RadioBase {
        name = 'unChecked';
        constructor() {
            super({ onlyParentType: Radio });
        }
    }
    Radio_1.UnChecked = UnChecked;
    class Radio extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        checked = false;
        inputElement;
        change(checked) {
            checked = checked ?? this.checked;
            this.checked = checked;
            this.setChildrenHidden(checked);
            console.log('radio checked!!!!!!!', checked, this.checked, this.inputElement?.checked);
            if (this.getAttribute('on_change_checked')) {
                this.getAttribute('on_change_checked')?.(checked, this.inputElement);
            }
        }
        setChildrenHidden(checked) {
            this.getChildren(Checked).forEach(it => {
                it.hidden = !checked;
            });
            this.getChildren(UnChecked).forEach(it => {
                it.hidden = checked;
            });
        }
        onCreatedThisChild(child, childData) {
            super.onCreatedThisChild(child, childData);
            this.setChildrenHidden(this.checked);
        }
        onInitInputElement(element) {
            this.inputElement = element;
        }
        onChangeAttrRender(name, val, other) {
            super.onChangeAttrRender(name, val, other);
            if (this.inputElement && this.getAttribute('checked') !== this.checked) {
                this.inputElement.checked = !!this.getAttribute('checked');
                console.log('----changeAttribute', this.getAttribute('checked'));
                this.change(!!this.getAttribute('checked'));
            }
        }
    }
    Radio_1.Radio = Radio;
})(Radio || (Radio = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    radioChecked: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Radio.selector}-checked`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true" >#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Radio.Checked(), config: config });
            }
        });
    },
    radioUnChecked: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Radio.selector}-unchecked`,
            template: '<div dr-if="!@this@.hidden" dr-option-strip="true" >#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Radio.UnChecked(), config: config });
            }
        });
    },
    radio: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Radio.selector}`,
            template: '<label class="${@this@.getAttribute(\'class\')}$">\n' +
                '  <input\n' +
                '    name="${@this@.getAttribute(\'name\')}$"\n' +
                '    checked="${@this@.getAttribute(\'checked\')}$"\n' +
                '    value="${@this@.getAttribute(\'value\')}$"\n' +
                '    dr-on-init="@this@.onInitInputElement($element)"\n' +
                '    dr-event-change="@this@.change($element.checked);"\n' +
                '    type="radio"\n' +
                '\n' +
                '  />\n' +
                "  ${@this@.getAttribute('checked')}$\n" +
                '  #innerHTML#\n' +
                '</label>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Radio.Radio(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/radio/index.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/radio/index.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Radio: () => (/* reexport safe */ _Radio__WEBPACK_IMPORTED_MODULE_0__.Radio)
/* harmony export */ });
/* harmony import */ var _Radio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Radio */ "../../packages/@dooboostore/dom-render/src/components/radio/Radio.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/router/Route.ts":
/*!*****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/router/Route.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Route: () => (/* binding */ Route),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../decorators/DomRenderNoProxy */ "../../packages/@dooboostore/dom-render/src/decorators/DomRenderNoProxy.ts");





var Route;
(function (Route) {
    Route.selector = 'dr-route';
    class CheckerBase extends _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        sw = false;
        value;
        inputDomRenderConfig;
        routerSubscription;
        constructor(domRenderConfig) {
            super();
            this.inputDomRenderConfig = domRenderConfig;
        }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            this.routerSubscription = this.inputDomRenderConfig?.router?.observable.subscribe(it => {
                if (this.value && this.inputDomRenderConfig) {
                    this.sw = this.check(this.inputDomRenderConfig);
                }
                else {
                    this.sw = false;
                }
            });
        }
        onDrThisBind() {
            super.onDrThisBind();
        }
        onDrThisUnBind() {
            super.onDrThisUnBind();
        }
        onDestroyRender(data) {
            super.onDestroyRender(data);
            this.routerSubscription?.unsubscribe();
        }
    }
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'value' }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
    ], CheckerBase.prototype, "value", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_4__.DomRenderNoProxy,
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], CheckerBase.prototype, "inputDomRenderConfig", void 0);
    class Match extends CheckerBase {
        check(config) {
            return !!config?.router?.test(this.value);
        }
    }
    Route.Match = Match;
    class Regexp extends CheckerBase {
        check(config) {
            return !!config?.router?.testRegexp(this.value);
        }
    }
    Route.Regexp = Regexp;
})(Route || (Route = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    match: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
            name: `${Route.selector}-match`,
            template: '<div dr-if="@this@.sw" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new Route.Match(config), config: config });
            }
        });
    },
    regexp: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
            name: `${Route.selector}-regexp`,
            template: '<div dr-if="@this@.sw" dr-option-strip="true">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new Route.Regexp(config), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/router/RouterOutlet.ts":
/*!************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/router/RouterOutlet.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RouterOutlet: () => (/* binding */ RouterOutlet),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _components_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/ComponentRouterBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentRouterBase.ts");



var RouterOutlet;
(function (RouterOutlet_1) {
    RouterOutlet_1.selector = 'dr-router-outlet';
    class RouterOutlet extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        value;
        if = null;
        createArguments;
        setValue(value) {
            this.value = value;
            // console.log('sssssssssss');
        }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            const c = this.getParentThis();
            const userValue = this.getAttribute('value');
            if (userValue) {
                this.value = userValue;
            }
            else if (c instanceof _components_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_2__.ComponentRouterBase) {
                this.value = c.child;
            }
            // console.log('------',c);
        }
        onDestroyRender(data) {
            super.onDestroyRender(data);
        }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            if (this.equalsAttributeName(name, 'value')) {
                this.value = value;
            }
            if (this.equalsAttributeName(name, 'if')) {
                this.if = value;
            }
            if (this.equalsAttributeName(name, 'createArguments')) {
                this.createArguments = value;
            }
        }
        onCreatedThisChild(child, data) {
            super.onCreatedThisChild(child, data);
            // console.log('outlet--oncreatedThisChild',child);
        }
        onCreatedThisChildDebounce(childrenSet) {
            super.onCreatedThisChildDebounce(childrenSet);
            let parentThis = this.getParentThis();
            // console.log('---', parentThis);
            if ((0,_components_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_2__.isOnCreatedOutletDebounce)(parentThis)) {
                parentThis.onCreatedOutletDebounce(this.value?.obj);
            }
            this.getAttribute('onCreatedDebounce')?.(this.value?.obj);
        }
        created(component) {
            component ??= this.value?.obj;
            this.getAttribute('onCreated')?.(component);
        }
    }
    RouterOutlet_1.RouterOutlet = RouterOutlet;
})(RouterOutlet || (RouterOutlet = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    // TODO: 왜 이놈만 webpack에서 순환참조 에러나는지모르겠다.. 왜 이놈만.. 그래서 이렇게 하긴함.
    routerOutlet: (config, executer) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.createComponentTargetElement({
            name: RouterOutlet.selector,
            template: '<div dr-this="@this@.value" dr-detect-option-if="@this@?.value && @this@?.if" dr-option-strip="true" dr-on-create:arguments="@this@.createArguments" dr-on-create:callback="@this@?.created?.($component)">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return executer?.run({ rootObject: new RouterOutlet.RouterOutlet(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/router/index.ts":
/*!*****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/router/index.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Route: () => (/* reexport safe */ _Route__WEBPACK_IMPORTED_MODULE_0__.Route),
/* harmony export */   RouterOutlet: () => (/* reexport safe */ _RouterOutlet__WEBPACK_IMPORTED_MODULE_1__.RouterOutlet)
/* harmony export */ });
/* harmony import */ var _Route__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Route */ "../../packages/@dooboostore/dom-render/src/components/router/Route.ts");
/* harmony import */ var _RouterOutlet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RouterOutlet */ "../../packages/@dooboostore/dom-render/src/components/router/RouterOutlet.ts");




/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/select/Select.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/select/Select.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Select: () => (/* binding */ Select),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core-web/event/EventUtils */ "../../packages/@dooboostore/core-web/src/event/EventUtils.ts");
/* harmony import */ var _dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core-web/valid/ValidUtils */ "../../packages/@dooboostore/core-web/src/valid/ValidUtils.ts");
/* harmony import */ var _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../decorators/DomRenderNoProxy */ "../../packages/@dooboostore/dom-render/src/decorators/DomRenderNoProxy.ts");
/* harmony import */ var _dooboostore_core_web_window_WindowUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dooboostore/core-web/window/WindowUtils */ "../../packages/@dooboostore/core-web/src/window/WindowUtils.ts");








/** 사용법
 <dr-select class="card-select-container" changeSelected="${(data) => @this@.changeSelected(data)}$">  <!-- multiple attribute optional-->
 <dr-select-summary class="card-select-summary-container">
 <dr-select-summary-placeholder>
 <div class="card-select-summary-placeholder-container">카드사별 사용처 안내 페이지 선택</div>
 </dr-select-summary-placeholder>
 <dr-select-summary-selected>
 <div dr-if="@this@.selectedCard" class="card-select-summary-selected-container">
 <img dr-attr="{src:@this@.selectedCard?.iconImg}"> ${@this@.selectedCard?.name}$
 </div>
 </dr-select-summary-selected>
 </dr-select-summary>

 <dr-select-body float="bottom-left" class="card-select-body-container">
 <dr-select-option dr-for-of="@this@.cards" value="${#it#.name}$" selected="${#nearForOfIndex# === 0}$" class="card-select-body-option-container">
 <img dr-attr="{src:#it#.iconImg}"> ${#it#.name}$
 </dr-select-option>
 </dr-select-body>
 </dr-select>
 */
var Select;
(function (Select_1) {
    var _a;
    Select_1.selector = 'dr-select';
    // Base for simple hide/show components
    class StateComponent extends _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        hidden = true;
        value = null;
        constructor(config) {
            super(config);
        }
        setValue(value) {
            this.value = value;
        }
    }
    // --- Option Child Components ---
    class OptionSelected extends StateComponent {
        constructor() {
            super({ onlyParentType: Option });
        }
    }
    Select_1.OptionSelected = OptionSelected;
    class OptionUnselected extends StateComponent {
        constructor() {
            super({ onlyParentType: Option });
        }
    }
    Select_1.OptionUnselected = OptionUnselected;
    class OptionDisabled extends StateComponent {
        constructor() {
            super({ onlyParentType: Option });
        }
    }
    Select_1.OptionDisabled = OptionDisabled;
    // --- Summary Child Components ---
    class SummaryPlaceholder extends StateComponent {
        constructor() {
            super({ onlyParentType: Summary });
        }
    }
    Select_1.SummaryPlaceholder = SummaryPlaceholder;
    class SummarySelected extends StateComponent {
        selectedOptions = [];
        constructor() {
            super({ onlyParentType: Summary });
        }
        setOptions(options = []) {
            this.selectedOptions = options.filter(it => it.selected);
        }
    }
    Select_1.SummarySelected = SummarySelected;
    class SummaryDisabled extends StateComponent {
        selectedOptions = [];
        constructor() {
            super({ onlyParentType: Summary });
        }
        setOptions(options = []) {
            this.selectedOptions = options.filter(it => it.selected);
        }
    }
    Select_1.SummaryDisabled = SummaryDisabled;
    class Option extends _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        hidden = true;
        value = null;
        selected = false;
        disabled = false;
        classAttr = null;
        // public status: 'selected' | 'unselected' | 'disabled' = 'unselected';
        constructor() {
            super({ onlyParentType: SelectBody });
        }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            // console.log('-----', this.value, this.selected)
            // this.getElement()?.addEventListener('click', (e) => {
            //   e.stopPropagation();
            //   if (!this.disabled) {
            //     this.getParentThis<Select>().handleOptionClick(this);
            //   }
            // });
            this.updateStatus();
        }
        // onCreatedThisChild(child: any, data: OnCreateRenderDataParams) {
        //   super.onCreatedThisChild(child, data);
        //   this.updateStatus();
        // }
        // async onRawSetRendered(rawSet:RawSet, otherData:OnRawSetRenderedOtherData):Promise<void>{
        //   await super.onRawSetRendered(rawSet, otherData);
        // }
        onCreatedThisChildDebounce(childrenSet) {
            super.onCreatedThisChildDebounce(childrenSet);
            this.updateStatus();
        }
        toggleSelected(event) {
            // console.log('isMultiple', this.isMultiple())
            if (!this.disabled) {
                this.selected = this.isMultiple() ? !this.selected : true;
                // this.selected =  !this.selected;
                this.updateStatus();
                this.getParentThis().changeOptionState(this);
            }
            else {
                event.stopPropagation();
                event.preventDefault();
            }
        }
        isMultiple() {
            return this.getParentThis()?.getParentThis().multiple;
        }
        updateStatus() {
            if (this.disabled) {
                this.getChildren(OptionSelected).forEach(c => {
                    c.hidden = true;
                    c.setValue(this.value);
                });
                this.getChildren(OptionUnselected).forEach(c => {
                    c.hidden = true;
                    c.setValue(this.value);
                });
                this.getChildren(OptionDisabled).forEach(c => {
                    c.hidden = false;
                    c.setValue(this.value);
                });
                return;
            }
            if (this.selected) {
                this.getChildren(OptionSelected).forEach(c => {
                    c.hidden = false;
                    c.setValue(this.value);
                });
                this.getChildren(OptionUnselected).forEach(c => {
                    c.hidden = true;
                    c.setValue(this.value);
                });
                this.getChildren(OptionDisabled).forEach(c => {
                    c.hidden = true;
                    c.setValue(this.value);
                });
            }
            if (!this.selected) {
                this.getChildren(OptionSelected).forEach(c => {
                    c.hidden = true;
                    c.setValue(this.value);
                });
                this.getChildren(OptionUnselected).forEach(c => {
                    c.hidden = false;
                    c.setValue(this.value);
                });
                this.getChildren(OptionDisabled).forEach(c => {
                    c.hidden = true;
                    c.setValue(this.value);
                });
            }
        }
    }
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'value' }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Option.prototype, "value", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'selected', converter: v => v !== null && v === true }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Option.prototype, "selected", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'disabled', converter: v => v !== null && v === true }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Option.prototype, "disabled", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'class', converter: v => (v ? v : null) }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Option.prototype, "classAttr", void 0);
    Select_1.Option = Option;
    // --- Summary Component ---
    class Summary extends _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        classAttr = null;
        options = [];
        disabled = false;
        element;
        // constructor() {
        //   super({ onlyParentType: Select });
        // }
        setDisabled(disabled) {
            this.disabled = disabled;
            this.getChildren(SummaryPlaceholder).forEach(it => (it.hidden = true));
            this.getChildren(SummarySelected).forEach(it => (it.hidden = true));
            this.getChildren(SummaryDisabled).forEach(it => (it.hidden = false));
        }
        setOptions(options = []) {
            this.options = options;
            const selectedOptions = this.options.filter(it => it.selected && !it.disabled);
            if (!this.disabled) {
                if (selectedOptions.length > 0) {
                    this.getChildren(SummaryPlaceholder).forEach(it => (it.hidden = true));
                    this.getChildren(SummarySelected).forEach(c => {
                        c.setOptions(options);
                        c.hidden = false;
                    });
                    this.getChildren(SummaryDisabled).forEach(it => (it.hidden = true));
                }
                else {
                    this.getChildren(SummaryDisabled).forEach(it => (it.hidden = true));
                    this.getChildren(SummaryPlaceholder).forEach(it => (it.hidden = false));
                    this.getChildren(SummarySelected).forEach(c => (c.hidden = true));
                }
            }
        }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            // this.getElement()?.addEventListener('click', (e) => {
            //   e.stopPropagation();
            //   this.getParentThis<Select>().toggle();
            // });
        }
        onInitSummaryElement(element, event) {
            this.element = element;
        }
        updateView(hasSelection) {
            this.getChildren(SummaryPlaceholder).forEach(c => (c.hidden = hasSelection));
            this.getChildren(SummarySelected).forEach(c => (c.hidden = !hasSelection));
        }
        // onCreatedThisChild(child: any, data: OnCreateRenderDataParams) {
        //   super.onCreatedThisChild(child, data);
        // }
        // async onRawSetRendered(rawSet: RawSet, otherData: OnRawSetRenderedOtherData): Promise<void> {
        //   await super.onRawSetRendered(rawSet, otherData);
        // }
        onCreatedThisChildDebounce(childrenSet) {
            super.onCreatedThisChildDebounce(childrenSet);
            this.updateView(this.getParentThis()?.selectedValues?.length > 0);
        }
        onSummaryClick(element, event) {
            if (this.getParentThis()?.disabled) {
                event.stopPropagation();
                event.preventDefault();
                return;
            }
        }
    }
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'class', converter: v => (v === '' ? null : v) }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Summary.prototype, "classAttr", void 0);
    Select_1.Summary = Summary;
    class SelectBody extends _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        classAttr = null;
        float = null;
        constructor() {
            super({ onlyParentType: Select });
        }
        async onRawSetRendered(rawSet, otherData) {
            await super.onRawSetRendered(rawSet, otherData);
            // }
            // onCreatedThisChildDebounce(childrenSet: ChildrenSet[]) {
            //   super.onCreatedThisChildDebounce(childrenSet);
            this.changeOptionState();
        }
        changeOptionState(option) {
            const options = this.getChildren(Option);
            const select = this.getParentThis();
            // console.log('------opti',option, select);
            // // 멀티플이 아닐때에는 마지막 선택된값으로 처리
            if (!select.multiple) {
                // 내가 선택한게 있으면
                if (option && option.selected) {
                    options.filter(it => it !== option).forEach(it => {
                        it.selected = false;
                        it.updateStatus();
                    });
                }
                else {
                    const selectedOptions = options.filter(it => it.selected && !it.disabled);
                    selectedOptions.forEach((opt, idx) => {
                        const isLast = idx === selectedOptions.length - 1;
                        if (!isLast) {
                            opt.selected = false;
                            opt.updateStatus();
                        }
                    });
                }
            }
            // console.log('--------', options.map(it=>it.selected))
            select?.setOptions(options);
        }
    }
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'class', converter: v => (v === '' ? null : v) }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], SelectBody.prototype, "classAttr", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'float' }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], SelectBody.prototype, "float", void 0);
    Select_1.SelectBody = SelectBody;
    class Select extends _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        multiple = false;
        disabled = false;
        classAttr = null;
        name = null;
        // public isOpen = false;
        selectedValues = [];
        selectedOptions = [];
        value;
        element;
        documentClickSubscription;
        windowBlurSubscription;
        summaryComponent;
        selectBodyComponent;
        options;
        constructor(config) {
            super();
            // console.log('----Select constructor')
        }
        get optionComponents() {
            return this.getChildren(Option);
        }
        onCreateRender() {
        }
        onCreateRenderData() {
        }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            // console.log('select onInitRender', this.multiple)
            if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_5__.ValidUtils.isBrowser() && this.rawSet?.dataSet.config.window) {
                const detailsElement = this.element;
                const window = this.rawSet.dataSet.config.window;
                const document = window.document;
                this.documentClickSubscription = _dooboostore_core_web_event_EventUtils__WEBPACK_IMPORTED_MODULE_4__.EventUtils.htmlElementEventObservable(document, 'click').subscribe(event => {
                    const isSummaryClick = this.getChildren(Summary).some(it => event.target && it.element?.contains(event.target) || it.element === event.target);
                    if (!isSummaryClick && this.getAttribute('disableOtherClickClose')) {
                        return;
                    }
                    if (!isSummaryClick && !this.multiple && detailsElement) {
                        detailsElement.open = false;
                        return;
                    }
                    if (!isSummaryClick && detailsElement && !detailsElement?.contains(event?.target)) {
                        detailsElement.open = false;
                    }
                });
                this.windowBlurSubscription = _dooboostore_core_web_window_WindowUtils__WEBPACK_IMPORTED_MODULE_7__.WindowUtils.eventObservable(window, 'blur').subscribe(() => {
                    if (detailsElement?.open && window.document.activeElement?.tagName === 'IFRAME') {
                        detailsElement.open = false;
                    }
                });
            }
        }
        toggle(element, event) {
            // console.log('------>', this.disabled, event)
            // if (this.disabled) {
            //   event.stopPropagation();
            //   event.preventDefault();
            //   return;
            // }
            const toggleAttribute = this.getAttribute('toggle');
            if (toggleAttribute) {
                toggleAttribute?.(element.open);
            }
        }
        setOptions(options) {
            const summaries = this.getChildren(Summary);
            this.options = options;
            const values = this.options.filter(it => it.selected && !it.disabled).map(it => it.value);
            this.getAttribute('changeSelected')?.(values);
            summaries?.forEach(it => {
                it.setDisabled(this.disabled);
                if (!this.disabled) {
                    it.setOptions(options);
                }
            });
        }
        onInitDetailsElement(detailsElement) {
            // console.log('detailsElement oninit', detailsElement);
            this.element = detailsElement;
        }
        onDrThisUnBind() {
            super.onDrThisUnBind();
            this.onDestroyRender();
        }
        onDestroyRender() {
            super.onDestroyRender();
            this.documentClickSubscription?.unsubscribe();
            this.windowBlurSubscription?.unsubscribe();
        }
        test() {
            console.log('tttttttt');
        }
    }
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'multiple', converter: v => v !== null }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Select.prototype, "multiple", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'disabled', converter: v => v !== null }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Select.prototype, "disabled", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'class', converter: v => (v === '' ? null : v) }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Select.prototype, "classAttr", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({ name: 'name', converter: v => (v === '' ? null : v) }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Select.prototype, "name", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_6__.DomRenderNoProxy,
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_a = typeof HTMLDetailsElement !== "undefined" && HTMLDetailsElement) === "function" ? _a : Object)
    ], Select.prototype, "element", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_6__.DomRenderNoProxy,
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Select.prototype, "documentClickSubscription", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_6__.DomRenderNoProxy,
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Object)
    ], Select.prototype, "windowBlurSubscription", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_6__.DomRenderNoProxy,
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Summary)
    ], Select.prototype, "summaryComponent", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        _decorators_DomRenderNoProxy__WEBPACK_IMPORTED_MODULE_6__.DomRenderNoProxy,
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", SelectBody)
    ], Select.prototype, "selectBodyComponent", void 0);
    Select_1.Select = Select;
})(Select || (Select = {}));
const stateComponentFactory = (name, type) => {
    return (config) => _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
        name,
        template: '<div dr-if="!@this@.hidden" dr-option-strip="true">#innerHTML#</div>\n',
        objFactory: (e, o, r2, constructorParam) => _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new type(), config })
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    select: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
            name: Select.selector,
            styles: '.dr-select-container {\n' +
                '  position: relative;\n' +
                '\n' +
                '}\n' +
                '.dr-select-options-container {\n' +
                '  display: none;\n' +
                '  position: absolute;\n' +
                '  top: 100%;\n' +
                '  left: 0;\n' +
                '  right: 0;\n' +
                '  z-index: 10;\n' +
                '}\n' +
                '.dr-select-container.is-open .dr-select-options-container {\n' +
                '  display: block;\n' +
                '}\n' +
                'summary::-webkit-details-marker {\n' +
                '    display: none;\n' +
                '}\n' +
                '/* Floating styles for dr-select-body */\n' +
                '.dr-select-body-container {\n' +
                '    position: absolute;\n' +
                '}\n' +
                '\n' +
                '.dr-select-body-bottom-left-container {\n' +
                '    position: absolute;\n' +
                '    left: 0;\n' +
                '    top: 100%;\n' +
                '}\n' +
                '\n' +
                '.dr-select-body-bottom-right-container {\n' +
                '    position: absolute;\n' +
                '    right: 0;\n' +
                '    top: 100%;\n' +
                '}\n' +
                '\n' +
                '.dr-select-body-top-left-container {\n' +
                '    position: absolute;\n' +
                '    left: 0;\n' +
                '    bottom: 100%;\n' +
                '}\n' +
                '\n' +
                '.dr-select-body-top-right-container {\n' +
                '    position: absolute;\n' +
                '    right: 0;\n' +
                '    bottom: 100%;\n' +
                '}\n' +
                '\n' +
                '/* Reset default details/summary styles */\n' +
                '.dr-select-container details {\n' +
                '  display: block; /* Ensure it behaves like a block element */\n' +
                '}\n' +
                '\n' +
                '.dr-select-container summary {\n' +
                '  display: block; /* Ensure it behaves like a block element */\n' +
                '  list-style: none; /* Remove default marker */\n' +
                "  cursor: pointer; /* Indicate it's clickable */\n" +
                '}\n' +
                '\n' +
                '.dr-select-container summary::-webkit-details-marker,\n' +
                '.dr-select-container summary::marker {\n' +
                '  display: none; /* Hide marker for Webkit and standard */\n' +
                '}',
            template: '<details dr-class="{\n' +
                "        'dr-select-container': true,\n" +
                "        'is-open': @this@.isOpen,\n" +
                '        [@this@.classAttr]: @this@.classAttr\n' +
                '     }" dr-on-init="@this@.onInitDetailsElement($element)" dr-option-complete="@this@.test()"  dr-event-toggle="@this@.toggle($element, $event)">\n' +
                '\n' +
                '    #innerHTML#\n' +
                '</details>\n' +
                '<select hidden="hidden" name="${@this@.name}$" disabled="${@this@.disabled ? \'disabled\' : null}$"  style="width: 1500px; height:500px"  multiple>\n' +
                '    <option dr-for-of="@this@.options" value="${#it#.value}$" selected="${#it#.selected ? \'selected\' : null}$">#it# ${#it#.value}$</option>\n' +
                '</select>',
            objFactory: (e, o, r2, constructorParam) => _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new Select.Select(config), config })
        });
    },
    selectSummary: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
            name: `${Select.selector}-summary`,
            template: '<summary dr-class="{[@this@.classAttr]: @this@.classAttr}"\n' +
                '         dr-on-init="@this@.onInitSummaryElement($element, $event)"\n' +
                '         dr-event-click="@this@.onSummaryClick($element, $event)"\n' +
                '>\n' +
                '#innerHTML#\n' +
                '</summary>',
            objFactory: (e, o, r2, constructorParam) => _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new Select.Summary(), config })
        });
    },
    selectSummaryPlaceholder: stateComponentFactory(`${Select.selector}-summary-placeholder`, Select.SummaryPlaceholder),
    selectSummarySelected: stateComponentFactory(`${Select.selector}-summary-selected`, Select.SummarySelected),
    selectSummaryDisabled: stateComponentFactory(`${Select.selector}-summary-disabled`, Select.SummaryDisabled),
    selectBody: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
            name: `${Select.selector}-body`,
            template: '<div dr-class="{[@this@.classAttr]: @this@.classAttr, \'dr-select-body-container\': true,  [\'dr-select-body-\'+@this@.float+\'-container\']: @this@.float}">#innerHTML#</div>',
            objFactory: (e, o, r2, constructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new Select.SelectBody(), config: config });
            }
        });
    },
    selectOption: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_3__.RawSet.createComponentTargetElement({
            name: `${Select.selector}-option`,
            template: '<a dr-class="{[@this@.classAttr]: @this@.classAttr}" dr-event-click="@this@.toggleSelected($event)">#innerHTML#</a>\n',
            objFactory: (e, o, r2, constructorParam) => _DomRender__WEBPACK_IMPORTED_MODULE_2__.DomRender.run({ rootObject: new Select.Option(), config })
        });
    },
    selectOptionSelected: stateComponentFactory(`${Select.selector}-option-selected`, Select.OptionSelected),
    selectOptionUnselected: stateComponentFactory(`${Select.selector}-option-unselected`, Select.OptionUnselected),
    selectOptionDisabled: stateComponentFactory(`${Select.selector}-option-disabled`, Select.OptionDisabled),
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/select/index.ts":
/*!*****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/select/index.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Select: () => (/* reexport safe */ _Select__WEBPACK_IMPORTED_MODULE_0__.Select)
/* harmony export */ });
/* harmony import */ var _Select__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Select */ "../../packages/@dooboostore/dom-render/src/components/select/Select.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/this/This.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/this/This.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   This: () => (/* binding */ This),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var This;
(function (This_1) {
    This_1.selector = 'dr-this';
    class This extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        value;
        if = null;
        createArguments;
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
        }
        onDestroyRender(data) {
            super.onDestroyRender(data);
        }
        onChangeAttrRender(name, value, other) {
            super.onChangeAttrRender(name, value, other);
            if (this.equalsAttributeName(name, 'value')) {
                this.value = value;
            }
            if (this.equalsAttributeName(name, 'if')) {
                this.if = value;
            }
            if (this.equalsAttributeName(name, 'createArguments')) {
                this.createArguments = value;
            }
        }
        created(component) {
            component ??= this.value?.obj;
            this.getAttribute('onCreated')?.(component);
        }
    }
    This_1.This = This;
})(This || (This = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    this: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: This.selector,
            template: '<div dr-this="@this@.value" dr-detect-option-if="@this@?.value && @this@?.if" dr-option-strip="true" dr-on-create:arguments="@this@.createArguments" dr-on-create:callback="@this@?.created?.($component)">#innerHTML#</div>',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new This.This(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/this/index.ts":
/*!***************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/this/index.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   This: () => (/* reexport safe */ _This__WEBPACK_IMPORTED_MODULE_0__.This)
/* harmony export */ });
/* harmony import */ var _This__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./This */ "../../packages/@dooboostore/dom-render/src/components/this/This.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/timer/Timer.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/timer/Timer.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Timer: () => (/* binding */ Timer),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _DomRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");



var Timer;
(function (Timer_1) {
    Timer_1.selector = 'dr-timer';
    class Timer extends _ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
        interval;
        value;
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            this.getAttribute('onCreated')?.(this);
            // console.log('---2', this.getElement()?.isConnected)
            // const element = this.getElement();
            // if(element){
            //   (element as any).component = this;
            // }
        }
        isRunning() {
            return this.value !== undefined;
        }
        start() {
            const timems = this.getAttribute('value');
            if (timems) {
                this.value = parseInt(timems);
                const intervalValue = this.getAttribute('interval') ?? 1000;
                console.log('int', this.value, intervalValue);
                this.interval = setInterval(() => {
                    // console.log('--------->', this.value);
                    if (this.value) {
                        this.value--;
                    }
                    else {
                        clearInterval(this.interval);
                        this.value = undefined;
                        this.interval = undefined;
                    }
                }, intervalValue);
            }
        }
        stop() {
            if (this.interval) {
                clearInterval(this.interval);
                this.interval = undefined;
                this.value = undefined;
            }
        }
        onChangeAttrRender(name, val, other) {
            super.onChangeAttrRender(name, val, other);
            console.log('-----', name, val, this.getElement());
        }
        onDestroyRender(data) {
            super.onDestroyRender(data);
            if (this.interval) {
                clearInterval(this.interval);
            }
        }
    }
    Timer_1.Timer = Timer;
})(Timer || (Timer = {}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    timer: (config) => {
        return _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.createComponentTargetElement({
            name: `${Timer.selector}`,
            template: '#innerHTML#',
            objFactory: (e, o, r2, counstructorParam) => {
                return _DomRender__WEBPACK_IMPORTED_MODULE_1__.DomRender.run({ rootObject: new Timer.Timer(...counstructorParam), config: config });
            }
        });
    }
});


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/components/timer/index.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/components/timer/index.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Timer: () => (/* reexport safe */ _Timer__WEBPACK_IMPORTED_MODULE_0__.Timer)
/* harmony export */ });
/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Timer */ "../../packages/@dooboostore/dom-render/src/components/timer/Timer.ts");



/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/decorators/DomRenderNoProxy.ts":
/*!*********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/decorators/DomRenderNoProxy.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomRenderNoProxy: () => (/* binding */ DomRenderNoProxy),
/* harmony export */   DomRenderNoProxyKey: () => (/* binding */ DomRenderNoProxyKey),
/* harmony export */   getDomRenderNoProxy: () => (/* binding */ getDomRenderNoProxy),
/* harmony export */   isDomRenderNoProxy: () => (/* binding */ isDomRenderNoProxy)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");


const DomRenderNoProxyKey = 'DomRender:NoProxy';
const DomRenderNoProxy = (target, propertyKey) => {
    _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_1__.ReflectUtils.defineMetadata(DomRenderNoProxyKey, true, target, propertyKey);
    // 클래스 데코레이터로 사용된 경우
    // if (propertyKey === undefined) {
    //   // target은 클래스 생성자
    //   Reflect.defineMetadata(DomRenderNoProxyKey, true, target);
    //   return;
    // }
    //
    // // 프로퍼티 데코레이터로 사용된 경우
    // // target은 프로토타입, propertyKey는 프로퍼티 이름
    // Reflect.defineMetadata(DomRenderNoProxyKey, true, target, propertyKey);
};
const getDomRenderNoProxy = (target, propertyKey) => {
    // if (ValidUtils.isNotNullUndefined(target)) {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_1__.ReflectUtils.getMetadata(DomRenderNoProxyKey, target, propertyKey);
    // 클래스 데코레이터
    // if (propertyKey === undefined) {
    //   return Reflect.getMetadata(DomRenderNoProxyKey, target);
    // }
    // // 프로퍼티 데코레이터
    // return Reflect.getMetadata(DomRenderNoProxyKey, target, propertyKey);
    // } else {
    //   return undefined;
    // }
};
const isDomRenderNoProxy = (target, propertyKey) => {
    return _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_0__.ValidUtils.isNullOrUndefined(target) || getDomRenderNoProxy(target, propertyKey) === true;
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/events/EventManager.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/events/EventManager.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventManager: () => (/* binding */ EventManager)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/element/ElementUtils */ "../../packages/@dooboostore/core-web/src/element/ElementUtils.ts");
/* harmony import */ var _iterators_Range__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../iterators/Range */ "../../packages/@dooboostore/dom-render/src/iterators/Range.ts");
/* harmony import */ var _DomRenderProxy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../DomRenderProxy */ "../../packages/@dooboostore/dom-render/src/DomRenderProxy.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");





class EventManager {
    window;
    static attrPrefix = 'dr-';
    eventNames = [
        'click', 'mousedown', 'mouseup', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mouseenter', 'mouseleave', 'contextmenu',
        'keyup', 'keydown', 'keypress', 'toggle',
        'change', 'input', 'submit', 'resize', 'focus', 'blur',
        'close', 'cancel'
    ];
    delegatableEventMap = {
        mouseleave: 'mouseout',
        mouseenter: 'mouseover',
        focus: 'focusin',
        blur: 'focusout',
    };
    directAttachEvents = new Set(['close']);
    static ownerVariablePathAttrName = EventManager.attrPrefix + 'owner-variable-path';
    static eventParam = EventManager.attrPrefix + 'event';
    static onInitAttrName = EventManager.attrPrefix + 'on-init';
    static valueAttrName = EventManager.attrPrefix + 'value';
    static checkedAttrName = EventManager.attrPrefix + 'checked';
    static selectedAttrName = EventManager.attrPrefix + 'selected';
    static readonlyAttrName = EventManager.attrPrefix + 'readonly';
    static disabledAttrName = EventManager.attrPrefix + 'disabled';
    static hiddenAttrName = EventManager.attrPrefix + 'hidden';
    static requiredAttrName = EventManager.attrPrefix + 'required';
    static openAttrName = EventManager.attrPrefix + 'open';
    // link는 쓰지 않는걸 추천한다 라이프 사이클 꼬인다 다른 프레임워크에서도 양방향은 지양 한다
    static linkAttrs = [
        { name: EventManager.attrPrefix + 'value-link', property: 'value', event: 'input' },
        { name: EventManager.attrPrefix + 'hidden-link', property: 'value', event: 'input' },
        { name: EventManager.attrPrefix + 'required-link', property: 'value', event: 'input' },
        { name: EventManager.attrPrefix + 'checked-link', property: 'checked', event: 'change' },
        { name: EventManager.attrPrefix + 'open-link', property: 'open', event: 'toggle' },
    ];
    // @ts-ignore  합성이벤트(Synthetic) 처리하면서 의미가 없어졌다
    static linkTargetMapAttrName = EventManager.attrPrefix + 'link-variables';
    static onRenderedInitAttrName = EventManager.attrPrefix + 'on-rendered-init';
    static attrAttrName = EventManager.attrPrefix + 'attr';
    static normalAttrMapAttrName = EventManager.attrPrefix + 'normal-attr-map';
    static styleAttrName = EventManager.attrPrefix + 'style';
    static classAttrName = EventManager.attrPrefix + 'class';
    static VALUE_VARNAME = '$value';
    static SCRIPTS_VARNAME = '$scripts';
    static FAG_VARNAME = '$fag';
    static RAWSET_VARNAME = '$rawSet';
    static RENDER_VARNAME = '$render';
    static NEAR_THIS_VARNAME = '$nearThis';
    static PARENT_THIS_VARNAME = '$parentThis';
    static ROOT_OBJECT_VARNAME = '$rootObject';
    static SCRIPT_UTILS_VARNAME = '$scriptUtils';
    static RANGE_VARNAME = '$range';
    static ROUTER_VARNAME = '$router';
    static INNER_HTML_VARNAME = '$innerHTML';
    static ELEMENT_VARNAME = '$element';
    static TARGET_VARNAME = '$target';
    static EVENT_VARNAME = '$event';
    static COMPONENT_VARNAME = '$component';
    static INNERHTML_VARNAME = '$innerHTML';
    static ATTRIBUTE_VARNAME = '$attribute';
    static CREATOR_META_DATA_VARNAME = '$creatorMetaData';
    static PARENT_THIS_PATH_VARNAME = '$parentPath';
    static CURRENT_THIS_VARNAME = '$currentThis';
    static CURRENT_THIS_PATH_VARNAME = '$currentThisPath';
    static NEAR_THIS_PATH_VARNAME = '$nearThisPath';
    static VARNAMES = [EventManager.SCRIPTS_VARNAME, EventManager.FAG_VARNAME, EventManager.RAWSET_VARNAME, EventManager.RANGE_VARNAME, EventManager.ROUTER_VARNAME, EventManager.ELEMENT_VARNAME, EventManager.TARGET_VARNAME, EventManager.EVENT_VARNAME, EventManager.COMPONENT_VARNAME, EventManager.INNERHTML_VARNAME, EventManager.ATTRIBUTE_VARNAME, EventManager.ATTRIBUTE_VARNAME, EventManager.CREATOR_META_DATA_VARNAME, EventManager.PARENT_THIS_PATH_VARNAME, EventManager.PARENT_THIS_VARNAME];
    static WINDOW_EVENT_POPSTATE = 'popstate';
    static WINDOW_EVENT_RESIZE = 'resize';
    static WINDOW_EVENTS = [EventManager.WINDOW_EVENT_POPSTATE, EventManager.WINDOW_EVENT_RESIZE];
    static noDetectAttr = [EventManager.normalAttrMapAttrName];
    static attrNames = [
        EventManager.valueAttrName,
        EventManager.checkedAttrName,
        EventManager.selectedAttrName,
        EventManager.readonlyAttrName,
        EventManager.disabledAttrName,
        EventManager.hiddenAttrName,
        EventManager.requiredAttrName,
        EventManager.openAttrName,
        EventManager.attrAttrName,
        EventManager.normalAttrMapAttrName,
        EventManager.styleAttrName,
        EventManager.classAttrName,
        EventManager.attrPrefix + 'window-event-' + EventManager.WINDOW_EVENT_POPSTATE,
        EventManager.attrPrefix + 'window-event-' + EventManager.WINDOW_EVENT_RESIZE,
        EventManager.onInitAttrName,
        ...EventManager.linkAttrs.map(it => it.name),
        this.eventParam
    ];
    bindScript = `
        const ${EventManager.VALUE_VARNAME} = this.__render.value;
        const ${EventManager.SCRIPTS_VARNAME} = this.__render.scripts;
        const ${EventManager.RANGE_VARNAME} = this.__render.range;
        const ${EventManager.ROUTER_VARNAME} = this.__render.router;
        const ${EventManager.ATTRIBUTE_VARNAME} = this.__render.attribute;
        const ${EventManager.ELEMENT_VARNAME} = this.__render.element;
        const ${EventManager.COMPONENT_VARNAME} = this.__render.element.component;
        const ${EventManager.TARGET_VARNAME} = this.__render.target;
        const ${EventManager.EVENT_VARNAME} = this.__render.event;
    `;
    constructor(window) {
        this.window = window;
        this.eventNames.forEach(it => {
            EventManager.attrNames.push(EventManager.attrPrefix + 'event-' + it);
        });
        EventManager.attrNames.push(EventManager.onRenderedInitAttrName);
        if (typeof window !== 'undefined') {
            EventManager.WINDOW_EVENTS.forEach(eventName => {
                window?.addEventListener(eventName, (event) => {
                    const targetAttr = `dr-window-event-${eventName}`;
                    document.querySelectorAll(`[${targetAttr}]`).forEach(it => {
                        const script = it.getAttribute(targetAttr);
                        if (script) {
                            const obj = this.findComponentInstance(it);
                            const config = (0,_DomRenderProxy__WEBPACK_IMPORTED_MODULE_3__.getDomRenderConfig)(obj);
                            _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.bindScript} ${script} `, this.createExecutionContext(event, it, obj, config));
                        }
                    });
                });
            });
            const rootElement = this.window.document;
            const listeningEvents = new Set();
            this.eventNames.forEach(eventName => {
                if (this.directAttachEvents.has(eventName)) {
                    return;
                }
                const delegatedEventName = this.delegatableEventMap[eventName] || eventName;
                if (listeningEvents.has(delegatedEventName)) {
                    return;
                }
                listeningEvents.add(delegatedEventName);
                rootElement.addEventListener(delegatedEventName, this.handleEvent.bind(this), true);
            });
        }
    }
    handleEvent(event) {
        const handlers = this.collectHandlers(event);
        // console.log('handlers', handlers, event);
        for (const handler of handlers) {
            if (event.cancelBubble) {
                break;
            }
            const componentInstance = this.findComponentInstance(handler.element);
            if (!componentInstance) {
                continue;
            }
            // console.log('executeHandler', event,handler,componentInstance)
            this.executeHandler(event, handler, componentInstance);
        }
    }
    collectHandlers(event) {
        const handlers = [];
        const root = this.window.document;
        if (!root)
            return handlers;
        const initialTarget = event.target;
        let currentTarget = (initialTarget.nodeType === 1)
            ? initialTarget
            : initialTarget.parentElement;
        const collectedElements = new Set();
        const eventMap = {
            mouseout: 'mouseleave',
            mouseover: 'mouseenter',
            focusout: 'blur',
            focusin: 'focus'
        };
        const mappedEventName = eventMap[event.type] || event.type;
        while (currentTarget) {
            if (collectedElements.has(currentTarget)) {
                break;
            }
            // Priority 1: Link attributes
            const matchingLinkAttr = EventManager.linkAttrs.find(la => la.event === mappedEventName && currentTarget?.hasAttribute(la.name));
            if (matchingLinkAttr) {
                handlers.push({
                    element: currentTarget,
                    attr: matchingLinkAttr.name,
                    type: 'link',
                    priority: 1,
                    property: matchingLinkAttr.property
                });
            }
            // Priority 2: dr-event-* attributes
            const eventAttr = `${EventManager.attrPrefix}event-${mappedEventName}`;
            if (currentTarget.hasAttribute(eventAttr)) {
                handlers.push({
                    element: currentTarget,
                    attr: eventAttr,
                    type: 'event',
                    priority: 2
                });
            }
            // Priority 3: dr-event with params
            const eventParamAttr = EventManager.eventParam;
            if (currentTarget.hasAttribute(eventParamAttr)) {
                const bindEvents = currentTarget.getAttribute(`${eventParamAttr}:bind`);
                if (bindEvents && bindEvents.split(',').map(s => s.trim()).includes(mappedEventName)) {
                    handlers.push({
                        element: currentTarget,
                        attr: eventParamAttr,
                        type: 'event-param',
                        priority: 3
                    });
                }
            }
            collectedElements.add(currentTarget);
            if (currentTarget === root.documentElement) {
                break;
            }
            currentTarget = currentTarget.parentElement;
        }
        return handlers.sort((a, b) => a.priority - b.priority);
    }
    findComponentInstance(element) {
        let current = element;
        const root = this.window.document;
        while (current) {
            if (current.obj) {
                return current.obj;
            }
            if (current === root.documentElement) {
                break;
            }
            current = current.parentElement;
        }
        return this.window;
    }
    createExecutionContext(event, element, componentInstance, config, extraVars = {}) {
        // console.log('---------->', config?.eventVariables)
        return Object.assign(componentInstance, {
            __render: Object.freeze({
                event,
                element,
                target: event.target,
                attribute: _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(element),
                router: config?.router,
                range: _iterators_Range__WEBPACK_IMPORTED_MODULE_2__.Range.range,
                scripts: EventManager.setBindProperty(config?.scripts, componentInstance),
                ...config?.eventVariables,
                ...extraVars
            })
        });
    }
    executeHandler(event, handler, componentInstance) {
        const { element, type, attr } = handler;
        const config = (0,_DomRenderProxy__WEBPACK_IMPORTED_MODULE_3__.getDomRenderConfig)(componentInstance);
        switch (type) {
            case 'link':
                const varName = element.getAttribute(attr);
                if (!varName || !handler.property)
                    return;
                if (attr.includes('leave') || attr.includes('enter') || attr.includes('focus') || attr.includes('blur')) {
                    const relatedTarget = event.relatedTarget;
                    if (relatedTarget && element.contains(relatedTarget)) {
                        return;
                    }
                }
                const ownerVariablePath = element.getAttribute(EventManager.ownerVariablePathAttrName);
                let bindObj = componentInstance;
                if (ownerVariablePath) {
                    bindObj = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(ownerVariablePath, componentInstance);
                }
                const mapScript = element.getAttribute(`${attr}:map`);
                let value = element[handler.property];
                if (mapScript) {
                    const context = this.createExecutionContext(event, element, bindObj, config, { value });
                    value = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`return ${mapScript}`, context);
                }
                if (typeof this.getValue(componentInstance, varName, bindObj) === 'function') {
                    this.getValue(componentInstance, varName, bindObj)(value, event);
                }
                else {
                    this.setValue(componentInstance, varName, value);
                }
                break;
            case 'event':
                const script = element.getAttribute(attr);
                if (!script)
                    return;
                if (attr.endsWith('mouseleave') || attr.endsWith('mouseenter') || attr.endsWith('blur') || attr.endsWith('focus')) {
                    const relatedTarget = event.relatedTarget;
                    if (relatedTarget && element.contains(relatedTarget)) {
                        return;
                    }
                }
                const context = this.createExecutionContext(event, element, componentInstance, config);
                const filterScript = element.getAttribute(`${attr}:filter`);
                let filter = true;
                // 개발자가 사용중에 문제가 발생될(디버깅) 버그를 유발할수있는 기능 흐름제어가 안될수있어 기능을 제거한다.
                // if (filterScript) {
                //     filter = ScriptUtils.eval<boolean>(`${this.getBindScript(config)} return ${filterScript}`, context) ?? false;
                // }
                if (filter) {
                    _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)} ${script}`, context);
                }
                // 개발자가 사용중에 문제가 발생될(디버깅) 버그를 유발할수있는 기능 흐름제어가 안될수있어 기능을 제거한다.
                // const hasDispatch = element.hasAttribute(`${attr}:dispatch`);
                // if (hasDispatch) {
                //   element.dispatchEvent(new Event(event.type));
                // }
                break;
            case 'event-param':
                const paramScript = element.getAttribute(attr);
                if (!paramScript)
                    return;
                if (attr.endsWith('mouseleave') || attr.endsWith('mouseenter') || attr.endsWith('blur') || attr.endsWith('focus')) {
                    const relatedTarget = event.relatedTarget;
                    if (relatedTarget && element.contains(relatedTarget)) {
                        return;
                    }
                }
                const attributes = _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(element);
                const params = {};
                const prefix = attr + ':';
                Object.entries(attributes).filter(([k, v]) => k.startsWith(prefix)).forEach(([k, v]) => {
                    params[k.slice(prefix.length)] = v;
                });
                const paramContext = this.createExecutionContext(event, element, componentInstance, config, { params });
                _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)} ${paramScript}`, paramContext);
                break;
        }
    }
    findAttrElements(fragment, config) {
        const elements = new Set();
        const addAttributes = config?.applyEvents?.map(it => it.attrName) ?? [];
        const attrs = addAttributes.concat([...EventManager.attrNames]).filter(Boolean);
        if (attrs.length) {
            const selector = attrs.map(a => `[${a}]`).join(',');
            fragment?.querySelectorAll(selector).forEach(it => elements.add(it));
        }
        return elements;
    }
    applyEvent(obj, childNodes, config) {
        childNodes.forEach(node => {
            if (node.nodeType === 1) {
                node.obj = obj;
            }
        });
        this.procAttr(childNodes, EventManager.valueAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.value !== data) {
                    it.value = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.checkedAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.checked !== data) {
                    it.checked = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.selectedAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.selected !== data) {
                    it.selected = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.readonlyAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.readOnly !== data) {
                    it.readOnly = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.disabledAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.disabled !== data) {
                    it.disabled = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.hiddenAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.hidden !== data) {
                    it.hidden = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.requiredAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.required !== data) {
                    it.required = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.openAttrName, (it, attribute) => {
            const script = attribute;
            if (script) {
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(script, obj);
                if (it.open !== data) {
                    it.open = data;
                }
            }
        });
        this.procAttr(childNodes, EventManager.normalAttrMapAttrName, (it, attribute) => {
            const map = new Map(JSON.parse(attribute));
            map.forEach((v, k) => {
                const variablePaths = v.variablePaths;
                let targetScript = v.originalAttrValue; //typeof v.originalAttrValue === 'string' ? JSON.parse(v.originalAttrValue) : v.originalAttrValue;
                let script;
                if (v.isStringTemplate) {
                    variablePaths.forEach(it => {
                        let r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.Path.toOptionalChainPath(it.inner);
                        targetScript = targetScript.replaceAll(it.origin, `\${${r}}`);
                    });
                    script = '`' + targetScript + '`';
                }
                else {
                    variablePaths.forEach(it => {
                        let r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.Path.toOptionalChainPath(it.inner);
                        targetScript = targetScript.replaceAll(it.origin, `${r}`);
                    });
                    script = targetScript;
                }
                const data = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.Script.evaluate(`const $element = this.element;  return ${script}`, Object.assign(obj, {
                    __render: Object.freeze({
                        element: it,
                        attribute: _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(it)
                    })
                }));
                // console.log('!!!!!!!!!!!', k, data, script, variablePaths, v)
                if (data === null) {
                    it.removeAttribute(k);
                }
                else {
                    it.setAttribute(k, data);
                }
            });
        });
        EventManager.WINDOW_EVENTS.forEach(it => {
            this.procAttr(childNodes, EventManager.attrPrefix + 'window-event-' + it, (it, attribute) => {
                it.obj = obj;
            });
        });
        EventManager.linkAttrs.forEach(linkInfo => {
            this.procAttr(childNodes, linkInfo.name, (it, varName) => {
                // console.log('ink??????????')
                if (varName) {
                    const ownerVariablePathName = it.getAttribute(EventManager.ownerVariablePathAttrName);
                    const mapScript = it.getAttribute(`${linkInfo.name}:map`);
                    let bindObj = obj;
                    if (ownerVariablePathName) {
                        bindObj = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(ownerVariablePathName, obj);
                    }
                    const getValue = this.getValue(obj, varName, bindObj);
                    if (typeof getValue === 'function' && getValue) {
                        let setValue = it[linkInfo.property];
                        if (mapScript) {
                            setValue = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)} return ${mapScript}`, Object.assign(bindObj, { __render: Object.freeze({ element: it, target: bindObj, range: _iterators_Range__WEBPACK_IMPORTED_MODULE_2__.Range.range, value: setValue, scripts: EventManager.setBindProperty(config?.scripts, obj), ...config?.eventVariables }) }));
                        }
                        getValue(setValue);
                    }
                    else if (getValue) {
                        let setValue = getValue;
                        if (mapScript) {
                            setValue = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)} return ${mapScript}`, Object.assign(bindObj, { __render: Object.freeze({ element: it, target: bindObj, range: _iterators_Range__WEBPACK_IMPORTED_MODULE_2__.Range.range, value: setValue, scripts: EventManager.setBindProperty(config?.scripts, obj), ...config?.eventVariables }) }));
                        }
                        if (setValue === null) {
                            it.removeAttribute(linkInfo.property);
                        }
                        else {
                            it[linkInfo.property] = setValue;
                        }
                    }
                    else if (getValue === undefined) {
                        this.setValue(obj, varName, it[linkInfo.property]);
                    }
                }
            });
        });
        this.directAttachEvents.forEach(eventName => {
            const attr = `${EventManager.attrPrefix}event-${eventName}`;
            this.procAttr(childNodes, attr, (element, script) => {
                const handler = (event) => {
                    const componentInstance = this.findComponentInstance(element);
                    if (!componentInstance)
                        return;
                    const context = this.createExecutionContext(event, element, componentInstance, config);
                    const filterScript = element.getAttribute(`${attr}:filter`);
                    let filter = true;
                    if (filterScript) {
                        filter = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)} return ${filterScript}`, context) ?? false;
                    }
                    if (filter) {
                        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)} ${script}`, context);
                    }
                };
                element.addEventListener(eventName, handler);
                // TODO: Add logic to remove this listener when the element is destroyed.
            });
        });
        this.procAttr(childNodes, EventManager.onInitAttrName, (it, attribute) => {
            let script = attribute;
            if (script) {
                script = 'return ' + script;
            }
            if (script) {
                _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)}; ${script} `, Object.assign(obj, {
                    __render: Object.freeze({
                        element: it,
                        attribute: _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(it),
                        ...config?.eventVariables
                    })
                }));
            }
        });
        this.onRenderedEvent(obj, childNodes, config);
        this.changeVar(obj, childNodes, undefined, config);
        const elements = Array.from(childNodes).filter(it => it.nodeType === 1).map(it => it);
        elements.forEach(it => {
            config?.applyEvents?.filter(ta => it.getAttribute(ta.attrName) !== null).forEach(ta => ta.callBack(it, it.getAttribute(ta.attrName), obj));
        });
    }
    onRenderedEvent(obj, childNodes, config) {
        this.procAttr(childNodes, EventManager.onRenderedInitAttrName, (it, attribute) => {
            if (!it.isConnected) {
                return;
            }
            let script = attribute;
            if (script) {
                script = 'return ' + script;
            }
            if (script) {
                _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${this.getBindScript(config)}; ${script} `, Object.assign(obj, {
                    __render: Object.freeze({
                        element: it,
                        attribute: _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(it),
                        ...config?.eventVariables
                    })
                }));
            }
        });
    }
    changeVar(obj, elements, varName, config) {
        // console.log('changeVar', obj, elements, varName)
        this.procAttr(elements, EventManager.styleAttrName, (it, attribute) => {
            let script = attribute;
            if (script) {
                script = 'return ' + script;
            }
            if (EventManager.isUsingThisVar(script, varName) || varName === undefined) {
                const data = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.Script.evaluate(`const $element = this.__render.element;  ${script} `, Object.assign(obj, {
                    __render: Object.freeze({
                        element: it,
                        attribute: _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(it)
                    })
                }));
                if (typeof data === 'string') {
                    data.split(';').forEach(sit => {
                        const [key, value] = sit.split(':').map(s => s.trim());
                        if (key && value) {
                            it.style[key] = value;
                        }
                    });
                    // it.setAttribute('style', data);
                }
                else if (Array.isArray(data)) {
                    data.forEach(sit => {
                        const [key, value] = sit.split(':').map(s => s.trim());
                        if (key && value) {
                            it.style[key] = value;
                        }
                    });
                    // it.setAttribute('style', data.join(';'));
                }
                else {
                    for (const [key, value] of Object.entries(data)) {
                        // if (it instanceof HTMLElement) {
                        it.style[key] = value === null ? null : String(value);
                        // }
                    }
                }
            }
        });
        this.procAttr(elements, EventManager.classAttrName, (it, attribute) => {
            let script = attribute;
            if (script) {
                script = 'return ' + script;
            }
            if (EventManager.isUsingThisVar(script, varName) || varName === undefined) {
                const data = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.Script.evaluate(`const $element = this.element;  ${script} `, Object.assign(obj, {
                    __render: Object.freeze({
                        element: it,
                        attribute: _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(it)
                    })
                }));
                // alert(1)
                if (typeof data === 'string') {
                    data.split(' ').forEach(cit => it.classList.add(cit.trim()));
                }
                else if (Array.isArray(data)) {
                    data.forEach(cit => it.classList.add(cit.trim()));
                }
                else {
                    for (const [key, value] of Object.entries(data)) {
                        if (it instanceof HTMLElement) {
                            if (value) {
                                it.classList.add(key.trim());
                            }
                            else {
                                it.classList.remove(key.trim());
                            }
                        }
                    }
                }
            }
        });
    }
    procAttr(elements = new Set(), attrName, callBack) {
        const sets = new Set();
        elements.forEach(it => {
            if (!it) {
                return;
            }
            if (it.nodeType === 1) {
                const e = it;
                sets.add(e);
                e.querySelectorAll(`[${attrName}]`).forEach(it => {
                    sets.add(it);
                });
            }
        });
        sets.forEach(it => {
            const attr = it.getAttribute(attrName);
            const attrs = _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_1__.ElementUtils.getAttributeToObject(it);
            if (attr) {
                callBack(it, attr, attrs);
            }
        });
    }
    getValue(obj, name, bindObj) {
        let r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.Script.evaluateReturn(name, obj);
        if (typeof r === 'function') {
            r = r.bind(bindObj ?? obj);
        }
        return r;
    }
    setValue(obj, name, value) {
        name = name.replaceAll('this.', 'this.this.');
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`${name} = this.value;`, {
            this: obj,
            value: value
        });
    }
    static isUsingThisVar(raws, varName) {
        if (varName && raws) {
            if (varName.startsWith('this.')) {
                varName = varName.replace(/this\./, '');
            }
            // TODO: 훔.. 꼭필요한가..?  트리거될때 스크립트변수 까지 감지해야될까?
            EventManager.VARNAMES.forEach(it => {
                // raws = raws!.replace(RegExp(it.replace('$', '\\$'), 'g'), `this?.___${it}`);
                raws = raws.replace(RegExp(it.replace('$', '\\$'), 'g'), `this.___${it}`);
            });
            const variablePaths = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_4__.ObjectUtils.Path.detectPathFromScript(raws ?? '', { excludeThis: true });
            return variablePaths.has(varName);
        }
        return false;
    }
    static setBindProperty(scripts, obj) {
        if (scripts) {
            const newScripts = Object.assign({}, scripts);
            for (const [key, value] of Object.entries(newScripts)) {
                if (typeof value === 'function') {
                    newScripts[key] = value.bind(obj);
                }
            }
            return newScripts;
        }
    }
    getBindScript(config) {
        if (config?.eventVariables) {
            const bindScript = Object.entries(config.eventVariables).filter(([key, value]) => !this.bindScript.includes(`const ${key}`)).map(([key, value]) => {
                return `const ${key} = this.__render.${key};`;
            }).join(';');
            return this.bindScript + '' + bindScript;
        }
        else {
            return this.bindScript;
        }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/iterators/Range.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/iterators/Range.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Range: () => (/* binding */ Range),
/* harmony export */   RangeIterator: () => (/* binding */ RangeIterator),
/* harmony export */   RangeResult: () => (/* binding */ RangeResult)
/* harmony export */ });
// within rangeResult.ts
// @ts-ignore
class RangeResult {
    done;
    value;
    constructor(value, done) {
        this.done = done;
        this.value = value ?? 0;
    }
}
class RangeIterator {
    _first;
    _current;
    _last;
    _step;
    constructor(first, last, step) {
        this._current = this._first = first;
        this._last = last;
        this._step = step;
    }
    next(value) {
        let r;
        if (this._first < this._last && this._current < this._last) {
            r = new RangeResult(this._current, false);
            this._current += this._step;
        }
        else if (this._first < this._last && this._current === this._last) {
            r = new RangeResult(this._current, false);
            this._current += this._step;
        }
        else if (this._first > this._last && this._current > this._last) {
            r = new RangeResult(this._current, false);
            this._current -= this._step;
        }
        else if (this._first > this._last && this._current === this._last) {
            r = new RangeResult(this._current, false);
            this._current -= this._step;
        }
        else if (this._current === this._last) {
            r = new RangeResult(this._current, false);
            this._current -= this._step;
        }
        else {
            r = new RangeResult(undefined, true);
        }
        return r;
    }
}
class Range {
    first;
    last;
    step;
    isRange = true;
    constructor(first, last, step = 1) {
        this.first = first;
        this.last = last;
        this.step = step;
    }
    [Symbol.iterator]() {
        return new RangeIterator(this.first, this.last, this.step);
    }
    map(callbackfn, thisArg) {
        return Array.from(this).map(callbackfn);
    }
    static range(first, last, step = 1) {
        if (typeof first === 'number' && last === undefined) {
            return new Range(0, first, step);
        }
        else if (typeof first === 'string') {
            const [_first, _last = '0'] = first.split('..');
            const [__last, _step = '1'] = _last.split(',');
            return new Range(Number(_first.trim()), Number(__last.trim()), Number(_step.trim()));
        }
        else {
            return new Range(first, last ?? 0, step);
        }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnBeforeReturnSet.ts":
/*!*********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnBeforeReturnSet.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnBeforeReturnSet: () => (/* binding */ isOnBeforeReturnSet)
/* harmony export */ });
function isOnBeforeReturnSet(obj) {
    return typeof obj?.onBeforeReturnSet === 'function';
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnChangeAttrRender.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnChangeAttrRender.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnChangeAttrRender: () => (/* binding */ isOnChangeAttrRender)
/* harmony export */ });
const isOnChangeAttrRender = (obj) => {
    return typeof obj?.onChangeAttrRender === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnChildRenderedByProperty.ts":
/*!*****************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnChildRenderedByProperty.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnChildRenderedByProperty: () => (/* binding */ isOnChildRenderedByProperty)
/* harmony export */ });
function isOnChildRenderedByProperty(obj) {
    return typeof obj?.onChildRenderedByProperty === 'function';
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRender.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRender.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnCreateRender: () => (/* binding */ isOnCreateRender)
/* harmony export */ });
const isOnCreateRender = (obj) => {
    return typeof obj?.onCreateRender === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRenderData.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRenderData.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnCreateRenderData: () => (/* binding */ isOnCreateRenderData)
/* harmony export */ });
const isOnCreateRenderData = (obj) => {
    return typeof obj?.onCreateRenderData === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreatedThisChild.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnCreatedThisChild.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnCreatedThisChild: () => (/* binding */ isOnCreatedThisChild)
/* harmony export */ });
const isOnCreatedThisChild = (obj) => {
    return typeof obj?.onCreatedThisChild === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnDestroyRender.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnDestroyRender.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnDestroyRender: () => (/* binding */ isOnDestroyRender)
/* harmony export */ });
const isOnDestroyRender = (obj) => {
    return typeof obj?.onDestroyRender === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnInitRender.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnInitRender.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnInitRender: () => (/* binding */ isOnInitRender)
/* harmony export */ });
function isOnInitRender(obj) {
    return typeof obj?.onInitRender === 'function';
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnProxyDomRender.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnProxyDomRender.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnProxyDomRender: () => (/* binding */ isOnProxyDomRender)
/* harmony export */ });
const isOnProxyDomRender = (obj) => typeof obj?.onProxyDomRender === 'function';


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/OnRawSetRendered.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/OnRawSetRendered.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnRawSetRendered: () => (/* binding */ isOnRawSetRendered)
/* harmony export */ });
const isOnRawSetRendered = (obj) => {
    return typeof obj?.onRawSetRendered === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/dr-this/OnDrThisBind.ts":
/*!************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/dr-this/OnDrThisBind.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnDrThisBind: () => (/* binding */ isOnDrThisBind)
/* harmony export */ });
const isOnDrThisBind = (obj) => {
    return typeof obj?.onDrThisBind === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/lifecycle/dr-this/OnDrThisUnBind.ts":
/*!**************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/lifecycle/dr-this/OnDrThisUnBind.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnDrThisUnBind: () => (/* binding */ isOnDrThisUnBind)
/* harmony export */ });
const isOnDrThisUnBind = (obj) => {
    return typeof obj?.onDrThisUnBind === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/messenger/DefaultMessenger.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/messenger/DefaultMessenger.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultMessenger: () => (/* binding */ DefaultMessenger)
/* harmony export */ });
/* harmony import */ var _Messenger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Messenger */ "../../packages/@dooboostore/dom-render/src/messenger/Messenger.ts");

class DefaultMessenger extends _Messenger__WEBPACK_IMPORTED_MODULE_0__.Messenger {
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/messenger/Messenger.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/messenger/Messenger.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Channel: () => (/* binding */ Channel),
/* harmony export */   ChannelSubscriber: () => (/* binding */ ChannelSubscriber),
/* harmony export */   ChannelSubscription: () => (/* binding */ ChannelSubscription),
/* harmony export */   Messenger: () => (/* binding */ Messenger)
/* harmony export */ });
/* harmony import */ var _types_Types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/Types */ "../../packages/@dooboostore/dom-render/src/types/Types.ts");

var CallBackType;
(function (CallBackType) {
    CallBackType[CallBackType["FILTER"] = 0] = "FILTER";
    CallBackType[CallBackType["MAP"] = 1] = "MAP";
    CallBackType[CallBackType["SUBSCRIBE"] = 2] = "SUBSCRIBE";
})(CallBackType || (CallBackType = {}));
class ChannelSubscription {
    channel;
    subscriber;
    constructor(channel, subscriber) {
        this.channel = channel;
        this.subscriber = subscriber;
    }
    unsubscribe() {
        this.subscriber.unsubscribe();
    }
}
class ChannelSubscriber {
    channel;
    parentSubscriber;
    callbacks = [];
    constructor(channel) {
        this.channel = channel;
    }
    exeCallback(data, metaData) {
        for (const callback of this.callbacks) {
            if (callback.type === CallBackType.FILTER && !callback.callback(data, metaData)) {
                break;
            }
            else if (callback.type === CallBackType.MAP) {
                data = callback.callback(data, metaData);
            }
            else if (callback.type === CallBackType.SUBSCRIBE) {
                data = callback.callback(data, metaData);
                break;
            }
        }
        return data;
    }
    // chaining point
    filter(callback) {
        this.callbacks.push({ type: CallBackType.FILTER, callback });
        return this;
    }
    map(callback) {
        this.callbacks.push({ type: CallBackType.MAP, callback });
        return this;
    }
    subscribe(callback) {
        this.callbacks.push({ type: CallBackType.SUBSCRIBE, callback });
        this.channel.subscribers.add(this);
        return new ChannelSubscription(this.channel, this);
    }
    unsubscribe() {
        this.channel.subscribers.delete(this);
    }
    deleteSubscriber() {
        this.unsubscribe();
        this.channel.subscribers.delete(this);
    }
}
class Channel {
    messenger;
    obj;
    key;
    subscribers = new Set();
    constructor(messenger, obj, key) {
        this.messenger = messenger;
        this.obj = obj;
        this.key = key;
    }
    publish(key, data, action) {
        const rtns = [];
        this.messenger.getChannels(key)?.forEach(it => {
            try {
                it.subscribers.forEach(its => {
                    const rdata = its.exeCallback(data, { channel: this, action });
                    rtns.push({ channel: it, data: rdata });
                });
            }
            catch (e) {
                console.error(e);
            }
        });
        return rtns;
    }
    allPublish(data, action) {
        const rtns = [];
        this.messenger.getAllChannelKeys().forEach(it => {
            rtns.push(this.publish(it, data));
        });
        return rtns.flat();
    }
    // string point
    filter(filterF) {
        const subscriber = new ChannelSubscriber(this);
        subscriber.filter(filterF);
        return subscriber;
    }
    map(filterF) {
        const subscriber = new ChannelSubscriber(this);
        subscriber.map(filterF);
        return subscriber;
    }
    subscribe(subscribeCallback) {
        const subscriber = new ChannelSubscriber(this);
        return subscriber.subscribe(subscribeCallback);
    }
    ;
    deleteChannel() {
        this.messenger.deleteChannel(this);
    }
    ;
}
class Messenger {
    config;
    channels = new Set();
    static EVENT_PUBLISH_KEY = 'domRenderMessenger_publish';
    static EVENT_SUBSCRIBE_KEY = 'domRenderMessenger_subscribe';
    constructor(config) {
        this.config = config;
        this.config.window.addEventListener(Messenger.EVENT_PUBLISH_KEY, (e) => {
            const detail = e.detail;
            // console.log('--->', detail)
            const rtns = [];
            this.getChannels(detail.key)?.forEach(it => {
                try {
                    it.subscribers.forEach(its => {
                        const rdata = its.exeCallback(detail.data, { action: detail.action });
                        rtns.push({ channel: it, data: rdata });
                    });
                }
                catch (e) {
                    console.error(e);
                }
            });
            detail.result?.(rtns);
        });
        this.config.window.addEventListener(Messenger.EVENT_SUBSCRIBE_KEY, (e) => {
            const detail = e.detail;
            // console.log('--->', detail)
            const channel = this.createChannel(detail.obj, detail.key);
            detail.init(channel, channel.subscribe(detail.subscribe));
        });
    }
    static publish(window, detail) {
        window.dispatchEvent(new CustomEvent(Messenger.EVENT_PUBLISH_KEY, { detail }));
    }
    static subscribe(window, detail) {
        window.dispatchEvent(new CustomEvent(Messenger.EVENT_SUBSCRIBE_KEY, { detail }));
    }
    createChannel(obj, key = obj.constructor.name) {
        const channel = _types_Types__WEBPACK_IMPORTED_MODULE_0__.DomRenderFinalProxy.final(new Channel(this, obj, key));
        this.channels.add(channel);
        // this.channels.get(key) ? this.channels.get(key)!.push(channel) : this.channels.set(key, [channel]);
        return channel;
    }
    deleteChannel(channel) {
        this.channels.delete(channel);
    }
    deleteChannelFromObj(obj) {
        if (obj) {
            this.channels.forEach(it => {
                if (it.obj === obj) {
                    // console.log('dddddddddddd', obj)
                    this.deleteChannel(it);
                }
            });
        }
    }
    addChannel(channel) {
        this.channels.add(channel);
    }
    getChannels(key) {
        if (typeof key === 'object') {
            key = key.constructor.name;
        }
        else if (typeof key === 'function') {
            key = key.name;
        }
        return Array.from(this.channels.values()).filter(it => it.key === key);
    }
    getAllChannels() {
        return Array.from(this.channels.values());
    }
    getAllChannelKeys() {
        return Array.from(this.channels.values()).map(it => it.key);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/Appender.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/Appender.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Appender: () => (/* binding */ Appender)
/* harmony export */ });
class Appender {
    length = 0;
    keyMap = new Map();
    isAppender = true;
    constructor(...defaultDatas) {
        // console.log('defaultDatas', defaultDatas);
        this.push(...defaultDatas);
        // (this.childs as any).isAppender = true;
    }
    [Symbol.iterator]() {
        const items = this.getAll();
        let idx = 0;
        return {
            next(value) {
                let r = { value: undefined, done: true };
                if (items.length > idx) {
                    r = { value: items[idx], done: false };
                }
                idx++;
                return r;
            }
        };
    }
    set(key, ...v) {
        const o = this.keyMap.get(key);
        // console.log('set!!', o);
        if (o !== undefined) {
            this[o] = v;
        }
        else {
            this.keyMap.set(key, this.length);
            // console.log('setPush', v)
            this.push(...v);
        }
    }
    delete(key) {
        const o = this.keyMap.get(key);
        if (o !== undefined) {
            this[o] = [];
            this.keyMap.delete(key);
            // this.length--;
        }
    }
    getAll() {
        return this.getAlls().flat();
    }
    getAlls() {
        const map = Array.from({ length: this.length }).filter((it, idx) => this[idx]).map((it, idx) => this[idx]);
        return map;
    }
    push(...items) {
        // console.log('----1>', items, items.length, this.length);
        if (items && items.length > 0) {
            items.index = this.length;
            this[this.length++] = items;
            // this[this.length] = [];
        }
        // console.log('----2>', items, items.length, this.length);
        // console.log('---22->', this.length)
        // const appender = this.childs[this.lastIndex];
        // appender.values = items;
        // this.childs.push(new Appender(appender.index + 1));
    }
    // delete(idx: number): void {
    //     // if (idx in this) {
    //     //     console.log('---------dele',idx)
    //     //     delete this[idx];
    //     //     this.length = this.length - 1;
    //     // }
    //     this.length = this.length - 1;
    // }
    // 인덱스 접근을 위한 getter와 setter 추가
    // get(index: number): T | undefined {
    //     return this.storage[index];
    // }
    //
    // set(index: number, value: T): void {
    //     this.storage[index] = value;
    //     this.length = Math.max(this.length, index + 1);
    // }
    clear() {
        // console.log('length', this.length);
        for (let i = 0; i < this.length; i++) {
            delete this[i];
        }
        this.keyMap.clear();
        this.length = 0;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/Dr.ts":
/*!******************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/Dr.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dr: () => (/* binding */ Dr)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");




class Dr extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack);
    }
    async executeAttrRequire(data) {
        const itRandom = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherEncoding(this.elementSource.element);
        const vars = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluate(`
                    ${this.render.bindScript}
                    const n = $element.cloneNode(true);
                    var destIt = ${this.elementSource.attrs.drItOption};
                    if (destIt !== undefined) {
                        n.getAttributeNames().forEach(it => n.setAttribute(it, n.getAttribute(it).replace(/\\#it\\#/g, destIt)))
                        // console.log('----', n.innerHTML);
                        n.innerHTML = n.innerHTML.replace(/\\#it\\#/g, destIt);
                        // console.log('----', n.innerHTML);
                    }
                    if (this.__render.drStripOption === 'true') {
                        Array.from(n.childNodes).forEach(it => this.__fag.append(it));
                    } else {
                        this.__render.fag.append(n);
                    }`, Object.assign(this.source.obj, {
            __render: Object.freeze({
                fag: newTemp,
                drStripOption: this.elementSource.attrs.drStripOption,
                ...this.render
            })
        }));
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarDecoding(newTemp, vars);
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherDecoding(newTemp, itRandom);
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrAppender.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrAppender.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrAppender: () => (/* binding */ DrAppender)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");




class DrAppender extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        const itRandom = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherEncoding(this.elementSource.element);
        const vars = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluate(`
                    try{
                    ${this.render.bindScript}
                    ${this.elementSource.attrs.drBeforeOption ?? ''}
                        const ifWrap = document.createElement('div');
                        // ifWrap.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_STRIP_OPTIONNAME}', 'true');
                        // ifWrap.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_IF_NAME}', '${this.elementSource.attrs.drAppender} && ${this.elementSource.attrs.drAppender}.length > 0');
                        const n = this.__render.element.cloneNode(true);
                        Object.entries(this.__render.drAttr).filter(([k,v]) => k !== 'drAppender' && v).forEach(([k, v]) => n.setAttribute(this.__render.drAttrsOriginName[k], v));
                        const length = ${this.elementSource.attrs.drAppender}.length;
                        if (length > 0) {
                            n.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_FOR_OF_NAME}', '${this.elementSource.attrs.drAppender}[' + (length-1) + ']');
                            n.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_NEXT_OPTIONNAME}', '${this.elementSource.attrs.drAppender},' + length);
                        } else {
                            n.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_FOR_OF_NAME}', '${this.elementSource.attrs.drAppender}[0]');
                            n.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_NEXT_OPTIONNAME}', '${this.elementSource.attrs.drAppender},' + 1);
                        }
                        // console.log('appender--->', Array.from(n.getAttributeNames()).map(it=>({name:it,attr: n.getAttribute(it)})));
                        // const drOptionThis = n.getAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_THIS_OPTIONNAME}');
                        // if (drOptionThis) {
                        // }
                        // ifWrap.append(n);
                        // this.__render.fag.append(ifWrap);
                        this.__render.fag.append(n);
                    ${this.elementSource.attrs.drAfterOption ?? ''}
                    }catch(e){}
                    `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                drStripOption: this.elementSource.attrs.drStripOption,
                drAttr: this.elementSource.attrs,
                drAttrsOriginName: _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drAttrsOriginName,
                fag: newTemp,
                ...this.render
                // eslint-disable-next-line no-use-before-define
            })
        }));
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarDecoding(newTemp, vars);
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherDecoding(newTemp, itRandom);
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        // const rrr = rr.flatMap(it => it.render(obj, config));// .flat();
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrFor.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrFor.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrFor: () => (/* binding */ DrFor)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");




class DrFor extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        const itRandom = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherEncoding(this.elementSource.element);
        const vars = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        // console.log('-----asdad',attr , this.elementSource.attrs.drItOption);
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluate(`
                    ${this.render.bindScript}
                    ${this.elementSource.attrs.drBeforeOption ?? ''}
                    for(${attr}) {
                        const n = this.__render.element.cloneNode(true);
                        var destIt = ${this.elementSource.attrs.drItOption};
                        if (destIt !== undefined) {
                            n.getAttributeNames().forEach(it => n.setAttribute(it, n.getAttribute(it).replace(/\\#it\\#/g, destIt).replace(/\\#nearForIt\\#/g, destIt).replace(/\\#nearForIndex\\#/g, destIt))) 
                            n.innerHTML = n.innerHTML.replace(/\\#it\\#/g, destIt).replace(/\\#index\\#/g, destIt);
                        }
                        if (this.__render.drStripOption === 'true') {
                            Array.from(n.childNodes).forEach(it => this.__render.fag.append(it));
                        } else {
                            this.__render.fag.append(n);
                        }
                    }
                    ${this.elementSource.attrs.drAfterOption ?? ''}
                    `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                fag: newTemp,
                drStripOption: this.elementSource.attrs.drStripOption,
                ...this.render
            })
        }));
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarDecoding(newTemp, vars);
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherDecoding(newTemp, itRandom);
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrForOf.ts":
/*!***********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrForOf.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrForOf: () => (/* binding */ DrForOf)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");




class DrForOf extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        // console.log('타지도않냐?')
        const itRandom = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drItOtherEncoding(this.elementSource.element, 'DrForOf');
        const vars = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        const variableName = this.elementSource.element.getAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_VARIABLE_NAME_OPTIONNAME);
        const itemVariableName = this.elementSource.element.getAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_ITEM_VARIABLE_NAME_OPTIONNAME);
        const itemIndexVariableName = this.elementSource.element.getAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_ITEM_INDEX_VARIABLE_NAME_OPTIONNAME);
        // console.log('----!', this.elementSource.attrs)
        // ScriptUtils.evalReturn()
        _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.ObjectUtils.Script.evaluate(`
                    ${this.render.bindScript}
                    ${this.elementSource.attrs.drBeforeOption ?? ''}
                    var i = -1; 
                    const forOf = ${_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.ObjectUtils.Path.toOptionalChainPath(attr)};
                    const forOfStr = \`${attr}\`.trim();
                    // console.log('forOf---',forOf);
                    if (forOf) {
                        for(const it of forOf) {
                            i++;
                            var destIt = it;
                            if (/\\[(.*,?)\\],/g.test(forOfStr)) {
                                if (typeof it === 'string') {
                                    destIt = it;
                                } else {
                                    destIt = forOfStr.substring(1, forOfStr.length-1).split(',')[i];
                                }
                            } else if (forOf.isRange) {
                                    destIt = it;
                            } else {
                                destIt = forOfStr + '[' + i +']'
                            }
                            const n = this.__render.element.cloneNode(true);
                            Object.entries(this.__render.drAttr).filter(([k,v]) => k !== 'drForOf' && k !== 'drNextOption' && v).forEach(([k, v]) => n.setAttribute(this.__render.drAttrsOriginName[k], v));
                            n.getAttributeNames().forEach(it => n.setAttribute(it, n.getAttribute(it).replace(/\\#it\\#/g, destIt).replace(/\\#nearForOfIt\\#/g, destIt).replace(/\\#it\\#/g, destIt).replace(/\\#nearForOfIndex\\#/g, i)))
                            if ('${variableName}') {
                              n.getAttributeNames().forEach(it => n.setAttribute(it, n.getAttribute(it).replaceAll('#${variableName}#', forOfStr)));
                            }
                            if ('${itemVariableName}') {
                              n.getAttributeNames().forEach(it => n.setAttribute(it, n.getAttribute(it).replaceAll('#${itemVariableName}#', destIt)));
                            }
                            if ('${itemIndexVariableName}') {
                              n.getAttributeNames().forEach(it => n.setAttribute(it, n.getAttribute(it).replaceAll('#${itemIndexVariableName}#', i)));
                            }
                            
                            const drOptionAttr = n.getAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_DETECT_ATTR_OPTIONNAME}');
                            if (drOptionAttr) {
                              const drOptionAttrResult = $scriptUtils.evaluateReturn(drOptionAttr, this);
                              Array.from(Object.entries(drOptionAttrResult??{})).forEach(([k,v])=>{
                                if (v === null) {
                                  n.removeAttribute(k);
                                } else {
                                  n.setAttribute(k,v);
                                }
                              })
                            }
                            
                            const drOptionFilter = n.getAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_DETECT_FILTER_OPTIONNAME}');
                            if (drOptionFilter) {
                              const drOptionFilterResult = $scriptUtils.evaluateReturn(drOptionFilter, this);
                              // console.log('---drforof----', drOptionFilter, drOptionFilterResult)
                              if (!drOptionFilterResult) {
                                continue;
                              }
                            }

                            n.innerHTML = n.innerHTML.replace(/\\#it\\#/g, destIt).replace(/\\#index\\#/g, i);
                            if ('${variableName}') {
                              n.innerHTML = n.innerHTML.replaceAll('#${variableName}#', forOfStr);
                            }
                            if ('${itemVariableName}') {
                              n.innerHTML = n.innerHTML.replaceAll('#${itemVariableName}#', destIt);
                            }
                            if ('${itemIndexVariableName}') {
                              n.innerHTML = n.innerHTML.replaceAll('#${itemIndexVariableName}#', i);
                            }
                   
                            if (this.__render.drStripOption === 'true') {
                                Array.from(n.childNodes).forEach(it => this.__render.fag.append(it));
                            } else {
                                this.__render.fag.append(n);
                            }
                           
                        }
                        
                        if('${this.elementSource.attrs.drNextOption}' !== 'null') {
                            const n = this.__render.element.cloneNode(true);
                            Object.entries(this.__render.drAttr).filter(([k,v]) => k !== 'drForOf' && k !== 'drNextOption' && v).forEach(([k, v]) => n.setAttribute(this.__render.drAttrsOriginName[k], v));
                            const [name, idx] = '${this.elementSource.attrs.drNextOption}'.split(',');
                            n.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_FOR_OF_NAME}', name + '[' + idx + ']');
                            n.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_NEXT_OPTIONNAME}', name + ',' +  (Number(idx) + 1));
                            this.__render.fag.append(n);
                        }
                    }
                    ${this.elementSource.attrs.drAfterOption ?? ''}
                    `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                drStripOption: this.elementSource.attrs.drStripOption,
                drAttr: this.elementSource.attrs,
                drAttrsOriginName: _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drAttrsOriginName,
                fag: newTemp,
                ...this.render
                // eslint-disable-next-line no-use-before-define
            })
        }));
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drVarDecoding(newTemp, vars);
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drItOtherDecoding(newTemp, itRandom);
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        // const rrr = rr.flatMap(it => it.render(obj, config));// .flat();
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrForm.ts":
/*!**********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrForm.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrForm: () => (/* binding */ DrForm)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _validators_Validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../validators/Validator */ "../../packages/@dooboostore/dom-render/src/validators/Validator.ts");
/* harmony import */ var _events_EventManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../events/EventManager */ "../../packages/@dooboostore/dom-render/src/events/EventManager.ts");
/* harmony import */ var _validators_ValidatorArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../validators/ValidatorArray */ "../../packages/@dooboostore/dom-render/src/validators/ValidatorArray.ts");
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");







class DrForm extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_5__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drFormOtherMoveAttr(this.elementSource.element, 'name', 'temp-name', this.source.config);
        const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(`${attr}`, this.source.obj);
        const childs = Array.from(this.elementSource.element.querySelectorAll('[name]'));
        const fromName = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(this.elementSource.element.getAttribute(`${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_FORM_NAME}:name`) ?? '', this.source.obj);
        const thisName = fromName ?? this.elementSource.element.getAttribute('name');
        // // 자기자신이 Input 대상일때
        if (childs.length <= 0 && thisName) {
            childs.push(this.elementSource.element);
        }
        else {
            if (data instanceof _validators_Validator__WEBPACK_IMPORTED_MODULE_2__.Validator) {
                data.setTarget(this.elementSource.element);
            }
        }
        childs.forEach(it => {
            const eventName = it.getAttribute(`${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_FORM_NAME}:event`) ?? 'change';
            const validatorName = it.getAttribute(`${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_FORM_NAME}:validator`);
            const attrEventName = _events_EventManager__WEBPACK_IMPORTED_MODULE_3__.EventManager.attrPrefix + 'event-' + eventName;
            let varpath = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(this.elementSource.element.getAttribute(`${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_FORM_NAME}:name`) ?? '', this.source.obj) ?? it.getAttribute('name');
            if (varpath != null) {
                if (validatorName) {
                    _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluate(`
                                ${this.render.bindScript}
                                const validator = typeof ${validatorName} ==='function' ?  new  ${validatorName}() : ${validatorName};
                                ${attr}['${varpath}'] = validator;
                            `, Object.assign(this.source.obj, {
                        __render: Object.freeze({
                            drStripOption: this.elementSource.attrs.drStripOption,
                            ...this.render
                        })
                    }));
                }
                varpath = `${attr}['${varpath}']`;
                const data = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_0__.ScriptUtils.evaluateReturn(`${varpath}`, this.source.obj);
                if (data instanceof _validators_ValidatorArray__WEBPACK_IMPORTED_MODULE_4__.ValidatorArray) {
                    it.setAttribute(attrEventName, `${varpath}.setArrayValue($target, $target.value, $event); ${it.getAttribute(attrEventName) ?? ''};`);
                    data.addValidator(it.value, it);
                }
                else if (data instanceof _validators_Validator__WEBPACK_IMPORTED_MODULE_2__.Validator) {
                    // varpath += (varpath ? '.value' : 'value');
                    // varpath = drAttr.drForm + '.' + varpath;
                    // it.setAttribute(attrEventName, `${varpath} = $target.value; ${target}=$target; ${event}=$event;`);
                    it.setAttribute(attrEventName, `${varpath}.set($target.value, $target, $event); ${it.getAttribute(attrEventName) ?? ''};`);
                    data.setTarget(it);
                    data.value = it.value;
                }
                else {
                    it.setAttribute(attrEventName, `${varpath} = $target.value;`);
                }
            }
        });
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drFormOtherMoveAttr(this.elementSource.element, 'temp-name', 'name', this.source.config);
        this.returnContainer.raws.push(..._rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.checkPointCreates(this.elementSource.element, this.source.obj, this.source.config));
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_6__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrIf.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrIf.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrIf: () => (/* binding */ DrIf)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");




class DrIf extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        const itRandom = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drItOtherEncoding(this.elementSource.element, 'DrIf');
        const vars = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        // Object.entries(this.__render.drAttr).filter(([k,v]) => k !== 'drIf' && v).forEach(([k, v]) => n.setAttribute(this.__render.drAttrsOriginName[k], v)); <-- 이부분은 다른 attr에도 적용을 할지말지 생각해야됨  엘리먼트 존재유무에 따라서 적용을 할지말지 결정해야됨
        const keepgoing = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.ObjectUtils.Script.evaluate(`
                ${this.render.bindScript}
                ${this.elementSource.attrs.drBeforeOption ?? ''}
                if ($rawSet.data === (${_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.ObjectUtils.Path.toOptionalChainPath(attr)})) {
                    return false;
                }
                $rawSet.data = ${_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.ObjectUtils.Path.toOptionalChainPath(attr)};
                if($rawSet.data) {
                    const n = $element.cloneNode(true);
                    Object.entries(this.__render.drAttr).filter(([k,v]) => k !== 'drIf' && v).forEach(([k, v]) => n.setAttribute(this.__render.drAttrsOriginName[k], v));
                    var destIt = ${this.elementSource.attrs.drItOption};
                    if (destIt !== undefined) {
                     // 여기가 ..아주 헛갈리는데...
                        Array.from(n.getAttributeNames()).forEach(it => n.setAttribute(it, n.getAttribute(it).replace(/\\#DrIFIt\\#/g, destIt)))
                        n.innerHTML = n.innerHTML.replace(/\\#DrIFIt\\#/g, destIt);
                    }
                    if (this.__render.drStripOption === 'true') {
                        Array.from(n.childNodes).forEach(it => this.__render.fag.append(it));
                    } else {
                        this.__render.fag.append(n);
                    }
                }
                ${this.elementSource.attrs.drAfterOption ?? ''};
                return true;
                `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                fag: newTemp,
                drAttr: this.elementSource.attrs,
                drAttrsOriginName: _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drAttrsOriginName,
                drStripOption: this.elementSource.attrs.drStripOption,
                ...this.render
            })
        }));
        // TODO: 뭐지?? 지워야되는거 아닌가?
        if (keepgoing === false) {
            return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__.ExecuteState.STOP;
        }
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drVarDecoding(newTemp, vars);
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drItOtherDecoding(newTemp, itRandom);
        // const bypass = (newTemp.innerHTML ?? '').trim().length <= 0;
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrInnerHTML.ts":
/*!***************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrInnerHTML.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrInnerHTML: () => (/* binding */ DrInnerHTML)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");




class DrInnerHTML extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        const newTemp = this.source.config.window.document.createElement('temp');
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluate(`
                        ${this.render.bindScript}
                        const n = $element.cloneNode(true);
                        ${this.elementSource.attrs.drBeforeOption ?? ''}
                        n.innerHTML = ${attr};
                        if (this.__render.drStripOption === 'true') {
                            Array.from(n.childNodes).forEach(it => this.__render.fag.append(it));
                        } else {
                            this.__render.fag.append(n);
                        }
                        ${this.elementSource.attrs.drAfterOption ?? ''}
                    `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                drStripOption: this.elementSource.attrs.drStripOption,
                fag: newTemp,
                ...this.render
                // eslint-disable-next-line no-use-before-define
            })
        }));
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrInnerText.ts":
/*!***************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrInnerText.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrInnerText: () => (/* binding */ DrInnerText)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");




class DrInnerText extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        const newTemp = this.source.config.window.document.createElement('temp');
        _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.ObjectUtils.Script.evaluate(` 
                        ${this.render.bindScript}
                        const n = $element.cloneNode(true);  
                        ${this.elementSource.attrs.drBeforeOption ?? ''}
                        n.innerText = ${attr};
                        if (this.__render.drStripOption === 'true') {
                            Array.from(n.childNodes).forEach(it => this.__render.fag.append(it));
                        } else {
                            this.__render.fag.append(n);
                        }
                        ${this.elementSource.attrs.drAfterOption ?? ''}
                    `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                drStripOption: this.elementSource.attrs.drStripOption,
                fag: newTemp,
                ...this.render
            })
        }));
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrPre.ts":
/*!*********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrPre.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrPre: () => (/* binding */ DrPre)
/* harmony export */ });
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");

class DrPre extends _OperatorExecuter__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuter {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack);
    }
    async execute(value) {
        return (value != null) ? _OperatorExecuter__WEBPACK_IMPORTED_MODULE_0__.ExecuteState.EXECUTE : _OperatorExecuter__WEBPACK_IMPORTED_MODULE_0__.ExecuteState.NO_EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrRepeat.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrRepeat.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrRepeat: () => (/* binding */ DrRepeat)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _events_EventManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../events/EventManager */ "../../packages/@dooboostore/dom-render/src/events/EventManager.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");





class DrRepeat extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        const itRandom = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherEncoding(this.elementSource.element);
        const vars = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluate(`
                    ${this.render.bindScript}
                    ${this.elementSource.attrs.drBeforeOption ?? ''}
                    var i = 0; 
                    const repeat = ${attr};
                    const repeatStr = \`${attr}\`;
                    let range = repeat;
                    if (typeof repeat === 'number') {
                        range = ${_events_EventManager__WEBPACK_IMPORTED_MODULE_3__.EventManager.RANGE_VARNAME}(repeat);
                    } 
                    for(const it of range) {
                        var destIt = it;
                        if (range.isRange) {
                            destIt = it;
                        }  else {
                            destIt = repeatStr + '[' + i +']'
                        }
                        const n = this.__render.element.cloneNode(true);
                        n.getAttributeNames().forEach(it => n.setAttribute(it, n.getAttribute(it).replace(/\\#it\\#/g, destIt).replace(/\\#nearRangeIt\\#/g, destIt).replace(/\\#nearRangeIndex\\#/g, destIt)))
                        n.innerHTML = n.innerHTML.replace(/\\#it\\#/g, destIt).replace(/\\#index\\#/g, destIt);
                        
                        if (this.__render.drStripOption === 'true') {
                            Array.from(n.childNodes).forEach(it => this.__render.fag.append(it));
                        } else {
                            this.__render.fag.append(n);
                        }
                        i++;
                    }
                    ${this.elementSource.attrs.drAfterOption ?? ''}
                    `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                fag: newTemp,
                drStripOption: this.elementSource.attrs.drStripOption,
                ...this.render
            })
        }));
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarDecoding(newTemp, vars);
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherDecoding(newTemp, itRandom);
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_4__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrStripElement.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrStripElement.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrStripElement: () => (/* binding */ DrStripElement)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");




class DrStripElement extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        // const itRandom = RawSet.drItOtherEncoding(this.elementSource.element, 'DrStripElement');
        // const vars = RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        // Object.entries(this.__render.drAttr).filter(([k,v]) => k !== 'drIf' && v).forEach(([k, v]) => n.setAttribute(this.__render.drAttrsOriginName[k], v)); <-- 이부분은 다른 attr에도 적용을 할지말지 생각해야됨  엘리먼트 존재유무에 따라서 적용을 할지말지 결정해야됨
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluate(`
                ${this.render.bindScript}
                ${this.elementSource.attrs.drBeforeOption ?? ''}
                const n = $element.cloneNode(true);
                if(${attr}) {
                  Array.from(n.childNodes).forEach(it => this.__render.fag.append(it));
                } else {
                  this.__render.fag.append(n);
                }
                ${this.elementSource.attrs.drAfterOption ?? ''};
                return true;
                `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                fag: newTemp,
                drAttr: this.elementSource.attrs,
                drAttrsOriginName: _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drAttrsOriginName,
                drStripOption: this.elementSource.attrs.drStripOption,
                ...this.render
            })
        }));
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__.ExecuteState.EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrTargetAttr.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrTargetAttr.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrTargetAttr: () => (/* binding */ DrTargetAttr)
/* harmony export */ });
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");


class DrTargetAttr extends _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__.OperatorExecuter {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async execute() {
        const attributeNames = this.elementSource.element.getAttributeNames();
        const targetAttr = this.source.config?.targetAttrs?.find(it => attributeNames.includes(it.name));
        if (targetAttr) {
            const attrName = targetAttr.name;
            const attrValue = this.rawSet.getAttributeAndDelete(this.elementSource.element, attrName);
            if (attrValue && attrName && (!this.elementSource.attrs.drForOf && !this.elementSource.attrs.drFor && !this.elementSource.attrs.drRepeat)) {
                const documentFragment = targetAttr.callBack(this.elementSource.element, attrValue, this.source.obj, this.rawSet);
                if (documentFragment) {
                    const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.checkPointCreates(documentFragment, this.source.obj, this.source.config);
                    this.elementSource.element.parentNode?.replaceChild(documentFragment, this.elementSource.element);
                    this.returnContainer.raws.push(...rr);
                    this.afterCallBack.onAttrInitCallBacks.push({
                        attrName,
                        attrValue,
                        obj: this.source.obj
                    });
                    targetAttr?.complete?.(this.elementSource.element, attrValue, this.source.obj, this.rawSet);
                }
            }
            return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__.ExecuteState.EXECUTE;
        }
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__.ExecuteState.NO_EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrTargetElement.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrTargetElement.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrTargetElement: () => (/* binding */ DrTargetElement)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");



// 여기서 사용자가 등록한 TargetElement가 들어간다.
class DrTargetElement extends _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__.OperatorExecuter {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async execute() {
        let targetElement = undefined;
        let isTargetElementElement = this.elementSource.element.tagName.toLowerCase() === _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_TARGET_ELEMENT_ELEMENTNAME.toLowerCase();
        if (isTargetElementElement) {
            const targetElementTagName = this.elementSource.element.getAttribute(`${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_TARGET_ELEMENT_ELEMENTNAME}:is`)?.toLowerCase();
            targetElement = this.source.config?.targetElements?.find(it => it.name.toLowerCase() === targetElementTagName);
        }
        else {
            targetElement = this.source.config?.targetElements?.find(it => it.name.toLowerCase() === this.elementSource.element.tagName.toLowerCase());
        }
        // console.log('--------------tar', isTargetElementElement, targetElement, this.elementSource.element.tagName);
        if (targetElement) {
            if (this.rawSet.point.start instanceof this.source.config.window.HTMLMetaElement &&
                this.rawSet.point.end instanceof this.source.config.window.HTMLMetaElement) {
                this.rawSet.point.start.setAttribute('this-path', `this.__domrender_components.${this.rawSet.uuid}`);
                this.rawSet.point.end.setAttribute('this-path', `this.__domrender_components.${this.rawSet.uuid}`);
            }
            const documentFragment = await targetElement.callBack(this.elementSource.element, this.source.obj, this.rawSet, this.elementSource.attrs, this.source.config);
            if (documentFragment) {
                const detectAction = this.elementSource.element.getAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.DR_DETECT_NAME);
                // const dictionaryKey = this.elementSource.element.getAttribute(RawSet.DR_DICTIONARY_OPTIONKEYNAME);
                // console.log('dictionaryKey', dictionaryKey);
                // const render = (documentFragment as any).render;
                this.rawSet.dataSet.fragment = documentFragment;
                // if (documentFragment) {
                //     const tempDiv = this.source.config.window.document.createElement('div');
                //     tempDiv.appendChild(documentFragment.cloneNode(true));
                //     console.log('DocumentFragment innerHTML:', tempDiv.innerHTML);
                // }
                // this.rawSet.dataSet??={};
                // this.rawSet.dataSet.data = render.component;
                if (detectAction && this.rawSet.dataSet.render) {
                    // TODO: 없어져야될듯?
                    this.rawSet.detect = {
                        action: () => {
                            const script = `var $component = this.__render.component; var $element = this.__render.element; var $innerHTML = this.__render.innerHTML; var $attribute = this.__render.attribute;  ${detectAction} `;
                            _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__.ObjectUtils.Script.evaluate(script, Object.assign(this.source.obj, {
                                __render: this.rawSet.dataSet.render
                            }));
                        }
                    };
                }
                // fag.append(documentFragment)
                // console.log('----------1', ElementUtils.toInnerHTML(documentFragment, {document: this.source.config.window.document}));
                // await Promises.sleep(1000)
                let targetFragment = documentFragment;
                if (targetElement.noStrip) {
                    // documentFragment.firstElementChild.classList.add(`${this.rawSet.uuid}___DrTargetElement`)
                    const fragment = this.source.config.window.document.createDocumentFragment();
                    Array.from(documentFragment.firstElementChild?.childNodes || []).forEach(child => {
                        // fragment.appendChild(child.cloneNode(true));
                        fragment.appendChild(child);
                    });
                    // fragment.append(documentFragment.firstElementChild);
                    targetFragment = fragment;
                }
                // console.log('----------2', ElementUtils.toInnerHTML(targetFragment, {document: this.source.config.window.document}));
                const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.checkPointCreates(targetFragment, this.source.obj, this.source.config);
                rr.forEach((it, index) => {
                    // const z = ElementUtils.toInnerHTML(it.dataSet.fragment, {document: this.source.config.window.document});
                    // console.log('-z--z('+index+')', z, it);
                    // it.point.start;
                    // // 새로운 comment element 추가
                    // const comment = this.source.config.window.document.createComment('새로 만든 comment element');
                    // it.point.start.parentNode?.insertBefore(comment, it.point.start.nextSibling);
                });
                // for (let rawSet of rr) {
                //   await rawSet.render(this.source.obj, this.source.config)
                // }
                // console.log('cccccccccccccccccccccc', rr, typeof Window);
                if (targetElement.noStrip) {
                    Array.from(targetFragment.childNodes || []).forEach(child => {
                        documentFragment.firstElementChild?.appendChild(child);
                    });
                }
                this.elementSource.element.parentNode?.replaceChild(documentFragment, this.elementSource.element);
                this.returnContainer.raws.push(...rr);
                this.afterCallBack.onElementInitCallBacks.push({
                    name: targetElement.name.toLowerCase(),
                    obj: this.source.obj,
                    targetElement,
                    creatorMetaData: targetElement.__creatorMetaData
                });
                // console.log('sssssssssssssss', this.source.obj);
                targetElement?.complete?.(this.elementSource.element, this.source.obj, this.rawSet);
            }
            return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__.ExecuteState.EXECUTE;
        }
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_2__.ExecuteState.NO_EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrTargetElementIsElement.ts":
/*!****************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrTargetElementIsElement.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrTargetElementIsElement: () => (/* binding */ DrTargetElementIsElement)
/* harmony export */ });
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");



// 여기서 사용자가 등록한 TargetElement가 들어간다.
class DrTargetElementIsElement extends _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__.OperatorExecuter {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async execute(attr) {
        if (!attr) {
            return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__.ExecuteState.NO_EXECUTE;
        }
        const targetElement = this.source.config?.targetElements?.find(it => it.name.toLowerCase() === attr.toLowerCase());
        // console.log('--------------tar', targetElement)
        if (targetElement) {
            if (this.rawSet.point.start instanceof this.source.config.window.HTMLMetaElement && this.rawSet.point.end instanceof this.source.config.window.HTMLMetaElement) {
                this.rawSet.point.start.setAttribute('this-path', `this.__domrender_components.${this.rawSet.uuid}`);
                this.rawSet.point.end.setAttribute('this-path', `this.__domrender_components.${this.rawSet.uuid}`);
            }
            const documentFragment = await targetElement.callBack(this.elementSource.element, this.source.obj, this.rawSet, this.elementSource.attrs, this.source.config);
            if (documentFragment) {
                const detectAction = this.elementSource.element.getAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.DR_DETECT_NAME);
                this.rawSet.dataSet.fragment = documentFragment;
                if (detectAction && this.rawSet.dataSet.render) {
                    // TODO: 없어져야될듯?
                    this.rawSet.detect = {
                        action: () => {
                            const script = `var $component = this.__render.component; var $element = this.__render.element; var $innerHTML = this.__render.innerHTML; var $attribute = this.__render.attribute;  ${detectAction} `;
                            _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.Script.evaluate(script, Object.assign(this.source.obj, {
                                __render: this.rawSet.dataSet.render
                            }));
                        }
                    };
                }
                // dr-replace-target-element-is 는 무조건 NoStrip로 처리
                const noStrip = targetElement.noStrip;
                let targetFragment = documentFragment;
                if (noStrip) {
                    const fragment = this.source.config.window.document.createDocumentFragment();
                    Array.from(documentFragment.firstElementChild?.childNodes || []).forEach(child => {
                        fragment.appendChild(child);
                    });
                    targetFragment = fragment;
                }
                const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_0__.RawSet.checkPointCreates(targetFragment, this.source.obj, this.source.config);
                if (noStrip) {
                    Array.from(targetFragment.childNodes || []).forEach(child => {
                        documentFragment.firstElementChild?.appendChild(child);
                    });
                }
                this.elementSource.element.parentNode?.replaceChild(documentFragment, this.elementSource.element);
                this.returnContainer.raws.push(...rr);
                this.afterCallBack.onElementInitCallBacks.push({
                    name: targetElement.name.toLowerCase(),
                    obj: this.source.obj,
                    targetElement,
                    creatorMetaData: targetElement.__creatorMetaData
                });
                targetElement?.complete?.(this.elementSource.element, this.source.obj, this.rawSet);
            }
            return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__.ExecuteState.EXECUTE;
        }
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_1__.ExecuteState.NO_EXECUTE;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrThis.ts":
/*!**********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrThis.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrThis: () => (/* binding */ DrThis)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _components_ComponentSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/ComponentSet */ "../../packages/@dooboostore/dom-render/src/components/ComponentSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");
/* harmony import */ var _lifecycle_dr_this_OnDrThisUnBind__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lifecycle/dr-this/OnDrThisUnBind */ "../../packages/@dooboostore/dom-render/src/lifecycle/dr-this/OnDrThisUnBind.ts");
/* harmony import */ var _lifecycle_dr_this_OnDrThisBind__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lifecycle/dr-this/OnDrThisBind */ "../../packages/@dooboostore/dom-render/src/lifecycle/dr-this/OnDrThisBind.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");







class DrThis extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    async executeAttrRequire(attr) {
        // const e = this.elementSource;
        // console.log('drThis!!!!!!!!!!!!!', this.elementSource.attrs.drDetectIfOption, this.elementSource.attrs.drIfOption);
        const optionIf = this.elementSource.attrs.drDetectIfOption ?? this.elementSource.attrs.drIfOption;
        const ok = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_6__.ObjectUtils.Script.evaluate(`
                ${this.render.bindScript}
                try {
                  const ok  = ${this.elementSource.attrs.drThis};
                  const option = ${optionIf};
                  if (option!==null) {
                     return !!(ok && option); 
                  }
                  // console.log('vv', ${this.elementSource.attrs.drThis}, ${this.elementSource.attrs.drIfOption}, '${this.elementSource.attrs.drIfOption}');
                  return !!ok;
                } catch(e) {
                  return false;
                }
                `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                drAttr: this.elementSource.attrs,
                drAttrsOriginName: _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drAttrsOriginName,
                ...this.render
            })
        }));
        // console.log('----zxvxcv-----!!!aa!', ok);
        // if (!ok) {
        //   this.elementSource.element.remove();
        //   return ExecuteState.STOP;
        // }
        // console.log('----zxvxcv-----!!!!', attr);
        if (attr && this.elementSource.attrs.drThis && ok) {
            let thisPath = this.elementSource.attrs.drThis;
            // let optionIf = this.elementSource.attrs.drIfOption;
            // console.log('drThis!!!!!!!!!!!!!, ', optionIf)
            if (attr instanceof _components_ComponentSet__WEBPACK_IMPORTED_MODULE_2__.ComponentSet) {
                // console.log('drThis!!!!!!!!!!->', attr)
                // if (this.rawSet.data) {
                //   const destroyOptions = this.elementSource.attrs.drDestroyOption?.split(',') ?? [];
                //   debugger;
                //   RawSet.destroy((this.rawSet.data as ComponentSet).obj, [], this.source.config, destroyOptions);
                // }
                if (attr.config?.beforeComponentSet?.obj !== attr.obj) {
                    if ((0,_lifecycle_dr_this_OnDrThisUnBind__WEBPACK_IMPORTED_MODULE_4__.isOnDrThisUnBind)(attr.config.beforeComponentSet?.obj)) {
                        attr.config.beforeComponentSet?.obj?.onDrThisUnBind?.();
                    }
                }
                // this.rawSet.dataSet ??= {};
                // this.rawSet.dataSet.data = attr;
                if (attr.config?.beforeComponentSet?.obj !== attr.obj) {
                    if ((0,_lifecycle_dr_this_OnDrThisBind__WEBPACK_IMPORTED_MODULE_5__.isOnDrThisBind)(attr.obj)) {
                        attr.obj?.onDrThisBind?.();
                    }
                }
                // 중요: componentSet 의 objPath를 보고 판단하는 중요한부분
                thisPath = `${this.elementSource.attrs.drThis}${attr.config.objPath ? ('.' + attr.config.objPath) : ''}`;
                // const zthisPath = `${this.elementSource.attrs.drThis}${attr.config.objPath ? ('?.' + attr.config.objPath) : ''}`;
                // console.log('thisPaththisPaththisPath',thisPath)
                this.setThisPath(thisPath);
                const componentBody = await _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drThisCreate(this.rawSet, this.elementSource.element, thisPath, this.elementSource.attrs.drVarOption ?? '', this.elementSource.attrs.drStripOption, this.source.obj, this.source.config, attr);
                if (componentBody) {
                    this.returnContainer.fag.append(componentBody);
                    this.afterCallBack.onThisComponentSetCallBacks.push(attr);
                }
            }
            else {
                this.setThisPath(thisPath);
                const fragment = await _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.drThisCreate(this.rawSet, this.elementSource.element, this.elementSource.attrs.drThis, this.elementSource.attrs.drVarOption ?? '', this.elementSource.attrs.drStripOption, this.source.obj, this.source.config);
                if (fragment) {
                    this.returnContainer.fag.append(fragment);
                }
            }
            // console.log('!!!!!!!!!zzz', Array.from(this.returnContainer.fag.childNodes), this.elementSource.element);
            const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_1__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
            this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
            this.returnContainer.raws.push(...rr);
        }
        else {
            this.elementSource.element.remove();
        }
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__.ExecuteState.EXECUTE;
    }
    setThisPath(thisPath) {
        // if (this.rawSet.point.start instanceof HTMLMetaElement && this.rawSet.point.end instanceof HTMLMetaElement) {
        if (this.rawSet.point.start instanceof this.source.config.window.HTMLMetaElement && this.rawSet.point.end instanceof this.source.config.window.HTMLMetaElement) {
            this.rawSet.point.start.setAttribute('this-path', thisPath);
            this.rawSet.point.end.setAttribute('this-path', thisPath);
        }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/DrThisProperty.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/DrThisProperty.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DrThisProperty: () => (/* binding */ DrThisProperty)
/* harmony export */ });
/* harmony import */ var _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuterAttrRequire */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts");
/* harmony import */ var _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/script/ScriptUtils */ "../../packages/@dooboostore/core-web/src/script/ScriptUtils.ts");
/* harmony import */ var _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");




class DrThisProperty extends _OperatorExecuterAttrRequire__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuterAttrRequire {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack) {
        source.operatorAround = undefined;
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, false);
    }
    async executeAttrRequire(attr) {
        const itRandom = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherEncoding(this.elementSource.element, 'DrThisProperty');
        const vars = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarEncoding(this.elementSource.element, this.elementSource.attrs.drVarOption ?? '');
        const newTemp = this.source.config.window.document.createElement('temp');
        const dictioanry = _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluateReturn(attr, this.source.obj);
        const dictionaryKey = this.elementSource.attrs.drKeyOption ?? '';
        // console.log('--->', attr, dictionaryKey)
        // if (!(dictioanry instanceof Dictionary)) {
        //     return ExecuteState.STOP;
        // }
        // await new Promise(resolve => setTimeout(resolve, 1000));
        // console.log('!!!!!!!!!!!!!!', this.rawSet);
        _dooboostore_core_web_script_ScriptUtils__WEBPACK_IMPORTED_MODULE_1__.ScriptUtils.evaluate(`
                    ${this.render.bindScript}
                    ${this.elementSource.attrs.drBeforeOption ?? ''}
                    var i = 0; 
                    const dictionary = ${attr};
                    const dictionaryKey = '${dictionaryKey}';
                    const dictionaryStr = \`${attr}\`.trim();
                    // console.log('----@#!@#@!#', this.__render.oldChild);
                    if (dictionary) {
                        for(const it in dictionary) {
                            var destIt = dictionaryStr + '["' + it + '"]';
                            const n = this.__render.element.cloneNode(true);
                            n.setAttribute('dr-this', destIt);
                            n.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_KEY_OPTIONNAME}', it);
                            // n.setAttribute('dr-dictionary-key', it);
                            this.__render.fag.append(n);
                            i++;
                        }
                         this.__render.rawset.point.start.setAttribute('${_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_HAS_KEYS_OPTIONNAME}',Object.keys(dictionary).join(','));
                    }
                    ${this.elementSource.attrs.drAfterOption ?? ''}
                    `, Object.assign(this.source.obj, {
            __render: Object.freeze({
                drStripOption: this.elementSource.attrs.drStripOption,
                drAttr: this.elementSource.attrs,
                drAttrsOriginName: _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drAttrsOriginName,
                fag: newTemp,
                ...this.render
            })
        }));
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drVarDecoding(newTemp, vars);
        _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.drItOtherDecoding(newTemp, itRandom);
        const tempalte = this.source.config.window.document.createElement('template');
        tempalte.innerHTML = newTemp.innerHTML;
        this.returnContainer.fag.append(tempalte.content);
        const rr = _rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(this.returnContainer.fag, this.source.obj, this.source.config);
        this.elementSource.element.parentNode?.replaceChild(this.returnContainer.fag, this.elementSource.element);
        // const rrr = rr.flatMap(it => it.render(obj, config));// .flat();
        this.returnContainer.raws.push(...rr);
        return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_3__.ExecuteState.EXECUTE;
    }
    static append(obj, fullPath, key, rawSet, config) {
        const genNode = config.window.document.importNode(rawSet.dataSet.fragment, true);
        // console.log('---> append', rawSet, genNode);
        const rawSets = [];
        for (const cNode of Array.from(genNode.childNodes.values())) {
            const element = cNode.cloneNode(true);
            element.removeAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_THIS_PROPERTY_NAME);
            element.setAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_THIS_NAME, `this.${fullPath}`);
            element.setAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_KEY_OPTIONNAME, key);
            // rawSet.point.end.after(element);
            const fg = config.window.document.createDocumentFragment();
            fg.append(element);
            rawSets.push(..._rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.checkPointCreates(fg, obj, config));
            rawSet.point.end.before(fg);
            const start = rawSet.point.start;
            const keys = start.getAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_HAS_KEYS_OPTIONNAME)?.split(',') ?? [];
            keys.push(key);
            start.setAttribute(_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_2__.RawSet.DR_HAS_KEYS_OPTIONNAME, keys.join(','));
            rawSets.forEach(async (it) => await it.render(obj, config));
        }
        return rawSets;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExecuteState: () => (/* binding */ ExecuteState),
/* harmony export */   OperatorExecuter: () => (/* binding */ OperatorExecuter)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");

var ExecuteState;
(function (ExecuteState) {
    ExecuteState[ExecuteState["EXECUTE"] = 0] = "EXECUTE";
    ExecuteState[ExecuteState["NO_EXECUTE"] = 1] = "NO_EXECUTE";
    ExecuteState[ExecuteState["STOP"] = 2] = "STOP";
})(ExecuteState || (ExecuteState = {}));
class OperatorExecuter {
    rawSet;
    render;
    returnContainer;
    elementSource;
    source;
    afterCallBack;
    startingExecute;
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack, startingExecute = true) {
        this.rawSet = rawSet;
        this.render = render;
        this.returnContainer = returnContainer;
        this.elementSource = elementSource;
        this.source = source;
        this.afterCallBack = afterCallBack;
        this.startingExecute = startingExecute;
    }
    ;
    async start() {
        let attrValue = this.elementSource.attr;
        // console.log('OperatorExecuter ', attrValue, this);
        if (this.source.operatorAround?.beforeAttr) {
            attrValue = this.source.operatorAround.beforeAttr(attrValue, this) ?? '';
        }
        let r = attrValue;
        if (r && this.startingExecute) {
            const optionalPath = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__.ObjectUtils.Path.toOptionalChainPath(attrValue);
            r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__.ObjectUtils.Script.evaluate(` ${this.render.bindScript}; return ${optionalPath}`, Object.assign(this.source.obj, { __render: this.render }));
        }
        if (this.source.operatorAround?.before) {
            r = this.source.operatorAround?.before(r, this);
        }
        const state = await this.execute(r);
        this.source.operatorAround?.after?.(r, this);
        return state;
    }
    ;
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts":
/*!*******************************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/operators/OperatorExecuterAttrRequire.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OperatorExecuterAttrRequire: () => (/* binding */ OperatorExecuterAttrRequire)
/* harmony export */ });
/* harmony import */ var _OperatorExecuter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");

class OperatorExecuterAttrRequire extends _OperatorExecuter__WEBPACK_IMPORTED_MODULE_0__.OperatorExecuter {
    constructor(rawSet, render, returnContainer, elementSource, source, afterCallBack, startingExecute = true) {
        super(rawSet, render, returnContainer, elementSource, source, afterCallBack, startingExecute);
    }
    ;
    async execute(data) {
        if (!this.elementSource.attr) {
            return _OperatorExecuter__WEBPACK_IMPORTED_MODULE_0__.ExecuteState.NO_EXECUTE;
        }
        return await this.executeAttrRequire(data);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/rawsets/DestroyOptionType.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/rawsets/DestroyOptionType.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DestroyOptionType: () => (/* binding */ DestroyOptionType)
/* harmony export */ });
var DestroyOptionType;
(function (DestroyOptionType) {
    DestroyOptionType["NO_DESTROY"] = "NO_DESTROY";
    DestroyOptionType["NO_MESSENGER_DESTROY"] = "NO_MESSENGER_DESTROY";
})(DestroyOptionType || (DestroyOptionType = {}));


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RawSet: () => (/* binding */ RawSet)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/random/RandomUtils */ "../../packages/@dooboostore/core/src/random/RandomUtils.ts");
/* harmony import */ var _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/string/StringUtils */ "../../packages/@dooboostore/core/src/string/StringUtils.ts");
/* harmony import */ var _events_EventManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events/EventManager */ "../../packages/@dooboostore/dom-render/src/events/EventManager.ts");
/* harmony import */ var _iterators_Range__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../iterators/Range */ "../../packages/@dooboostore/dom-render/src/iterators/Range.ts");
/* harmony import */ var _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core-web/element/ElementUtils */ "../../packages/@dooboostore/core-web/src/element/ElementUtils.ts");
/* harmony import */ var _operators_DrPre__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../operators/DrPre */ "../../packages/@dooboostore/dom-render/src/operators/DrPre.ts");
/* harmony import */ var _operators_Dr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../operators/Dr */ "../../packages/@dooboostore/dom-render/src/operators/Dr.ts");
/* harmony import */ var _operators_DrIf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../operators/DrIf */ "../../packages/@dooboostore/dom-render/src/operators/DrIf.ts");
/* harmony import */ var _operators_OperatorExecuter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../operators/OperatorExecuter */ "../../packages/@dooboostore/dom-render/src/operators/OperatorExecuter.ts");
/* harmony import */ var _operators_DrThis__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../operators/DrThis */ "../../packages/@dooboostore/dom-render/src/operators/DrThis.ts");
/* harmony import */ var _operators_DrForm__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../operators/DrForm */ "../../packages/@dooboostore/dom-render/src/operators/DrForm.ts");
/* harmony import */ var _operators_DrInnerText__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../operators/DrInnerText */ "../../packages/@dooboostore/dom-render/src/operators/DrInnerText.ts");
/* harmony import */ var _operators_DrInnerHTML__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../operators/DrInnerHTML */ "../../packages/@dooboostore/dom-render/src/operators/DrInnerHTML.ts");
/* harmony import */ var _operators_DrFor__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../operators/DrFor */ "../../packages/@dooboostore/dom-render/src/operators/DrFor.ts");
/* harmony import */ var _operators_DrForOf__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../operators/DrForOf */ "../../packages/@dooboostore/dom-render/src/operators/DrForOf.ts");
/* harmony import */ var _operators_DrAppender__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../operators/DrAppender */ "../../packages/@dooboostore/dom-render/src/operators/DrAppender.ts");
/* harmony import */ var _operators_DrRepeat__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../operators/DrRepeat */ "../../packages/@dooboostore/dom-render/src/operators/DrRepeat.ts");
/* harmony import */ var _operators_DrTargetElement__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../operators/DrTargetElement */ "../../packages/@dooboostore/dom-render/src/operators/DrTargetElement.ts");
/* harmony import */ var _operators_DrTargetAttr__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../operators/DrTargetAttr */ "../../packages/@dooboostore/dom-render/src/operators/DrTargetAttr.ts");
/* harmony import */ var _operators_DrStripElement__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../operators/DrStripElement */ "../../packages/@dooboostore/dom-render/src/operators/DrStripElement.ts");
/* harmony import */ var _DestroyOptionType__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./DestroyOptionType */ "../../packages/@dooboostore/dom-render/src/rawsets/DestroyOptionType.ts");
/* harmony import */ var _RawSetType__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./RawSetType */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSetType.ts");
/* harmony import */ var _operators_DrThisProperty__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../operators/DrThisProperty */ "../../packages/@dooboostore/dom-render/src/operators/DrThisProperty.ts");
/* harmony import */ var _RawSetOperatorType__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./RawSetOperatorType */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSetOperatorType.ts");
/* harmony import */ var _dooboostore_core_parser_css_CssParser__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @dooboostore/core/parser/css/CssParser */ "../../packages/@dooboostore/core/src/parser/css/CssParser.ts");
/* harmony import */ var _lifecycle_OnCreateRenderData__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../lifecycle/OnCreateRenderData */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRenderData.ts");
/* harmony import */ var _lifecycle_OnCreateRender__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../lifecycle/OnCreateRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreateRender.ts");
/* harmony import */ var _lifecycle_OnChangeAttrRender__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../lifecycle/OnChangeAttrRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnChangeAttrRender.ts");
/* harmony import */ var _lifecycle_OnInitRender__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../lifecycle/OnInitRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnInitRender.ts");
/* harmony import */ var _lifecycle_OnCreatedThisChild__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../lifecycle/OnCreatedThisChild */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnCreatedThisChild.ts");
/* harmony import */ var _lifecycle_OnDestroyRender__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../lifecycle/OnDestroyRender */ "../../packages/@dooboostore/dom-render/src/lifecycle/OnDestroyRender.ts");
/* harmony import */ var _operators_DrTargetElementIsElement__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../operators/DrTargetElementIsElement */ "../../packages/@dooboostore/dom-render/src/operators/DrTargetElementIsElement.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");
/* harmony import */ var _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @dooboostore/core-web/node/NodeUtils */ "../../packages/@dooboostore/core-web/src/node/NodeUtils.ts");
/* harmony import */ var _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @dooboostore/core/convert/ConvertUtils */ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts");



































class RawSet {
    uuid;
    type;
    point;
    dataSet;
    detect;
    static DR_NAME = 'dr';
    static DR_IF_NAME = 'dr-if';
    static DR_FOR_NAME = 'dr-for';
    static DR_FOR_OF_NAME = 'dr-for-of';
    static DR_THIS_PROPERTY_NAME = 'dr-this-property';
    static DR_REPEAT_NAME = 'dr-repeat';
    static DR_THIS_NAME = 'dr-this';
    static DR_FORM_NAME = 'dr-form';
    static DR_PRE_NAME = 'dr-pre';
    static DR_APPENDER_NAME = 'dr-appender';
    static DR_INNERHTML_NAME = 'dr-inner-html';
    static DR_INNERTEXT_NAME = 'dr-inner-text';
    static DR_DETECT_NAME = 'dr-detect';
    static DR_STRIP_NAME = 'dr-strip';
    static DR_REPLACE_TARGET_ELEMENT_IS_NAME = 'dr-replace-target-element-is';
    // elementName
    static DR_TARGET_ELEMENT_ELEMENTNAME = 'dr-target-element';
    // 감지처리되는 옵션
    static DR_DETECT_IF_OPTIONNAME = 'dr-detect-option-if';
    static DR_DETECT_FILTER_OPTIONNAME = 'dr-detect-option-filter';
    static DR_DETECT_ATTR_OPTIONNAME = 'dr-detect-option-attr';
    /**
     * @deprecated
     */
    static DR_THIS_OPTIONNAME = 'dr-option-this';
    static DR_ATTR_OPTIONNAME = 'dr-option-attr';
    static DR_IF_OPTIONNAME = 'dr-option-if';
    static DR_IT_OPTIONNAME = 'dr-option-it';
    static DR_VAR_OPTIONNAME = 'dr-option-var';
    static DR_AFTER_OPTIONNAME = 'dr-option-after';
    static DR_NEXT_OPTIONNAME = 'dr-option-next';
    static DR_BEFORE_OPTIONNAME = 'dr-option-before';
    static DR_COMPLETE_OPTIONNAME = 'dr-option-complete';
    static DR_STRIP_OPTIONNAME = 'dr-option-strip';
    static DR_DESTROY_OPTIONNAME = 'dr-option-destroy';
    static DR_THIS_NAME_OPTIONNAME = 'dr-option-this-name';
    static DR_VARIABLE_NAME_OPTIONNAME = 'dr-option-variable-name';
    static DR_ITEM_VARIABLE_NAME_OPTIONNAME = 'dr-option-item-variable-name';
    static DR_ITEM_INDEX_VARIABLE_NAME_OPTIONNAME = 'dr-option-item-index-variable-name';
    static DR_INNER_HTML_NAME_OPTIONNAME = 'dr-option-inner-html-name';
    static DR_INNER_TEXT_NAME_OPTIONNAME = 'dr-option-inner-text-name';
    static DR_INNER_HTML_ESCAPED_NAME_OPTIONNAME = 'dr-option-inner-html-escaped-name';
    static DR_KEY_OPTIONNAME = 'dr-option-key';
    static DR_HAS_KEYS_OPTIONNAME = 'dr-option-has-keys';
    static DR_ON_CREATE_ARGUMENTS_OPTIONNAME = 'dr-on-create:arguments';
    static DR_ON_CREATED_CALLBACK_OPTIONNAME = 'dr-on-create:callback';
    /**  우선 쓰는곳이 없어서 deprecated를 걸어놨음
    @deprecated
    */
    static DR_ON_INIT_ARGUMENTS_OPTIONNAME = 'dr-on-init:arguments';
    static DR_ON_CONSTRUCTOR_ARGUMENTS_OPTIONNAME = 'dr-on-constructor:arguments';
    static drAttrsOriginName = {
        dr: RawSet.DR_NAME,
        drIf: RawSet.DR_IF_NAME,
        drFor: RawSet.DR_FOR_NAME,
        drForOf: RawSet.DR_FOR_OF_NAME,
        drThisProperty: RawSet.DR_THIS_PROPERTY_NAME,
        drAppender: RawSet.DR_APPENDER_NAME,
        drRepeat: RawSet.DR_REPEAT_NAME,
        drThis: RawSet.DR_THIS_NAME,
        drForm: RawSet.DR_FORM_NAME,
        drPre: RawSet.DR_PRE_NAME,
        drInnerHTML: RawSet.DR_INNERHTML_NAME,
        drInnerText: RawSet.DR_INNERTEXT_NAME,
        drItOption: RawSet.DR_IT_OPTIONNAME,
        drVarOption: RawSet.DR_VAR_OPTIONNAME,
        drAfterOption: RawSet.DR_AFTER_OPTIONNAME,
        drNextOption: RawSet.DR_NEXT_OPTIONNAME,
        drBeforeOption: RawSet.DR_BEFORE_OPTIONNAME,
        drCompleteOption: RawSet.DR_COMPLETE_OPTIONNAME,
        drStripElement: RawSet.DR_STRIP_NAME,
        drReplaceTargetElementIs: RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME,
        drStripOption: RawSet.DR_STRIP_OPTIONNAME,
        drIfOption: RawSet.DR_IF_OPTIONNAME,
        drDetectIfOption: RawSet.DR_DETECT_IF_OPTIONNAME,
        drDestroyOption: RawSet.DR_DESTROY_OPTIONNAME,
        drHasKeysOption: RawSet.DR_HAS_KEYS_OPTIONNAME,
        drKeyOption: RawSet.DR_KEY_OPTIONNAME
    };
    static DR_TAGS = [];
    // public static readonly DR_REPLACE_ACTION_ATTRIBUTES = [
    //   RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME
    // ]
    static DR_ELEMENTS = [
        RawSet.DR_TARGET_ELEMENT_ELEMENTNAME
    ];
    static DR_ATTRIBUTES = [
        RawSet.DR_NAME,
        RawSet.DR_APPENDER_NAME,
        RawSet.DR_IF_NAME,
        RawSet.DR_FOR_OF_NAME,
        RawSet.DR_THIS_PROPERTY_NAME,
        RawSet.DR_FOR_NAME,
        RawSet.DR_THIS_NAME,
        RawSet.DR_FORM_NAME,
        RawSet.DR_PRE_NAME,
        RawSet.DR_INNERHTML_NAME,
        RawSet.DR_INNERTEXT_NAME,
        RawSet.DR_REPEAT_NAME,
        RawSet.DR_DETECT_NAME,
        RawSet.DR_STRIP_NAME
    ];
    constructor(uuid, type, point, dataSet, detect) {
        this.uuid = uuid;
        this.type = type;
        this.point = point;
        this.dataSet = dataSet;
        this.detect = detect;
        // point.start.rawSet = this;
        // console.log('rawset constructor->', (this.point.node as Element).getAttributeNames());
    }
    get isConnected() {
        // console.log('isConnect???', this, this.point.start.isConnected, this.point.end.isConnected);
        return (this.point && this.point.start && this.point.end && this.point.start.isConnected && this.point.end.isConnected);
    }
    // 중요
    getUsingTriggerVariables(config) {
        const usingTriggerVariables = new Set();
        // console.log('------data', this.dataSet)
        this.dataSet.fragment.childNodes.forEach((cNode, key) => {
            // console.log('-----aaaa-data', cNode, key)
            let script = '';
            if (cNode.nodeType === Node.TEXT_NODE) {
                script = `\`${cNode.textContent ?? ''}\``;
                const expressionGroups = RawSet.expressionGroups(script);
                // console.log('???????', script, expressionGroups)
                if (expressionGroups[0].length > 1) {
                    script = expressionGroups[0][1];
                }
                // console.log('--', expressionGroups, script)
            }
            else if (cNode.nodeType === Node.ELEMENT_NODE) {
                const element = cNode;
                const targetAttrNames = (config?.targetAttrs?.map(it => it.name) ?? []).concat(RawSet.DR_ATTRIBUTES, RawSet.DR_DETECT_FILTER_OPTIONNAME, RawSet.DR_DETECT_IF_OPTIONNAME, RawSet.DR_DETECT_ATTR_OPTIONNAME); // .concat(EventManager.normalAttrMapAttrName);
                const targetScripts = targetAttrNames
                    .map(it => element.getAttribute(it))
                    .filter(it => it)
                    .map(it => `(${it})`);
                const targetAttrMap = element.getAttribute(_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.normalAttrMapAttrName);
                // console.log('targetAttrMap-->', targetAttrMap)
                if (targetAttrMap) {
                    new Map(JSON.parse(targetAttrMap)).forEach((v, k) => {
                        const variablePaths = v.variablePaths;
                        // let targetScript = v.originalAttrValue;
                        // variablePaths.forEach(it => {
                        //   let r = ObjectUtils.Path.toOptionalChainPath(it.inner);
                        //   targetScript = targetScript.replaceAll(it.origin,`\${${r}}`);
                        // })
                        // targetScripts.push(`(${targetScript})`);
                        // 변수 체크만 하는거니깐 이렇게
                        variablePaths.forEach(it => targetScripts.push(`(${it.inner})`));
                        // console.log('targetScripts', targetScripts);
                    });
                }
                // console.log('targetScriptstargetScripts', targetScripts)
                script = targetScripts.join(';');
                // script = targetScripts.map(it=>`try{${it}}catch(e){}`).join(';');
                // attribute쪽 체크하는거 추가
                // console.log('----!!!!!-->', targetAttrNames)
                // const otherAttrs = element.getAttributeNames()
                //     .filter(it => !targetAttrNames.includes(it.toLowerCase()) && RawSet.isExporesion(element.getAttribute(it)))
                //     .map(it => {
                //         return `\`${element.getAttribute(it) ?? ''}\``;
                //     }).join(';');
                // script += ';' + otherAttrs
            }
            if (script) {
                // console.log('------1-',script)
                script = script.replace(/#[^#]*#/g, '({})');
                // console.log('------2-',script)
                // script = script.replace('}$','}');
                // script = script.replace('@this@','this');
                // console.log('----------->', script)
                // TODO: 훔.. 꼭필요한가..?  트리거될때 스크립트변수 까지 감지해야될까?
                _events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.VARNAMES.forEach(it => {
                    // script = script.replace(RegExp(it.replace('$', '\\$'), 'g'), `this?.___${it}`);
                    // script = script.replace(RegExp(it.replace('$', '\\$'), 'g'), `this.___${it}`);
                    script = script.replace(RegExp(it.replace('$', '\\$'), 'g'), `this.___${it}`);
                    // console.log('scripts-->', script)
                });
                // console.log('--------1--', script);
                // script = script.replaceAll('#{','${').replaceAll('}#', '}')
                // console.log('--------2--', script);
                // TODO: 훔.. 꼭필요한가..?  트리거될때 스크립트변수 까지 감지해야될까?
                Array.from(_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.detectPathFromScript(script, { excludeThis: true }))
                    .filter(it => !it.startsWith(`___${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.SCRIPTS_VARNAME}`))
                    .forEach(it => usingTriggerVariables.add(it));
            }
        });
        // console.log('usingTriggerVariable----------->', usingTriggerVariables)
        return usingTriggerVariables;
    }
    // 중요 render 처리 부분
    // public async render(obj: any, config: DomRenderConfig): Promise<RawSet[]> {
    // }
    async render(obj, config) {
        // console.log('render!!!!!!!!!!!!!!')
        const genNode = config.window.document.importNode(this.dataSet.fragment, true);
        const raws = [];
        const onAttrInitCallBacks = [];
        const onElementInitCallBacks = [];
        const onThisComponentSetCallBacks = [];
        const drAttrs = [];
        // console.log('rawSet render!!', obj, config, this, Array.from(genNode.childNodes.values()));
        const executedOperators = [];
        for (const cNode of Array.from(genNode.childNodes.values())) {
            // console.log('cNodecNodecNode', cNode);
            let attribute = {};
            if (cNode.nodeType === Node.ELEMENT_NODE) {
                attribute = _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_4__.ElementUtils.getAttributeToObject(cNode);
            }
            const __render = Object.freeze({
                rawSet: this,
                scripts: _events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.setBindProperty(config?.scripts, obj),
                router: config?.router,
                range: _iterators_Range__WEBPACK_IMPORTED_MODULE_3__.Range.range,
                element: cNode,
                attribute: attribute,
                rootObject: obj,
                scriptUtils: _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script,
                nearThis: this.findNearThis(obj),
                parentThis: this.findParentThis(obj),
                bindScript: ` /** render **/
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.SCRIPTS_VARNAME} = this.__render.scripts;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.RAWSET_VARNAME} = this.__render.rawSet;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ELEMENT_VARNAME} = this.__render.element;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ATTRIBUTE_VARNAME} = this.__render.attribute;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.RANGE_VARNAME} = this.__render.range;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ROUTER_VARNAME} = this.__render.router;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.NEAR_THIS_VARNAME} = this.__render.nearThis;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.PARENT_THIS_VARNAME} = this.__render.parentThis;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.SCRIPT_UTILS_VARNAME} = this.__render.scriptUtils;
                    const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ROOT_OBJECT_VARNAME} = this.__render.rootObject;
            `
            });
            // const normalAttribute = attribute[EventManager.normalAttrMapAttrName];
            // if (normalAttribute) {
            //   new Map<string, string>(JSON.parse(normalAttribute)).forEach((v, k) => {
            //     const cval = ScriptUtils.evalReturn({ bodyScript: __render.bindScript, returnScript: v }, Object.assign(obj, { __render: __render }));
            //     console.log('-----------',v,k, cval);
            //     attribute[v] = cval;
            //   });
            // }
            const fag = config.window.document.createDocumentFragment();
            if (cNode.nodeType === Node.TEXT_NODE && cNode.textContent) {
                // console.log('text-->', this, obj, config, cNode.textContent);
                // console.log('text-->', Array.from(this.fragment.childNodes))
                const textContent = cNode.textContent;
                const runText = RawSet.expressionGroups(textContent)[0][1];
                // console.log('--->', RawSet.exporesionGrouops(textContent), textContent,runText, runText[0][1])
                let newNode;
                if (textContent?.startsWith('#')) {
                    const r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn({ bodyScript: __render.bindScript, returnScript: runText }, Object.assign(obj, { __render }));
                    const template = config.window.document.createElement('template');
                    template.innerHTML = r;
                    newNode = template.content;
                }
                else {
                    const r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn({ bodyScript: __render.bindScript, returnScript: runText }, Object.assign(obj, { __render }));
                    newNode = config.window.document.createTextNode(r);
                }
                cNode.parentNode?.replaceChild(newNode, cNode);
                // console.log('-------', this.point.start.parentNode.nodeName)
                // 중요 style value change 됐을때 다시 처리해야되기떄문에: 마지막에 completed 없는 attr 가지고 판단 하니깐
                if (this.type === _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.STYLE_TEXT && this.point.parent) {
                    this.point.parent.removeAttribute('completed');
                }
            }
            else if (cNode.nodeType === Node.ELEMENT_NODE) {
                const element = cNode;
                // console.log('target-->', element)
                const drAttr = {
                    dr: this.getAttributeAndDelete(element, RawSet.DR_NAME),
                    drIf: this.getAttributeAndDelete(element, RawSet.DR_IF_NAME),
                    drFor: this.getAttributeAndDelete(element, RawSet.DR_FOR_NAME),
                    drForOf: this.getAttributeAndDelete(element, RawSet.DR_FOR_OF_NAME),
                    drThisProperty: this.getAttributeAndDelete(element, RawSet.DR_THIS_PROPERTY_NAME),
                    drAppender: this.getAttributeAndDelete(element, RawSet.DR_APPENDER_NAME),
                    drRepeat: this.getAttributeAndDelete(element, RawSet.DR_REPEAT_NAME),
                    drThis: this.getAttributeAndDelete(element, RawSet.DR_THIS_NAME),
                    drForm: this.getAttributeAndDelete(element, RawSet.DR_FORM_NAME),
                    drPre: this.getAttributeAndDelete(element, RawSet.DR_PRE_NAME),
                    drInnerHTML: this.getAttributeAndDelete(element, RawSet.DR_INNERHTML_NAME),
                    drInnerText: this.getAttributeAndDelete(element, RawSet.DR_INNERTEXT_NAME),
                    drStripElement: this.getAttributeAndDelete(element, RawSet.DR_STRIP_NAME),
                    drReplaceTargetElementIs: this.getAttributeAndDelete(element, RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME),
                    drItOption: this.getAttributeAndDelete(element, RawSet.DR_IT_OPTIONNAME),
                    drIfOption: this.getAttributeAndDelete(element, RawSet.DR_IF_OPTIONNAME),
                    drVarOption: this.getAttributeAndDelete(element, RawSet.DR_VAR_OPTIONNAME),
                    drNextOption: this.getAttributeAndDelete(element, RawSet.DR_NEXT_OPTIONNAME),
                    drAfterOption: this.getAttributeAndDelete(element, RawSet.DR_AFTER_OPTIONNAME),
                    drBeforeOption: this.getAttributeAndDelete(element, RawSet.DR_BEFORE_OPTIONNAME),
                    drCompleteOption: this.getAttributeAndDelete(element, RawSet.DR_COMPLETE_OPTIONNAME),
                    drStripOption: this.getAttributeAndDelete(element, RawSet.DR_STRIP_OPTIONNAME),
                    drDestroyOption: this.getAttributeAndDelete(element, RawSet.DR_DESTROY_OPTIONNAME),
                    drKeyOption: this.getAttributeAndDelete(element, RawSet.DR_KEY_OPTIONNAME),
                    drDetectIfOption: this.getAttribute(element, RawSet.DR_DETECT_IF_OPTIONNAME),
                    drHasKeysOption: this.getAttribute(element, RawSet.DR_HAS_KEYS_OPTIONNAME)
                };
                drAttrs.push(drAttr);
                // 아래 순서 중요
                const operators = [
                    new _operators_DrPre__WEBPACK_IMPORTED_MODULE_5__.DrPre(this, __render, { raws, fag }, { element, attrName: RawSet.DR_PRE_NAME, attr: drAttr.drPre, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drPre }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_Dr__WEBPACK_IMPORTED_MODULE_6__.Dr(this, __render, { raws, fag }, { element, attrName: RawSet.DR_NAME, attr: drAttr.dr, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.dr }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    // new Dr(this, __render, {raws, fag}, {element, attrName: EventManager.onRenderedInitAttrName, attr: drAttr.dr, attrs: drAttr}, {config, obj, operatorAround: config.operatorAround?.dr}, {onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks}),
                    new _operators_DrIf__WEBPACK_IMPORTED_MODULE_7__.DrIf(this, __render, { raws, fag }, { element, attrName: RawSet.DR_IF_NAME, attr: drAttr.drIf, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drIf }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrStripElement__WEBPACK_IMPORTED_MODULE_19__.DrStripElement(this, __render, { raws, fag }, { element, attrName: RawSet.DR_STRIP_NAME, attr: drAttr.drStripElement, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drThis }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrThis__WEBPACK_IMPORTED_MODULE_9__.DrThis(this, __render, { raws, fag }, { element, attrName: RawSet.DR_THIS_NAME, attr: drAttr.drThis, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drThis }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrForm__WEBPACK_IMPORTED_MODULE_10__.DrForm(this, __render, { raws, fag }, { element, attrName: RawSet.DR_FOR_NAME, attr: drAttr.drForm, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drForm }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrInnerText__WEBPACK_IMPORTED_MODULE_11__.DrInnerText(this, __render, { raws, fag }, { element, attrName: RawSet.DR_INNERTEXT_NAME, attr: drAttr.drInnerText, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drInnerText }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrInnerHTML__WEBPACK_IMPORTED_MODULE_12__.DrInnerHTML(this, __render, { raws, fag }, { element, attrName: RawSet.DR_INNERHTML_NAME, attr: drAttr.drInnerHTML, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drInnerHTML }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrFor__WEBPACK_IMPORTED_MODULE_13__.DrFor(this, __render, { raws, fag }, { element, attrName: RawSet.DR_FOR_NAME, attr: drAttr.drFor, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drFor }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrForOf__WEBPACK_IMPORTED_MODULE_14__.DrForOf(this, __render, { raws, fag }, { element, attrName: RawSet.DR_FOR_OF_NAME, attr: drAttr.drForOf, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drForOf }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrThisProperty__WEBPACK_IMPORTED_MODULE_22__.DrThisProperty(this, __render, { raws, fag }, { element, attrName: RawSet.DR_THIS_PROPERTY_NAME, attr: drAttr.drThisProperty, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drThisProperty }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrAppender__WEBPACK_IMPORTED_MODULE_15__.DrAppender(this, __render, { raws, fag }, { element, attrName: RawSet.DR_APPENDER_NAME, attr: drAttr.drAppender, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drAppender }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrRepeat__WEBPACK_IMPORTED_MODULE_16__.DrRepeat(this, __render, { raws, fag }, { element, attrName: RawSet.DR_REPEAT_NAME, attr: drAttr.drRepeat, attrs: drAttr }, { config, obj, operatorAround: config.operatorAround?.drRepeat }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrTargetElementIsElement__WEBPACK_IMPORTED_MODULE_31__.DrTargetElementIsElement(this, __render, { raws, fag }, { element, attrName: RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME, attr: drAttr.drReplaceTargetElementIs, attrs: drAttr }, { config, obj }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrTargetElement__WEBPACK_IMPORTED_MODULE_17__.DrTargetElement(this, __render, { raws, fag }, { element, attrs: drAttr }, { config, obj }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks }),
                    new _operators_DrTargetAttr__WEBPACK_IMPORTED_MODULE_18__.DrTargetAttr(this, __render, { raws, fag }, { element, attrs: drAttr }, { config, obj }, { onAttrInitCallBacks, onElementInitCallBacks, onThisComponentSetCallBacks })
                ];
                for (const operator of operators) {
                    const state = await operator.start();
                    if (state === _operators_OperatorExecuter__WEBPACK_IMPORTED_MODULE_8__.ExecuteState.EXECUTE) {
                        executedOperators.push(operator);
                        break;
                    }
                    else if (state === _operators_OperatorExecuter__WEBPACK_IMPORTED_MODULE_8__.ExecuteState.STOP) {
                        return { raws, executedOperators };
                    }
                }
            }
        }
        this.point.childrenRawSets = raws;
        raws.forEach(it => {
            it.point.parentRawSet = this;
        });
        // console.log('pppppppppppppp', this);
        // replaceBody와 applyEvent 순서를 바꿨다 20250511
        const childrenNodes = Array.from(genNode.childNodes);
        this.applyEvent(obj, genNode, config);
        this.replaceBody(genNode); // 중요 여기서 마지막에 연션된 값을 그려준다.
        // console.log('rawSEt!!!!!!!', obj, this.near)
        // console.log('rawSEt!!!!!!!', obj, this.findNearThis(obj),childrenNodes,config)
        // console.log('rawSEt!!!!!!!', obj, drAttrs)
        this.onRenderedEvent(obj, childrenNodes, config);
        drAttrs.forEach(it => {
            if (it.drCompleteOption) {
                // genNode.childNodes
                const render = Object.freeze({
                    rawSet: this,
                    fag: genNode,
                    scripts: _events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.setBindProperty(config?.scripts, obj)
                });
                _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluate(`
                const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.FAG_VARNAME} = this.__render.fag;
                const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.SCRIPTS_VARNAME} = this.__render.scripts;
                const ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.RAWSET_VARNAME} = this.__render.rawSet;
                ${it.drCompleteOption}`, Object.assign(obj, { __render: render }));
            }
        });
        // 중요 style isolation 나중에 :scope로 대체 가능할듯.
        // 2023.9.4일 없앰  style 처음들어올때 처리하는걸로 바꿈
        // RawSet.generateStyleSheetsLocal(config);
        for (const it of onThisComponentSetCallBacks) {
            if ((0,_lifecycle_OnInitRender__WEBPACK_IMPORTED_MODULE_28__.isOnInitRender)(it.obj)) {
                await it.obj?.onInitRender?.({}, this);
            }
        }
        for (const it of onElementInitCallBacks) {
            if ((0,_lifecycle_OnInitRender__WEBPACK_IMPORTED_MODULE_28__.isOnInitRender)(this.dataSet.render?.currentThis)) {
                // TODO: 나중에 파라미터 들어가야될듯. 지금은 리팩토링하느라 빠짐
                // console.log('!!!!!!!!!!!!!!!!!!!!!!!!!!!!!', it, this.dataSet);
                // dr-on-init:arguments
                // if (isOnInitRender()) {
                //   it.targetElement.__render.component.onInitRender?.(...param);
                // }
                // if (it.targetElement?.__render?.element && it.targetElement?.__render?.component) {
                //   const oninit = it.targetElement.__render.element.getAttribute(RawSet.DR_ON_INIT_ARGUMENTS_OPTIONNAME); // dr-on-component-init
                //   let param = [];
                //   if (oninit) {
                //     const script = `${it.targetElement.__render.renderScript} return ${oninit} `;
                //     param = ScriptUtils.eval(script, Object.assign(obj, {
                //       __render: it.targetElement.__render
                //     }));
                //     if (!Array.isArray(param)) {
                //       param = [param];
                //     }
                //   }
                //
                //   if (isOnInitRender(it.targetElement.__render.component)) {
                //     it.targetElement.__render.component.onInitRender?.(...param);
                //   }
                // }
                await this.dataSet.render.currentThis.onInitRender({}, this);
            }
            config?.onElementInit?.(it.name, obj, this, it.targetElement);
        }
        // TODO: 이부분도 위에 targetElement 처럼 해야될까?
        for (const it of onAttrInitCallBacks) {
            config?.onAttrInit?.(it.attrName, it.attrValue, obj, this);
        }
        // component destroy
        if (obj.__domrender_components) {
            Object.entries(obj.__domrender_components).forEach(([key, value]) => {
                const rawSet = value.__rawSet;
                const drAttrs = rawSet?.dataSet.render?.attribute;
                if (rawSet && !rawSet.isConnected) {
                    const destroyOptions = drAttrs?.drDestroyOption?.split(',') ?? [];
                    RawSet.destroy(obj.__domrender_components[key], { rawSet: rawSet }, config, destroyOptions);
                    delete obj.__domrender_components[key];
                }
            });
        }
        // console.log('-------raws',raws)
        return { raws: raws, executedOperators: executedOperators };
    }
    // 중요 스타일 적용 부분
    static generateRuleSelector(start, end, sit) {
        const selectorText = `:is(${start} ~ *:not(${start} ~ ${end} ~ *))`;
        if (sit.startsWith('## ')) {
            return sit.replace(/^## /, '');
        }
        else if (sit.startsWith('.')) {
            return `${selectorText}${sit}, ${selectorText} ${sit}`;
        }
        else if (sit.includes('::')) {
            const reg = sit.match(/(.*)::(.*)$/);
            const first = reg?.[1];
            const extracted = reg?.[2];
            const divText = `${start} ~ ${first}:not(${start} ~ ${end} ~ *)`;
            return `${selectorText} ${first}, ${divText}::${extracted}`;
        }
        else {
            const divText = `${start} ~ ${sit}:not(${start} ~ ${end} ~ *)`;
            return `${selectorText} ${sit}, ${divText}`;
        }
    }
    static generateStyleTransform(styleBody, componentKey, styleTagWrap = true) {
        // console.log('style!!!!!!!!!!!!!!!!1', styleBody, componentKey, styleTagWrap);
        if (Array.isArray(styleBody)) {
            styleBody = styleBody.join('\n');
        }
        styleBody = styleBody.replaceAll('#uuid#', componentKey);
        const start = `#${componentKey}-start`;
        const end = `#${componentKey}-end`;
        // 이거뭐하는지 까먹었네 뭐였지??..
        // 동적으로 처리하는것같은데.. css 에서는 동적으로 처리하는걸 지향 해야될것같은데 이기능 deprecated 할지 고민중
        // const before = StringUtils.regexExecArrayReplace(styleBody, /(\$\{.*?\}\$)/g, (data) => {
        //   // console.log('동적?', `var(--domrender-${data[0]})`)
        //   return `var(--domrender-${data[0]})`;
        // });
        // const before = styleBody;
        // console.log('before@@@@@@@@@@@', before)
        const cssParser = new _dooboostore_core_parser_css_CssParser__WEBPACK_IMPORTED_MODULE_24__.CssParser(styleBody);
        const processRule = (rule) => {
            if ((0,_dooboostore_core_parser_css_CssParser__WEBPACK_IMPORTED_MODULE_24__.isStyleRule)(rule)) {
                const isRoot = rule.selector.includes(':root');
                if (!isRoot) {
                    // Handle comma-separated selectors
                    const selectors = rule.selector.split(',').map(s => s.trim());
                    const transformedSelectors = selectors.map(selector => this.generateRuleSelector(start, end, selector));
                    rule.selector = transformedSelectors.join(', ');
                }
            }
            else if ((0,_dooboostore_core_parser_css_CssParser__WEBPACK_IMPORTED_MODULE_24__.isAtRule)(rule)) {
                if (rule.name === 'media') {
                    const hasRoot = rule.children.some(childRule => (0,_dooboostore_core_parser_css_CssParser__WEBPACK_IMPORTED_MODULE_24__.isStyleRule)(childRule) && childRule.selector.includes(':root'));
                    if (!hasRoot) {
                        rule.children.forEach(childRule => {
                            if ((0,_dooboostore_core_parser_css_CssParser__WEBPACK_IMPORTED_MODULE_24__.isStyleRule)(childRule)) {
                                const selectors = childRule.selector.split(',').map(s => s.trim());
                                const transformedSelectors = selectors.map(selector => this.generateRuleSelector(start, end, selector));
                                childRule.selector = transformedSelectors.join(', ');
                            }
                        });
                    }
                }
            }
        };
        cssParser.rules.forEach(processRule);
        let after = cssParser.stringify();
        // let after = StringUtils.regexExecArrayReplace(stringify as string, /(var\(--domrender-(\$\{.*?\}\$)?\))/g, (data) => {
        //   return data[2];
        // });
        // console.log('after@@@@@@@@@@@', after)
        // 여기서 선언 selector 자체에도 처리가능하도록 한다 20250518
        after = after.replaceAll('/*$', '${');
        after = after.replaceAll('$*/', '}$');
        if (styleTagWrap) {
            styleBody = `<style id='${componentKey}-style' domstyle>${after}</style>`;
        }
        // console.log('style!!!!!!!!!!!!!!2', styleBody);
        return styleBody;
    }
    applyEvent(obj, fragment = this.dataSet.fragment, config) {
        this.dataSet.config.eventManager.applyEvent(obj, this.dataSet.config.eventManager.findAttrElements(fragment, config), config);
    }
    onRenderedEvent(obj, nodes, config) {
        this.dataSet.config.eventManager.onRenderedEvent(obj, nodes, config);
    }
    getAttribute(element, attr) {
        const data = element.getAttribute(attr);
        return data;
    }
    getAttributeAndDelete(element, attr) {
        const data = element.getAttribute(attr);
        // if (data)
        //  element.setAttribute(`origin-${attr}`, data);
        element.removeAttribute(attr);
        return data;
    }
    getDrAppendAttributeAndDelete(element, obj) {
        let data = element.getAttribute(RawSet.DR_APPENDER_NAME);
        // if (data && !/\[[0-9]+\]/g.test(data)) {
        if (data && !/\[.+\]/g.test(data)) {
            const currentIndex = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn(`${_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(data)}?.length -1`, obj);
            // console.log('------?', currentIndex)
            // if (currentIndex === undefined || isNaN(currentIndex)) {
            //     return undefined;
            // }
            // const currentIndex = ScriptUtils.evalReturn(`${data}.length`, obj);
            data = `${data}[${currentIndex}]`;
            element.setAttribute(RawSet.DR_APPENDER_NAME, data);
            // element.setAttribute(RawSet.DR_IF_NAME, data);
            // element.setAttribute('dr-id', data);
            // console.log('-->', element)
        }
        // if (data && !/\.childs\[[0-9]+\]/g.test(data)) {
        //     const currentIndex = ScriptUtils.evalReturn(`${data}.currentIndex`, obj);
        //     data = `${data}.childs[${currentIndex}]`;
        //     element.setAttribute(RawSet.DR_APPENDER_NAME, data)
        // }
        element.removeAttribute(RawSet.DR_APPENDER_NAME);
        return data;
    }
    replaceBody(genNode) {
        this.childAllRemove();
        this.point.start.parentNode?.insertBefore(genNode, this.point.start.nextSibling); // 중요 start checkpoint 다음인 end checkpoint 앞에 넣는다. 즉 중간 껴넣기 (나중에 meta tag로 변경을 해도될듯하긴한데..)
    }
    // 중요 important
    static checkPointCreates(element, obj, config) {
        // console.log('!@@@@@@@@@@@@@@@@', obj);
        // const NodeFilter = (config.window as any).NodeFilter;
        // const thisVariableName = (element as any).__domrender_this_variable_name;
        // let html = element instanceof DocumentFragment ? ElementUtils.toInnerHTML(element, {document: config.window.document}) : (element as HTMLElement).outerHTML;
        // console.log('==============html-->', element, html);
        const NodeFilter = config.window.NodeFilter;
        const Node = config.window.Node;
        const processedNodes = new Set();
        const findNodes = _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__.NodeUtils.findNodes(element, node => {
            // console.log('nodeType', node.nodeType, node, (node as any).tagName, (node as any).data);
            // for (const processedNode of processedNodes) {
            //   console.log('pre check!!', Array.from(processedNodes),processedNode !== node , processedNode.contains(node));
            //   // if(processedNode.contains(node)){
            //   console.log('---prechecker--html', (processedNode as HTMLElement).outerHTML,'------', (node as HTMLElement).outerHTML);
            //   // }
            //   if (processedNode !== node && processedNode.contains(node)) {
            //     console.log('acceptNodeReturn contain', NodeFilter.FILTER_REJECT);
            //     return NodeFilter.FILTER_REJECT;
            //   }
            // }
            if (node.nodeType === Node.TEXT_NODE) {
                // console.log('nodeText--->', node.textContent)
                // console.log('????????', node.parentElement, node.parentElement?.getAttribute('dr-pre'));
                // console.log('???????/',node.textContent, node.parentElement?.getAttribute('dr-pre'))
                // TODO: 나중에
                // const between = StringUtils.betweenRegexpStr('[$#]\\{', '\\}', StringUtils.deleteEnter((node as Text).data ?? ''))
                const between = RawSet.expressionGroups(_dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.deleteEnter(node.data ?? ''));
                // console.log('bbbb', between)
                const r = between?.length > 0
                    ? _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__.NodeUtils.FindNodesFilterResult.MATCH_AND_SKIP_CHILDREN
                    : _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__.NodeUtils.FindNodesFilterResult.NO_MATCH_AND_SKIP_CHILDREN;
                // console.log('acceptNodeReturn node', r);
                return r;
                // return /\$\{.*?\}/g.test(StringUtils.deleteEnter((node as Text).data ?? '')) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
                // return /[$#]\{.*?\}/g.test(StringUtils.deleteEnter((node as Text).data ?? '')) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
            }
            else if (node.nodeType === Node.ELEMENT_NODE) {
                const element = node;
                // if (typeof Window === 'undefined' && element.getAttribute('ttt') === 'visual') {
                //   return NodeFilter.FILTER_REJECT;
                // }
                // console.log('nodeHTML-->', element.outerHTML);
                if (element.hasAttribute(RawSet.DR_PRE_NAME)) {
                    let r = _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__.NodeUtils.FindNodesFilterResult.NO_MATCH_AND_SKIP_CHILDREN;
                    // console.log('acceptNodeReturn', r);
                    return r;
                }
                if (element.hasAttribute(_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.attrAttrName)) {
                    // console.log('elementAttrAttrName-->', element.outerHTML);
                    const script = element.getAttribute(_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.attrAttrName) ?? '';
                    // console.log('scriptscriptscriptscriptscriptscript,', script)
                    // const keyValuePairs = Array.from(script.matchAll(/['"]?(\w+)['"]?:\s*([^,}]+)/g))
                    const keyValuePairs = Array.from(script.matchAll(/['"]?([\w-_]+)['"]?:\s*([^,}]+)/g))
                        .map(match => ({
                        key: match[1],
                        value: match[2]
                    }));
                    (keyValuePairs ?? []).forEach(it => {
                        element.setAttribute(it.key, '${' + it.value + '}$');
                    });
                }
                // element.setAttribute('dr-event-click', 'console.log(11)');
                const targetElementIs = element.getAttribute(RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME);
                const targetElementNames = config.targetElements?.map(it => it.name.toLowerCase()) ?? [];
                targetElementNames.push(...RawSet.DR_ELEMENTS);
                const isElement = targetElementNames.includes(element.tagName.toLowerCase()) ||
                    targetElementNames.includes(targetElementIs?.toLowerCase());
                // if (isElement) {
                //   (element as HTMLElement).style.display = 'none';
                //   (element as HTMLElement).style.width = '100px';
                //   (element as HTMLElement).style.height = '100px';
                //   console.log((element as HTMLElement).outerHTML)
                // }
                // console.log('------targetElementIstargetElementIs>', targetElementNames, '---', isElement, targetElementIs);
                // const targetAttrNames = (config.targetAttrs?.map(it => it.name) ?? []).concat([...RawSet.DR_ATTRIBUTES,...EventManager.RAWSET_CHECK_ATTRIBUTE]);
                const targetAttrNames = (config.targetAttrs?.map(it => it.name) ?? []).concat([...RawSet.DR_ATTRIBUTES]);
                const normalAttrs = new Map();
                const linkVariables = new Map();
                const linkNames = _events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.linkAttrs.map(it => it.name);
                const isAttr = element.getAttributeNames().filter(it => !_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.noDetectAttr.includes(it)).filter(it => {
                    const value = element.getAttribute(it)?.trim();
                    // link일때
                    if (value && linkNames.includes(it)) {
                        linkVariables.set(it, value);
                    }
                    else if (value && RawSet.isExpression(value)) {
                        // 표현식있을떄
                        const variablePaths = RawSet.expressionGroups(value).map(it => ({
                            origin: it[0].trim(),
                            inner: it[1].trim()
                        }));
                        const isStringTemplate = variablePaths.length > 1 || (variablePaths[0] && variablePaths[0].origin !== value);
                        // normal Attribute 초반에 셋팅해주기.
                        // TODO: 이거 하긴했는데 사이드 이팩트?
                        // let variablePath: string = RawSet.expressionGroups(value)[0][1];
                        // const originVariable = variablePath;
                        // variablePath = variablePath.replace(/#[^#]*#/g, '({})');
                        // const optionalChainPath = ObjectUtils.Path.toOptionalChainPath(variablePath);
                        // const cval = ObjectUtils.Script.evaluateReturn(optionalChainPath, Object.assign(obj));
                        let targetScript = value;
                        variablePaths.forEach(it => {
                            let r = it.inner.replace(/#[^#]*#/g, '({})');
                            r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(r);
                            targetScript = targetScript.replaceAll(it.origin, `\${${r}}`);
                        });
                        const cval = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn('`' + targetScript + '`', Object.assign(obj));
                        if (cval === null) {
                            element.removeAttribute(it);
                        }
                        else {
                            element.setAttribute(it, cval);
                        }
                        normalAttrs.set(it, { originalAttrValue: value, variablePaths: variablePaths, isStringTemplate });
                        // normalAttrs.set(it, originVariable);
                        // console.log('normalAttribute', it, variablePath);
                    }
                    // console.log(element.getAttribute(it), attrExpresion);
                    const isTargetAttr = targetAttrNames.includes(it.toLowerCase());
                    return isTargetAttr;
                }).length > 0;
                if (linkVariables.size) {
                    element.setAttribute(_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.linkTargetMapAttrName, JSON.stringify(Array.from(linkVariables.entries())));
                }
                // 기본 attribute를 처리하기위해
                if (normalAttrs.size) {
                    element.setAttribute(_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.normalAttrMapAttrName, JSON.stringify(Array.from(normalAttrs.entries())));
                }
                // if (isElement)  {
                //   element.setAttribute('www', '@this@');
                // }
                const r = isAttr || isElement ? _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__.NodeUtils.FindNodesFilterResult.MATCH_AND_SKIP_CHILDREN : _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__.NodeUtils.FindNodesFilterResult.NO_MATCH_AND_CONTINUE;
                // console.log('acceptNodeReturn element', r);
                return r;
            }
            const r = _dooboostore_core_web_node_NodeUtils__WEBPACK_IMPORTED_MODULE_33__.NodeUtils.FindNodesFilterResult.NO_MATCH_AND_CONTINUE;
            // console.log('acceptNodeReturn  nothing', r);
            return r;
        });
        const pars = [];
        let currentNode;
        const name = _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid();
        // console.log('name==', name);
        // eslint-disable-next-line no-cond-assign
        // while ((currentNode = nodeIterator?.nextNode())) {
        // console.log('findNodes~~', findNodes);
        for (const currentNode of findNodes) {
            // 여기에서 부모인거 인지시켜준다  위쪽 에서 다시찾을떄 걸러진다.. JSDOM ..이놈이 즉각적인 처리를 못해줘서 수동 검증 로직 넣었다.
            processedNodes.add(currentNode);
            // console.log('currentNode!!!!', currentNode);
            if (currentNode.nodeType === Node.TEXT_NODE) {
                const text = currentNode.textContent ?? '';
                const template = config.window.document?.createElement('template');
                if (!template)
                    break;
                // const a = StringUtils.regexExec(/\$\{.*?\}/g, text);
                // const a = StringUtils.regexExec(/[$#]\{.*?\}/g, text);
                // const a = StringUtils.betweenRegexpStr('[$#]\\{', '\\}', text); // <--TODO: 나중에..
                const groups = RawSet.expressionGroups(text);
                const map = groups.map(it => ({
                    uuid: `${_dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.alphabet(40)}_${obj?.constructor?.name}`,
                    content: it[0],
                    regexArr: it
                }));
                // console.log('create!!',map);
                let lasterIndex = 0;
                for (let i = 0; i < map.length; i++) {
                    const it = map[i];
                    // console.log('itttttttttttt', it);
                    const regexArr = it.regexArr;
                    // 중요: text경우 asdasd ${this.name}$ 이렇게 있다면 앞부분 asdasd <-- 이부분은 살려야되니깐 아래처럼 짜름
                    const preparedText = regexArr.input.substring(lasterIndex, regexArr.index);
                    // const preparedText = regexArr[1];
                    // const start = config.window.document.createElement('meta');
                    // start.setAttribute('id', `${it.uuid}-start`);
                    // const end = config.window.document.createElement('meta');
                    // end.setAttribute('id', `${it.uuid}-end`);
                    let type;
                    if (currentNode.parentNode && currentNode.parentNode.nodeName.toUpperCase() === 'STYLE') {
                        type = _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.STYLE_TEXT;
                    }
                    else {
                        type = _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.TEXT;
                    }
                    const node = config.window.document.createTextNode(preparedText);
                    const startEndPoint = RawSet.createStartEndPoint({ id: it.uuid, type }, config);
                    // layout setting
                    // console.log('createTextNode', node);
                    template.content.append(node); // expression 앞 부분 넣어줘야 앞부분 일반 text 안짤린다.
                    template.content.append(startEndPoint.start); // add start checkpoint
                    template.content.append(startEndPoint.end); // add end checkpoint
                    // content 안쪽 RawSet render 할때 start 와 end 사이에 fragment 연산해서 들어간다.
                    const fragment = config.window.document.createDocumentFragment();
                    fragment.append(config.window.document.createTextNode(it.content));
                    // (startEndPoint.start as any).khh = RandomUtils.decimal(0,10)
                    pars.push(new RawSet(it.uuid, type, {
                        start: startEndPoint.start,
                        node: currentNode,
                        end: startEndPoint.end,
                        parent: currentNode.parentNode
                        // thisVariableName: thisVariableName
                    }, { fragment: fragment, config: config }));
                    lasterIndex = regexArr.index + it.content.length;
                }
                template.content.append(config.window.document.createTextNode(text.substring(lasterIndex, text.length)));
                const p = currentNode?.parentNode;
                p?.replaceChild(template.content, currentNode); // <-- 여기서 text를 fragment로 replace했기때문에 추적 변경이 가능하다.
            }
            else if (currentNode.nodeType === Node.ELEMENT_NODE) {
                // const uuid = `${RandomUtils.alphabet(40)}___${obj?.constructor?.name}`;
                const uuid = `${_dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.alphabet(40)}`;
                const element = currentNode;
                // console.log('create ElementTarget', uuid, element.outerHTML);
                const fragment = config.window.document.createDocumentFragment();
                const elementType = _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.TARGET_ELEMENT;
                const startEndPoint = RawSet.createStartEndPoint({ node: element, id: uuid, type: elementType }, config);
                // 여기서 등록한 component 추가한다.
                const targetElementIs = element.getAttribute(RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME);
                const targetElementNames = config.targetElements?.map(it => it.name.toLowerCase()) ?? [];
                targetElementNames.push(...RawSet.DR_ELEMENTS);
                const isElement = targetElementNames.includes(element.tagName.toLowerCase()) ||
                    targetElementNames.includes(targetElementIs?.toLowerCase());
                // if (isElement) {
                //   (element as HTMLElement).style.display = 'none'
                // }
                // const isElement = targetElementNames.includes(element.tagName.toLowerCase());
                const targetAttrNames = (config.targetAttrs?.map(it => it.name) ?? []).concat(RawSet.DR_ATTRIBUTES);
                const isAttr = element.getAttributeNames().filter(it => targetAttrNames.includes(it.toLowerCase())).length > 0;
                currentNode?.parentNode?.insertBefore(startEndPoint.start, currentNode);
                currentNode?.parentNode?.insertBefore(startEndPoint.end, currentNode.nextSibling);
                fragment.append(currentNode);
                // const tempDiv = document.createElement('div');
                // tempDiv.appendChild(fragment.cloneNode(true)); // fragment 복사본 추가
                // console.log('------',tempDiv.innerHTML);
                // console.log();
                const rawSet = new RawSet(uuid, isElement ? elementType : isAttr ? _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.TARGET_ATTR : _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.UNKOWN, {
                    start: startEndPoint.start,
                    node: currentNode,
                    end: startEndPoint.end,
                    parent: currentNode.parentNode
                    // thisVariableName: thisVariableName
                }, { config: config, fragment: fragment });
                pars.push(rawSet);
            }
        }
        // config
        const util = _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_4__.ElementUtils;
        // console.log('parsparsparsparsparsparsparsparsparspars', pars, name);
        return pars;
        // const lastpars: RawSet[] = []
        //
        // pars.forEach(it => {
        //   // it.uuid
        //   const parents = pars.filter(it => it.dataSet.fragment.getElementById(it.uuid+'-start'))
        //
        //   console.log('vvvvvvvvv', parents);
        //   if (parents.length>0) {
        //     parents.forEach(sit => {
        //       sit.dataSet.fragment.getElementById(sit.uuid + '-start')?.replaceWith(it.dataSet.fragment);
        //       it.dataSet.fragment.getElementById(sit.uuid + '-end').remove();
        //       console.log('rrr');
        //       // ElementUtils.toInnerHTML(it.dataSet.fragment, {document: config.window.document});
        //       // ElementUtils.toInnerHTML(it.dataSet.fragment
        //     });
        //   } else {
        //     lastpars.push(it)
        //   }
        // })
        // console.log('zzzzzz', lastpars);
        // return lastpars;
    }
    static createStartEndPoint(data, config) {
        if (data.type === _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.TARGET_ELEMENT && data.node) {
            const element = data.node;
            const start = config.window.document.createElement('meta');
            const end = config.window.document.createElement('meta');
            start.setAttribute('id', `${data.id}-start`);
            start.setAttribute('dr-start-point', '');
            const keys = element.getAttribute(RawSet.DR_KEY_OPTIONNAME);
            const thisPropertyType = element.getAttribute(RawSet.DR_THIS_PROPERTY_NAME);
            if (thisPropertyType) {
                start.setAttribute('type', _RawSetOperatorType__WEBPACK_IMPORTED_MODULE_23__.RawSetOperatorType.DR_THIS_PROPERTY);
            }
            if (keys) {
                element.removeAttribute(RawSet.DR_KEY_OPTIONNAME);
                start.setAttribute(RawSet.DR_KEY_OPTIONNAME, keys);
            }
            end.setAttribute('id', `${data.id}-end`);
            end.setAttribute('dr-end-point', '');
            return { start, end };
        }
        else if (data.type === _RawSetType__WEBPACK_IMPORTED_MODULE_21__.RawSetType.STYLE_TEXT) {
            return {
                start: config.window.document.createTextNode(`/*start text ${data.id}*/`),
                end: config.window.document.createTextNode(`/*end text ${data.id}*/`)
            };
        }
        else {
            // text
            return {
                start: config.window.document.createComment(`start text ${data.id}`),
                end: config.window.document.createComment(`end text ${data.id}`)
            };
        }
    }
    remove() {
        this.childAllRemove();
        this.point.end.remove();
        this.point.start.remove();
    }
    childAllRemove() {
        let next = this.point.start.nextSibling;
        while (next) {
            if (next === this.point.end) {
                break;
            }
            next.remove();
            next = this.point.start.nextSibling;
        }
    }
    childs(stopNext) {
        const childs = [];
        let next = this.point.start.nextSibling;
        while (next && next !== this.point.end) {
            if (stopNext?.(next)) {
                return;
            }
            childs.push(next);
            next = next.nextSibling;
        }
        return childs;
    }
    getHasRawSet(key) {
        let rawSet;
        this.childs(node => {
            const drKey = node.getAttribute?.(RawSet.DR_KEY_OPTIONNAME);
            if (drKey && drKey === key) {
                rawSet = node.rawSet;
                return true;
            }
            return false;
        });
        return rawSet;
    }
    static drItOtherEncoding(element, postFix) {
        const random = _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid() + postFix;
        const regex = /#it#/g;
        element
            .querySelectorAll(`[${RawSet.DR_IT_OPTIONNAME}], [${RawSet.DR_FOR_OF_NAME}], [${RawSet.DR_REPEAT_NAME}], [${RawSet.DR_APPENDER_NAME}]`)
            .forEach(it => {
            it.innerHTML = it.innerHTML.replace(regex, random);
        });
        return random;
    }
    static drItOtherDecoding(element, random) {
        element
            .querySelectorAll(`[${RawSet.DR_IT_OPTIONNAME}], [${RawSet.DR_FOR_OF_NAME}], [${RawSet.DR_REPEAT_NAME}], [${RawSet.DR_APPENDER_NAME}]`)
            .forEach(it => {
            it.innerHTML = it.innerHTML.replace(RegExp(random, 'g'), '#it#');
        });
    }
    static drVarDecoding(element, vars) {
        element.querySelectorAll(`[${RawSet.DR_THIS_NAME}]`).forEach(it => {
            vars
                .filter(vit => vit.value && vit.name)
                .forEach(vit => {
                it.innerHTML = it.innerHTML.replace(RegExp(vit.random, 'g'), vit.value);
            });
        });
    }
    static replaceInnerHTML(element, config) {
        const innerHTML = element.innerHTML;
        const tobe = (config.toBe = config.toBe ?? _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid());
        if (config.asIs instanceof RegExp) {
            element.innerHTML = innerHTML.replace(config.asIs, config.toBe);
        }
        else {
            element.innerHTML = innerHTML.replaceAll(config.asIs, config.toBe);
        }
        return tobe;
    }
    static drThisEncoding(element, drThis, config) {
        const thisRandom = (config.toBe = config?.toBe ?? _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid());
        // console.log('rrrrrrrrrrrrr', thisRandom);
        // const thisRegex = /(?<!(dr-|\.))this(?=.?)/g;
        // const thisRegex = /[^(dr\-)]this(?=.?)/g;
        // const thisRegex = /[^(dr\-)]this\./g;
        // safari 때문에 전위 검색 regex가 안됨 아 짜증나서 이걸로함.
        // element.querySelectorAll(`[${RawSet.DR_PRE_NAME}]`).forEach(it => {
        //     let message = it.innerHTML;
        // })
        element.querySelectorAll(`[${RawSet.DR_PRE_NAME}]`).forEach(it => {
            it.innerHTML = it.innerHTML.replace(config.asIs, thisRandom);
        });
        element.querySelectorAll(`[${RawSet.DR_THIS_NAME}]`).forEach(it => {
            // console.log('rrrrrrrrand?', drThis,config);
            let message = it.innerHTML;
            // StringUtils.regexExec(/([^(dr\-)])?this(?=.?)/g, message).reverse().forEach(it => {
            _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.regexExec(config.asIs, message)
                .reverse()
                .forEach(it => {
                message = message.substr(0, it.index) + message.substr(it.index).replace(it[0], `${it[1] ?? ''}${drThis}`);
            });
            it.innerHTML = message;
        });
        // console.log('changggg', element.innerHTML);
        let message = element.innerHTML;
        _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.regexExec(config.asIs, message)
            .reverse()
            .forEach(it => {
            message = message.substr(0, it.index) + message.substr(it.index).replace(it[0], `${it[1] ?? ''}${drThis}`);
        });
        element.innerHTML = message;
        return thisRandom;
    }
    static drThisBindEncoding(element, variable, config) {
        element.querySelectorAll(`[${RawSet.DR_THIS_NAME}]`).forEach(eIt => {
            let message = eIt.innerHTML;
            // StringUtils.regexExec(/([^(dr\-)])?this(?=.?)/g, message).reverse().forEach(it => {
            _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.regexExec(variable, message)
                .reverse()
                .forEach(it => {
                message =
                    message.substr(0, it.index) +
                        message.substr(it.index).replace(it[0], `${it[1] ?? ''}${eIt.getAttribute(RawSet.DR_THIS_NAME)}`);
            });
            eIt.innerHTML = message;
        });
        const targetElements = config.config.targetElements ?? [];
        const targetElementNames = targetElements
            .map(it => it.name.replaceAll('.', '\\.').replaceAll(':', '\\:'))
            .join(',');
        const thisRandom = _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid();
        // console.log('thisRandom', thisRandom, variable);
        element.querySelectorAll(targetElementNames).forEach(it => {
            it.innerHTML = it.innerHTML.replace(variable, thisRandom);
        });
        element.querySelectorAll(`[${RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME}]`).forEach(it => {
            it.innerHTML = it.innerHTML.replace(variable, thisRandom);
        });
        if (config.otherReplaceVariablePath) {
            let message = element.innerHTML;
            _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.regexExec(variable, message)
                .reverse()
                .forEach(it => {
                message =
                    message.substr(0, it.index) +
                        message.substr(it.index).replace(it[0], `${it[1] ?? ''}${config.otherReplaceVariablePath}`);
            });
            element.innerHTML = message;
        }
        return thisRandom;
    }
    static drThisBindDecoding(element, config) {
        const targetElements = config.config.targetElements ?? [];
        const targetElementNames = targetElements
            .map(it => it.name.replaceAll('.', '\\.').replaceAll(':', '\\:'))
            .join(',');
        element.querySelectorAll(targetElementNames).forEach(it => {
            it.innerHTML = it.innerHTML.replace(RegExp(config.asIs, 'g'), config.toBe);
        });
        element.querySelectorAll(`[${RawSet.DR_REPLACE_TARGET_ELEMENT_IS_NAME}]`).forEach(it => {
            it.innerHTML = it.innerHTML.replace(RegExp(config.asIs, 'g'), config.toBe);
        });
    }
    static drThisDecoding(element, config) {
        element.querySelectorAll(`[${RawSet.DR_PRE_NAME}]`).forEach(it => {
            it.innerHTML = it.innerHTML.replace(RegExp(config.asIs, 'g'), config.toBe);
        });
        element.querySelectorAll(`[${RawSet.DR_THIS_NAME}]`).forEach(it => {
            it.innerHTML = it.innerHTML.replace(RegExp(config.asIs, 'g'), config.toBe);
        });
    }
    static drFormOtherMoveAttr(element, as, to, config) {
        element.querySelectorAll(`[${RawSet.DR_FORM_NAME}]`).forEach(subElement => {
            const nodeIterator = config.window.document?.createNodeIterator(subElement, NodeFilter.SHOW_ELEMENT, {
                acceptNode(node) {
                    if (node.nodeType === Node.ELEMENT_NODE) {
                        const element = node;
                        return element.hasAttribute(as) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
                    }
                    else {
                        return NodeFilter.FILTER_REJECT;
                    }
                }
            });
            let node;
            // eslint-disable-next-line no-cond-assign
            while ((node = nodeIterator?.nextNode())) {
                const element = node;
                element.setAttribute(to, element.getAttribute(as) ?? '');
                element.removeAttribute(as);
            }
        });
    }
    static drVarEncoding(element, drVarOption) {
        const vars = (drVarOption?.split(',') ?? []).map(it => {
            const s = it.trim().split('=');
            const name = s[0]?.trim();
            const value = s[1]?.trim();
            return {
                name,
                value,
                // regex: RegExp('(?<!(dr-|\\.))var\\.' + s[0] + '(?=.?)', 'g'),
                regex: RegExp('\\$var\\.' + name + '(?=.?)', 'g'),
                random: _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid()
            };
        });
        // console.log('asd', element.innerHTML);
        // element.querySelectorAll(`[${RawSet.DR_THIS_NAME}]`).forEach(it => {
        element.querySelectorAll(`[${RawSet.DR_VAR_OPTIONNAME}]`).forEach(it => {
            vars
                .filter(vit => vit.value && vit.name)
                .forEach(vit => {
                it.innerHTML = it.innerHTML.replace(vit.regex, vit.random);
            });
        });
        vars
            .filter(vit => vit.value && vit.name)
            .forEach(vit => {
            element.innerHTML = element.innerHTML.replace(vit.regex, vit.value);
        });
        return vars;
    }
    static async drThisCreate(rawSet, element, drThis, drVarOption, drStripOption, obj, config, set) {
        // console.log('ttttttttttttttttttttt',element.innerHTML, drThis, set, obj);
        const fag = config.window.document?.createDocumentFragment();
        if (!fag) {
            return;
        }
        const targetElement = element.cloneNode(true);
        let targetObj = obj;
        if (set) {
            targetObj = set.obj;
            set.setTemplateStyle(await RawSet.fetchTemplateStyle(set));
            const style = RawSet.generateStyleTransform(set.styles ?? [], rawSet.uuid, true);
            targetElement.innerHTML = style + (set.template ?? '');
        }
        else {
            targetObj = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn(_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(drThis), obj);
        }
        const componentKey = rawSet.uuid;
        const renderScript = ` /*drThisCreate*/
        // console.log('-----', this.__render);
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.RENDER_VARNAME} = this.__render; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.RAWSET_VARNAME} = this.__render.rawSet; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.COMPONENT_VARNAME} = this.__render.component; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ELEMENT_VARNAME} = this.__render.element; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ROUTER_VARNAME} = this.__render.router; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.INNER_HTML_VARNAME} = this.__render.innerHTML; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ATTRIBUTE_VARNAME} = this.__render.attribute; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.PARENT_THIS_PATH_VARNAME} = this.__render.parentThisPath; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.CURRENT_THIS_VARNAME} = this.__render.currentThis; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.CURRENT_THIS_PATH_VARNAME} = this.__render.currentThisPath; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.PARENT_THIS_VARNAME} = this.__render.parentThis; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.NEAR_THIS_PATH_VARNAME} = this.__render.nearThisPath; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.NEAR_THIS_VARNAME} = this.__render.nearThis; 
        var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.CREATOR_META_DATA_VARNAME} = this.__render.creatorMetaData;
      `;
        const parentThisPath = rawSet.findParentThisPath();
        const parentThis = rawSet.findParentThis(obj);
        const nearThisPath = rawSet.findNearThisPath();
        const nearThis = rawSet.findNearThis(obj);
        // console.log('ttttttttttttttttt',parentThisPath, parentThis, nearThisPath, nearThis);
        // console.log('-element.innerHTMLelement.innerHTMLelement.innerHTML',element.innerHTML);
        let render = {
            renderScript: renderScript,
            element: element,
            getElement: () => config.window.document.querySelector(`[class*="${rawSet.uuid}"]`),
            innerHTML: element.innerHTML,
            // attribute: ObjectUtils.toDeleteKey(attribute, [...Object.values(RawSet.drAttrsOriginName), ...Object.values(EventManager.VARNAMES)]),
            rawSet: rawSet,
            router: config.router,
            componentKey: componentKey,
            currentThis: targetObj,
            currentThisPath: drThis,
            parentThisPath: parentThisPath,
            parentThis: parentThis,
            nearThisPath: nearThisPath,
            nearThis: nearThis,
            scripts: _events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.setBindProperty(config.scripts ?? {}, obj)
        };
        // const attribute = DomUtils.getAttributeToObject(element);
        render.attribute = RawSet.getAttributeObject(element, { script: renderScript, obj: obj, renderData: render });
        render = Object.freeze(render);
        // dr-on-create data onCreateRender
        const onCreateDataScript = `return {rootParent: this, render: this.__render}`;
        const onCreateDataParam = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluate(onCreateDataScript, Object.assign(obj, { __render: render }));
        if ((0,_lifecycle_OnCreateRenderData__WEBPACK_IMPORTED_MODULE_25__.isOnCreateRenderData)(targetObj)) {
            targetObj?.onCreateRenderData(onCreateDataParam);
        }
        // 부모에게도 자식 this 생성된거 알려주는 callback
        if (onCreateDataParam?.render?.parentThis && (0,_lifecycle_OnCreatedThisChild__WEBPACK_IMPORTED_MODULE_29__.isOnCreatedThisChild)(onCreateDataParam?.render?.parentThis)) {
            onCreateDataParam.render.parentThis.onCreatedThisChild(targetObj, onCreateDataParam);
        }
        // dr-on-create onCreateRender
        const onCreate = element.getAttribute(RawSet.DR_ON_CREATE_ARGUMENTS_OPTIONNAME);
        let createParam = [];
        if (onCreate) {
            createParam = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn({ bodyScript: renderScript, returnScript: _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(onCreate) }, obj);
            if (!Array.isArray(createParam)) {
                createParam = [createParam];
            }
        }
        if ((0,_lifecycle_OnCreateRender__WEBPACK_IMPORTED_MODULE_26__.isOnCreateRender)(targetObj)) {
            targetObj.onCreateRender(...createParam);
        }
        // console.log('매번타나?');
        // 중요 dr-normal-attr-map
        // const normalAttrMap = element.getAttribute(EventManager.normalAttrMapAttrName);
        const targetAttrObject = RawSet.getAttributeObject(element, { script: renderScript, obj: obj, renderData: render });
        if (targetAttrObject) {
            rawSet.dataSet.render ??= {};
            rawSet.dataSet.render.attribute = targetAttrObject;
            Object.entries(targetAttrObject).forEach(([key, cval], index) => {
                // console.log('ooooooooooooooooo', key, cval);
                // const script = `${renderScript} return ${value} `;
                // const cval = ScriptUtils.eval(script, Object.assign(obj, { __render: render }));
                // // element.setAttribute(key, cval);
                if ((0,_lifecycle_OnChangeAttrRender__WEBPACK_IMPORTED_MODULE_27__.isOnChangeAttrRender)(targetObj)) {
                    targetObj.onChangeAttrRender(key, cval, { rawSet: rawSet });
                }
            });
        }
        // dr-on-component-init
        // const oninit = element.getAttribute(`${EventManager.attrPrefix}on-component-init`); // dr-on-component-init
        const oninit = element.getAttribute(RawSet.DR_ON_CREATED_CALLBACK_OPTIONNAME); // dr-on-component-init
        // console.log('--------drThisCreate!!!', oninit)
        if (oninit) {
            const script = `${renderScript}  ${oninit} `;
            _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluate(script, Object.assign(obj, { __render: render }));
        }
        targetElement.querySelectorAll(_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.attrNames.map(it => `[${it}]`).join(',')).forEach(it => {
            it.setAttribute(_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ownerVariablePathAttrName, 'this');
        });
        // console.log('targetElement',targetElement);
        // attribute
        // const componentName = element.getAttribute(RawSet.DR_COMPONENT_NAME_OPTIONNAME) ?? 'component';
        // const componentNameReplaceKey = RandomUtils.uuid();
        // if (componentName) {
        //   RawSet.replaceInnerHTML(element, {asIs: `#${componentName}#`, toBe: 'this'})
        // }
        // const innerHTMLName = element.getAttribute(RawSet.DR_COMPONENT_INNER_HTML_NAME_OPTIONNAME) ?? 'innerHTML';
        // const innerHTMLNameReplaceKey = RandomUtils.uuid();
        // if (innerHTMLName) {
        //   RawSet.replaceInnerHTML(element, {asIs: `#${innerHTMLName}#`, toBe: innerHTMLNameReplaceKey})
        // }
        rawSet.point.innerHTML = element.innerHTML;
        const innerText = element.textContent?.trim() ?? '';
        const escapedInnerHTML = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_34__.ConvertUtils.escapeHTML(element.innerHTML);
        // 이걸 왜 뺐었지... 다시넣었음  그런데 조금 로직이.. 검증이..
        const innerHTMLName = targetElement.getAttribute(RawSet.DR_INNER_HTML_NAME_OPTIONNAME) ?? 'innerHTML';
        const innerTEXTName = targetElement.getAttribute(RawSet.DR_INNER_TEXT_NAME_OPTIONNAME) ?? 'innerTEXT';
        const innerHTMLEscapedName = targetElement.getAttribute(RawSet.DR_INNER_HTML_ESCAPED_NAME_OPTIONNAME) ?? 'innerHTMLEscaped';
        const templateReplacements = [];
        if (innerHTMLName) {
            templateReplacements.push({
                regex: new RegExp(`#${innerHTMLName}#`, 'g'),
                callback: () => element.innerHTML
            });
        }
        if (innerTEXTName) {
            templateReplacements.push({
                regex: new RegExp(`#${innerTEXTName}#`, 'g'),
                callback: () => innerText
            });
        }
        if (innerHTMLEscapedName) {
            templateReplacements.push({
                regex: new RegExp(`#${innerHTMLEscapedName}#`, 'g'),
                callback: () => escapedInnerHTML
            });
        }
        if (templateReplacements.length > 0) {
            targetElement.innerHTML = _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.replaceSequentially(targetElement.innerHTML, templateReplacements);
        }
        // console.log('aa-asIs', targetElement.innerHTML);
        const optionThisName = targetElement.getAttribute(RawSet.DR_THIS_NAME_OPTIONNAME);
        // console.log('11111111111111', optionThisName)
        targetElement
            .getAttributeNames()
            .forEach(it => targetElement.setAttribute(it, targetElement.getAttribute(it).replace(/#this#/g, drThis)));
        const thisRandom = this.drThisEncoding(targetElement, drThis, { asIs: /@this@/g });
        // console.log('@@@@@@@@@@@@@0', thisRandom);
        // let thisNameRandom: string | undefined = undefined;
        if (optionThisName) {
            // console.log('-----0', element.innerHTML, '\n', targetElement.innerHTML)
            targetElement.innerHTML = targetElement.innerHTML.replaceAll(`@${optionThisName}@`, drThis);
            // console.log('-----1', element.innerHTML, '\n', targetElement.innerHTML)
            // thisNameRandom = this.drThisBindEncoding(targetElement, new RegExp(`@${optionThisName}@`, 'g'), {config: config, otherReplaceVariablePath: drThis});
        }
        const nearThisRandom = this.drThisBindEncoding(targetElement, /@nearThis@/g, {
            config: config,
            otherReplaceVariablePath: rawSet.findNearThisPath()
        });
        const parentThisRandom = this.drThisBindEncoding(targetElement, /@parentThis@/g, {
            config: config,
            otherReplaceVariablePath: rawSet.findParentThisPath()
        });
        // console.log('@@@@@@@@@@@@@1', targetElement.innerHTML, rawSet.findParentThisPath());
        // console.log('@@@@@@@@@@@@@-----------', rawSet.point?.parentRawSet?.point?.start, rawSet.point?.parentRawSet?.point?.start instanceof HTMLMetaElement);
        // if (rawSet.point?.parentRawSet?.point?.start instanceof HTMLMetaElement) {
        // console.log('@@@@@@@@@@@@@-----------', rawSet.point?.parentRawSet?.point?.start.getAttribute('this-path'));
        // }
        // console.log('@@@@@@@@@@@@@2', targetElement.innerHTML);
        // const nearThisRandom = this.drThisEncoding(targetElement, rawSet.findNearThisPath(), {asIs: /@nearThis@/g});
        // const parentThisRandom = this.drThisEncoding(targetElement, rawSet.findParentThisPath(), {asIs: /@parentThis@/g});
        // console.log('aa-toBe', targetElement.innerHTML);
        // console.log('------', rawSet.findNearThisPath());
        // console.log('------', rawSet.findParentThisPath());
        const vars = this.drVarEncoding(targetElement, drVarOption);
        this.drVarDecoding(targetElement, vars);
        this.drThisDecoding(targetElement, { asIs: thisRandom, toBe: '@this@' });
        // if (optionThisName && thisNameRandom)
        //   this.drThisBindDecoding(targetElement, {config: config, asIs: thisNameRandom, toBe: `@${optionThisName}@`});
        this.drThisBindDecoding(targetElement, { config: config, asIs: nearThisRandom, toBe: '@nearThis@' });
        this.drThisBindDecoding(targetElement, { config: config, asIs: parentThisRandom, toBe: '@parentThis@' });
        // if (componentName) {
        //   RawSet.replaceInnerHTML(element, {asIs: componentNameReplaceKey, toBe: `#${componentName}#`})
        // }
        // if (innerHTMLName) {
        //   RawSet.replaceInnerHTML(targetElement, {asIs: innerHTMLNameReplaceKey, toBe: `#${innerHTMLName}#`})
        // }
        // console.log('ddddddddddddd', targetElement.innerHTML);
        if (drStripOption && (drStripOption === true || drStripOption === 'true')) {
            // console.log('------childNodes', Array.from(n.childNodes))
            Array.from(targetElement.childNodes).forEach(it => fag.append(it));
        }
        else {
            targetElement.classList.add(`${rawSet.uuid}`);
            fag.append(targetElement);
        }
        // (fag as any).__domrender_this_variable_name = drThis;
        // console.log('set __domrender_this_variable_name', (fag as any).__domrender_this_variable_name)
        return fag;
    }
    static async fetchTemplateStyle(set) {
        // const id = RandomUtils.getRandomString(20);
        const stylePromises = [];
        const templatePromise = set.template && set.template.startsWith('lazy://')
            ? (await fetch(set.template.substring(6))).text()
            : Promise.resolve(set.template);
        if (Array.isArray(set.styles)) {
            for (let i = 0; set.styles && i < (set.styles.length ?? 0); i++) {
                const it = set.styles[i];
                stylePromises.push(it.startsWith('lazy://') ? (await fetch(it.substring(6))).text() : Promise.resolve(it));
            }
        }
        else if (set.styles) {
            stylePromises.push(Promise.resolve(set.styles));
        }
        // const tempTemplate = config.window.document.createElement('template');
        // tempTemplate.innerHTML = await templatePromise;
        // const tempContainer = config.window.document.createElement('div');
        return {
            template: await templatePromise,
            styles: await Promise.all(stylePromises)
        };
    }
    static createComponentTargetAttribute(name, getThisObj, factory) {
        const targetAttribute = {
            name,
            callBack(element, attrValue, obj, rawSet) {
                const thisObj = getThisObj(element, attrValue, obj, rawSet);
                const data = factory(element, attrValue, obj, rawSet);
                // rawSet.point.thisVariableName = (data as any).__domrender_this_variable_name;
                if (thisObj) {
                    // const i = thisObj.__domrender_component_new = (thisObj.__domrender_component_new ?? new Proxy({}, new DomRenderFinalProxy())) as CreatorMetaData;
                    // i.thisVariableName = rawSet.point.thisVariableName;
                    // i.rawSet = rawSet;
                    // i.innerHTML = element.innerHTML;
                    // i.rootCreator = new Proxy(obj, new DomRenderFinalProxy());
                    // i.creator = new Proxy(rawSet.point.thisVariableName ? ScriptUtils.evalReturn(rawSet.point.thisVariableName, obj) : obj, new DomRenderFinalProxy());
                }
                return data;
            }
        };
        return targetAttribute;
    }
    static createComponentTargetElement({ name, objFactory, template = '', styles = [], noStrip }) {
        const targetElement = {
            name,
            styles,
            template,
            noStrip,
            async callBack(element, obj, rawSet, attrs, config) {
                const templateStyle = await RawSet.fetchTemplateStyle({ template: this.template, styles: this.styles });
                this.template = templateStyle.template;
                this.styles = templateStyle.styles;
                obj.__domrender_components ??= {};
                const domrenderComponents = obj.__domrender_components;
                // debugger;
                const renderScript = ` /*createComponentTargetElement*/
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.RAWSET_VARNAME} = this.__render.rawSet; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.COMPONENT_VARNAME} = this.__render.component; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ELEMENT_VARNAME} = this.__render.element; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ROUTER_VARNAME} = this.__render.router; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.INNER_HTML_VARNAME} = this.__render.innerHTML; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.ATTRIBUTE_VARNAME} = this.__render.attribute; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.PARENT_THIS_PATH_VARNAME} = this.__render.parentThisPath; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.PARENT_THIS_VARNAME} = this.__render.parentThis; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.NEAR_THIS_PATH_VARNAME} = this.__render.nearThisPath; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.NEAR_THIS_VARNAME} = this.__render.nearThis; 
            var ${_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.CREATOR_META_DATA_VARNAME} = this.__render.creatorMetaData;
        `;
                const parentThisPath = rawSet.findParentThisPath();
                const parentThis = rawSet.findParentThis(obj);
                const nearThisPath = rawSet.findNearThisPath();
                const nearThis = rawSet.findNearThis(obj);
                let render = {
                    renderScript,
                    element: element,
                    innerHTML: element.innerHTML,
                    // attribute: attribute,
                    getElement: () => config.window.document.querySelector(`[class*="${rawSet.uuid}"]`),
                    rawSet: rawSet,
                    router: config.router,
                    componentKey: rawSet.uuid,
                    nearThisPath: nearThisPath,
                    nearThis: nearThis,
                    parentThisPath: parentThisPath,
                    parentThis: parentThis,
                    scripts: _events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.setBindProperty(config.scripts ?? {}, obj)
                };
                const constructor = element.getAttribute(RawSet.DR_ON_CONSTRUCTOR_ARGUMENTS_OPTIONNAME);
                let constructorParam = [];
                // script 부분은 처리되어 바인딩 시켜준다
                render.attribute = RawSet.getAttributeObject(element, { script: renderScript, obj: obj, renderData: render });
                render = Object.freeze(render);
                //
                // // dr-constructor
                if (constructor) {
                    let param = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn({ bodyScript: renderScript, returnScript: _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(constructor) }, Object.assign(obj, { __render: render })) ?? [];
                    if (!Array.isArray(param)) {
                        param = [param];
                    }
                    constructorParam = param;
                }
                // // console.log('------22', attrs);
                const instance = (domrenderComponents[rawSet.uuid] = objFactory(element, obj, rawSet, constructorParam));
                render = {
                    currentThis: instance,
                    // creatorMetaData: i,
                    ...render
                };
                rawSet.dataSet.render = render;
                // 추적 및 destroy 위해.
                instance.__rawSet = rawSet;
                let applayTemplate = element.innerHTML;
                let applayTemplateText = element.textContent?.trim() ?? '';
                let applayTemplateEscape = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_34__.ConvertUtils.escapeHTML(element.innerHTML);
                let innerHTMLThisRandom;
                const componentName = element.getAttribute(RawSet.DR_VARIABLE_NAME_OPTIONNAME) ?? 'component';
                const innerHTMLName = element.getAttribute(RawSet.DR_INNER_HTML_NAME_OPTIONNAME) ?? 'innerHTML';
                const innerTEXTName = element.getAttribute(RawSet.DR_INNER_TEXT_NAME_OPTIONNAME) ?? 'innerTEXT';
                const innerHTMLEscapedName = element.getAttribute(RawSet.DR_INNER_HTML_ESCAPED_NAME_OPTIONNAME) ?? 'innerHTMLEscaped';
                // if (element.getAttribute(RawSet.DR_COMPONENT_VARIABLE_NAME_OPTIONNAME)) {
                //   console.log('vvvvvvv', element.getAttribute(RawSet.DR_COMPONENT_VARIABLE_NAME_OPTIONNAME));
                // }
                if (applayTemplate) {
                    // if (rawSet.point.thisVariableName) {
                    // 넘어온 innerHTML에 this가 있으면 해당안되게 우선 치환.
                    innerHTMLThisRandom = _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid();
                    applayTemplate = _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.replaceSequentially(applayTemplate, [
                        {
                            regex: /this\./g,
                            callback: () => innerHTMLThisRandom
                        },
                        {
                            regex: new RegExp(`#${componentName}#`, 'g'),
                            callback: () => nearThisPath
                        }
                    ]);
                    // }
                    // applayTemplate = applayTemplate.replace(RegExp(`#${componentName}#`, 'g'), 'this');
                }
                // applayTemplate = template.replace(RegExp(`#${innerHTMLName}#`, 'g'), applayTemplate);
                // RawSet.replaceInnerHTML(
                // applayTemplate = StringUtils.regexExecArrayReplace(this.template, RegExp(`#${innerHTMLName}#`, 'g'), applayTemplate)
                // applayTemplate = StringUtils.regexExecArrayReplace(this.template, [RegExp(`#${innerHTMLName}#`, 'g')], applayTemplate)
                applayTemplate = _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.replaceSequentially((this.template ?? ''), [
                    {
                        regex: new RegExp(`#${innerHTMLName}#`, 'g'),
                        callback: () => applayTemplate
                    },
                    {
                        regex: new RegExp(`#${innerTEXTName}#`, 'g'),
                        callback: () => applayTemplateText
                    },
                    {
                        regex: new RegExp(`#${innerHTMLEscapedName}#`, 'g'),
                        callback: () => applayTemplateEscape
                    }
                ]);
                // dr-on-component-init
                // const oninit = element.getAttribute(`${EventManager.attrPrefix}on-component-init`); // dr-on-component-init
                // const oninit = element.getAttribute(RawSet.DR_ON_CREATED_CALLBACK_OPTIONNAME); // dr-on-component-init
                // if (oninit) {
                //   const script = `${renderScript}  ${oninit} `;
                //   ObjectUtils.Script.eval(script, Object.assign(obj, {
                //     __render: render
                //   }));
                // }
                const style = RawSet.generateStyleTransform(this.styles, rawSet.uuid, true);
                element.innerHTML = style + (applayTemplate ?? '');
                // 여기서 targetElement의 옷을 벗긴다.
                // console.log('---createComponentTargetElement', element);
                let data = await RawSet.drThisCreate(rawSet, element, `this.__domrender_components.${rawSet.uuid}`, '', !noStrip, obj, config);
                // const tempDiv = document.createElement("div");
                // tempDiv.appendChild(data.cloneNode(true)); // 원본 보존
                // console.log('-------------ddddddddddddd', element.innerHTML, tempDiv.innerHTML);
                // let data = await RawSet.drThisCreate(rawSet, element, `this.__domrender_components.${componentKey}`, '', false, obj, config);
                // 넘어온 innerHTML에 this가 있는걸 다시 복호화해서 제대로 작동하도록한다. 부모에서의 this면 부모껄로 작동되게
                // console.log('!!!!!@', (data && innerHTMLThisRandom) ,innerHTMLThisRandom);
                if (data && innerHTMLThisRandom) {
                    const template = config.window.document.createElement('template');
                    // console.log('------->', template.content);
                    // 브라우저에서는 이게되는데 linkedom 에서는 안된다. 그래서 innerhtml로 처리함
                    // template.content.append(data);
                    // console.log('-------', template.innerHTML);
                    // const d = config.window.document.createElement('div')
                    // d.innerHTML='<a></a>'
                    // console.log('-----XX', ElementUtils.toInnerHTML(data, {document: config.window.document}));
                    // template.innerHTML = template.innerHTML.replace(RegExp(innerHTMLThisRandom, 'g'), 'this.');
                    let s = _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_4__.ElementUtils.toInnerHTML(data, { document: config.window.document });
                    template.innerHTML = s.replace(RegExp(innerHTMLThisRandom, 'g'), 'this.');
                    ;
                    // console.log('ccc?', template.innerHTML);
                    // template.innerHTML = '<div>zzzzzzz</div>'
                    data = template.content;
                }
                // (data as any).render = render;
                return data;
            }
            // complete
        };
        return targetElement;
    }
    static isExpression(data) {
        // const reg = /(?:[$#]\{(?:(([$#]\{)??[^$#]?[^{]*?)\}[$#]))/g;
        const reg = /[$#]\{([\s\S.]*?)\}[$#]/g;
        return reg.test(data ?? '');
    }
    static expressionGroups(data) {
        // const reg = /(?:[$#]\{(?:(([$#]\{)??[^$#]*?)\}[$#]))/g;
        // const reg = /(?:[$#]\{(?:(([$#]\{)??[^$#]?[^{]*?)\}[$#]))/g;
        const reg = /[$#]\{([\s\S.]*?)\}[$#]/g;
        return _dooboostore_core_string_StringUtils__WEBPACK_IMPORTED_MODULE_1__.StringUtils.regexExec(reg, data ?? '');
    }
    static destroy(obj, parameter, config, destroyOptions = []) {
        // console.log('destroy destroydestroydestroydestroy', obj, parameter, config, destroyOptions);
        if (!destroyOptions.some(it => it === _DestroyOptionType__WEBPACK_IMPORTED_MODULE_20__.DestroyOptionType.NO_DESTROY)) {
            if (!destroyOptions.some(it => it === _DestroyOptionType__WEBPACK_IMPORTED_MODULE_20__.DestroyOptionType.NO_MESSENGER_DESTROY)) {
                if (config.messenger && obj) {
                    config.messenger.deleteChannelFromObj(obj);
                }
            }
            // console.log('------------destroy', obj);
            if ((0,_lifecycle_OnDestroyRender__WEBPACK_IMPORTED_MODULE_30__.isOnDestroyRender)(obj)) {
                obj.onDestroyRender?.(parameter);
            }
        }
    }
    findNearThis = (obj, rawSet = this) => {
        const path = this.findNearThisPath(rawSet);
        if (path) {
            const optionalPath = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(path);
            // console.log('ppppp-', path, optionalPath)
            return _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn(optionalPath, obj);
        }
    };
    findParentThis = (obj, rawSet = this) => {
        const path = this.findParentThisPath(rawSet);
        if (path) {
            const optionalPath = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(path);
            return _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn(optionalPath, obj);
        }
    };
    findNearThisPath = (rawSet = this) => {
        const paths = this.findThisPaths(rawSet);
        return paths[paths.length - 1];
    };
    findParentThisPath = (rawSet = this) => {
        const paths = this.findThisPaths(rawSet);
        return paths[paths.length - 2];
    };
    findThisPaths = (rawSet = this) => {
        const paths = [];
        const findPath = (rawSet) => {
            if (rawSet && rawSet.point) {
                // jsDom에서 instranceof HTMLMetaElement가 안먹히는것같아? 간혈적으로?
                if (rawSet.point?.start &&
                    'getAttribute' in rawSet.point.start &&
                    rawSet.point.start.getAttribute('this-path')) {
                    paths.push(rawSet.point.start.getAttribute('this-path'));
                }
                if (rawSet.point.parentRawSet)
                    findPath(rawSet.point.parentRawSet);
            }
        };
        findPath(rawSet);
        paths.push('this');
        return paths.reverse();
    };
    static getAttributeObject(element, config) {
        if (!element) {
            return undefined;
        }
        const attribute = _dooboostore_core_web_element_ElementUtils__WEBPACK_IMPORTED_MODULE_4__.ElementUtils.getAttributeToObject(element);
        const normalAttribute = attribute[_events_EventManager__WEBPACK_IMPORTED_MODULE_2__.EventManager.normalAttrMapAttrName];
        if (normalAttribute) {
            new Map(JSON.parse(normalAttribute)).forEach((v, k) => {
                const variablePaths = v.variablePaths;
                let targetScript = v.originalAttrValue.trim();
                //중요!! expression 하나만 존재 및 그외것들이 없을때  그자체가 값이다 그외 여러개 있으면 문자열 합치는걸로 간주한다.
                if (v.isStringTemplate) {
                    variablePaths.forEach(it => {
                        let r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(it.inner);
                        targetScript = targetScript.replaceAll(it.origin, `\${${r}}`);
                    });
                }
                else {
                    let r = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Path.toOptionalChainPath(variablePaths[0].inner);
                    targetScript = targetScript.replaceAll(variablePaths[0].origin, r);
                }
                const cval = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_32__.ObjectUtils.Script.evaluateReturn({ bodyScript: config.script, returnScript: v.isStringTemplate ? '`' + targetScript + '`' : targetScript }, Object.assign(config.obj, config.renderData ? { __render: config.renderData } : undefined));
                attribute[k] = cval;
            });
        }
        // console.log('attribute', attribute);
        return attribute;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/rawsets/RawSetOperatorType.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/rawsets/RawSetOperatorType.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RawSetOperatorType: () => (/* binding */ RawSetOperatorType)
/* harmony export */ });
var RawSetOperatorType;
(function (RawSetOperatorType) {
    RawSetOperatorType["DR_THIS_PROPERTY"] = "this-property";
})(RawSetOperatorType || (RawSetOperatorType = {}));


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/rawsets/RawSetType.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/rawsets/RawSetType.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RawSetType: () => (/* binding */ RawSetType)
/* harmony export */ });
var RawSetType;
(function (RawSetType) {
    RawSetType["TEXT"] = "TEXT";
    RawSetType["STYLE_TEXT"] = "STYLE_TEXT";
    RawSetType["TARGET_ELEMENT"] = "TARGET_ELEMENT";
    RawSetType["TARGET_ATTR"] = "TARGET_ATTR";
    RawSetType["UNKOWN"] = "UNKOWN";
})(RawSetType || (RawSetType = {}));


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/routers/HashRouter.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/routers/HashRouter.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HashRouter: () => (/* binding */ HashRouter)
/* harmony export */ });
/* harmony import */ var _Router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Router */ "../../packages/@dooboostore/dom-render/src/routers/Router.ts");
/* harmony import */ var _dooboostore_core_web_location_LocationUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core-web/location/LocationUtils */ "../../packages/@dooboostore/core-web/src/location/LocationUtils.ts");


class HashRouter extends _Router__WEBPACK_IMPORTED_MODULE_0__.Router {
    constructor(config) {
        super(config);
    }
    getSearchParams(data) {
        const hashSearch = _dooboostore_core_web_location_LocationUtils__WEBPACK_IMPORTED_MODULE_1__.LocationUtils.hashSearch(this.config.window);
        const searchParams = hashSearch ? new URLSearchParams(hashSearch) : (new URL(this.config.window.document.location.href)).searchParams;
        data?.delete?.forEach(it => {
            searchParams.delete(it);
        });
        data?.append?.forEach(it => {
            searchParams.append(it[0], it[1]);
        });
        return searchParams;
    }
    push(path, data, title = '') {
        if (path === '/') {
            return super.pushState(data, title, '/');
        }
        else {
            return super.pushState(data, title, `#${this.toUrl(path)}`);
        }
    }
    replace(path, data, title) {
        if (path === '/') {
            return super.replaceState(data, title, '/');
        }
        else {
            return super.replaceState(data, title, `#${this.toUrl(path)}`);
        }
    }
    setDeleteHashSearchParam(name, data, title) {
    }
    pushDeleteHashSearchParam(name, data, title) {
        const s = this.getHashSearchParams({ delete: Array.isArray(name) ? name : [name] });
        const size = Array.from(s.entries()).length;
        const href = `${this.config.window.location.pathname}${this.config.window.location.search}${size > 0 ? '#' + s.toString() : ''}`;
        super.pushState(data, title, href);
    }
    pushDeleteSearchParam(name, data, title) {
        const s = this.getSearchParams({ delete: Array.isArray(name) ? name : [name] });
        this.push({ searchParams: s }, data, title);
    }
    pushAddSearchParam(params, data, title) {
        const s = this.getSearchParams({ append: params });
        this.push({ searchParams: s }, data, title);
    }
    replaceDeleteHashSearchParam(name, data, title) {
        const s = this.getHashSearchParams({ delete: Array.isArray(name) ? name : [name] });
        const size = Array.from(s.entries()).length;
        const href = `${this.config.window.location.pathname}${this.config.window.location.search}${size > 0 ? '#' + s.toString() : ''}`;
        super.pushState(data, title, href);
    }
    replaceDeleteSearchParam(name, data, title) {
        const s = this.getSearchParams({ delete: Array.isArray(name) ? name : [name] });
        this.push({ searchParams: s }, data, title);
    }
    replaceAddSearchParam(params, data, title) {
        const s = this.getSearchParams({ append: params });
        this.push({ searchParams: s }, data, title);
    }
    getUrl() {
        return _dooboostore_core_web_location_LocationUtils__WEBPACK_IMPORTED_MODULE_1__.LocationUtils.hash(this.config.window) || '/';
    }
    getHref() {
        return this.config.window.location.href;
    }
    getPathName() {
        return _dooboostore_core_web_location_LocationUtils__WEBPACK_IMPORTED_MODULE_1__.LocationUtils.hashPath(this.config.window) || '/';
    }
    getHashSearchParams(data) {
        const hash = this.config.window.location.hash;
        const queryIndex = hash.indexOf('?');
        const searchParams = (queryIndex !== -1) ? new URLSearchParams(hash.slice(queryIndex + 1)) : new URLSearchParams();
        ;
        data?.delete?.forEach(it => {
            searchParams.delete(it);
        });
        data?.append?.forEach(it => {
            searchParams.append(it[0], it[1]);
        });
        return searchParams;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/routers/PathRouter.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/routers/PathRouter.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PathRouter: () => (/* binding */ PathRouter)
/* harmony export */ });
/* harmony import */ var _Router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Router */ "../../packages/@dooboostore/dom-render/src/routers/Router.ts");

class PathRouter extends _Router__WEBPACK_IMPORTED_MODULE_0__.Router {
    constructor(config) {
        super(config);
    }
    getSearchParams(data) {
        if (!this.config.window.document?.location?.href) {
            return new URLSearchParams();
        }
        const searchParams = (new URL(this.config.window.document.location?.href)).searchParams;
        data?.delete?.forEach(it => {
            searchParams.delete(it);
        });
        data?.append?.forEach(it => {
            searchParams.append(it[0], it[1]);
        });
        return searchParams;
    }
    push(path, data, title = '') {
        return super.pushState(data, title, this.toUrl(path));
    }
    replace(path, data, title = '') {
        return super.replaceState(data, title, this.toUrl(path));
    }
    pushDeleteSearchParam(name, data, title) {
        const s = this.getSearchParams({ delete: [name] });
        this.push({ searchParams: s }, data, title);
    }
    pushDeleteHashSearchParam(name, data, title) {
        const s = this.getHashSearchParams({ delete: [name] });
        const size = Array.from(s.entries()).length;
        const href = `${this.config.window.location?.pathname ?? '/'}${this.config.window.location?.search}${size > 0 ? '#' + s.toString() : ''}`;
        super.pushState(data, title, href);
    }
    pushAddSearchParam(params, data, title) {
        const s = this.getSearchParams({ append: params });
        this.push({ searchParams: s }, data, title);
    }
    replaceDeleteSearchParam(name, data, title) {
        const s = this.getSearchParams({ delete: Array.isArray(name) ? name : [name] });
        this.replace({ searchParams: s }, data, title);
    }
    replaceDeleteHashSearchParam(name, data, title) {
        const s = this.getHashSearchParams({ delete: Array.isArray(name) ? name : [name] });
        const size = Array.from(s.entries()).length;
        const href = `${this.config.window.location?.pathname ?? '/'}${this.config.window.location?.search}${size > 0 ? '#' + s.toString() : ''}`;
        super.replaceState(data, title, href);
    }
    replaceAddSearchParam(params, data, title) {
        const s = this.getSearchParams({ append: params });
        this.replace({ searchParams: s }, data, title);
    }
    getUrl() {
        if (!this.config.window.document?.location?.href) {
            return '/';
        }
        const url = new URL(this.config.window.document.location?.href);
        return url.pathname + url.search;
    }
    getHref() {
        return this.config.window.location?.href ?? '/';
    }
    getPathName() {
        return this.config.window.location?.pathname ?? '/';
    }
    getHashSearchParams(data) {
        // http://local.com/#wow=222&wow=bb&z=2
        const searchParams = new URLSearchParams(this.config.window.location?.hash.slice(1) ?? '');
        data?.delete?.forEach(it => {
            searchParams.delete(it);
        });
        data?.append?.forEach(it => {
            searchParams.append(it[0], it[1]);
        });
        return searchParams;
        // return undefined;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/routers/Router.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/routers/Router.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Router: () => (/* binding */ Router)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/convert/ConvertUtils */ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts");
/* harmony import */ var _dooboostore_core_message_BehaviorSubject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/message/BehaviorSubject */ "../../packages/@dooboostore/core/src/message/BehaviorSubject.ts");
/* harmony import */ var _dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/core/expression/Expression */ "../../packages/@dooboostore/core/src/expression/Expression.ts");



class Router {
    behaviorSubject;
    _config;
    constructor(config) {
        this._config = config;
        let routeData;
        if (config?.firstUrl) {
            const path = config.firstUrl.split('?');
            routeData = {
                url: config.firstUrl,
                path: path[0],
                searchParams: new URLSearchParams(path[1] ?? ''),
                router: this,
                triggerPoint: 'end'
            };
            this.behaviorSubject = new _dooboostore_core_message_BehaviorSubject__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject(routeData);
            this.go(config.firstUrl);
        }
        else {
            routeData = { ...this.getRouteData(), triggerPoint: 'end' };
            this.behaviorSubject = new _dooboostore_core_message_BehaviorSubject__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject(routeData);
        }
        this.config.window.addEventListener('popstate', (event) => {
            // domrender에서 발생하지 않은 즉 back, previous 일떄에도 이벤트가도록 처리
            // if(!isPopStateCurrentTargetDomrenderRouter(event.state)) {
            // console.log('-------');
            const routeData = { ...this.getRouteData(), triggerPoint: 'end' };
            this.behaviorSubject.next(routeData);
            // }
        });
    }
    get observable() {
        return this.behaviorSubject.asObservable();
    }
    get searchParamObject() {
        return _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_0__.ConvertUtils.toObject(this.getSearchParams());
    }
    get config() {
        return this._config;
    }
    getSearchFirstParamsObject(defaultValue) {
        const a = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_0__.ConvertUtils.toObject(this.getSearchParams(), { firstValue: true });
        return Object.assign({}, defaultValue, a);
    }
    getHashSearchFirstParamsObject() {
        return _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_0__.ConvertUtils.toObject(this.getHashSearchParams(), { firstValue: true });
    }
    // async attach(): Promise<void> {
    //   // const proxy = getDomRenderProxy(this.config.rootObject)
    //   // if (proxy) {
    //   //   const key = `___${EventManager.ROUTER_VARNAME}`;
    //   //   await proxy.render(key);
    //   // }
    // }
    testRegexp(regexp) {
        if (regexp) {
            const b = RegExp(regexp).test(this.getPathName());
            return b;
        }
        else {
            return false;
        }
    }
    test(urlExpression) {
        if (urlExpression && this.getPathData(urlExpression)) {
            return true;
        }
        else {
            return false;
        }
    }
    getRouteData(config) {
        let path = '';
        let url = '';
        if (config?.pathOrUrl) {
            let isUrl = false;
            try {
                new URL(config.pathOrUrl);
                isUrl = true;
            }
            catch {
                isUrl = false;
            }
            if (isUrl) {
                const u = new URL(config.pathOrUrl);
                path = u.pathname;
                url = u.pathname + u.search;
            }
            else {
                path = config.pathOrUrl.split('?')[0];
            }
        }
        else {
            path = this.getPathName();
            url = this.getUrl();
        }
        const newVar = {
            path: path,
            url: url,
            searchParams: this.getSearchParams()
        };
        const data = this.getData();
        if (data) {
            newVar.data = data;
        }
        if (config?.urlExpression) {
            const data = this.getPathData(config.urlExpression);
            if (data) {
                newVar.pathData = data;
            }
        }
        newVar.router = this;
        // newVar.currentTarget = config?.currentTarget;
        return Object.freeze(newVar);
    }
    pushState(data, title, path) {
        // data = this.config.changeStateConvertDate?this.config.changeStateConvertDate(data): data;
        // console.log('--->pushState', data);
        this.behaviorSubject.next({ ...this.getRouteData({ pathOrUrl: path }), triggerPoint: 'start' });
        this.config.window.history?.pushState(data, title ?? '', path);
        this.behaviorSubject.next({ ...this.getRouteData({ pathOrUrl: path }), triggerPoint: 'end' });
        return { data };
    }
    replaceState(data, title, path) {
        // data = this.config.changeStateConvertDate?this.config.changeStateConvertDate(data): data;
        // console.log('--->replaceState', data);
        this.behaviorSubject.next({ ...this.getRouteData({ pathOrUrl: path }), triggerPoint: 'start' });
        this.config.window.history?.replaceState(data, title ?? '', path);
        this.behaviorSubject.next({ ...this.getRouteData({ pathOrUrl: path }), triggerPoint: 'end' });
        return { data };
    }
    getData() {
        return this.config.window.history?.state;
    }
    getPathData(urlExpression, currentUrl = this.getPathName()) {
        return _dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_2__.Expression.Path.pathNameData(currentUrl, urlExpression);
    }
    back() {
        this.behaviorSubject.next({ ...this.getRouteData(), triggerPoint: 'start' });
        this.config.window.history.back();
        //en부분은 constructo의  this.config.window.addEventListener('popstate'   에서 받아서 처리된다 호출된다.
    }
    forward() {
        this.behaviorSubject.next({ ...this.getRouteData(), triggerPoint: 'start' });
        this.config.window.history?.forward();
        //end부분은 constructor의  this.config.window.addEventListener('popstate'   에서 받아서 처리된다 호출된다.
    }
    go(config) {
        if (typeof config === 'number') {
            this.behaviorSubject.next({ ...this.getRouteData(), triggerPoint: 'start' });
            this.config.window.history?.go(config);
            //end부분은 constructor의  this.config.window.addEventListener('popstate'   에서 받아서 처리된다 호출된다.
            return;
        }
        if (typeof config === 'string') {
            config = { path: config };
        }
        // let data: ChangeStateResult | undefined = undefined;
        if (config?.replace) {
            this.replace(config.path, config.data, config.title);
        }
        else {
            this.push(config.path, config.data, config.title);
        }
        // if (!this.config.disableAttach) {
        //   await this.attach();
        // }
        // 스크롤 제어 (기본값: true - 맨 위로 스크롤)
        if (config.scrollToTop !== false) {
            try {
                this._config.window?.scrollTo?.(0, 0);
            }
            catch (e) { }
        }
        // console.log('----------', data, config)
        // if (!config.disabledPopEvent) {
        //   this.dispatchPopStateEvent(config?.data);
        // }
    }
    toUrl(data) {
        console.log('toUrl', data);
        let targetPath;
        if (typeof data === 'string') {
            targetPath = data;
        }
        else {
            const tpath = data.path ?? this.getPathName();
            const s = data.searchParams ? _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_0__.ConvertUtils.toURLSearchParams(data.searchParams).toString() : '';
            // data.searchParams
            targetPath = `${tpath}${s.length > 0 ? '?' : ''}${s}`;
        }
        return targetPath;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/types/Types.ts":
/*!*****************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/types/Types.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomRenderFinalProxy: () => (/* binding */ DomRenderFinalProxy),
/* harmony export */   Shield: () => (/* binding */ Shield)
/* harmony export */ });
class Shield {
}
class DomRenderFinalProxy {
    set(target, p, value, receiver) {
        target[p] = value;
        return true;
    }
    get(target, p, receiver) {
        return target[p];
    }
    static final(obj) {
        obj._DomRender_isFinal = true;
        return obj;
    }
    static isFinal(obj) {
        return '_DomRender_isFinal' in obj;
    }
    static unFinal(obj) {
        delete obj._DomRender_isFinal;
        return obj;
    }
    has(target, p) {
        return p === '_DomRender_isFinal' || p in target;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/validators/NonPassValidator.ts":
/*!*********************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/validators/NonPassValidator.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NonPassValidator: () => (/* binding */ NonPassValidator)
/* harmony export */ });
/* harmony import */ var _Validator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Validator */ "../../packages/@dooboostore/dom-render/src/validators/Validator.ts");

class NonPassValidator extends _Validator__WEBPACK_IMPORTED_MODULE_0__.Validator {
    constructor(value, target, event, autoValid = true) {
        super(value, target, event, autoValid);
    }
    valid() {
        return false;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/validators/Validator.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/validators/Validator.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Validator: () => (/* binding */ Validator)
/* harmony export */ });
// export interface Valid<T = any, E = Element> {
//     valid(value?: T, target?: E, event?: Event): boolean;
// }
class Validator {
    _value;
    _target;
    _event;
    _autoValid;
    _autoValidAction;
    _validAction;
    constructor(_value, target, event, autoValid = true, autoValidAction = true) {
        this._value = _value;
        this.setTarget(target);
        this.setEvent(event);
        this.setAutoValid(autoValid);
        this.setAutoValidAction(autoValidAction);
    }
    getValidAction() {
        return this._validAction;
    }
    setValidAction(value) {
        this._validAction = value;
        return this;
    }
    getAutoValid() {
        return this._autoValid;
    }
    setAutoValid(autoValid) {
        this._autoValid = autoValid;
        return this;
    }
    getAutoValidAction() {
        return this._autoValidAction;
    }
    setAutoValidAction(autoValid) {
        this._autoValidAction = autoValid;
        return this;
    }
    getEvent() {
        return this._event;
    }
    setEvent(event) {
        if (event) {
            this._event = this.domRenderFinal(event);
        }
        return this;
    }
    getTarget() {
        return this._target;
    }
    targetFocus() {
        this._target?.focus?.();
    }
    targetReset() {
        this._target?.reset?.();
    }
    targetDispatchEvent(event) {
        return this._target?.dispatchEvent(event);
    }
    setTarget(target) {
        if (target) {
            this._target = this.domRenderFinal(target);
        }
        return this;
    }
    domRenderFinal(obj) {
        obj._DomRender_isFinal = true;
        return obj;
    }
    get value() {
        if (this._value === undefined || this._value === null) {
            this._value = this.getTarget()?.value;
        }
        return this._value;
    }
    set value(value) {
        // console.log('---?set?', value, this)
        this._value = value;
        this.tickValue(value);
    }
    tickValue(value) {
        this.changeValue(value);
        const target = this.getTarget();
        if (target && target?.value !== undefined && target?.value !== null) {
            try {
                target.value = this._value;
            }
            catch (e) {
                console.error('set value function is blocked ');
            }
        }
        if (this.getAutoValidAction()) {
            this.validAction();
        }
        else if (this.getAutoValid()) {
            this.valid();
        }
    }
    set(value, target, event) {
        this.setTarget(target);
        this.setEvent(event);
        this.value = value;
    }
    changeValue(value) {
    }
    get checked() {
        return this.getTarget()?.checked ?? false;
    }
    set checked(checked) {
        const target = this.getTarget();
        if (target) {
            target.checked = checked;
        }
    }
    get selectedIndex() {
        return this.getTarget()?.selectedIndex ?? -1;
    }
    set selectedIndex(selectedIndex) {
        const target = this.getTarget();
        if (target) {
            target.selectedIndex = selectedIndex;
        }
    }
    querySelector(selector) {
        return this.getTarget()?.querySelector(selector);
    }
    querySelectorALL(selector) {
        return this.getTarget()?.querySelectorAll(selector);
    }
    validAction() {
        const valid = this.valid();
        this.getValidAction()?.(valid, this.value, this.getTarget(), this.getEvent());
        return valid;
    }
    inValid() {
        return !this.valid();
    }
    ;
    allValid() {
        return this.valid() && this.childInValid();
    }
    allValidAction() {
        return this.validAction() && this.childInValidAction();
    }
    allInValid() {
        return !this.allValid();
    }
    allInValidAction() {
        return !this.allValidAction();
    }
    childValid() {
        return !this.childInValid();
    }
    childValue() {
        const data = {};
        this.childValidators().filter(([k, v]) => {
            data[k] = v.value;
        });
        return data;
    }
    childValidAction() {
        return !this.childInValidAction();
    }
    childInValid() {
        const inValid = this.childValidators().filter(([k, v]) => !v.valid());
        return inValid.length > 0;
    }
    childInValidValidator() {
        const inValid = this.childValidators().filter(([k, v]) => !v.valid());
        return inValid;
    }
    childInValidAction() {
        const inValid = this.childValidators().filter(([k, v]) => !v.validAction());
        return inValid.length > 0;
    }
    childValidator(name) {
        return Object.entries(this).find(([k, v]) => (k === name && (v instanceof Validator)))?.[1];
    }
    childValidators() {
        return Object.entries(this).filter(([k, v]) => (v instanceof Validator));
    }
    childValidValidator() {
        return this.childValidators().filter(it => it[1].valid());
    }
    syncValue() {
        this.value = this.getTarget()?.value;
    }
    allSyncValue() {
        this.childValidators().forEach(([k, e]) => {
            e.syncValue();
        });
    }
    get length() {
        return this.value?.length ?? 0;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/dom-render/src/validators/ValidatorArray.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/@dooboostore/dom-render/src/validators/ValidatorArray.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ValidatorArray: () => (/* binding */ ValidatorArray)
/* harmony export */ });
/* harmony import */ var _Validator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Validator */ "../../packages/@dooboostore/dom-render/src/validators/Validator.ts");
/* harmony import */ var _NonPassValidator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NonPassValidator */ "../../packages/@dooboostore/dom-render/src/validators/NonPassValidator.ts");


class ValidatorArray extends _Validator__WEBPACK_IMPORTED_MODULE_0__.Validator {
    _makeValidatorFactory = (value, target, event) => {
        return new _NonPassValidator__WEBPACK_IMPORTED_MODULE_1__.NonPassValidator(value, target, event);
    };
    constructor(value, target, event, autoValid = true) {
        super(value, target, event, autoValid);
    }
    getMakeValidatorFactory() {
        return this._makeValidatorFactory;
    }
    setMakeValidatorFactory(value) {
        this._makeValidatorFactory = value;
        return this;
    }
    setArrayValue(target, value, event) {
        this.value?.filter(it => {
            if (it.getTarget()) {
                return it.getTarget() === target;
            }
            else {
                return false;
            }
        }).forEach(it => {
            it.set(value, target, event);
        });
        this.tickValue(this.value);
    }
    addValidator(value, target, event) {
        if (!this.value) {
            this.value = [];
        }
        if (value instanceof _Validator__WEBPACK_IMPORTED_MODULE_0__.Validator) {
            this.value?.push(value);
        }
        else {
            this.value?.push(this.makeValidator(value, target, event));
        }
        this.tickValue(this.value);
    }
    allChecked(checked) {
        this.checked = checked;
        this.value?.forEach(it => {
            it.checked = checked;
        });
    }
    getValidators() {
        return this._value;
    }
    getValidator(e) {
        return this.value?.filter(it => it.getTarget() === e)[0];
    }
    getValidatorByValue(value) {
        const validatorByValue = this.getValidatorByValues(value)[0];
        return validatorByValue;
    }
    getValidatorByValues(value) {
        return this.value?.filter(it => it.value === value) ?? [];
    }
    removeElement(e) {
        const value = this.value;
        if (value) {
            this.value = value.filter(it => it.getTarget() !== e);
        }
    }
    makeValidator(value, target, event) {
        return this._makeValidatorFactory(value, target, event);
    }
    ;
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/DomRenderRootObject.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/DomRenderRootObject.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomRenderRootDefaultStyle: () => (/* binding */ DomRenderRootDefaultStyle),
/* harmony export */   DomRenderRootDefaultTemplate: () => (/* binding */ DomRenderRootDefaultTemplate),
/* harmony export */   DomRenderRootObject: () => (/* binding */ DomRenderRootObject)
/* harmony export */ });
/* harmony import */ var _component_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/ComponentRouterBase */ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentRouterBase.ts");

// export const DomRenderRootDefaultTemplate = '${@this@.name}$ <button dr-event-click="$router.go(\'/\')">aa</button><button dr-event-click="console.log(@this@.name); @this@.name = 22">aa</button>  ${@this@.rootRouter}$<dr-this value="${@this@.rootRouter}$"></dr-this>'
const DomRenderRootDefaultTemplate = '<dr-this value="${@this@.child}$"></dr-this>';
// export const DomRenderRootDefaultTemplate = '[${@this@.name}$]'
const DomRenderRootDefaultStyle = '';
// export const DomRenderRootDefaultTemplate = '<dr-this value="222 ${@this@.child}$"></dr-this>'
// export const DomRenderRootDefaultTemplate = '<dr-router-outlet></dr-router-outlet>'
// @Router({
//   path: ''
// })
class DomRenderRootObject extends _component_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_0__.ComponentRouterBase {
    name = 'domRenderRootObject';
    // rootRouter?: any;
    constructor() {
        super({ sameRouteNoApply: true });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/SimpleBootFront.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/SimpleBootFront.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleBootFront: () => (/* binding */ SimpleBootFront)
/* harmony export */ });
/* harmony import */ var _option_SimFrontOption__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./option/SimFrontOption */ "../../packages/@dooboostore/simple-boot-front/src/option/SimFrontOption.ts");
/* harmony import */ var _dooboostore_core_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/types */ "../../packages/@dooboostore/core/src/types.ts");
/* harmony import */ var _decorators_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _decorators_Script__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./decorators/Script */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Script.ts");
/* harmony import */ var _dooboostore_dom_render_DomRender__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/dom-render/DomRender */ "../../packages/@dooboostore/dom-render/src/DomRender.ts");
/* harmony import */ var _dooboostore_simple_boot_SimpleApplication__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/simple-boot/SimpleApplication */ "../../packages/@dooboostore/simple-boot/src/SimpleApplication.ts");
/* harmony import */ var _dooboostore_simple_boot_intent_Intent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/simple-boot/intent/Intent */ "../../packages/@dooboostore/simple-boot/src/intent/Intent.ts");
/* harmony import */ var _dooboostore_simple_boot_simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dooboostore/simple-boot/simstance/SimstanceManager */ "../../packages/@dooboostore/simple-boot/src/simstance/SimstanceManager.ts");
/* harmony import */ var _dooboostore_simple_boot_intent_IntentManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @dooboostore/simple-boot/intent/IntentManager */ "../../packages/@dooboostore/simple-boot/src/intent/IntentManager.ts");
/* harmony import */ var _dooboostore_simple_boot_route_RouterManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @dooboostore/simple-boot/route/RouterManager */ "../../packages/@dooboostore/simple-boot/src/route/RouterManager.ts");
/* harmony import */ var _dooboostore_dom_render_DomRenderProxy__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @dooboostore/dom-render/DomRenderProxy */ "../../packages/@dooboostore/dom-render/src/DomRenderProxy.ts");
/* harmony import */ var _dooboostore_dom_render_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @dooboostore/dom-render/rawsets/RawSet */ "../../packages/@dooboostore/dom-render/src/rawsets/RawSet.ts");
/* harmony import */ var _dooboostore_dom_render_routers_Router__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @dooboostore/dom-render/routers/Router */ "../../packages/@dooboostore/dom-render/src/routers/Router.ts");
/* harmony import */ var _dooboostore_dom_render_routers_HashRouter__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @dooboostore/dom-render/routers/HashRouter */ "../../packages/@dooboostore/dom-render/src/routers/HashRouter.ts");
/* harmony import */ var _dooboostore_dom_render_routers_PathRouter__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @dooboostore/dom-render/routers/PathRouter */ "../../packages/@dooboostore/dom-render/src/routers/PathRouter.ts");
/* harmony import */ var _DomRenderRootObject__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./DomRenderRootObject */ "../../packages/@dooboostore/simple-boot-front/src/DomRenderRootObject.ts");
/* harmony import */ var _dooboostore_simple_boot_decorators_route_Router__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/route/Router */ "../../packages/@dooboostore/simple-boot/src/decorators/route/Router.ts");
/* harmony import */ var _dooboostore_core_message_BehaviorSubject__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @dooboostore/core/message/BehaviorSubject */ "../../packages/@dooboostore/core/src/message/BehaviorSubject.ts");
/* harmony import */ var _dooboostore_core_message_operators_filter__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @dooboostore/core/message/operators/filter */ "../../packages/@dooboostore/core/src/message/operators/filter.ts");



















const isPopStateDataType = (state) => {
    return state && state.type === 'popstateData' && 'router' in state;
};
class SimpleBootFront extends _dooboostore_simple_boot_SimpleApplication__WEBPACK_IMPORTED_MODULE_5__.SimpleApplication {
    option;
    domRendoerExcludeProxy = [
        _dooboostore_simple_boot_SimpleApplication__WEBPACK_IMPORTED_MODULE_5__.SimpleApplication,
        _dooboostore_simple_boot_intent_IntentManager__WEBPACK_IMPORTED_MODULE_8__.IntentManager,
        _dooboostore_simple_boot_route_RouterManager__WEBPACK_IMPORTED_MODULE_9__.RouterManager,
        _dooboostore_simple_boot_simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_7__.SimstanceManager,
        _option_SimFrontOption__WEBPACK_IMPORTED_MODULE_0__.SimFrontOption,
        _dooboostore_dom_render_routers_Router__WEBPACK_IMPORTED_MODULE_12__.Router
    ];
    domRenderTargetElements = [];
    domRenderTargetAttrs = [];
    domRenderConfig;
    domRenderRouter;
    routerAndSettingData;
    // private rootRouterTargetElement?: Element;
    rootRouter;
    domRenderRootObject;
    routingSubject = new _dooboostore_core_message_BehaviorSubject__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject({ triggerPoint: 'initial' });
    constructor(option) {
        super(option);
        this.option = option;
        this.domRenderRootObject = new _DomRenderRootObject__WEBPACK_IMPORTED_MODULE_15__.DomRenderRootObject();
        this.domRendoerExcludeProxy = this.domRendoerExcludeProxy.filter(it => it !== null);
        if (typeof HTMLElement !== 'undefined') {
            this.domRendoerExcludeProxy.push(HTMLElement);
        }
        if (typeof CanvasRenderingContext2D !== 'undefined') {
            this.domRendoerExcludeProxy.push(CanvasRenderingContext2D);
        }
        if (typeof CanvasPattern !== 'undefined') {
            this.domRendoerExcludeProxy.push(CanvasPattern);
        }
        if (typeof CanvasGradient !== 'undefined') {
            this.domRendoerExcludeProxy.push(CanvasGradient);
        }
        // const navigation = new Navigation(this.simstanceManager, this.option);
        // console.log('-----', navigation)
        // this.simstanceManager.setStoreSet(Navigation, navigation);
        this.domRenderRouter =
            option.urlType === 'path'
                ? new _dooboostore_dom_render_routers_PathRouter__WEBPACK_IMPORTED_MODULE_14__.PathRouter({
                    window: option.window
                    // changeStateConvertDate:(data) =>({...data, type: 'popstateData', router: this.routerAndSettingData.routerAtomic.getValue()} as PopStateType)
                })
                : new _dooboostore_dom_render_routers_HashRouter__WEBPACK_IMPORTED_MODULE_13__.HashRouter({
                    window: option.window
                    // changeStateConvertDate:(data) =>({...data, type: 'popstateData', router: this.routerAndSettingData.routerAtomic.getValue()} as PopStateType)
                });
        this.simstanceManager.setStoreSet(_dooboostore_dom_render_routers_Router__WEBPACK_IMPORTED_MODULE_12__.Router, this.domRenderRouter);
        this.domRenderConfig = {
            window: option.window,
            targetElements: this.domRenderTargetElements,
            targetAttrs: this.domRenderTargetAttrs,
            onElementInit: (name, obj, rawSet, targetElement) => { },
            onAttrInit: (attrName, attrValue, obj, rawSet) => { },
            // routerType: option.urlType,
            routerType: this.domRenderRouter,
            scripts: {
                application: this
                // @Script로 등록해서 쓸수 있음
                // concat: function (head: string, tail: string) {
                //   return head + tail;
                // }
            },
            // applyEvents: [{
            //     attrName: 'router-link',
            //     callBack: (elements: Element, attrValue: string, obj: any) => {
            //         elements.addEventListener('click', (event) => {
            //             this.getSimstanceManager().getOrNewSim({target:Navigation})?.go(attrValue)
            //         })
            //     }
            // }],
            eventVariables: {},
            proxyExcludeTyps: this.domRendoerExcludeProxy,
            operatorAround: {}
        };
        this.option.window.__dirname = 'simple-boot-front__dirname';
        this.option.window.__SimpleBootFront = this;
        option.proxy = {
            onAfterProxy: (it) => this.createDomRender(it)
        };
    }
    get routingSubjectObservable() {
        return this.routingSubject.asObservable();
    }
    getComponentInnerHtml(targetObj, id) {
        const component = (0,_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.getComponent)(targetObj);
        const styles = _dooboostore_dom_render_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_11__.RawSet.generateStyleTransform(component?.styles ?? '', id);
        const template = component?.template ?? '';
        return styles + template;
    }
    createDomRender(obj) {
        const component = (0,_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.getComponent)(obj);
        // console.log('onProxy!!!', obj, component);
        if (component && typeof obj === 'object') {
            //     // 나중에 헛갈리겠는데??  이거 normalattribute 때문에 DomrenderPRoxy set 쪽에서 ㅡㅡ root를 찾아가야되기때문에 ref를 계속 가져가야함.
            //     // console.log('fffffffffffffffffffffffffffff', obj);
            //     // root Router 일때
            //     if (this.option.rootRouter === obj.constructor) {
            //       // console.log('같니?')
            //       this.rootRouterTargetElement = this.option.window.document.querySelector(this.option.selector).cloneNode(true) as Element;
            //       this.rootRouterTargetElement.innerHTML = '';
            //       this.rootRouterTargetElement.setAttribute('hidden', '')
            //       this.option.window.document.body.appendChild(this.rootRouterTargetElement);
            //       const data = this.writeRootRouter(this.rootRouterTargetElement, obj);
            //       // this.rootRouterInstance = obj;
            //       const result = DomRender.run({rootObject: obj, config: this.domRenderConfig, target: this.rootRouterTargetElement});
            //       return result;
            //       // this.targetElement = data.target;
            //       // document.body.appendChild(this.targetElement);
            //     } else {
            const result = _dooboostore_dom_render_DomRender__WEBPACK_IMPORTED_MODULE_4__.DomRender.run({ rootObject: obj, config: this.domRenderConfig });
            // console.log('proxy end', result);
            return result;
            //     }
            //     // this.domRenderRouter = domRenderResult.config.router;
            //     // this.simstanceManager.getOrNewSim({target:Navigation})?.routers.push(this.domRenderRouter);
            //     // console.log('createDomRender', this.domRenderRouter)
            //     // return domRenderResult.rootObject;
        }
        return obj;
    }
    initRun(otherInstanceSim) {
        // console.log('!@!!', this.option.window.document.body.innerHTML);
        const targetUserElement = typeof this.option.selector === 'string'
            ? this.option.window.document.querySelector(this.option.selector)
            : this.option.selector;
        const targetElement = targetUserElement?.cloneNode(true);
        if (!targetElement) {
            throw new Error('no element selector ' + this.option.selector);
        }
        const simstanceManager = super.run(otherInstanceSim);
        this.initDomRenderConfigSetting();
        this.option.window.addEventListener('intent', event => {
            const cevent = event;
            this.publishIntent(new _dooboostore_simple_boot_intent_Intent__WEBPACK_IMPORTED_MODULE_6__.Intent(cevent.detail.uri, cevent.detail.data, event));
        });
        targetElement.innerHTML = _DomRenderRootObject__WEBPACK_IMPORTED_MODULE_15__.DomRenderRootDefaultTemplate;
        // targetElement.innerHTML = DomRenderRootDefaultStyle;
        targetElement.hidden = true;
        this.option.window.document.body.appendChild(targetElement);
        // const targetElement = this.option.window.document.querySelector(this.option.selector);
        // const {rootObject: domRenderRoot, config } = DomRender.runSet({rootObject: this.domRenderRootObject, target: targetElement, config: this.domRenderConfig});
        const domRender = new _dooboostore_dom_render_DomRender__WEBPACK_IMPORTED_MODULE_4__.DomRender({
            rootObject: this.domRenderRootObject,
            target: targetElement,
            config: this.domRenderConfig
        });
        this.simstanceManager.setStoreSet(_dooboostore_dom_render_DomRender__WEBPACK_IMPORTED_MODULE_4__.DomRender, domRender);
        this.domRenderRootObject = domRender.rootObject;
        (0,_dooboostore_simple_boot_decorators_route_Router__WEBPACK_IMPORTED_MODULE_16__.routerProcess)({ path: '', routers: [this.option.rootRouter] }, _DomRenderRootObject__WEBPACK_IMPORTED_MODULE_15__.DomRenderRootObject);
        // 작업테스크 옮겨줘야 비동기적으로 처리됨에 깜빡임 없앨수있다.
        setTimeout(() => {
            targetElement.hidden = false;
            targetUserElement.replaceWith(targetElement);
        }, 0);
        // dom-render 라우팅 끝나면
        this.domRenderRouter.observable.pipe((0,_dooboostore_core_message_operators_filter__WEBPACK_IMPORTED_MODULE_18__.filter)(it => it.triggerPoint === 'end')).subscribe(it => {
            // console.log('this.domRenderRouter.observable.subscribe---------------', it, this.domRenderRouter)
            const intent = new _dooboostore_simple_boot_intent_Intent__WEBPACK_IMPORTED_MODULE_6__.Intent(it.path || '/');
            //   // TODO: 왜 canActivate가 두번 호출되는지 확인 필요!! 그래서 setTimeout으로 처리함 원인 모르겠음 아 씨발
            this.routing(intent, { router: this.domRenderRootObject }).then(async (it) => {
                // console.log('vvvvvvvvv', it);
                // dom-render 라우팅 끝나면 -> simple-boot-front routing start!
                this.routingSubject.next({ triggerPoint: 'start', routerModule: it });
                let findFirstRouter = it.firstRouteChainValue;
                //       setTimeout(() => {
                if (findFirstRouter && findFirstRouter.constructor === this.option.rootRouter) {
                    const rootRouter = (0,_dooboostore_dom_render_DomRenderProxy__WEBPACK_IMPORTED_MODULE_10__.getDomRenderOriginObject)(this.rootRouter?.obj);
                    const findRouter = (0,_dooboostore_dom_render_DomRenderProxy__WEBPACK_IMPORTED_MODULE_10__.getDomRenderOriginObject)(findFirstRouter);
                    // console.log('!!!!!', domRenderRoot, rootRouter, findRouter);
                    // domRenderRoot.name = new Date().toISOString();
                    // domRenderRoot.name = domRenderRoot.rootRouter?.obj?.child;
                    // setTimeout(() => {
                    // if (rootRouter !== findRouter) {
                    await this.domRenderRootObject.canActivate(undefined, findRouter);
                    await this.domRenderRootObject.onRouting({ intent, routerModule: it, routerManager: this.routerManager });
                    // setTimeout(() => {
                    //   console.log('ccccccccan')
                    //   this.domRenderRootObject.canActivate(undefined, findRouter); // new ComponentSet(rootRouter);
                    // },0)
                    //   console.log('change!', domRenderRoot, domRenderRoot.rootRouter?.obj)
                    // }
                    // },5)
                }
                this.routingSubject.next({ triggerPoint: 'end', routerModule: it });
                //       }, 0);
            });
        });
        return simstanceManager;
    }
    async goRouting(url) {
        await this.domRenderRouter?.go({ path: url });
        // this.afterSetting();
    }
    async getIntent(url) {
        const intent = typeof url === 'string' ? new _dooboostore_simple_boot_intent_Intent__WEBPACK_IMPORTED_MODULE_6__.Intent(url) : url;
        const data = await this.routing(intent);
        return data;
    }
    run(otherInstanceSim, url) {
        const simstanceManager = this.initRun(otherInstanceSim);
        // const currentUrl = UrlUtils.toUrl(this.option.window.location.href);
        // const origin = currentUrl.origin;
        // const path = `${url ? origin + (url ?? '/') : currentUrl.href}`;
        // console.log('gorouting!!',path);
        // this.domRenderRouter.go({path: path});
        return this;
    }
    // private dispatchPopStateEvent(noSimpleBootFrontRouting?: boolean) {
    //   const state: PopStateType = this.routerAndSettingData
    //     ? { type: 'popstateData', noSimpleBootFrontRouting, router: this.routerAndSettingData.routerAtomic.getValue() }
    //     : undefined;
    //   // console.log('dispatchPopState', state)
    //   this.option.window.dispatchEvent(new PopStateEvent('popstate', { triggerPoint: state }));
    // }
    // TODO: 이거 나중에 없에야될것같은데 이제 안쓰는거라..훔.. 남겨둬야하나..훔..
    //   private afterSetting() {
    //     this.option.window.document.querySelectorAll('[router-link]').forEach(it => {
    //       const link = it.getAttribute('router-link');
    //       if (link && this.domRenderRouter) {
    //         const activeClasss = it.getAttribute('router-active-class');
    //         const aClasss = activeClasss?.split(',');
    //         const inActiveClasss = it.getAttribute('router-inactive-class');
    //         const iClasss = inActiveClasss?.split(',');
    //         if (this.domRenderRouter.getPathName() === link) {
    //           if (aClasss && aClasss.length > 0) {
    //             it.classList.add(...aClasss);
    //           }
    //           if (iClasss && iClasss.length > 0) {
    //             it.classList.remove(...iClasss);
    //           }
    //         } else {
    //           if (aClasss && aClasss.length > 0) {
    //             it.classList.remove(...aClasss);
    //           }
    //           if (iClasss && iClasss.length > 0) {
    //             it.classList.add(...iClasss);
    //           }
    //         }
    //       }
    //     });
    //   }
    initDomRenderConfigSetting() {
        const simstanceManager = this.simstanceManager;
        _decorators_Script__WEBPACK_IMPORTED_MODULE_3__.scripts.forEach((val, name) => {
            this.domRenderConfig.scripts[name] = function (...args) {
                let obj;
                try {
                    obj = simstanceManager.getOrNewSim({ target: val });
                }
                catch (e) {
                    obj = simstanceManager.newSim({ target: val });
                }
                const render = this.__render;
                const scriptRunnable = obj;
                if (render.rawSet) {
                    scriptRunnable.rawSets.set(render.rawSet, this);
                }
                return scriptRunnable.run(...args);
            };
        });
        const selectors = _decorators_Component__WEBPACK_IMPORTED_MODULE_2__.componentSelectors;
        selectors.forEach((val, name) => {
            const component = (0,_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.getComponent)(val);
            const items = _dooboostore_dom_render_rawsets_RawSet__WEBPACK_IMPORTED_MODULE_11__.RawSet.createComponentTargetElement({
                name: name,
                noStrip: component?.noStrip === true,
                objFactory: (e, obj, r, counstructorParam) => {
                    let newSim;
                    if (counstructorParam?.length) {
                        newSim = new val(...counstructorParam);
                    }
                    else {
                        newSim = this.simstanceManager.newSim({ target: val });
                    }
                    if (component) {
                        const proxys = (Array.isArray(component.proxy) ? component.proxy : [component.proxy]).filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_1__.isDefined);
                        proxys.forEach(it => {
                            if (typeof it === 'object') {
                                newSim = new Proxy(newSim, it);
                            }
                            else {
                                newSim = new Proxy(newSim, this.simstanceManager.newSim({ target: it }));
                            }
                        });
                    }
                    return newSim;
                },
                template: component?.template,
                styles: component?.styles
            });
            this.domRenderTargetElements.push(items);
        });
        this.domRenderConfig.eventVariables = {
            $router: this.domRenderRouter,
            $application: this
        };
        // console.log('---------------------scripts', this.domRenderConfig.scripts);
    }
    getSimstanceManager() {
        return this.simstanceManager;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentBase.ts":
/*!************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/component/ComponentBase.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentBase: () => (/* binding */ ComponentBase)
/* harmony export */ });
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");

class ComponentBase extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_0__.ComponentBase {
    async onRouting(r) {
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentRouterBase.ts":
/*!******************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/component/ComponentRouterBase.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentRouterBase: () => (/* binding */ ComponentRouterBase)
/* harmony export */ });
/* harmony import */ var _dooboostore_dom_render_components_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentRouterBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentRouterBase.ts");
/* harmony import */ var _ComponentSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentSet */ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentSet.ts");
/* harmony import */ var _dooboostore_dom_render_DomRenderProxy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/dom-render/DomRenderProxy */ "../../packages/@dooboostore/dom-render/src/DomRenderProxy.ts");
/* harmony import */ var _dooboostore_dom_render_components_router_RouterOutlet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/dom-render/components/router/RouterOutlet */ "../../packages/@dooboostore/dom-render/src/components/router/RouterOutlet.ts");




class ComponentRouterBase extends _dooboostore_dom_render_components_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_0__.ComponentRouterBase {
    constructor(_config) {
        super(_config);
    }
    // get child() {
    //   return this._child;
    // }
    setChild(child) {
        // console.log('setChild!!', child, (this as any).name)
        if (child) {
            child = child instanceof _ComponentSet__WEBPACK_IMPORTED_MODULE_1__.ComponentSet ? child : new _ComponentSet__WEBPACK_IMPORTED_MODULE_1__.ComponentSet(child);
        }
        else {
            child = undefined;
        }
        super.setChild(child);
    }
    onDrThisUnBind() {
        super.onDrThisUnBind();
    }
    onCreatedThisChildDebounce(childrenSet) {
        super.onCreatedThisChildDebounce(childrenSet);
        // const routerOutlet = this.getChildren(RouterOutlet.RouterOutlet);
        // if (routerOutlet) {
        //   routerOutlet.forEach(it => it.setValue(this.child));
        // }
    }
    async canActivate(url, data) {
        // console.log('cccccccccccc', data, typeof data);
        if (!(this.componentConfig?.sameRouteNoApply &&
            (0,_dooboostore_dom_render_DomRenderProxy__WEBPACK_IMPORTED_MODULE_2__.getDomRenderOriginObject)(this.child?.obj) === (0,_dooboostore_dom_render_DomRenderProxy__WEBPACK_IMPORTED_MODULE_2__.getDomRenderOriginObject)(data))) {
            this.child = new _ComponentSet__WEBPACK_IMPORTED_MODULE_1__.ComponentSet(data);
            const routerOutlet = this.getChildren(_dooboostore_dom_render_components_router_RouterOutlet__WEBPACK_IMPORTED_MODULE_3__.RouterOutlet.RouterOutlet);
            if (routerOutlet) {
                routerOutlet.forEach(it => it.setValue(this.child));
            }
        }
    }
    async onRouting(r) {
        // if (RouterAction.isOnRouting(this.child?.obj)){
        //   await this.child.obj.onRouting(r);
        // }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentSet.ts":
/*!***********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/component/ComponentSet.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentSet: () => (/* binding */ ComponentSet)
/* harmony export */ });
/* harmony import */ var _dooboostore_dom_render_components_ComponentSet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentSet */ "../../packages/@dooboostore/dom-render/src/components/ComponentSet.ts");
/* harmony import */ var _decorators_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");


class ComponentSet extends _dooboostore_dom_render_components_ComponentSet__WEBPACK_IMPORTED_MODULE_0__.ComponentSet {
    constructor(data) {
        const component = (0,_decorators_Component__WEBPACK_IMPORTED_MODULE_1__.getComponent)(data);
        if (component) {
            const styles = component?.styles ?? [];
            const template = component?.template ?? '';
            super(data, { template, styles });
        }
        else {
            super(data, {});
        }
    }
}
// export const createComponentSet = (data: any) => {
//   const component = getComponent(data);
//      if (component) {
//      const styles = component?.styles ?? [];
//      const template = component?.template ?? '';
//      return new ComponentSet(data, template, styles, {objPath: null});
//    } else {
//        return new ComponentSet(data);
//    }
// }


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts":
/*!*********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Component: () => (/* binding */ Component),
/* harmony export */   ComponentMetadataKey: () => (/* binding */ ComponentMetadataKey),
/* harmony export */   componentSelectors: () => (/* binding */ componentSelectors),
/* harmony export */   getComponent: () => (/* binding */ getComponent)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");

const componentSelectors = new Map();
const ComponentMetadataKey = Symbol('Component');
// Partial<ComponentConfig>
const componentProcess = (config, target) => {
    if (!config.selector) {
        config.selector = target.name.toLowerCase();
    }
    _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(ComponentMetadataKey, config, target);
    componentSelectors.set(config.selector.toLowerCase(), target);
};
function Component(configOrTarget) {
    if (typeof configOrTarget === 'function') {
        componentProcess({}, configOrTarget);
    }
    else {
        return (target) => {
            componentProcess(configOrTarget, target);
        };
    }
}
const getComponent = (target) => {
    if (target && typeof target === 'object') {
        target = target.constructor;
    }
    try {
        return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(ComponentMetadataKey, target);
    }
    catch (e) {
    }
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/decorators/Script.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/decorators/Script.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Script: () => (/* binding */ Script),
/* harmony export */   ScriptMetadataKey: () => (/* binding */ ScriptMetadataKey),
/* harmony export */   getScript: () => (/* binding */ getScript),
/* harmony export */   scripts: () => (/* binding */ scripts)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");

const scripts = new Map();
const ScriptMetadataKey = Symbol('Script');
const Script = (config) => {
    return (target) => {
        // default set
        if (!config) {
            config = {};
        }
        if (!config.name) {
            config.name = target.name;
        }
        scripts.set(config.name, target);
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(ScriptMetadataKey, config, target);
        return target;
    };
};
const getScript = (target) => {
    if (target && typeof target === 'object') {
        target = target.constructor;
    }
    try {
        return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(ScriptMetadataKey, target);
    }
    catch (e) {
    }
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-front/src/option/SimFrontOption.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-front/src/option/SimFrontOption.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimFrontOption: () => (/* binding */ SimFrontOption),
/* harmony export */   UrlType: () => (/* binding */ UrlType)
/* harmony export */ });
/* harmony import */ var _dooboostore_simple_boot_SimOption__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/simple-boot/SimOption */ "../../packages/@dooboostore/simple-boot/src/SimOption.ts");

var UrlType;
(function (UrlType) {
    UrlType["path"] = "path";
    UrlType["hash"] = "hash";
})(UrlType || (UrlType = {}));
class SimFrontOption extends _dooboostore_simple_boot_SimOption__WEBPACK_IMPORTED_MODULE_0__.SimOption {
    config;
    constructor(config, initSimOption) {
        super(initSimOption);
        this.config = config;
    }
    get window() {
        return this.config.window;
    }
    get selector() {
        return this.config.selector ?? '#app';
    }
    get urlType() {
        return this.config.urlType ?? UrlType.path;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/SimpleBootHttpSSRFactory.ts":
/*!***********************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-http-server-ssr/src/SimpleBootHttpSSRFactory.ts ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleBootHttpSSRFactory: () => (/* binding */ SimpleBootHttpSSRFactory)
/* harmony export */ });
class SimpleBootHttpSSRFactory {
    async create(simFrontOption, using = [], domExcludes = []) {
        const front = await this.factory(simFrontOption, using, domExcludes);
        return front;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/codes/HttpHeaders.ts":
/*!****************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-http-server-ssr/src/codes/HttpHeaders.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpHeaders: () => (/* binding */ HttpHeaders),
/* harmony export */   makeIntentHeaderBySymbol: () => (/* binding */ makeIntentHeaderBySymbol)
/* harmony export */ });
/* harmony import */ var _dooboostore_simple_boot_http_server_codes_HttpHeaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/simple-boot-http-server/codes/HttpHeaders */ "../../packages/@dooboostore/simple-boot-http-server/src/codes/HttpHeaders.ts");
/* harmony import */ var _Mimes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Mimes */ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/codes/Mimes.ts");


const HttpHeaders = {
    ..._dooboostore_simple_boot_http_server_codes_HttpHeaders__WEBPACK_IMPORTED_MODULE_0__.HttpHeaders,
    XSimpleBootSsrIntentScheme: 'x-simple-boot-ssr-intent-scheme'
};
const makeIntentHeaderBySymbol = (symbol) => {
    return {
        [HttpHeaders.Accept]: _Mimes__WEBPACK_IMPORTED_MODULE_1__.Mimes.ApplicationJsonPostSimpleBootSsrIntentScheme,
        [HttpHeaders.XSimpleBootSsrIntentScheme]: `Symbol.for(${symbol.description})`
    };
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/codes/Mimes.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-http-server-ssr/src/codes/Mimes.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Mimes: () => (/* binding */ Mimes)
/* harmony export */ });
/* harmony import */ var _dooboostore_simple_boot_http_server_codes_Mimes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/simple-boot-http-server/codes/Mimes */ "../../packages/@dooboostore/simple-boot-http-server/src/codes/Mimes.ts");

const Mimes = {
    ..._dooboostore_simple_boot_http_server_codes_Mimes__WEBPACK_IMPORTED_MODULE_0__.Mimes,
    ApplicationJsonPostSimpleBootSsrIntentScheme: 'application/json-post+simple-boot-ssr-intent-scheme',
    Intent: 'intent'
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/proxy/SymbolIntentApiServiceProxy.ts":
/*!********************************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-http-server-ssr/src/proxy/SymbolIntentApiServiceProxy.ts ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolIntentApiServiceProxy: () => (/* binding */ SymbolIntentApiServiceProxy)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _codes_HttpHeaders__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../codes/HttpHeaders */ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/codes/HttpHeaders.ts");
/* harmony import */ var _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core/convert/ConvertUtils */ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts");
/* harmony import */ var _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/simple-boot/fetch/ApiService */ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts");
var _a;





const _ = _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_4__.ApiService;
let SymbolIntentApiServiceProxy = class SymbolIntentApiServiceProxy {
    apiService;
    constructor(apiService) {
        this.apiService = apiService;
        console.log('-------apiService', apiService);
    }
    get(target, prop, receiver) {
        const simConfig = (0,_dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.getSim)(target);
        const apiService = this.apiService;
        const value = Reflect.get(target, prop, receiver);
        if (typeof value === 'function' && simConfig?.symbol) {
            return function (...args) {
                const f = value;
                const p = (userConfig) => {
                    const headers = { ...(userConfig?.headers ?? {}), ...(0,_codes_HttpHeaders__WEBPACK_IMPORTED_MODULE_2__.makeIntentHeaderBySymbol)(simConfig.symbol) };
                    const method = userConfig?.method ?? 'post';
                    if (method === 'post' && userConfig?.multipartFormData) {
                        return apiService.post({
                            target: `/${String(prop)}`,
                            config: {
                                bypassTransform: userConfig?.bypassTransform,
                                transformText: userConfig?.transformText,
                                fetch: {
                                    credentials: 'include',
                                    headers: headers,
                                    body: _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_3__.ConvertUtils.toFormData(userConfig?.body)
                                }
                            }
                        });
                    }
                    else if (method === 'post') {
                        return apiService.postJson({
                            target: `/${String(prop)}`,
                            config: {
                                bypassTransform: userConfig?.bypassTransform,
                                transformText: userConfig?.transformText,
                                fetch: {
                                    credentials: 'include',
                                    headers: headers,
                                    body: userConfig?.body
                                }
                            }
                        });
                    }
                    else if (method === 'petch') {
                        return apiService.patchJson({
                            target: `/${String(prop)}`,
                            config: {
                                bypassTransform: userConfig?.bypassTransform,
                                transformText: userConfig?.transformText,
                                fetch: {
                                    credentials: 'include',
                                    headers: headers,
                                    body: userConfig?.body
                                }
                            }
                        });
                    }
                    else {
                        return apiService[method]({
                            // return apiService.head({
                            target: { url: `/${String(prop)}`, searchParams: userConfig?.body },
                            config: {
                                bypassTransform: userConfig?.bypassTransform,
                                transformText: userConfig?.transformText,
                                fetch: {
                                    credentials: 'include',
                                    headers: headers,
                                }
                            }
                        });
                    }
                    // if (userConfig?.multipartFormData) {
                    //   return apiService.post({
                    //     target: `/${String(prop)}`,
                    //     config: {
                    //       bypassTransform: userConfig?.bypassTransform,
                    //       transformText: userConfig?.transformText,
                    //       fetch: {
                    //         credentials: 'include',
                    //         headers: headers,
                    //         body: ConvertUtils.toFormData(userConfig?.body)
                    //       }
                    //     }
                    //   });
                    // } else {
                    //   return apiService.postJson({
                    //     target: `/${String(prop)}`,
                    //     config: {
                    //       bypassTransform: userConfig?.bypassTransform,
                    //       transformText: userConfig?.transformText,
                    //       fetch: {
                    //         credentials: 'include',
                    //         headers: headers,
                    //         body: userConfig?.body
                    //       }
                    //     }
                    //   });
                    // }
                };
                args.push(p);
                return Reflect.apply(f, target, args);
                // return f.apply(target, args);
            };
        }
        return Reflect.get(target, prop, receiver);
    }
    apply(target, thisArg, argArray) {
        console.log('SymbolIntentApiServiceProxy apply');
        // @ts-ignore
        return Reflect.apply(target, thisArg, argArray);
    }
};
SymbolIntentApiServiceProxy = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.Sim,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_4__.ApiService !== "undefined" && _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_4__.ApiService) === "function" ? _a : Object])
], SymbolIntentApiServiceProxy);



/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-http-server/src/codes/HttpHeaders.ts":
/*!************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-http-server/src/codes/HttpHeaders.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpHeaders: () => (/* binding */ HttpHeaders)
/* harmony export */ });
const HttpHeaders = {
    ContentLength: 'Content-Length',
    ContentType: 'Content-Type',
    ContentEncoding: 'Content-Encoding',
    Accept: 'Accept',
    Authorization: 'Authorization',
    CacheControl: 'Cache-Control',
    Connection: 'Connection',
    Date: 'Date',
    Host: 'Host',
    Pragma: 'Pragma',
    Trailer: 'Trailer',
    TransferEncoding: 'Transfer-Encoding',
    Upgrade: 'Upgrade',
    Via: 'Via',
    Warning: 'Warning',
    AcceptCharset: 'Accept-Charset',
    AcceptEncoding: 'Accept-Encoding',
    AcceptLanguage: 'Accept-Language',
    AccessControlAllowOrigin: 'Access-Control-Allow-Origin',
    AccessControlAllowMethods: 'Access-Control-Allow-Methods',
    AccessControlAllowHeaders: 'Access-Control-Allow-Headers',
    AccessControlExposeHeaders: 'Access-Control-Expose-Headers',
    Expect: 'Expect',
    From: 'From',
    MaxForwards: 'Max-Forwards',
    Referer: 'Referer',
    UserAgent: 'User-Agent',
    Cookie: 'Cookie',
    SetCookie: 'Set-Cookie',
    // SetHeader : 'Set-Header',
    Cookie2: 'Cookie2',
    SetCookie2: 'Set-Cookie2',
    Location: 'Location',
    IfModifiedSince: 'If-Modified-Since',
    IfUnmodifiedSince: 'If-Unmodified-Since',
    IfMatch: 'If-Match',
    IfNoneMatch: 'If-None-Match',
    IfRange: 'If-Range',
    Allow: 'Allow',
    Server: 'Server'
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot-http-server/src/codes/Mimes.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot-http-server/src/codes/Mimes.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Mimes: () => (/* binding */ Mimes)
/* harmony export */ });
var Mimes;
(function (Mimes) {
    Mimes["ApplicationJson"] = "application/json";
    Mimes["ApplicationOctetStream"] = "application/octet-stream";
    Mimes["ApplicationXml"] = "application/xml";
    Mimes["ApplicationJsonPatch"] = "application/json-patch+json";
    Mimes["ApplicationXWwwFormUrlencoded"] = "application/x-www-form-urlencoded";
    Mimes["TextPlain"] = "text/plain";
    Mimes["TextHtml"] = "text/html";
    Mimes["All"] = "*/*";
    Mimes["TextCss"] = "text/css";
    Mimes["TextJavascript"] = "text/javascript";
    Mimes["TextXml"] = "text/xml";
    Mimes["TextXslt"] = "text/xslt";
    Mimes["TextXmlDtd"] = "text/xml-dtd";
    Mimes["TextPlainUtf8"] = "text/plain; charset=utf-8";
    Mimes["ImagePng"] = "image/png";
    Mimes["ImageGif"] = "image/gif";
    Mimes["ImageJpeg"] = "image/jpeg";
    Mimes["ImageSvg"] = "image/svg+xml";
    Mimes["ImageBmp"] = "image/bmp";
    Mimes["ImageTiff"] = "image/tiff";
    Mimes["ImagePdf"] = "application/pdf";
    Mimes["ImageXBmp"] = "image/x-bmp";
    Mimes["ImageXpixmap"] = "image/x-xpixmap";
    Mimes["ImageXxbm"] = "image/x-xbm";
    Mimes["MultipartFormData"] = "multipart/form-data";
})(Mimes || (Mimes = {}));


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/SimOption.ts":
/*!****************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/SimOption.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimOption: () => (/* binding */ SimOption)
/* harmony export */ });
class SimOption {
    rootRouter;
    container;
    advice;
    proxy;
    // public excludeSim: ((ConstructorType<any> | Function)[]) | ((type: (ConstructorType<any> | Function)) => boolean);
    using;
    cache;
    constructor({ rootRouter, container, cache, advice = [], proxy, using } = {}) {
        this.rootRouter = rootRouter;
        this.container = container;
        this.advice = advice;
        // this.excludeSim = excludeSim;
        this.proxy = proxy;
        this.using = using;
        this.cache = cache;
    }
    addAdvicce(advice) {
        this.advice ??= [];
        this.advice.push(advice);
    }
    setAdvice(...advice) {
        this.advice = advice;
        return this;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/SimpleApplication.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/SimpleApplication.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleApplication: () => (/* binding */ SimpleApplication)
/* harmony export */ });
/* harmony import */ var _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./simstance/SimstanceManager */ "../../packages/@dooboostore/simple-boot/src/simstance/SimstanceManager.ts");
/* harmony import */ var _SimOption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SimOption */ "../../packages/@dooboostore/simple-boot/src/SimOption.ts");
/* harmony import */ var _intent_IntentManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./intent/IntentManager */ "../../packages/@dooboostore/simple-boot/src/intent/IntentManager.ts");
/* harmony import */ var _route_RouterManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./route/RouterManager */ "../../packages/@dooboostore/simple-boot/src/route/RouterManager.ts");
/* harmony import */ var _intent_Intent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./intent/Intent */ "../../packages/@dooboostore/simple-boot/src/intent/Intent.ts");
/* harmony import */ var _throwable_SimNoSuch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./throwable/SimNoSuch */ "../../packages/@dooboostore/simple-boot/src/throwable/SimNoSuch.ts");
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");







class SimpleApplication {
    option;
    simstanceManager;
    intentManager;
    routerManager;
    // public rootRouter?: ConstructorType<any>;
    // constructor();
    // constructor(option: SimOption);
    // constructor(rootRouter?: ConstructorType<Object> | Function);
    // constructor(rootRouter?: ConstructorType<Object> | Function, option?: SimOption);
    // constructor(rootRouter?: (ConstructorType<Object> | Function) | SimOption, option = new SimOption()) {
    constructor(option = new _SimOption__WEBPACK_IMPORTED_MODULE_1__.SimOption()) {
        // if (option.rootRouter instanceof SimOption) {
        //   option = rootRouter;
        // } else if (typeof option.rootRouter === 'function') {
        //   this.rootRouter = rootRouter;
        // }
        this.option = option;
        this.simstanceManager = new _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_0__.SimstanceManager(this, option);
        // this.simstanceManager.setStoreSet(SimpleApplication, this);
        this.simstanceManager.setStoreSet(_simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_0__.SimstanceManager, this.simstanceManager);
        // cacheManager는 사용자가 불러다 사용할때 뜨도록. 미리 추가안해준다.
        this.routerManager = this.simstanceManager.proxy(new _route_RouterManager__WEBPACK_IMPORTED_MODULE_3__.RouterManager(this.simstanceManager, option));
        this.intentManager = this.simstanceManager.proxy(new _intent_IntentManager__WEBPACK_IMPORTED_MODULE_2__.IntentManager(this.simstanceManager, this.routerManager, option));
        this.simstanceManager.setStoreSet(_intent_IntentManager__WEBPACK_IMPORTED_MODULE_2__.IntentManager, this.intentManager);
        this.simstanceManager.setStoreSet(_route_RouterManager__WEBPACK_IMPORTED_MODULE_3__.RouterManager, this.routerManager);
        _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_6__.containers.add(this);
    }
    getSimstanceManager() {
        return this.simstanceManager;
    }
    getIntentManager() {
        return this.intentManager;
    }
    getRouterManager() {
        return this.routerManager;
    }
    run(otherInstanceSim) {
        this.simstanceManager.run(otherInstanceSim);
        return this;
        // return this.simstanceManager;
    }
    simAtomic(type) {
        if (typeof type === 'symbol') {
            return this.simstanceManager.findFirstSim(type);
        }
        else if (typeof type === 'function') {
            return this.simstanceManager.findFirstSim({ type: type });
            // return new SimAtomic<T>(type, this.simstanceManager);
        }
    }
    simAtomics(type) {
        if (typeof type === 'symbol') {
            return this.simstanceManager.findSims(type) ?? [];
        }
        else if (typeof type === 'function') {
            return this.simstanceManager.findSims({ type }) ?? [];
        }
        else {
            return [];
        }
    }
    getInstance(type) {
        const i = this.sim(type);
        if (i) {
            return i;
        }
        else {
            throw new _throwable_SimNoSuch__WEBPACK_IMPORTED_MODULE_5__.SimNoSuch('SimNoSuch: no simple instance(getInstance) ' + 'name:' + type?.prototype?.constructor?.name + ',' + type);
        }
    }
    sim(type) {
        return this.simAtomic(type)?.getValue();
    }
    sims(type) {
        return this.simAtomics(type).map(it => it.getValue());
    }
    addSim(configOrTarget, target) {
        const r = (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_6__.Sim)(configOrTarget);
        if (typeof r === 'function' && target) {
            r(target);
        }
    }
    publishIntent(i, data) {
        if (i instanceof _intent_Intent__WEBPACK_IMPORTED_MODULE_4__.Intent) {
            return this.intentManager.publish(i);
        }
        else if ((0,_intent_IntentManager__WEBPACK_IMPORTED_MODULE_2__.isRouterPublishType)(i)) {
            return this.intentManager.publish(i, data);
        }
        else {
            return this.intentManager.publish(i, data);
        }
    }
    routing(i, option) {
        if (i instanceof _intent_Intent__WEBPACK_IMPORTED_MODULE_4__.Intent) {
            return this.routerManager.routing(i, option);
        }
        else if (typeof i === 'string') {
            const intent = new _intent_Intent__WEBPACK_IMPORTED_MODULE_4__.Intent(i);
            return this.routerManager.routing(intent, option);
        }
        else {
            const intent = new _intent_Intent__WEBPACK_IMPORTED_MODULE_4__.Intent(i.path, i.data);
            return this.routerManager.routing(intent, option);
        }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/alert/Alert.ts":
/*!******************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/alert/Alert.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Alert: () => (/* binding */ Alert)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/random/RandomUtils */ "../../packages/@dooboostore/core/src/random/RandomUtils.ts");
/* harmony import */ var _AlertAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AlertAction */ "../../packages/@dooboostore/simple-boot/src/alert/AlertAction.ts");


class Alert {
    alertService;
    config;
    result;
    isActive = false;
    activeBefore = [];
    activeAfter = [];
    deActiveBefore = [];
    deActiveAfter = [];
    data = new Map();
    uuid;
    constructor(alertService, config) {
        this.alertService = alertService;
        this.config = config;
        if (config?.uuid) {
            this.uuid = config.uuid;
        }
        else {
            this.uuid = _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_0__.RandomUtils.uuid();
        }
    }
    addOpenBefore(fn) {
        this.activeBefore.push(fn);
    }
    addOpenAfter(fn) {
        this.activeAfter.push(fn);
    }
    addCloseBefore(fn) {
        this.deActiveBefore.push(fn);
    }
    addCloseAfter(fn) {
        this.deActiveAfter.push(fn);
    }
    setData(key, value) {
        this.data.set(key, value);
    }
    getData(key) {
        return this.data.get(key);
    }
    async active() {
        try {
            await Promise.allSettled(this.activeBefore.map(it => it()))
                .then(it => {
                this.result = this.make();
                this.alertService?.publish({ action: _AlertAction__WEBPACK_IMPORTED_MODULE_1__.AlertAction.ACTIVE, alert: this });
                this.isActive = true;
                if (this.config?.closeTime !== undefined && this.config?.closeTime > 0) {
                    setTimeout(() => {
                        this.inActive();
                    }, this.config.closeTime);
                }
                this.config?.active?.(this.result, this);
            });
        }
        catch (e) {
        }
        finally {
            await Promise.allSettled(this.activeAfter.map(it => it())).then(it => {
            });
        }
    }
    async inActive() {
        try {
            await Promise.allSettled(this.deActiveBefore.map(it => it()))
                .then(it => {
                this.alertService?.publish({ action: _AlertAction__WEBPACK_IMPORTED_MODULE_1__.AlertAction.IN_ACTIVE, alert: this });
                this.isActive = false;
                this.config?.deActive?.(this.result, this);
            });
        }
        catch (e) {
        }
        finally {
            await Promise.allSettled(this.deActiveAfter.map(it => it())).then(it => {
            });
        }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/alert/AlertAction.ts":
/*!************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/alert/AlertAction.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlertAction: () => (/* binding */ AlertAction)
/* harmony export */ });
var AlertAction;
(function (AlertAction) {
    AlertAction["ACTIVE"] = "ACTIVE";
    AlertAction["IN_ACTIVE"] = "IN_ACTIVE";
})(AlertAction || (AlertAction = {}));


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/alert/AlertFactory.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/alert/AlertFactory.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlertFactory: () => (/* binding */ AlertFactory),
/* harmony export */   DefaultAlertFactory: () => (/* binding */ DefaultAlertFactory)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");


var AlertFactory;
(function (AlertFactory) {
    AlertFactory.SYMBOL = Symbol('AlertFactory');
})(AlertFactory || (AlertFactory = {}));
let DefaultAlertFactory = class DefaultAlertFactory {
    create(data) {
        return undefined;
    }
};
DefaultAlertFactory = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.Sim)({ symbol: AlertFactory.SYMBOL })
], DefaultAlertFactory);



/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/alert/AlertService.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/alert/AlertService.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlertService: () => (/* binding */ AlertService)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Alert */ "../../packages/@dooboostore/simple-boot/src/alert/Alert.ts");
/* harmony import */ var _decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../decorators/inject/Inject */ "../../packages/@dooboostore/simple-boot/src/decorators/inject/Inject.ts");
/* harmony import */ var _AlertFactory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AlertFactory */ "../../packages/@dooboostore/simple-boot/src/alert/AlertFactory.ts");
/* harmony import */ var _AlertType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AlertType */ "../../packages/@dooboostore/simple-boot/src/alert/AlertType.ts");
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_core_message_ReplaySubject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/core/message/ReplaySubject */ "../../packages/@dooboostore/core/src/message/ReplaySubject.ts");
var _a;







let AlertService = class AlertService {
    name = new Date().toUTCString();
    subject = new _dooboostore_core_message_ReplaySubject__WEBPACK_IMPORTED_MODULE_6__.ReplaySubject();
    alertFactory;
    constructor(alertFactory) {
        this.alertFactory = alertFactory;
        // console.log('%c AlertService constructor 55555', 'color: #ff0000', this.alertFactory)
        // this.observable.subscribe(it => {
        //   console.log('subscribe!!!!!selft!', it, this)
        // })
    }
    // @PostConstruct
    // postConstruct(
    // ) {
    //   this.alertFactory = alertFactory;
    // }
    get observable() {
        return this.subject.asObservable();
    }
    publish(data) {
        // console.log('publicsh------------', data)
        this.subject.next(data);
    }
    create(factory, config) {
        return new (class extends _Alert__WEBPACK_IMPORTED_MODULE_1__.Alert {
            make() {
                return factory(this);
            }
        })(this, config);
    }
    createFromFactory(type, config) {
        return this.alertFactory?.create({ caller: this, type, config: config });
    }
    danger(config) {
        // config = config ?? {};
        // config.closeTime ??= AlertService.DEFAULT_CLOSE_TIME;
        return this.createFromFactory(_AlertType__WEBPACK_IMPORTED_MODULE_4__.AlertType.DANGER, config);
    }
    progress(config) {
        config = config ?? {};
        return this.createFromFactory(_AlertType__WEBPACK_IMPORTED_MODULE_4__.AlertType.PROGRESS, config);
    }
    success(config) {
        // config = config ?? {};
        // config.closeTime ??= AlertService.DEFAULT_CLOSE_TIME;
        return this.createFromFactory(_AlertType__WEBPACK_IMPORTED_MODULE_4__.AlertType.SUCCESS, config);
    }
    info(config) {
        // config = config ?? {};
        // config.closeTime ??= AlertService.DEFAULT_CLOSE_TIME;
        return this.createFromFactory(_AlertType__WEBPACK_IMPORTED_MODULE_4__.AlertType.INFO, config);
    }
    error(config) {
        // config = config ?? {};
        // config.closeTime ??= AlertService.DEFAULT_CLOSE_TIME;
        return this.createFromFactory(_AlertType__WEBPACK_IMPORTED_MODULE_4__.AlertType.ERROR, config);
    }
    warning(config) {
        // config = config ?? {};
        // config.closeTime ??= AlertService.DEFAULT_CLOSE_TIME;
        return this.createFromFactory(_AlertType__WEBPACK_IMPORTED_MODULE_4__.AlertType.WARNING, config);
    }
};
AlertService = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_5__.Sim,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__param)(0, (0,_decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_2__.Inject)({ symbol: _AlertFactory__WEBPACK_IMPORTED_MODULE_3__.AlertFactory.SYMBOL })),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _AlertFactory__WEBPACK_IMPORTED_MODULE_3__.AlertFactory !== "undefined" && _AlertFactory__WEBPACK_IMPORTED_MODULE_3__.AlertFactory) === "function" ? _a : Object])
], AlertService);



/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/alert/AlertType.ts":
/*!**********************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/alert/AlertType.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlertType: () => (/* binding */ AlertType)
/* harmony export */ });
var AlertType;
(function (AlertType) {
    AlertType["DANGER"] = "DANGER";
    AlertType["NORMAL"] = "NORMAL";
    AlertType["PROGRESS"] = "PROGRESS";
    AlertType["SUCCESS"] = "SUCCESS";
    AlertType["ERROR"] = "ERROR";
    AlertType["INFO"] = "INFO";
    AlertType["WARNING"] = "WARNING";
    AlertType["CONSOLE"] = "CONSOLE";
    AlertType["ETC"] = "ETC";
})(AlertType || (AlertType = {}));


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/MetaDataAtomic.ts":
/*!********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/MetaDataAtomic.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MetaDataAtomic: () => (/* binding */ MetaDataAtomic),
/* harmony export */   MetaDataPropertyAtomic: () => (/* binding */ MetaDataPropertyAtomic)
/* harmony export */ });
class MetaDataAtomic {
    target;
    metaData;
    constructor(target, metaData) {
        this.target = target;
        this.metaData = metaData;
    }
}
class MetaDataPropertyAtomic extends MetaDataAtomic {
    property;
    parameter;
    constructor(target, metaData, property, parameter) {
        super(target, metaData);
        this.property = property;
        this.parameter = parameter;
    }
    call(...parameter) {
        return this.target[this.property](...parameter);
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Lifecycle: () => (/* binding */ Lifecycle),
/* harmony export */   PostConstruct: () => (/* binding */ PostConstruct),
/* harmony export */   Sim: () => (/* binding */ Sim),
/* harmony export */   SimMetadataKey: () => (/* binding */ SimMetadataKey),
/* harmony export */   containers: () => (/* binding */ containers),
/* harmony export */   getPostConstructs: () => (/* binding */ getPostConstructs),
/* harmony export */   getSim: () => (/* binding */ getSim),
/* harmony export */   simProcess: () => (/* binding */ simProcess),
/* harmony export */   sims: () => (/* binding */ sims)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");
/* harmony import */ var _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");


var Lifecycle;
(function (Lifecycle) {
    /**
     * The default registration scope, Each resolve will return the same instance (including resolves from child containers)
     */
    Lifecycle["Singleton"] = "Singleton";
    /**
     * a new instance will be created with each resolve
     */
    Lifecycle["Transient"] = "Transient";
})(Lifecycle || (Lifecycle = {}));
const sims = new Map();
const containers = new Set();
const SimMetadataKey = Symbol('Sim');
const isNotNullObjetInstance = (target) => target != null && target !== undefined && typeof target === 'object';
const simProcess = (config, inputTarget) => {
    // default setting
    /*
    // Sim({symbol: TTSymbol, scope: Lifecycle.Transient})(function (){
    //   console.log('new TT')
    //   return {a: 'name'}
    // })
    // Sim({symbol: TTSymbol, scope: Lifecycle.Transient})(() =>{
    //   console.log('new TT')
    //   return {a: 'name'}
    // })
    Sim({symbol: TTSymbol, scope: Lifecycle.Transient})({a: 'name'})
     */
    const target = (() => {
        if (typeof inputTarget === 'object') {
            return config.scope === Lifecycle.Singleton ? inputTarget : (_dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_1__.ValidUtils.isPlainObject(inputTarget) ? { ...inputTarget } : inputTarget);
        }
        if (_dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_1__.ValidUtils.isArrowFunction(inputTarget)) {
            return () => inputTarget();
        }
        return inputTarget;
    })();
    let targetType;
    if (isNotNullObjetInstance(target)) {
        targetType = target.constructor;
    }
    else {
        targetType = target;
    }
    config.scope = config?.scope ?? Lifecycle.Singleton;
    _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(SimMetadataKey, config, targetType);
    const adding = (targetKey, target = targetKey) => {
        const items = sims.get(targetKey) ?? new Set();
        items.add(target);
        sims.set(targetKey, items);
    };
    if (Array.isArray(config?.type)) {
        config?.type.forEach(it => {
            adding(it, target);
        });
    }
    else if (config.type) {
        adding(config?.type, target);
    }
    else {
        adding(target);
    }
    // adding(targetType)
    // console.log('----------->', sims)
};
function Sim(configOrTarget) {
    // console.group('sim')
    // sims.forEach((v,k) => {
    //   console.log('sssss->', v, k)
    // })
    // console.groupEnd()
    if (typeof configOrTarget === 'function') {
        simProcess({}, configOrTarget);
        // console.log('---!', Reflect.getMetadata('design:paramtypes', configOrTarget))
    }
    else {
        return (target) => {
            simProcess(configOrTarget, target);
        };
    }
}
const getSim = (target) => {
    if (target != null && target !== undefined && typeof target === 'object') {
        target = target.constructor;
    }
    try {
        return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(SimMetadataKey, target);
    }
    catch (e) {
    }
};
const PostConstructMetadataKey = Symbol('PostConstruct');
const postConstructProcess = (target, config) => {
    const metas = getPostConstructs(target) ?? [];
    metas.push(config);
    _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(PostConstructMetadataKey, metas, target);
};
const PostConstruct = (target, propertyKey, descriptor) => {
    postConstructProcess(target, { property: propertyKey });
};
const getPostConstructs = (target) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(PostConstructMetadataKey, target) ?? [];
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/SimNoProxy.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/SimNoProxy.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimNoProxy: () => (/* binding */ SimNoProxy),
/* harmony export */   SimNoProxyKey: () => (/* binding */ SimNoProxyKey),
/* harmony export */   getSimNoProxy: () => (/* binding */ getSimNoProxy),
/* harmony export */   isSimNoProxy: () => (/* binding */ isSimNoProxy)
/* harmony export */ });
const SimNoProxyKey = Symbol('Sim:NoProxy');
const SimNoProxy = (target, propertyKey) => {
    // 클래스 데코레이터로 사용된 경우
    if (propertyKey === undefined) {
        // target은 클래스 생성자
        Reflect.defineMetadata(SimNoProxyKey, true, target);
        return;
    }
    // 프로퍼티 데코레이터로 사용된 경우
    // target은 프로토타입, propertyKey는 프로퍼티 이름
    Reflect.defineMetadata(SimNoProxyKey, true, target, propertyKey);
};
const getSimNoProxy = (target, propertyKey) => {
    try {
        // if (ValidUtils.isNotNullUndefined(target)) {
        // 클래스 데코레이터
        if (propertyKey === undefined) {
            return Reflect.getMetadata(SimNoProxyKey, target);
        }
        // 프로퍼티 데코레이터
        return Reflect.getMetadata(SimNoProxyKey, target, propertyKey);
    }
    catch (e) {
        return undefined;
    }
    // } else {
    //   return undefined;
    // }
};
const isSimNoProxy = (target, propertyKey) => {
    if (target === null || target === undefined) {
        return false;
    }
    return getSimNoProxy(target, propertyKey) === true;
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/aop/AOPDecorator.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/aop/AOPDecorator.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   After: () => (/* binding */ After),
/* harmony export */   Around: () => (/* binding */ Around),
/* harmony export */   AroundForceReturn: () => (/* binding */ AroundForceReturn),
/* harmony export */   Before: () => (/* binding */ Before),
/* harmony export */   getAfter: () => (/* binding */ getAfter),
/* harmony export */   getAfters: () => (/* binding */ getAfters),
/* harmony export */   getAround: () => (/* binding */ getAround),
/* harmony export */   getBefore: () => (/* binding */ getBefore),
/* harmony export */   getBefores: () => (/* binding */ getBefores),
/* harmony export */   getProtoAfters: () => (/* binding */ getProtoAfters),
/* harmony export */   getProtoBefores: () => (/* binding */ getProtoBefores)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");
/* harmony import */ var _MetaDataAtomic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MetaDataAtomic */ "../../packages/@dooboostore/simple-boot/src/decorators/MetaDataAtomic.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");



const AfterMetadataKey = Symbol('After');
const BeforeMetadataKey = Symbol('Before');
const AroundMetadataKey = Symbol('Around');
// after
const After = (data) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.metadata(AfterMetadataKey, data);
};
const getAfter = (target, propertyKey) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(AfterMetadataKey, target, propertyKey);
};
const getAfters = (target) => {
    return (_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.allProtoTypeName(target)
        .map(it => new _MetaDataAtomic__WEBPACK_IMPORTED_MODULE_1__.MetaDataPropertyAtomic(target, getAfter(target, it), it))
        .filter(it => it.metaData !== undefined) || []);
};
const getProtoAfters = (target, propertyKey, type) => {
    return (getAfters(target).filter(it => propertyKey === it.metaData?.property && type === it.metaData.type?.prototype) || []);
};
// before
const Before = (data) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.metadata(BeforeMetadataKey, data);
};
const getBefore = (target, propertyKey) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(BeforeMetadataKey, target, propertyKey);
};
const getBefores = (target) => {
    return (_dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.allProtoTypeName(target)
        .map(it => new _MetaDataAtomic__WEBPACK_IMPORTED_MODULE_1__.MetaDataPropertyAtomic(target, getBefore(target, it), it))
        .filter(it => it.metaData !== undefined) || []);
};
const getProtoBefores = (target, propertyKey, type) => {
    return (getBefores(target).filter(it => propertyKey === it.metaData?.property && type === it.metaData.type?.prototype) || []);
};
class AroundForceReturn {
    value;
    constructor(value) {
        this.value = value;
    }
}
// around
const Around = (config) => {
    return (target, propertyKey, descriptor) => {
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(AroundMetadataKey, config, target, propertyKey);
        const method = descriptor.value;
        descriptor.value = function (...args) {
            // console.log('check method')
            let before = undefined;
            let r = undefined;
            if (config.before) {
                try {
                    before = config.before?.(this, propertyKey, args);
                }
                catch (e) {
                    if (e instanceof AroundForceReturn) {
                        return e.value;
                    }
                }
                r = method.apply(this, before);
            }
            else {
                r = method.apply(this, args);
            }
            if (config.after) {
                try {
                    r = config.after?.(this, propertyKey, args, r);
                }
                catch (e) {
                    if (e instanceof AroundForceReturn) {
                        return e.value;
                    }
                }
            }
            return r;
        };
    };
};
const getAround = (target, propertyKey) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(AroundMetadataKey, target, propertyKey);
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/exception/ExceptionDecorator.ts":
/*!**********************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/exception/ExceptionDecorator.ts ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExceptionHandler: () => (/* binding */ ExceptionHandler),
/* harmony export */   ExceptionHandlerSituationType: () => (/* binding */ ExceptionHandlerSituationType),
/* harmony export */   getExceptionHandler: () => (/* binding */ getExceptionHandler),
/* harmony export */   getExceptionHandlers: () => (/* binding */ getExceptionHandlers),
/* harmony export */   targetExceptionHandler: () => (/* binding */ targetExceptionHandler),
/* harmony export */   targetExceptionHandlers: () => (/* binding */ targetExceptionHandlers)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");


var ExceptionHandlerSituationType;
(function (ExceptionHandlerSituationType) {
    ExceptionHandlerSituationType["ERROR_OBJECT"] = "SIMPLE_BOOT_CORE://ExceptionHandler/ERROR_OBJECT";
    ExceptionHandlerSituationType["PARAMETER"] = "SIMPLE_BOOT_CORE://ExceptionHandler/PARAMETER";
})(ExceptionHandlerSituationType || (ExceptionHandlerSituationType = {}));
const ExceptionHandlerMetadataKey = Symbol('ExceptionHandler');
const ExceptionHandler = (config = {}) => {
    return (target, propertyKey, descriptor) => {
        const saveMappingConfigs = (_dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(ExceptionHandlerMetadataKey, target.constructor) ?? []);
        const method = target[propertyKey];
        saveMappingConfigs.push({ propertyKey, method, config });
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(ExceptionHandlerMetadataKey, saveMappingConfigs, target.constructor);
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(ExceptionHandlerMetadataKey, config, target, propertyKey);
    };
};
const getExceptionHandler = (target, propertyKey) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(ExceptionHandlerMetadataKey, target, propertyKey);
};
const getExceptionHandlers = (target) => {
    if (target !== null && undefined !== target && typeof target === 'object') {
        target = target.constructor;
    }
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(ExceptionHandlerMetadataKey, target);
};
const targetExceptionHandlers = (target, error) => {
    const exceptionHandlers = getExceptionHandlers(target);
    const emptyTargets = exceptionHandlers?.filter(it => it.config.type === undefined);
    const targets = exceptionHandlers?.filter(it => _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.isPrototypeOfTarget(it.config.type, error));
    const targetSorts = targets?.sort((a, b) => {
        const aPrototypeOfDepth = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.prototypeOfDepth(error, a.config.type);
        const bPrototypeOfDepth = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.prototypeOfDepth(error, b.config.type);
        return aPrototypeOfDepth.length - bPrototypeOfDepth.length;
    });
    return (targetSorts ?? []).concat(...emptyTargets ?? []);
};
const targetExceptionHandler = (target, error, excludeMethods = []) => {
    let exceptionHandlers = targetExceptionHandlers(target, error);
    exceptionHandlers = exceptionHandlers?.filter(it => !excludeMethods.includes(it.method));
    if (exceptionHandlers && exceptionHandlers.length > 0) {
        return exceptionHandlers[0];
    }
    else {
        return undefined;
    }
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/inject/Inject.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/inject/Inject.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Inject: () => (/* binding */ Inject),
/* harmony export */   InjectSituationType: () => (/* binding */ InjectSituationType),
/* harmony export */   SituationTypeContainer: () => (/* binding */ SituationTypeContainer),
/* harmony export */   SituationTypeContainers: () => (/* binding */ SituationTypeContainers),
/* harmony export */   getInject: () => (/* binding */ getInject)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");

var InjectSituationType;
(function (InjectSituationType) {
    InjectSituationType["INDEX"] = "SIMPLE_BOOT_CORE://Inject/INDEX";
})(InjectSituationType || (InjectSituationType = {}));
class SituationTypeContainer {
    situationType;
    data;
    index;
    constructor({ situationType, data, index }) {
        this.situationType = situationType;
        this.data = data;
        this.index = index;
    }
}
class SituationTypeContainers {
    containers = [];
    constructor(containers) {
        if (containers) {
            this.containers.push(...containers);
        }
    }
    push(...item) {
        this.containers.push(...item);
    }
    get length() {
        return this.containers.length;
    }
    find(predicate, thisArg) {
        return this.containers.find(predicate);
    }
}
const InjectMetadataKey = Symbol('Inject');
const injectProcess = (config, target, propertyKey, parameterIndex) => {
    if (propertyKey && typeof target === 'object') { // <-- object: method
        const otarget = target;
        target = target.constructor;
        const saves = (Reflect.getOwnMetadata(InjectMetadataKey, target, propertyKey) || []);
        const type = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getParameterTypes(otarget, propertyKey)[parameterIndex];
        saves.push({ index: parameterIndex, config: config, propertyKey, type });
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(InjectMetadataKey, saves, target, propertyKey);
    }
    else if (!propertyKey || typeof target === 'function') { // <-- function: constructor
        const existingInjectdParameters = (_dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(InjectMetadataKey, target) || []);
        const type = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getParameterTypes(target)[parameterIndex];
        existingInjectdParameters.push({ index: parameterIndex, config: config, type });
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(InjectMetadataKey, existingInjectdParameters, target);
    }
};
function Inject(configOrTarget, propertyKey, parameterIndex) {
    if (propertyKey && parameterIndex !== undefined) {
        injectProcess({}, configOrTarget, propertyKey, parameterIndex);
    }
    else {
        return (target, propertyKey, parameterIndex) => {
            injectProcess(configOrTarget, target, propertyKey, parameterIndex);
        };
    }
}
const getInject = (target, propertyKey) => {
    if (target != null && target !== undefined && typeof target === 'object') {
        target = target.constructor;
    }
    if (propertyKey) {
        const parameters = Reflect.getOwnMetadata(InjectMetadataKey, target, propertyKey);
        return parameters;
    }
    else {
        return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(InjectMetadataKey, target) ?? [];
    }
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/inject/Injection.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/inject/Injection.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Injection: () => (/* binding */ Injection),
/* harmony export */   getInjection: () => (/* binding */ getInjection)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");

const InjectionMetadataKey = Symbol('Injection');
function Injection(configOrTarget, propertyKey, descriptor) {
    if (propertyKey && descriptor) {
        const target = configOrTarget;
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(InjectionMetadataKey, {}, target, propertyKey);
    }
    else {
        return (target, propertyKey, descriptor) => {
            const config = configOrTarget;
            _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(InjectionMetadataKey, config ?? {}, target, propertyKey);
        };
    }
}
const getInjection = (target, propertyKey) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(InjectionMetadataKey, target, propertyKey);
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/decorators/route/Router.ts":
/*!******************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/decorators/route/Router.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Route: () => (/* binding */ Route),
/* harmony export */   RouteMetadataKey: () => (/* binding */ RouteMetadataKey),
/* harmony export */   Router: () => (/* binding */ Router),
/* harmony export */   RouterMetadataKey: () => (/* binding */ RouterMetadataKey),
/* harmony export */   getRoute: () => (/* binding */ getRoute),
/* harmony export */   getRouter: () => (/* binding */ getRouter),
/* harmony export */   getRoutes: () => (/* binding */ getRoutes),
/* harmony export */   routerProcess: () => (/* binding */ routerProcess)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");

const RouterMetadataKey = Symbol('Router');
const routerProcess = (config, target) => {
    getRoutes(target)?.forEach(it => {
        config.route = (config.route ?? {});
        const paths = Array.isArray(it.config.path) ? it.config.path : [it.config.path];
        for (const path of paths) {
            if (config.route[path]) {
                const route = config.route[path];
                route.propertyKeys.push(it.propertyKey);
                route.filters = route.filters ?? [];
                if (Array.isArray(it.config.filters)) {
                    route.filters.push(...it.config.filters);
                }
                else if (it.config.filters) {
                    route.filters.push(it.config.filters);
                }
            }
            else {
                config.route[path] = { target, propertyKeys: [it.propertyKey], filters: it.config.filters };
            }
        }
    });
    _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(RouterMetadataKey, config, target);
};
function Router(configOrTarget) {
    if (typeof configOrTarget === 'function') {
        const routerConfig = {
            path: ''
        };
        routerProcess(routerConfig, configOrTarget);
    }
    else {
        return (target) => {
            configOrTarget.path = configOrTarget.path ?? '';
            routerProcess(configOrTarget, target);
        };
    }
}
const getRouter = (target) => {
    if (target != null && typeof target === 'object') {
        target = target.constructor;
    }
    try {
        return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(RouterMetadataKey, target);
    }
    catch (e) { }
};
const RouteMetadataKey = Symbol('RouteMetadataKey');
const Route = (config) => {
    return (target, propertyKey, descriptor) => {
        const saveRouteConfigs = (_dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(RouteMetadataKey, target.constructor) ?? []);
        const method = target[propertyKey];
        saveRouteConfigs.push({ propertyKey, method, config });
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(RouteMetadataKey, saveRouteConfigs, target.constructor);
        _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.defineMetadata(RouteMetadataKey, config, target, propertyKey);
    };
};
const getRoute = (target, propertyKey) => {
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(RouteMetadataKey, target, propertyKey);
};
const getRoutes = (target) => {
    if (target !== null && undefined !== target && typeof target === 'object') {
        target = target.constructor;
    }
    return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_0__.ReflectUtils.getMetadata(RouteMetadataKey, target);
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts":
/*!***********************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiService: () => (/* binding */ ApiService),
/* harmony export */   ApiServiceInterceptor: () => (/* binding */ ApiServiceInterceptor),
/* harmony export */   isStoreAfterFetch: () => (/* binding */ isStoreAfterFetch),
/* harmony export */   isStoreAfterFetchData: () => (/* binding */ isStoreAfterFetchData),
/* harmony export */   isStoreBeforeFetch: () => (/* binding */ isStoreBeforeFetch),
/* harmony export */   isStoreBeforeFetchData: () => (/* binding */ isStoreBeforeFetchData),
/* harmony export */   isStoreError: () => (/* binding */ isStoreError),
/* harmony export */   isStoreFinal: () => (/* binding */ isStoreFinal),
/* harmony export */   isStoreProgress: () => (/* binding */ isStoreProgress),
/* harmony export */   isStoreSuccess: () => (/* binding */ isStoreSuccess)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _alert_AlertService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../alert/AlertService */ "../../packages/@dooboostore/simple-boot/src/alert/AlertService.ts");
/* harmony import */ var _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../simstance/SimstanceManager */ "../../packages/@dooboostore/simple-boot/src/simstance/SimstanceManager.ts");
/* harmony import */ var _dooboostore_core_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core/types */ "../../packages/@dooboostore/core/src/types.ts");
/* harmony import */ var _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core/message/Subject */ "../../packages/@dooboostore/core/src/message/Subject.ts");
/* harmony import */ var _dooboostore_core_fetch_HttpJsonFetcher__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/core/fetch/HttpJsonFetcher */ "../../packages/@dooboostore/core/src/fetch/HttpJsonFetcher.ts");
var _a, _b;







var ApiServiceInterceptor;
(function (ApiServiceInterceptor) {
    ApiServiceInterceptor.TOKEN = Symbol('ApiServiceInterceptor');
    ApiServiceInterceptor.resolveAll = (simstanceManager) => {
        try {
            return (simstanceManager.findSims(ApiServiceInterceptor.TOKEN) ?? []).map(it => it.getValue()).filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_4__.isDefined);
        }
        catch (e) {
            return [];
        }
    };
})(ApiServiceInterceptor || (ApiServiceInterceptor = {}));
const isStoreAfterFetch = (data) => {
    return data.type === 'afterFetch';
};
const isStoreAfterFetchData = (data) => {
    return data.type === 'afterFetchData';
};
const isStoreBeforeFetch = (data) => {
    return data.type === 'beforeFetch';
};
const isStoreBeforeFetchData = (data) => {
    return data.type === 'beforeFetchData';
};
const isStoreProgress = (data) => {
    return data.type === 'progress';
};
const isStoreSuccess = (data) => {
    return data.type === 'success';
};
const isStoreError = (data) => {
    return data.type === 'error';
};
const isStoreFinal = (data) => {
    return data.type === 'final';
};
let ApiService = class ApiService extends _dooboostore_core_fetch_HttpJsonFetcher__WEBPACK_IMPORTED_MODULE_6__.HttpJsonFetcher {
    simstanceManager;
    subject = new _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_5__.Subject();
    alertService;
    constructor(simstanceManager, alertService) {
        super();
        this.simstanceManager = simstanceManager;
        this.alertService = alertService;
        // console.log('%c ApiService constructor', 'color: #ff0000');
    }
    // @PostConstruct
    // postConstruct(alertService: AlertService<any>) {
    //   this.alertService = alertService;
    // }
    get observable() {
        return this.subject.asObservable();
    }
    createPipe(config) {
        return {};
    }
    async beforeProxyFetch(config) {
        let interceptors = ApiServiceInterceptor.resolveAll(this.simstanceManager);
        for (const interceptor of interceptors) {
            if (interceptor.beforeProxyFetch) {
                config = await interceptor.beforeProxyFetch(config);
            }
        }
        // @ts-ignore
        this.subject.next({ type: 'beforeFetchData', config: config });
        return config;
    }
    async afterProxyFetch(config) {
        // console.log('afterProxyFetch!!!!11', config);
        let interceptors = ApiServiceInterceptor.resolveAll(this.simstanceManager);
        let r = config.response;
        for (const interceptor of interceptors) {
            if (interceptor.afterProxyFetch) {
                r = await interceptor.afterProxyFetch(config);
            }
        }
        // console.log('afterProxyFetch!!!!22', r);
        this.subject.next({ type: 'afterFetchData', response: r });
        return r;
    }
    beforeFetch(fetch) {
        this.subject.next({ type: 'beforeFetch', fetch });
    }
    afterFetch(fetch, response) {
        this.subject.next({ type: 'afterFetch', fetch, response });
    }
    before(config, pipe) {
        this.subject.next({ type: 'progress', config, pipe });
        config.config?.config?.callBackProgress?.(config, pipe);
        if (config.config?.config?.alertProgress) {
            const alert = this.alertService?.progress({ title: config.config.config.title });
            if (alert) {
                pipe.progress = alert;
                alert.active();
            }
        }
    }
    afterSuccess(config, pipe) {
        this.subject.next({ type: 'success', config, pipe });
        config.config?.config?.callBackSuccess?.(config, pipe);
        if (config.config?.config?.alertSuccessMsg) {
            this.alertService?.success({ title: config.config.config.title })?.active();
        }
    }
    afterSuccessTransform(config, pipe) {
    }
    finally(config, pipe) {
        this.subject.next({ type: 'final', config, pipe });
        config.config?.config?.callBackFinal?.(config, pipe);
        pipe.progress?.inActive();
    }
    error(config, pipe, e) {
        console.log('error', e);
        this.subject.next({ type: 'error', config, pipe, e });
        config.config?.config?.callBackError?.(config, pipe, e);
        if (config.config?.config?.alertErrorMsg) {
            this.alertService?.danger({
                title: `${config.config.config.title ? config.config.config.title : ''}${e.message ? `(${e.message})` : ''}`
            })
                ?.active();
        }
        if (config.config?.config?.enableErrorConsole) {
            console.error(`apiService Error ${config?.config?.config?.title}`, e);
        }
    }
    async execute(fetcherRequest
    // target: HttpFetcherTarget,
    // config?: HttpFetcherConfig<ApiService.ApiServiceConfig>
    ) {
        const target = fetcherRequest.target;
        const config = fetcherRequest.config;
        let r = { target, config };
        const interceptor = ApiServiceInterceptor.resolveAll(this.simstanceManager) ?? [];
        for (const apiServiceInterceptor of interceptor) {
            if (apiServiceInterceptor.beforeProxyExecute) {
                r = await apiServiceInterceptor.beforeProxyExecute?.(r);
            }
        }
        return super.execute(r);
    }
};
ApiService = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.Sim,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_3__.SimstanceManager !== "undefined" && _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_3__.SimstanceManager) === "function" ? _a : Object, typeof (_b = typeof _alert_AlertService__WEBPACK_IMPORTED_MODULE_2__.AlertService !== "undefined" && _alert_AlertService__WEBPACK_IMPORTED_MODULE_2__.AlertService) === "function" ? _b : Object])
], ApiService);



/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/intent/Intent.ts":
/*!********************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/intent/Intent.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Intent: () => (/* binding */ Intent),
/* harmony export */   PublishType: () => (/* binding */ PublishType)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/expression/Expression */ "../../packages/@dooboostore/core/src/expression/Expression.ts");

var PublishType;
(function (PublishType) {
    PublishType["DATA_PARAMETERS"] = "DATA_PARAMETERS";
    PublishType["INLINE_DATA_PARAMETERS"] = "INLINE_DATA_PARAMETERS";
})(PublishType || (PublishType = {}));
/* uri struct
    scheme uri example: mymodule://asd/asd/b?a=545&aa=33&wow=wow
    global uri example: ://asd/asd/b?a=545&aa=33&wow=wow
    route uri example: Router(/users/aa/ffw)://asd/asd/b?a=545&aa=33&wow=wow
    Symbol.for uri example: Symbol.for(zzz)://asd/asd/b?a=545&aa=33&wow=wow
    <스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>?<질의>#<프레그먼트>
*/
class Intent {
    uri;
    data;
    event;
    publishType;
    sessionData = new Map();
    constructor(uri, data, event) {
        this.uri = uri;
        this.data = data;
        this.event = event;
        if (typeof uri === 'string') {
            const match = uri.match(/^Symbol\.for\((.+)\):\/(.*)$/);
            if (match) {
                const symbol = Symbol.for(match[1]);
                this.uri = {
                    symbol: symbol,
                    uri: match[2],
                };
            }
        }
    }
    get symbols() {
        if (typeof this.uri === 'object') {
            // ensure symbol is always an array
            return Array.isArray(this.uri.symbol) ? this.uri.symbol : [this.uri.symbol];
        }
        return undefined;
    }
    get scheme() {
        if (typeof this.uri === 'string') {
            const parts = this.uri.split('://');
            if (parts.length > 1) {
                return parts[0];
            }
            return undefined;
        }
        else {
            return undefined;
        }
    }
    get paths() {
        return (this.pathname.split('/') ?? []);
    }
    get fullPath() {
        const uri = typeof this.uri === 'string' ? this.uri : this.uri.uri;
        const paths = uri.split('://');
        return paths[paths.length >= 2 ? 1 : 0] ?? '';
    }
    get pathname() {
        const paths = this.fullPath.split('?');
        return paths[0];
    }
    get query() {
        const paths = this.fullPath.split('?');
        return paths[1] ?? '';
    }
    get queryParams() {
        const param = {};
        this.query.split('&')?.forEach(it => {
            const a = it.split('=');
            param[a[0]] = a[1];
        });
        return param;
    }
    get queryParamsAfterDecodeURI() {
        const params = this.queryParams;
        for (const key in params) {
            if (params.hasOwnProperty(key)) {
                params[key] = decodeURIComponent(params[key]);
            }
        }
        return params;
    }
    getPathnameData(urlExpression) {
        return _dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_0__.Expression.Path.pathNameData(this.pathname, urlExpression);
    }
    get isSymbolScheme() {
        return this.symbols !== undefined;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/intent/IntentManager.ts":
/*!***************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/intent/IntentManager.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IntentManager: () => (/* binding */ IntentManager),
/* harmony export */   isRouterPublishType: () => (/* binding */ isRouterPublishType)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _Intent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Intent */ "../../packages/@dooboostore/simple-boot/src/intent/Intent.ts");
/* harmony import */ var _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../simstance/SimstanceManager */ "../../packages/@dooboostore/simple-boot/src/simstance/SimstanceManager.ts");
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../simstance/SimAtomic */ "../../packages/@dooboostore/simple-boot/src/simstance/SimAtomic.ts");
/* harmony import */ var _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core/message/Subject */ "../../packages/@dooboostore/core/src/message/Subject.ts");
/* harmony import */ var _route_RouterManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../route/RouterManager */ "../../packages/@dooboostore/simple-boot/src/route/RouterManager.ts");
/* harmony import */ var _SimOption__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../SimOption */ "../../packages/@dooboostore/simple-boot/src/SimOption.ts");
var _a, _b, _c;








const isRouterPublishType = (it) => typeof it === 'object' &&
    typeof it.router === 'string' &&
    typeof it.rootRouter === 'function';
let IntentManager = class IntentManager {
    simstanceManager;
    routerManager;
    simOption;
    subject = new _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_5__.Subject();
    constructor(simstanceManager, routerManager, simOption) {
        this.simstanceManager = simstanceManager;
        this.routerManager = routerManager;
        this.simOption = simOption;
    }
    get observable() {
        return this.subject.asObservable();
    }
    async publish(it, data) {
        const target = [];
        const rootRouter = isRouterPublishType(it) ? it.rootRouter : this.simOption.rootRouter;
        it = isRouterPublishType(it) ? it.router : it;
        const routerMatch = typeof it === 'string' && it.match(/^Router\((.+)\):\/(.*)$/); // Escaped parentheses and slash, no quotes
        if (routerMatch && typeof it === 'string') {
            const routerBasePath = routerMatch[1];
            const actualPath = routerMatch[2];
            const routerModule = await this.routerManager.routing(routerBasePath, { router: rootRouter });
            const instance = routerModule.getModuleInstance();
            if (instance) {
                target.push(instance);
            }
            it = new _Intent__WEBPACK_IMPORTED_MODULE_1__.Intent(actualPath, data);
        }
        else if (typeof it === 'string') {
            it = new _Intent__WEBPACK_IMPORTED_MODULE_1__.Intent(it, data);
        }
        let intent = it;
        const r = [];
        if (!routerMatch) {
            if (intent.symbols) {
                target.push(...intent.symbols.map(sym => this.simstanceManager.findSims(sym)).flat());
            }
            else if (intent.scheme) {
                target.push(...this.simstanceManager.getSimConfig(intent.scheme));
            }
            else {
                target.push(...this.simstanceManager.getSimAtomics());
            }
        }
        const targetInstances = target.map(it => {
            if (it instanceof _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__.SimAtomic) {
                return it.getValue();
            }
            else {
                return it;
            }
        });
        this.subject.next(it);
        targetInstances.forEach(data => {
            let orNewSim = data;
            if (orNewSim) {
                if (intent.paths.length > 0) {
                    let callthis = orNewSim;
                    let lastProp = '';
                    intent.paths
                        .filter(i => i)
                        .forEach(i => {
                        callthis = orNewSim;
                        orNewSim = orNewSim?.[i];
                        lastProp = i;
                    });
                    if (orNewSim && typeof orNewSim === 'function') {
                        if (_Intent__WEBPACK_IMPORTED_MODULE_1__.PublishType.DATA_PARAMETERS === intent.publishType) {
                            r.push(orNewSim.call(callthis, intent.data));
                        }
                        else if (_Intent__WEBPACK_IMPORTED_MODULE_1__.PublishType.INLINE_DATA_PARAMETERS === intent.publishType) {
                            r.push(orNewSim.call(callthis, ...intent.data));
                        }
                        else {
                            r.push(orNewSim.call(callthis, intent));
                        }
                    }
                    else if (orNewSim) {
                        callthis[lastProp] = intent.data;
                        r.push(callthis[lastProp]);
                    }
                }
                else {
                    if (_Intent__WEBPACK_IMPORTED_MODULE_1__.PublishType.DATA_PARAMETERS === intent.publishType) {
                        r.push(orNewSim?.intentSubscribe?.(intent.data));
                    }
                    else if (_Intent__WEBPACK_IMPORTED_MODULE_1__.PublishType.INLINE_DATA_PARAMETERS === intent.publishType) {
                        r.push(orNewSim?.intentSubscribe?.(...intent.data));
                    }
                    else {
                        r.push(orNewSim?.intentSubscribe?.(intent));
                    }
                }
            }
        });
        return r;
    }
};
IntentManager = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_3__.Sim,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_2__.SimstanceManager !== "undefined" && _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_2__.SimstanceManager) === "function" ? _a : Object, typeof (_b = typeof _route_RouterManager__WEBPACK_IMPORTED_MODULE_6__.RouterManager !== "undefined" && _route_RouterManager__WEBPACK_IMPORTED_MODULE_6__.RouterManager) === "function" ? _b : Object, typeof (_c = typeof _SimOption__WEBPACK_IMPORTED_MODULE_7__.SimOption !== "undefined" && _SimOption__WEBPACK_IMPORTED_MODULE_7__.SimOption) === "function" ? _c : Object])
], IntentManager);



/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/lifecycle/OnSimCreate.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/lifecycle/OnSimCreate.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnSimCreate: () => (/* binding */ isOnSimCreate)
/* harmony export */ });
const isOnSimCreate = (obj) => {
    return typeof obj?.onSimCreate === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/lifecycle/OnSimCreateCompleted.ts":
/*!*************************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/lifecycle/OnSimCreateCompleted.ts ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isOnSimCreateProxyCompleted: () => (/* binding */ isOnSimCreateProxyCompleted)
/* harmony export */ });
const isOnSimCreateProxyCompleted = (obj) => {
    return typeof obj?.onSimCreateProxyCompleted === 'function';
};


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/proxy/SimProxyHandler.ts":
/*!****************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/proxy/SimProxyHandler.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimProxyHandler: () => (/* binding */ SimProxyHandler)
/* harmony export */ });
/* harmony import */ var _decorators_aop_AOPDecorator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../decorators/aop/AOPDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/aop/AOPDecorator.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");
/* harmony import */ var _decorators_exception_ExceptionDecorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../decorators/exception/ExceptionDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/exception/ExceptionDecorator.ts");
/* harmony import */ var _decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../decorators/inject/Inject */ "../../packages/@dooboostore/simple-boot/src/decorators/inject/Inject.ts");




class SimProxyHandler {
    simpleApplication;
    simstanceManager;
    simOption;
    constructor(simpleApplication, simstanceManager, simOption) {
        this.simpleApplication = simpleApplication;
        this.simstanceManager = simstanceManager;
        this.simOption = simOption;
        // console.log('SimProxyHandler', simstanceManager, simOption)
    }
    // 잘받게 해놨네 ㅋㅋ  simstanceManager
    get(target, name) {
        if (name === '_SimpleBoot_application') {
            return this.simpleApplication;
        }
        else if (name === '_SimpleBoot_simstanceManager') {
            return this.simstanceManager;
        }
        else if (name === '_SimpleBoot_simOption') {
            return this.simOption;
        }
        else {
            return target[name];
        }
    }
    set(obj, prop, value, receiver) {
        value = this.simstanceManager?.proxy(value);
        obj[prop] = value;
        return true;
    }
    apply(target, thisArg, argumentsList) {
        let r;
        try {
            this.aopBefore(thisArg, target);
            try {
                // @ts-ignore
                r = Reflect.apply(target, thisArg, argumentsList);
                // r = target.apply(thisArg, argumentsList);
                // eslint-disable-next-line no-useless-catch
            }
            catch (e) {
                throw e;
            }
            finally {
                this.aopAfter(thisArg, target);
            }
        }
        catch (e) {
            console.error(e);
            const inHandlers = this.getExceptionHandler(e, thisArg, target);
            if (inHandlers.length > 0 && inHandlers[0]) {
                const inHandler = inHandlers[0];
                this.executeExceptionHandler(e, inHandler, argumentsList);
            }
            else {
                throw e;
            }
        }
        return r;
    }
    executeExceptionHandler(e, inHandler, argumentsList) {
        const otherStorage = new Map();
        otherStorage.set(e.constructor, e);
        const situationErrorTypeContainer = new _decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_3__.SituationTypeContainer({
            situationType: _decorators_exception_ExceptionDecorator__WEBPACK_IMPORTED_MODULE_2__.ExceptionHandlerSituationType.ERROR_OBJECT,
            data: e
        });
        const situationParameterTypeContainer = new _decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_3__.SituationTypeContainer({
            situationType: _decorators_exception_ExceptionDecorator__WEBPACK_IMPORTED_MODULE_2__.ExceptionHandlerSituationType.PARAMETER,
            data: argumentsList
        });
        otherStorage.set(_decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_3__.SituationTypeContainers, new _decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_3__.SituationTypeContainers([situationErrorTypeContainer, situationParameterTypeContainer]));
        argumentsList?.forEach(it => {
            otherStorage.set(it.constructor, it);
        });
        try {
            this.simstanceManager.executeBindParameterSim({
                target: inHandler.thisArg,
                targetKey: inHandler.config.propertyKey
            }, otherStorage);
        }
        catch (es) {
            e = es;
        }
        if (inHandler.config.config.throw) {
            const exceptionHandler = this.getExceptionHandler(e, inHandler.thisArg, inHandler.config.method);
            if ((exceptionHandler?.length ?? 0) > 0) {
                this.executeExceptionHandler(e, exceptionHandler[0], argumentsList);
            }
        }
    }
    getExceptionHandler(e, thisArg, target) {
        const globalConfigSets = this.simOption.advice.map(it => this.simstanceManager?.getOrNewSim({ target: it })).filter(it => it).map(it => {
            return { thisArg: it, config: (0,_decorators_exception_ExceptionDecorator__WEBPACK_IMPORTED_MODULE_2__.targetExceptionHandler)(it, e, [target]) };
        }) ?? [];
        const thisConfigSet = { thisArg: thisArg, config: (0,_decorators_exception_ExceptionDecorator__WEBPACK_IMPORTED_MODULE_2__.targetExceptionHandler)(thisArg, e, [target]) };
        const inHandlers = [thisConfigSet, ...globalConfigSets].filter(it => it && it.config);
        return inHandlers;
    }
    aopBefore(obj, protoType) {
        const propertyName = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.prototypeName(obj, protoType);
        if (propertyName && obj) {
            (0,_decorators_aop_AOPDecorator__WEBPACK_IMPORTED_MODULE_0__.getProtoBefores)(obj, propertyName).forEach(it => {
                it.call(obj, protoType, propertyName);
            });
            for (let i = 0; i < this.simOption.advice.length; i++) {
                const sim = this.simstanceManager?.getOrNewSim({ target: this.simOption.advice[i] });
                const protoBefores = (0,_decorators_aop_AOPDecorator__WEBPACK_IMPORTED_MODULE_0__.getProtoBefores)(sim, propertyName, Object.getPrototypeOf(obj));
                protoBefores.forEach(it => {
                    it.call(obj, protoType, propertyName);
                });
            }
        }
    }
    aopAfter(obj, protoType) {
        const propertyName = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.prototypeName(obj, protoType);
        if (propertyName) {
            (0,_decorators_aop_AOPDecorator__WEBPACK_IMPORTED_MODULE_0__.getProtoAfters)(obj, propertyName).forEach(it => {
                it.call(obj, protoType, propertyName);
            });
            for (let i = 0; i < this.simOption.advice.length; i++) {
                const sim = this.simstanceManager?.getOrNewSim({ target: this.simOption.advice[i] });
                const protoBefores = (0,_decorators_aop_AOPDecorator__WEBPACK_IMPORTED_MODULE_0__.getProtoAfters)(sim, propertyName, Object.getPrototypeOf(obj));
                protoBefores.forEach(it => {
                    it.call(obj, protoType, propertyName);
                });
            }
        }
    }
    has(target, key) {
        if (key === '_SimpleBoot_isProxy') {
            return true;
        }
        return key in target;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/route/RouterAction.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/route/RouterAction.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RouterAction: () => (/* binding */ RouterAction)
/* harmony export */ });
var RouterAction;
(function (RouterAction) {
    RouterAction.isCanActivate = (obj) => {
        return typeof obj?.canActivate === 'function';
    };
    RouterAction.isOnRouting = (obj) => {
        return typeof obj?.onRouting === 'function';
    };
    RouterAction.isHasActivate = (obj) => {
        return typeof obj?.hasActivate === 'function';
    };
})(RouterAction || (RouterAction = {}));


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/route/RouterManager.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/route/RouterManager.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RouterManager: () => (/* binding */ RouterManager)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _intent_Intent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../intent/Intent */ "../../packages/@dooboostore/simple-boot/src/intent/Intent.ts");
/* harmony import */ var _RouterModule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RouterModule */ "../../packages/@dooboostore/simple-boot/src/route/RouterModule.ts");
/* harmony import */ var _decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../decorators/route/Router */ "../../packages/@dooboostore/simple-boot/src/decorators/route/Router.ts");
/* harmony import */ var _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../simstance/SimAtomic */ "../../packages/@dooboostore/simple-boot/src/simstance/SimAtomic.ts");
/* harmony import */ var _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../simstance/SimstanceManager */ "../../packages/@dooboostore/simple-boot/src/simstance/SimstanceManager.ts");
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dooboostore/core/expression/Expression */ "../../packages/@dooboostore/core/src/expression/Expression.ts");
/* harmony import */ var _route_RouterAction__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../route/RouterAction */ "../../packages/@dooboostore/simple-boot/src/route/RouterAction.ts");
/* harmony import */ var _SimOption__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../SimOption */ "../../packages/@dooboostore/simple-boot/src/SimOption.ts");
/* harmony import */ var _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @dooboostore/core/message/Subject */ "../../packages/@dooboostore/core/src/message/Subject.ts");
var _a, _b;











let RouterManager = class RouterManager {
    simstanceManager;
    simOption;
    activeRouterModule;
    subject = new _dooboostore_core_message_Subject__WEBPACK_IMPORTED_MODULE_10__.Subject();
    constructor(simstanceManager, simOption) {
        this.simstanceManager = simstanceManager;
        this.simOption = simOption;
    }
    // @SimNoProxy
    get observable() {
        // this.subject.asObservable
        return this.subject.asObservable();
    }
    routingMap(option) {
        const targetRouter = option?.router ?? this.simOption.rootRouter;
        if (!targetRouter) {
            throw new Error('no router');
        }
        const map = {};
        if (targetRouter) {
            const targetType = (typeof targetRouter === 'object') ? targetRouter.constructor : targetRouter;
            const targetValue = (typeof targetRouter === 'object') ? targetRouter : undefined;
            const routerAtomic = new _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__.SimAtomic({ targetKeyType: targetType, originalType: targetType, value: targetValue }, this.simstanceManager);
            const routerData = routerAtomic.getConfig(_decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__.RouterMetadataKey);
            if (routerData) {
                const currentPrefix = (option?.prefix ?? '') + routerData.path;
                // Add the current router's path if it has a default route
                if (routerData.route && routerData.route['']) {
                    map[currentPrefix] = routerData.route[''];
                }
                if (routerData.route) {
                    Object.entries(routerData.route).forEach(([key, value]) => {
                        map[currentPrefix + key] = value;
                    });
                }
                routerData.routers?.forEach(it => {
                    Object.assign(map, this.routingMap({ ...option, router: it, prefix: currentPrefix }));
                });
            }
        }
        return map;
    }
    /** 일반적인 lifecycle 타지않는 그냥 find.. 의미가없을듯.
     * @deprecated
     */
    async routings(intent, option) {
        const targetRouter = option?.router ?? this.simOption.rootRouter;
        if (!targetRouter) {
            throw new Error('no router');
        }
        const targetType = (typeof targetRouter === 'object') ? targetRouter.constructor : targetRouter;
        const targetValue = (typeof targetRouter === 'object') ? targetRouter : undefined;
        const routerAtomic = new _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__.SimAtomic({ targetKeyType: targetType, originalType: targetType, value: targetValue }, this.simstanceManager);
        const allMatches = this._collectAllMatchingModules(routerAtomic, intent, []);
        // Priority 1: Exact path match with a module
        const exactModuleMatches = allMatches.filter(rm => rm.path === intent.pathname && rm.module);
        if (exactModuleMatches.length > 0) {
            exactModuleMatches.forEach(it => this.subject.next(({ intent, routerManager: this, routerModule: it })));
            return exactModuleMatches;
        }
        // Priority 2: Exact path match without a module (if no module matches found)
        const exactPathMatches = allMatches.filter(rm => rm.path === intent.pathname);
        if (exactPathMatches.length > 0) {
            exactPathMatches.forEach(it => this.subject.next(({ intent, routerManager: this, routerModule: it })));
            return exactPathMatches;
        }
        return [];
    }
    async routing(intent, option) {
        if (typeof intent === 'string') {
            intent = new _intent_Intent__WEBPACK_IMPORTED_MODULE_1__.Intent(intent);
        }
        const targetRouter = option?.router ?? this.simOption.rootRouter;
        if (!targetRouter) {
            throw new Error('no router');
        }
        // await new Promise((r)=> setTimeout(r, 0)); // <-- 이거 넣어야지 두번불러지는게 없어지는듯? 뭐지 event loop 변경된건가?
        const targetType = (typeof targetRouter === 'object') ? targetRouter.constructor : targetRouter;
        const targetValue = (typeof targetRouter === 'object') ? targetRouter : undefined;
        const routerAtomic = new _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__.SimAtomic({ targetKeyType: targetType, originalType: targetType, value: targetValue }, this.simstanceManager);
        const rootRouter = routerAtomic.getValue();
        const executeModuleResult = this.getExecuteModule(routerAtomic, intent, [], option);
        if (executeModuleResult) {
            const [executeModule, routerChains] = executeModuleResult;
            executeModule.routerChains = routerChains;
            this.activeRouterModule = executeModule;
            const routingDataSet = { intent, routerModule: executeModule, routerManager: this };
            // --- 라우팅 경로(Chain)에 있는 모든 라우터의 라이프사이클 훅 호출 ---
            // 최종 목적지에 도달하기까지 거쳐온 모든 중간 라우터들(예: RootRouter -> UserRouter)을 순회하며
            // 각 라우터의 canActivate와 onRouting을 호출합니다.
            // 이를 통해 각 단계에서 라우팅을 검사하거나 공통 작업을 수행할 수 있습니다.
            if (routerChains.length > 0) {
                for (let i = 0; i < routerChains.length; i++) {
                    const current = routerChains[i];
                    const next = routerChains[i + 1];
                    const value = current.getValue();
                    if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isCanActivate(value) && next) {
                        await value.canActivate(routingDataSet, next.getValue());
                    }
                    if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isOnRouting(value) && next) {
                        await value.onRouting(routingDataSet);
                    }
                }
            }
            this.activeRouterModule = executeModule;
            const moduleInstance = executeModule.getModuleInstance();
            // --- Case 1: 부분 일치 (라우터는 찾았지만, 특정 모듈은 찾지 못한 경우) ---
            // URL이 라우터의 경로와는 일치하지만, 그 안의 특정 `route` 항목과는 일치하지 않을 때 발생합니다.
            // 이 경우, 일치한 마지막 라우터의 라이프사이클 훅을 호출합니다.
            if (!executeModule?.module) {
                const routerChain = executeModule.routerChains[executeModule.routerChains.length - 1];
                const value = routerChain?.getValue();
                if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isCanActivate(value)) {
                    await value.canActivate(routingDataSet, moduleInstance);
                }
                if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isOnRouting(value)) {
                    await value.onRouting(routingDataSet);
                }
            }
            // --- Case 2: 완전 일치 (라우터와 특정 모듈을 모두 찾은 경우) ---
            // 표준 성공 케이스입니다.
            // 모듈을 포함하는 라우터와 모듈 인스턴스 자체의 라이프사이클 훅을 호출합니다.
            else { // find page
                const value = executeModule.router?.getValue();
                if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isCanActivate(value)) {
                    await value.canActivate(routingDataSet, moduleInstance);
                }
                if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isOnRouting(value)) {
                    await value.onRouting(routingDataSet);
                }
                // 가지고있는 선택된 Route도 isRouting이면
                if (moduleInstance && _route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isOnRouting(moduleInstance)) {
                    await moduleInstance.onRouting(routingDataSet);
                }
            }
            const find = this.activeRouterModule;
            this.subject.next({ intent: intent, routerModule: find, routerManager: this });
            return find;
        }
        else {
            const empty = await this._handleNotFoundRouting(rootRouter, intent);
            this.subject.next({ intent: intent, routerModule: empty, routerManager: this });
            return empty;
        }
    }
    /**
     * URL과 일치하는 라우트를 찾지 못했을 경우를 처리합니다.
     * "Not Found" 상태를 나타내는 비어있는 RouterModule 객체를 생성하여 반환합니다.
     * 이 과정에서 rootRouter의 라이프사이클을 호출하여 공통 레이아웃등을 처리할 수 있습니다.
     * @param rootRouter 앱의 최상위 라우터 인스턴스
     * @param intent 확인에 실패한 원본 Intent 객체
     * @private
     */
    async _handleNotFoundRouting(rootRouter, intent) {
        /*
         * 이전 원본 로직 (참고용)
         * const routers: SimAtomic[] = []; 로 인해 if문이 항상 false가 되어 실제로는 동작하지 않았음.
         *
         * const routers: SimAtomic[] = [];
         * const routerModule = new RouterModule(this.simstanceManager, rootRouter, undefined, routers);
         * const routingDataSet = {intent, routerModule: routerModule, routerManager: this};
         * if (routers.length && routers.length > 0) {
         *   for (let i = 0; i < routers.length; i++) {
         *     const current = routers[i];
         *     const next = routers[i + 1];
         *     const value = current.getValue()! as any;
         *     // console.log('routerAction!!!!!!!!!3')
         *     if (RouterAction.isCanActivate(value)) {
         *       await value.canActivate(routingDataSet, next?.getValue() ?? null);
         *     }
         *     if (RouterAction.isOnRouting(value)) {
         *       await value.onRouting(routingDataSet);
         *     }
         *   }
         * }
         * this.activeRouterModule = routerModule;
         * return this.activeRouterModule as RouterModule<any, any>;
        */
        const routerModule = new _RouterModule__WEBPACK_IMPORTED_MODULE_2__.RouterModule(this.simstanceManager, rootRouter, undefined, []);
        const routingDataSet = { intent, routerModule: routerModule, routerManager: this };
        const value = rootRouter;
        if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isCanActivate(value)) {
            await value.canActivate(routingDataSet, null);
        }
        if (_route_RouterAction__WEBPACK_IMPORTED_MODULE_8__.RouterAction.isOnRouting(value)) {
            await value.onRouting(routingDataSet);
        }
        this.activeRouterModule = routerModule;
        return this.activeRouterModule;
    }
    getExecuteModule(router, intent, parentRouters, option) {
        const path = intent.pathname;
        const routerConfig = router.getConfig(_decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__.RouterMetadataKey);
        if (routerConfig) {
            // filter
            const filters = [];
            if (Array.isArray(routerConfig.filters)) {
                filters.push(...routerConfig.filters);
            }
            else if (routerConfig.filters) {
                filters.push(routerConfig.filters);
            }
            const noAccept = filters.some(it => (typeof it === 'function' ? this.simstanceManager.getOrNewSim({ target: it }) : it)?.isAccept(intent) === false);
            if (noAccept) {
                return;
            }
            const routerStrings = parentRouters.map(it => it.getConfig(_decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__.RouterMetadataKey)?.path || '');
            const isRoot = this.isRootUrl(routerConfig.path, routerStrings, path);
            // console.log('----------routerConfig.path', routerConfig.path, 'isRoot', isRoot, 'routerStrings', routerStrings, 'path', path);
            if (isRoot) {
                const currentParentRouters = [...parentRouters, router];
                // first find child routers
                if (routerConfig.routers && routerConfig.routers.length > 0) {
                    let bestMatchModule = undefined;
                    let bestMatchLength = -1;
                    for (const child of routerConfig.routers) {
                        const routerAtomic = new _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__.SimAtomic({ targetKeyType: child, originalType: child }, this.simstanceManager);
                        const executeModule = this.getExecuteModule(routerAtomic, intent, currentParentRouters, option);
                        if (executeModule) {
                            const [rm, chains] = executeModule;
                            const currentMatchLength = rm.path?.length || 0;
                            if (currentMatchLength > bestMatchLength) {
                                bestMatchLength = currentMatchLength;
                                bestMatchModule = executeModule;
                            }
                            else if (currentMatchLength === bestMatchLength) {
                                if (option?.find?.router === 'last') {
                                    bestMatchModule = executeModule;
                                }
                            }
                        }
                    }
                    if (bestMatchModule) {
                        return bestMatchModule;
                    }
                }
                // second find my child routers
                const module = this.findRouterOrModule(router, routerConfig, routerStrings, intent);
                if (module) {
                    return [module, currentParentRouters];
                }
            }
        }
    }
    // path: 지금 내 라우터의 path,  parentRoots: 부모router path들,  url: 사용자가 원하는 full intent url
    isRootUrl(path, parentRoots, url) {
        const searchString = parentRoots.join('') + (path || ''); //현재까지 경로 내포함
        if (searchString === '/') {
            return true;
        }
        const searchs = searchString.split('/');
        const urls = url.split('/');
        const trimmedUrls = urls.slice(0, searchs.length).join('/');
        // console.log('!!searchString', searchString, 'url', trimmedUrls);
        return !!_dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_7__.Expression.Path.pathNameData(trimmedUrls, searchString);
        // return url.startsWith(searchString)
    }
    _collectAllMatchingModules(router, intent, parentRouters) {
        const matches = [];
        const path = intent.pathname;
        const routerConfig = router.getConfig(_decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__.RouterMetadataKey);
        if (routerConfig) {
            const filters = [];
            if (Array.isArray(routerConfig.filters)) {
                filters.push(...routerConfig.filters);
            }
            else if (routerConfig.filters) {
                filters.push(routerConfig.filters);
            }
            const noAccept = filters.some(it => (typeof it === 'function' ? this.simstanceManager.getOrNewSim({ target: it }) : it)?.isAccept(intent) === false);
            if (noAccept) {
                return matches;
            }
            const routerStrings = parentRouters.map(it => it.getConfig(_decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__.RouterMetadataKey)?.path || '');
            const isRoot = this.isRootUrl(routerConfig.path, routerStrings, path);
            if (isRoot) {
                const currentParentRouters = [...parentRouters, router];
                // Collect matches from child routers
                if (routerConfig.routers && routerConfig.routers.length > 0) {
                    for (const child of routerConfig.routers) {
                        const routerAtomic = new _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_4__.SimAtomic({ targetKeyType: child, originalType: child }, this.simstanceManager);
                        matches.push(...this._collectAllMatchingModules(routerAtomic, intent, currentParentRouters));
                    }
                }
                // Collect matches from current router's routes or the router itself
                const module = this.findRouterOrModule(router, routerConfig, routerStrings, intent);
                if (module) {
                    module.routerChains = currentParentRouters;
                    matches.push(module);
                }
            }
        }
        return matches;
    }
    findRouterOrModule(router, routerData, parentRoots, intent) {
        // 1. Try to find an exact route module match
        const module = this.findRouting(router, routerData, parentRoots, intent);
        if (module?.module) {
            module.intent = intent;
            return module;
        }
        // 2. If no exact module, check if the intent path matches the router's path
        const urlRoot = parentRoots.join('') + (routerData.path || '');
        if (this.isRootUrl(routerData.path, parentRoots, intent.pathname)) {
            const rm = new _RouterModule__WEBPACK_IMPORTED_MODULE_2__.RouterModule(this.simstanceManager, router);
            rm.intent = intent;
            rm.path = urlRoot;
            rm.pathData = intent.getPathnameData(urlRoot);
            return rm;
        }
        return undefined;
    }
    findRouting(router, routerData, parentRoots, intent) {
        // console.log('findRouting', routerData.route);
        const urlRoot = parentRoots.join('') + routerData.path;
        if (routerData.route) {
            for (const it of Object.keys(routerData.route).filter(it => !it.startsWith('_'))) {
                const path = urlRoot + it;
                const pathnameData = intent.getPathnameData(path);
                if (pathnameData) {
                    try {
                        const dataSet = this.findRouteProperty(routerData.route, it, intent);
                        const rm = new _RouterModule__WEBPACK_IMPORTED_MODULE_2__.RouterModule(this.simstanceManager, router, dataSet.child);
                        rm.data = dataSet.data;
                        rm.path = path;
                        rm.pathData = pathnameData;
                        rm.propertyKeys = dataSet.propertyKeys;
                        return rm;
                    }
                    catch (e) {
                    }
                }
            }
        }
    }
    findRouteProperty(route, propertyName, intent) {
        let child;
        let data;
        let propertyKeys;
        const routeElement = route[propertyName];
        if (typeof routeElement === 'function') {
            child = { targetKeyType: routeElement, originalType: routeElement };
        }
        else if (typeof routeElement === 'symbol') {
            child = this.simstanceManager.findLastSim(routeElement)?.type;
        }
        else if (typeof routeElement === 'string') {
            return this.findRouteProperty(route, routeElement, intent);
        }
        else if (Array.isArray(routeElement)) {
            const r = routeElement?.[0];
            if (typeof r === 'object' && 'filters' in r && 'target' in r) {
                const filters = [];
                if (Array.isArray(r.filters)) {
                    filters.push(...r.filters);
                }
                else if (r.filters) {
                    filters.push(r.filters);
                }
                const noAccept = filters.some(it => (typeof it === 'function' ? this.simstanceManager.getOrNewSim({ target: it }) : it)?.isAccept(intent) === false);
                if (!noAccept) {
                    child = { targetKeyType: r.target, originalType: r.target };
                }
            }
            else {
                child = { targetKeyType: r, originalType: r };
            }
            data = routeElement?.[1];
        }
        else if (typeof routeElement === 'object' && 'target' in routeElement && 'propertyKeys' in routeElement) { // RouteTargetMethod
            const noAccept = routeElement.filters?.filter(it => it).some(it => (typeof it === 'function' ? this.simstanceManager.getOrNewSim({ target: it }) : it)?.isAccept(intent) === false);
            if (!noAccept) {
                child = { targetKeyType: routeElement.target, originalType: routeElement.target };
                propertyKeys = routeElement.propertyKeys;
            }
        }
        else if (typeof routeElement === 'object' && 'filters' in routeElement && 'target' in routeElement) {
            const filters = [];
            if (Array.isArray(routeElement.filters)) {
                filters.push(...routeElement.filters);
            }
            else if (routeElement.filters) {
                filters.push(routeElement.filters);
            }
            const noAccept = filters.some(it => (typeof it === 'function' ? this.simstanceManager.getOrNewSim({ target: it }) : it)?.isAccept(intent) === false);
            if (!noAccept) {
                child = { targetKeyType: routeElement.target, originalType: routeElement.target };
            }
        }
        return {
            child,
            data,
            propertyKeys
        };
    }
};
RouterManager = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_6__.Sim,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_5__.SimstanceManager !== "undefined" && _simstance_SimstanceManager__WEBPACK_IMPORTED_MODULE_5__.SimstanceManager) === "function" ? _a : Object, typeof (_b = typeof _SimOption__WEBPACK_IMPORTED_MODULE_9__.SimOption !== "undefined" && _SimOption__WEBPACK_IMPORTED_MODULE_9__.SimOption) === "function" ? _b : Object])
], RouterManager);



/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/route/RouterModule.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/route/RouterModule.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RouterModule: () => (/* binding */ RouterModule)
/* harmony export */ });
/* harmony import */ var _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../simstance/SimAtomic */ "../../packages/@dooboostore/simple-boot/src/simstance/SimAtomic.ts");
/* harmony import */ var _decorators_inject_Injection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../decorators/inject/Injection */ "../../packages/@dooboostore/simple-boot/src/decorators/inject/Injection.ts");
/* harmony import */ var _throwable_MethodNoSuch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../throwable/MethodNoSuch */ "../../packages/@dooboostore/simple-boot/src/throwable/MethodNoSuch.ts");
/* harmony import */ var _decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../decorators/route/Router */ "../../packages/@dooboostore/simple-boot/src/decorators/route/Router.ts");
/* harmony import */ var _dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/core/expression/Expression */ "../../packages/@dooboostore/core/src/expression/Expression.ts");





class RouterModule {
    simstanceManager;
    router;
    module;
    routerChains;
    _pathData;
    _data;
    _intent;
    _propertyKeys;
    _path;
    get path() {
        return this._path;
    }
    set path(value) {
        this._path = value;
    }
    get data() {
        return this._data;
    }
    set data(value) {
        this._data = value;
    }
    get intent() {
        return this._intent;
    }
    set intent(value) {
        this._intent = value;
    }
    get propertyKeys() {
        return this._propertyKeys;
    }
    set propertyKeys(value) {
        this._propertyKeys = value;
    }
    get pathData() {
        return this._pathData;
    }
    set pathData(value) {
        this._pathData = value;
    }
    constructor(simstanceManager, router, module, routerChains = []) {
        this.simstanceManager = simstanceManager;
        this.router = router;
        this.module = module;
        this.routerChains = routerChains;
    }
    getRouterPath(join = '') {
        return this.getRouterPaths().map(it => it ?? '').join(join);
    }
    getRouterPaths() {
        return this.routerChains.map(it => (0,_decorators_route_Router__WEBPACK_IMPORTED_MODULE_3__.getRouter)(it instanceof _simstance_SimAtomic__WEBPACK_IMPORTED_MODULE_0__.SimAtomic ? it.type.targetKeyType : it)?.path);
    }
    getRouterPathData(pathName) {
        return _dooboostore_core_expression_Expression__WEBPACK_IMPORTED_MODULE_4__.Expression.Path.pathNameData(pathName, this.getRouterPath());
    }
    getModuleInstance(propertyKey, instanceBind = true) {
        const instance = this.simstanceManager.getOrNewSim({ target: this.module?.targetKeyType, originTypeTarget: this.module?.originalType });
        if (propertyKey && this.propertyKeys && this.propertyKeys.includes(propertyKey)) {
            let instanceElement = instance[propertyKey];
            if (instanceBind && typeof instanceBind === 'boolean') {
                instanceElement = instanceElement.bind(instance);
            }
            else if (instanceBind && typeof instanceBind === 'object') {
                instanceElement = instanceElement.bind(instanceBind);
            }
            return instanceElement;
        }
        else {
            return instance;
        }
    }
    executeModuleProperty(propertyKey, ...param) {
        const target = this.getModuleInstance();
        if (propertyKey) {
            const config = (0,_decorators_inject_Injection__WEBPACK_IMPORTED_MODULE_1__.getInjection)(target, propertyKey);
            if (config) {
                const other = new Map();
                param.forEach(it => other.set(it.constructor, it));
                return this.simstanceManager.executeBindParameterSim({ target, targetKey: propertyKey }, other);
            }
            else {
                if (target[propertyKey]) {
                    return target[propertyKey]?.(...param);
                }
                else {
                    throw new _throwable_MethodNoSuch__WEBPACK_IMPORTED_MODULE_2__.MethodNoSuch(`${propertyKey.toString()} noSuch`, propertyKey.toString(), propertyKey);
                }
            }
        }
    }
    get firstRouteChain() {
        return this.routerChains[0];
    }
    get firstRouteChainValue() {
        return this.firstRouteChain?.getValue();
    }
    get lastRouteChain() {
        return this.routerChains[this.routerChains.length - 1];
    }
    get lastRouteChainValue() {
        return this.lastRouteChain?.getValue();
    }
    hasActivateInLastRoute(obj) {
        return this.lastRouteChainValue?.hasActivate(obj) === true;
    }
    get queryParams() {
        if (this.intent) {
            return this.intent.queryParams;
        }
    }
    get queryParamsAfterDecodeURI() {
        if (this.intent) {
            return this.intent.queryParamsAfterDecodeURI;
        }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/simstance/SimAtomic.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/simstance/SimAtomic.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimAtomic: () => (/* binding */ SimAtomic)
/* harmony export */ });
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");


class SimAtomic {
    type;
    simstanceManager;
    config;
    value;
    constructor(type, simstanceManager, config) {
        this.type = type;
        this.simstanceManager = simstanceManager;
        this.config = config;
        this.value = type.value;
    }
    getConfig(key = _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_0__.SimMetadataKey) {
        return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_1__.ReflectUtils.getMetadata(key, this.type.originalType);
    }
    getConfigs() {
        return _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_1__.ReflectUtils.getMetadatas(this.type.originalType);
    }
    getValue(config) {
        if (config?.refresh) {
            this.value = undefined;
        }
        // console.log('------value?', this.type, this.simstanceManager.storage)
        // return this.simstanceManager.getOrNewSim({target:this.type, newInstanceCarrier: config?.newInstanceCarrier});
        if (!this.value) {
            this.value = this.simstanceManager.getOrNewSim({ target: this.type.targetKeyType, originTypeTarget: this.type.originalType, newInstanceCarrier: config?.newInstanceCarrier });
            // const findFirstSim = this.simstanceManager.findFirstSim({type: this.type});
            // if (findFirstSim) {
            //   this.value = findFirstSim.getValue(config);
            // } else {
            //   this.value = this.simstanceManager.getOrNewSim({target: this.type, newInstanceCarrier: config?.newInstanceCarrier});
            // }
        }
        return this.value;
        // const types = ConvertUtils.flatArray(this.getConfig()?.type);
        // types.push(this.type);
        // for (const typeElement of types) {
        //   const instance = this.simstanceManager.getOrNewSim(typeElement, this.type);
        //   if (instance) {
        //     return instance;
        //   }
        // }
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/simstance/SimstanceManager.ts":
/*!*********************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/simstance/SimstanceManager.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimstanceManager: () => (/* binding */ SimstanceManager)
/* harmony export */ });
/* harmony import */ var _dooboostore_core_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/core/types */ "../../packages/@dooboostore/core/src/types.ts");
/* harmony import */ var _throwable_SimNoSuch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../throwable/SimNoSuch */ "../../packages/@dooboostore/simple-boot/src/throwable/SimNoSuch.ts");
/* harmony import */ var _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core/object/ObjectUtils */ "../../packages/@dooboostore/core/src/object/ObjectUtils.ts");
/* harmony import */ var _SimAtomic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SimAtomic */ "../../packages/@dooboostore/simple-boot/src/simstance/SimAtomic.ts");
/* harmony import */ var _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core/reflect/ReflectUtils */ "../../packages/@dooboostore/core/src/reflect/ReflectUtils.ts");
/* harmony import */ var _decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../decorators/inject/Inject */ "../../packages/@dooboostore/simple-boot/src/decorators/inject/Inject.ts");
/* harmony import */ var _SimOption__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../SimOption */ "../../packages/@dooboostore/simple-boot/src/SimOption.ts");
/* harmony import */ var _proxy_SimProxyHandler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../proxy/SimProxyHandler */ "../../packages/@dooboostore/simple-boot/src/proxy/SimProxyHandler.ts");
/* harmony import */ var _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @dooboostore/core/convert/ConvertUtils */ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts");
/* harmony import */ var _lifecycle_OnSimCreate__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../lifecycle/OnSimCreate */ "../../packages/@dooboostore/simple-boot/src/lifecycle/OnSimCreate.ts");
/* harmony import */ var _lifecycle_OnSimCreateCompleted__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../lifecycle/OnSimCreateCompleted */ "../../packages/@dooboostore/simple-boot/src/lifecycle/OnSimCreateCompleted.ts");
/* harmony import */ var _SimpleApplication__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../SimpleApplication */ "../../packages/@dooboostore/simple-boot/src/SimpleApplication.ts");
/* harmony import */ var _decorators_SimNoProxy__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../decorators/SimNoProxy */ "../../packages/@dooboostore/simple-boot/src/decorators/SimNoProxy.ts");
/* harmony import */ var _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @dooboostore/core/random/RandomUtils */ "../../packages/@dooboostore/core/src/random/RandomUtils.ts");















class SimstanceManager {
    simpleApplication;
    option;
    _storage = new Map();
    simProxyHandler;
    name = 'simstanceManager-' + _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_14__.RandomUtils.uuid4();
    // private otherInstanceSim?: Map<ConstructorType<any> | Function, any>;
    constructor(simpleApplication, option) {
        this.simpleApplication = simpleApplication;
        this.option = option;
        this.setStoreSet(_SimpleApplication__WEBPACK_IMPORTED_MODULE_12__.SimpleApplication, this.simpleApplication);
        this.setStoreSet(SimstanceManager, this);
        this.setStoreSet(option.constructor, option);
        this.setStoreSet(_SimOption__WEBPACK_IMPORTED_MODULE_7__.SimOption, option);
        this.simProxyHandler = new _proxy_SimProxyHandler__WEBPACK_IMPORTED_MODULE_8__.SimProxyHandler(this.simpleApplication, this, option);
    }
    get storage() {
        return this._storage;
    }
    getSimAtomics() {
        const r = [];
        Array.from(this.storage.entries()).forEach(([targetKeyType, targetMap]) => {
            // Array.from(targetMap).forEach(it => {
            r.push(...Array.from(Array.from(targetMap.keys())).map(sit => new _SimAtomic__WEBPACK_IMPORTED_MODULE_4__.SimAtomic({ targetKeyType, originalType: sit }, this)));
            // });
        });
        return r;
    }
    getSimConfig(schemeOrSymbol) {
        const newVar = this.getSimAtomics().filter(it => {
            const config = it?.getConfig();
            const symbols = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_9__.ConvertUtils.flatArray(config?.symbol);
            const schemes = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_9__.ConvertUtils.flatArray(config?.scheme);
            if (typeof schemeOrSymbol === 'symbol') {
                return schemeOrSymbol && it && symbols.includes(schemeOrSymbol);
            }
            else if (typeof schemeOrSymbol === 'string') {
                return schemeOrSymbol && it && schemes.includes(schemeOrSymbol);
            }
            else {
                return false;
            }
        }) || [];
        return newVar;
    }
    findSims(data) {
        let r = [];
        if (data) {
            const simAtomics = this.getSimAtomics();
            r = simAtomics.filter(it => {
                let b = false;
                const config = it.getConfig();
                // console.log('-=--', config)
                const symbols = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_9__.ConvertUtils.flatArray(config?.symbol).filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_0__.isDefined);
                const schemes = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_9__.ConvertUtils.flatArray(config?.scheme).filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_0__.isDefined);
                if (typeof data === 'symbol') {
                    b = symbols.includes(data);
                }
                else {
                    const { scheme, type } = data;
                    b = (scheme ? schemes.includes(scheme) : true) && (type ? it.type.targetKeyType === type : true);
                    // if (type) {
                    //   const configTypes = ConvertUtils.flatArray(config?.type).filter(isDefined);
                    //   const match = configTypes.includes(type)
                    //   if (match) {
                    //     b = true;
                    //   }
                    // }
                }
                return b;
            });
        }
        return r;
    }
    findFirstSim(data) {
        if (typeof data === 'symbol') {
            return this.findSims(data)[0];
        }
        else {
            return this.findSims(data)[0];
        }
    }
    findLastSim(data) {
        if (typeof data === 'symbol') {
            return this.findSims(data).reverse()[0];
        }
        else {
            return this.findSims(data).reverse()[0];
        }
    }
    flatStoreSets() {
        return new Map(Array.from(this.storage.values())
            .map(it => Array.from(it.entries()))
            .flat());
    }
    getStoreSets(targetKey) {
        const map = this.storage.get(targetKey);
        const datas = (Array.from(map?.entries?.() ?? []) ?? []).reverse();
        return datas.map(it => ({ type: it[0], instance: it[1] }));
    }
    getStoreSet(targetKey, target) {
        const find = this.getStoreSets(targetKey).find(it => it.type === target);
        // console.log('getStoreSet', targetKey, target, find)
        if (!find?.instance) {
            const type = target ?? targetKey;
            const flatStoreSets = this.flatStoreSets();
            const data = flatStoreSets.get(type);
            // console.log('--->target?', target, targetKey, type, data);
            if (data) {
                this.setStoreSet(targetKey, data, type);
            }
            return { type: type, instance: data };
        }
        else {
            return find;
        }
        // return find ?? this.getStoreSets(targetKey)[0];
    }
    getStoreInstance(targetKey, target) {
        return this.getStoreSet(targetKey, target)?.instance;
    }
    getOrNewSim({ target, originTypeTarget = target, newInstanceCarrier }) {
        if (target) {
            const registed = this.getStoreSet(target, originTypeTarget);
            if (registed?.type && !registed?.instance) {
                return this.resolve({ targetKey: target, target: originTypeTarget, newInstanceCarrier: newInstanceCarrier });
            }
            return registed?.instance;
        }
    }
    setStoreSet(targetKey, obj, target = targetKey) {
        const itemMap = this.storage.get(targetKey) ?? new Map();
        itemMap.set(target, obj);
        this.storage.set(targetKey, itemMap);
    }
    registerStore(targetKey, regTyps) {
        const itemMap = this.storage.get(targetKey) ?? new Map();
        regTyps.forEach(it => {
            const { type, value } = (typeof it === 'object' ? { type: it.constructor, value: it } : { type: it, value: undefined });
            if (!itemMap.has(type)) {
                itemMap.set(type, value);
            }
        });
        this.storage.set(targetKey, itemMap);
    }
    // 진입점
    resolve({ target, targetKey, newInstanceCarrier = { newInstances: [], depth: 0 } }) {
        // console.group('resolve')
        const registed = this.getStoreSet(targetKey, target);
        if (registed?.instance) {
            return registed.instance;
        }
        // console.log('resolve--', targetKey, target, registed?.instance);
        if (this.storage.has(targetKey) && undefined === registed?.instance) {
            newInstanceCarrier.depth++;
            const newSim = this.newSim({
                target: registed?.type ?? targetKey,
                newInstanceCarrier: newInstanceCarrier,
                simCreateAfter: data => {
                    // console.log('resolve--newSim', targetKey, target, data);
                    if ((0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.getSim)(registed?.type ?? target ?? targetKey)?.scope === _decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.Lifecycle.Singleton) {
                        this.setStoreSet(targetKey, data, target);
                        // console.log('-----------set', targetKey, data, target, this.storage.get(targetKey))
                    }
                }
            });
            newInstanceCarrier.depth--;
            // 한그룹이 끝났을때
            if (newInstanceCarrier.depth === 0) {
                newInstanceCarrier.newInstances.forEach(it => {
                    this.callBindPostConstruct(it);
                });
            }
            // console.log('%c *************************','color: blue', registed?.type ?? targetKey ,newInstanceCarrier, newInstanceCarrier?.newInstances.length)
            // console.dir(newInstanceCarrier, {depth:10});
            // console.table(newInstanceCarrier);
            if ((0,_lifecycle_OnSimCreate__WEBPACK_IMPORTED_MODULE_10__.isOnSimCreate)(newSim)) {
                newSim.onSimCreate();
            }
            // console.groupEnd();
            return newSim;
        }
        console.log('simstanceManager', this._storage, this.name);
        const simNoSuch = new _throwable_SimNoSuch__WEBPACK_IMPORTED_MODULE_1__.SimNoSuch('SimNoSuch: no simple instance(resolve) ' + 'name:' + targetKey?.prototype?.constructor?.name + ',' + targetKey);
        console.error(simNoSuch);
        // console.groupEnd();
        throw simNoSuch;
    }
    newSim({ target, simCreateAfter, otherStorage, newInstanceCarrier }) {
        // @ts-ignore TODO: 여기서 생성
        const r = new target(...this.getParameterSim({ target: target, otherStorage: otherStorage, newInstanceCarrier: newInstanceCarrier }));
        let p = this.proxy(r);
        const config = (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.getSim)(target);
        if (config?.proxy) {
            const proxys = (Array.isArray(config.proxy) ? config.proxy : [config.proxy]).filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_0__.isDefined);
            proxys.forEach(it => {
                // console.log('proxy-----------------', p)
                if (typeof it === 'object') {
                    p = new Proxy(p, it);
                }
                else {
                    const simConfig = (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.getSim)(it);
                    p = new Proxy(p, simConfig ? this.getOrNewSim({ target: it }) : this.newSim({ target: it }));
                }
                // console.log('proxy-pp----------------', p)
            });
        }
        newInstanceCarrier?.newInstances.push(p);
        // 순환참조 막기위한 콜백 처리
        simCreateAfter?.(p);
        if ((0,_lifecycle_OnSimCreateCompleted__WEBPACK_IMPORTED_MODULE_11__.isOnSimCreateProxyCompleted)(p)) {
            p.onSimCreateProxyCompleted(p);
        }
        // this.callBindPostConstruct(p);
        return p;
    }
    callBindPostConstruct(obj) {
        // const set = new Set(ObjectUtils.getAllProtoTypeName(obj));
        // console.log('callBindPostConstruct', obj, set, ObjectUtils.getAllProtoTypeName(obj));
        // set.forEach(it => {
        //   const postConstruct = getPostConstruct(obj, it);
        //   if (postConstruct) {
        //     (obj as any)[it](...this.getParameterSim({target: obj, targetKey: it}))
        //   }
        // })
        const postConstruct = (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.getPostConstructs)(obj);
        postConstruct.forEach(it => {
            obj[it.property](...this.getParameterSim({ target: obj, targetKey: it.property }));
        });
    }
    async executeBindParameterSimPromise({ target, targetKey, firstCheckMaker }, otherStorage) {
        let value = this.executeBindParameterSim({ target, targetKey, firstCheckMaker }, otherStorage);
        if (value instanceof Promise) {
            value = await value;
        }
        return value;
    }
    executeBindParameterSim({ target, targetKey, firstCheckMaker }, otherStorage) {
        const binds = this.getParameterSim({ target, targetKey, firstCheckMaker, otherStorage });
        if (typeof target === 'object' && targetKey) {
            const targetMethod = target[targetKey];
            return targetMethod?.bind(target)?.(...binds);
        }
        else if (typeof target === 'function' && !targetKey) {
            return new target(...binds);
        }
    }
    getParameterSim({ target, targetKey, firstCheckMaker, otherStorage, newInstanceCarrier }) {
        const paramTypes = _dooboostore_core_reflect_ReflectUtils__WEBPACK_IMPORTED_MODULE_5__.ReflectUtils.getParameterTypes(target, targetKey);
        // const paramNames = FunctionUtils.getParameterNames(target, targetKey);
        // const a = ReflectUtils.getType(target, 'user');
        let injections = [];
        const injects = (0,_decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_6__.getInject)(target, targetKey);
        // const da = JSON.stringify(this.storage);
        // this.storage map to json String
        injections = paramTypes.map((token, idx) => {
            const saveInject = injects?.find(it => it.index === idx);
            if (saveInject?.config.disabled) {
                return undefined;
            }
            for (const f of firstCheckMaker ?? []) {
                const firstCheckObj = f({ target, targetKey }, token, idx, saveInject);
                if (undefined !== firstCheckObj) {
                    return firstCheckObj;
                }
            }
            if (saveInject) {
                const inject = saveInject.config;
                let obj = otherStorage?.get(token);
                // console.log('vvvvv----->', obj, token, inject);
                if (token === Array && (inject.type || inject.scheme || inject.symbol)) {
                    const p = [];
                    if (inject.type) {
                        p.push(...this.getStoreSets(inject.type)
                            .map(it => this.resolve({ targetKey: inject.type, target: it.type, newInstanceCarrier: newInstanceCarrier }))
                            .reverse());
                    }
                    if (inject.symbol) {
                        p.push(...this.getSimConfig(inject.symbol).map(it => it.getValue({ newInstanceCarrier: newInstanceCarrier })));
                    }
                    if (inject.scheme) {
                        p.push(...this.getSimConfig(inject.scheme).map(it => it.getValue({ newInstanceCarrier: newInstanceCarrier })));
                    }
                    return p;
                }
                // situational
                if (inject.situationType && otherStorage) {
                    // TODO: 왜 other에서 가져오는걸까?
                    const situations = otherStorage.get(_decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_6__.SituationTypeContainers);
                    const situation = otherStorage.get(_decorators_inject_Inject__WEBPACK_IMPORTED_MODULE_6__.SituationTypeContainer);
                    if (inject.situationType === situation?.situationType) {
                        obj = situation.data;
                    }
                    else if (situations && situations.length > 0) {
                        const find = situations.find(a => {
                            if (a.index !== undefined) {
                                return a.situationType === inject.situationType && a.index === idx;
                            }
                            else {
                                return a.situationType === inject.situationType;
                            }
                        });
                        if (find) {
                            obj = find.data;
                        }
                    }
                }
                if (!obj) {
                    const findLastSim = inject.symbol
                        ? this.findLastSim(inject.symbol)
                        : this.findLastSim({ scheme: inject.scheme, type: inject.type });
                    try {
                        obj = findLastSim
                            ? this.resolve({
                                targetKey: findLastSim?.type.targetKeyType ?? token,
                                newInstanceCarrier: newInstanceCarrier
                            })
                            : this.resolve({ targetKey: token, newInstanceCarrier: newInstanceCarrier });
                    }
                    catch (e) {
                        // Inject optional 처리
                        if (inject.optional) {
                            return undefined;
                        }
                        else {
                            throw e;
                        }
                    }
                }
                if (inject.applyProxy && obj) {
                    if (inject.applyProxy.param) {
                        obj = new Proxy(obj, new inject.applyProxy.type(...inject.applyProxy.param));
                    }
                    else {
                        obj = new Proxy(obj, new inject.applyProxy.type());
                    }
                }
                return obj;
            }
            else if (token) {
                // TODO: 왜 other에서 가져오는걸까?  -> 와부에서 전달해주는걸 먼저 처리 해주기위해 추측
                // console.log('oooooooooooooooo', token, otherStorage)
                return otherStorage?.get(token) ?? this.resolve({ targetKey: token, newInstanceCarrier });
            }
            return undefined;
        });
        return injections;
    }
    proxy(target) {
        try {
            const noProxy = (0,_decorators_SimNoProxy__WEBPACK_IMPORTED_MODULE_13__.isSimNoProxy)(target);
            if (!noProxy && target !== null && (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.getSim)(target) && typeof target === 'object' && !('_SimpleBoot_isProxy' in target)) {
                for (const key in target) {
                    if (!(0,_decorators_SimNoProxy__WEBPACK_IMPORTED_MODULE_13__.isSimNoProxy)(target, key)) {
                        target[key] = this.proxy(target[key]);
                    }
                }
                // function apply proxy
                const protoTypeName = _dooboostore_core_object_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.ObjectUtils.ownPropertyNames(target);
                protoTypeName
                    .filter(it => typeof target[it] === 'function')
                    .filter(it => !(0,_decorators_SimNoProxy__WEBPACK_IMPORTED_MODULE_13__.isSimNoProxy)(target, it))
                    .filter(it => !('_SimpleBoot_isProxy' in target[it]))
                    .forEach(it => {
                    target[it] = new Proxy(target[it], this.simProxyHandler);
                });
                if (this.simProxyHandler) {
                    target = new Proxy(target, this.simProxyHandler);
                }
            }
            if (this.option.proxy) {
                target = this.option.proxy.onAfterProxy(target);
            }
            return target;
        }
        catch (e) {
            console.log('sim proxy error');
            throw e;
        }
    }
    run(otherInstanceSim = new Map()) {
        // this.otherInstanceSim = new Map();
        for (const [k, v] of Array.from(otherInstanceSim.entries())) {
            if (typeof k === 'object') {
                // 명확하게 instance를 넘긴거니 타입으로 처리안하기 위해 임의 타입으로 처리한다.
                (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.simProcess)(k, v);
            }
            else {
                (0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.simProcess)({ type: k }, v);
            }
            // this.otherInstanceSim.set(type, v);
            // it => ({type: it[0], value: it[1], action: this.setStoreSet.bind(this)})
        }
        // this.otherInstanceSim = otherInstanceSim;
        // const types = Array.from(this.otherInstanceSim?.entries()).map(it => ({type: it[0], value: it[1], action: this.setStoreSet.bind(this)}));
        // types.push(...Array.from(sims.entries()).map(it => ({type: it[0], value: it[1], action: this.registerStore.bind(this)})));
        const myContainers = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_9__.ConvertUtils.flatArray(this.option.container).filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_0__.isDefined);
        // console.log('simstanceManager run!!', Array.from(sims.entries()));
        // Array.from(sims.entries()).map(it => ({type: it[0], value: it[1], action: this.registerStore.bind(this)}))
        Array.from(_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.sims.entries()).forEach(([type, value]) => {
            const targetContainers = _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_9__.ConvertUtils.flatArray((0,_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.getSim)(type)?.container).filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_0__.isDefined);
            let isInclude = false;
            if (myContainers.length <= 0 && targetContainers.length <= 0) {
                isInclude = true;
            }
            else if (targetContainers.length <= 0) {
                isInclude = true;
            }
            else {
                isInclude = myContainers.some(it => targetContainers.includes(it));
            }
            this.registerStore(type, value);
            // const isInclude = (myContainers.length <= 0 || targetContainers.length <= 0) ? true : myContainers.some(it => targetContainers.includes(it));
            // const isInclude = (targetContainers.length <= 0) ? true : (myContainers.length > 0 ? true : (myContainers.some(it => targetContainers.includes(it))));
            // const isInclude = (myContainers.length <= 0 || targetContainers.length <= 0) ? true : (myContainers.some(it => containers.includes(it)));
            // if (typeof this.option.excludeSim === 'function' && this.option.excludeSim(type)) {
            //   if (isInclude) {
            //     it.action(type, it.value);
            //   }
            // } else if (Array.isArray(this.option.excludeSim) && !this.option.excludeSim.includes(type)) {
            //   if (isInclude) {
            //     it.action(type, it.value);
            //   }
            // }
        });
        this.callBindPostConstruct(this);
        // auto start run
        this.getSimAtomics().forEach(it => {
            if (it.getConfig()?.autoCreate) {
                // console.log('autoStart---?', it.type);
                it.getValue();
            }
        });
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/throwable/MethodNoSuch.ts":
/*!*****************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/throwable/MethodNoSuch.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MethodNoSuch: () => (/* binding */ MethodNoSuch)
/* harmony export */ });
/* harmony import */ var _SimError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SimError */ "../../packages/@dooboostore/simple-boot/src/throwable/SimError.ts");

class MethodNoSuch extends _SimError__WEBPACK_IMPORTED_MODULE_0__.SimError {
    propertyKeys;
    constructor(message, name, propertyKeys, stack) {
        super(message, name, stack);
        this.propertyKeys = propertyKeys;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/throwable/SimError.ts":
/*!*************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/throwable/SimError.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimError: () => (/* binding */ SimError)
/* harmony export */ });
class SimError {
    message;
    name;
    stack;
    constructor(message, name, stack) {
        this.message = message;
        this.name = name;
        this.stack = stack;
    }
}


/***/ }),

/***/ "../../packages/@dooboostore/simple-boot/src/throwable/SimNoSuch.ts":
/*!**************************************************************************!*\
  !*** ../../packages/@dooboostore/simple-boot/src/throwable/SimNoSuch.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimNoSuch: () => (/* binding */ SimNoSuch)
/* harmony export */ });
/* harmony import */ var _SimError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SimError */ "../../packages/@dooboostore/simple-boot/src/throwable/SimError.ts");

class SimNoSuch extends _SimError__WEBPACK_IMPORTED_MODULE_0__.SimError {
    constructor(message, name, stack) {
        super(message, name, stack);
    }
}


/***/ }),

/***/ "./front-end/service/FrontEndCodeFetchService.ts":
/*!*******************************************************!*\
  !*** ./front-end/service/FrontEndCodeFetchService.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FrontEndCodeFetchService: () => (/* binding */ FrontEndCodeFetchService)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _src_service_CodeFetchService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @src/service/CodeFetchService */ "./src/service/CodeFetchService.ts");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/simple-boot/fetch/ApiService */ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts");
/* harmony import */ var _dooboostore_simple_boot_http_server_ssr_proxy_SymbolIntentApiServiceProxy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/simple-boot-http-server-ssr/proxy/SymbolIntentApiServiceProxy */ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/proxy/SymbolIntentApiServiceProxy.ts");
/* harmony import */ var _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core/convert/ConvertUtils */ "../../packages/@dooboostore/core/src/convert/ConvertUtils.ts");
/* harmony import */ var _src_environments_environment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @src/environments/environment */ "./src/environments/environment.ts");
var _a;







let FrontEndCodeFetchService = class FrontEndCodeFetchService {
    apiService;
    constructor(apiService) {
        this.apiService = apiService;
    }
    async fetch(request, data) {
        const rawData = await this.apiService.get({
            target: `${_src_environments_environment__WEBPACK_IMPORTED_MODULE_6__.environment.packageGithubIoUrl}/${request.path}`,
            config: { transformText: true },
        });
        return { rawData: _dooboostore_core_convert_ConvertUtils__WEBPACK_IMPORTED_MODULE_5__.ConvertUtils.escapeHTML(rawData, { targets: ['$', '<', '>', '&'] }) };
    }
};
FrontEndCodeFetchService = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.Sim)({
        symbol: _src_service_CodeFetchService__WEBPACK_IMPORTED_MODULE_1__.CodeFetchService.SYMBOL,
        proxy: _dooboostore_simple_boot_http_server_ssr_proxy_SymbolIntentApiServiceProxy__WEBPACK_IMPORTED_MODULE_4__.SymbolIntentApiServiceProxy,
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_3__.ApiService !== "undefined" && _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_3__.ApiService) === "function" ? _a : Object])
], FrontEndCodeFetchService);



/***/ }),

/***/ "./front-end/service/index.ts":
/*!************************************!*\
  !*** ./front-end/service/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   services: () => (/* binding */ services)
/* harmony export */ });
/* harmony import */ var _front_end_service_FrontEndCodeFetchService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @front-end/service/FrontEndCodeFetchService */ "./front-end/service/FrontEndCodeFetchService.ts");

const services = [_front_end_service_FrontEndCodeFetchService__WEBPACK_IMPORTED_MODULE_0__.FrontEndCodeFetchService];


/***/ }),

/***/ "./src/bootfactory.ts":
/*!****************************!*\
  !*** ./src/bootfactory.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MakeSimFrontOption: () => (/* binding */ MakeSimFrontOption),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _dooboostore_simple_boot_front_option_SimFrontOption__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @dooboostore/simple-boot-front/option/SimFrontOption */ "../../packages/@dooboostore/simple-boot-front/src/option/SimFrontOption.ts");
/* harmony import */ var _dooboostore_simple_boot_http_server_ssr_SimpleBootHttpSSRFactory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot-http-server-ssr/SimpleBootHttpSSRFactory */ "../../packages/@dooboostore/simple-boot-http-server-ssr/src/SimpleBootHttpSSRFactory.ts");
/* harmony import */ var _dooboostore_core_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/core/types */ "../../packages/@dooboostore/core/src/types.ts");
/* harmony import */ var _dooboostore_simple_boot_front_SimpleBootFront__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/simple-boot-front/SimpleBootFront */ "../../packages/@dooboostore/simple-boot-front/src/SimpleBootFront.ts");
/* harmony import */ var _src_pages_index_router_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @src/pages/index.router.component */ "./src/pages/index.router.component.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Observable.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/Subscription.js");
/* harmony import */ var _dooboostore_simple_boot_alert_AlertService__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @dooboostore/simple-boot/alert/AlertService */ "../../packages/@dooboostore/simple-boot/src/alert/AlertService.ts");
/* harmony import */ var _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @dooboostore/simple-boot/fetch/ApiService */ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts");








const MakeSimFrontOption = (window) => {
    return new _dooboostore_simple_boot_front_option_SimFrontOption__WEBPACK_IMPORTED_MODULE_0__.SimFrontOption({ window, urlType: _dooboostore_simple_boot_front_option_SimFrontOption__WEBPACK_IMPORTED_MODULE_0__.UrlType.path }, { rootRouter: _src_pages_index_router_component__WEBPACK_IMPORTED_MODULE_4__.IndexRouterComponent });
};
class Factory extends _dooboostore_simple_boot_http_server_ssr_SimpleBootHttpSSRFactory__WEBPACK_IMPORTED_MODULE_1__.SimpleBootHttpSSRFactory {
    async factory(simFrontOption, using, domExcludes) {
        // console.log('create simplefront--->', (simFrontOption.window as any).uuid, simFrontOption.window.location.href);
        // const simFrontOption = new SimFrontOption(window).setUrlType(UrlType.path);
        simFrontOption.using ??= [];
        if (Array.isArray(simFrontOption.using)) {
            simFrontOption.using.push(...using);
        }
        else {
            simFrontOption.using = [simFrontOption.using, using].filter(_dooboostore_core_types__WEBPACK_IMPORTED_MODULE_2__.isDefined);
        }
        const simpleBootFront = new _dooboostore_simple_boot_front_SimpleBootFront__WEBPACK_IMPORTED_MODULE_3__.SimpleBootFront(simFrontOption);
        // const simpleBootFront = new SimpleBootFront(TestRouterComponent, simFrontOption);
        // @ts-ignore
        simpleBootFront.domRendoerExcludeProxy.push(rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject, rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable, rxjs__WEBPACK_IMPORTED_MODULE_7__.Subscription, _dooboostore_simple_boot_alert_AlertService__WEBPACK_IMPORTED_MODULE_8__.AlertService, _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_9__.ApiService, ...domExcludes);
        return simpleBootFront;
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new Factory());


/***/ }),

/***/ "./src/component/breadcrumb/breadcrumb.component.css":
/*!***********************************************************!*\
  !*** ./src/component/breadcrumb/breadcrumb.component.css ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (".breadcrumb {\n  font-size: 0.875rem;\n  color: #a0a0a0;\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 0;\n}\n\n.breadcrumb-item {\n  color: #a0a0a0;\n  text-decoration: none;\n  transition: color 0.2s ease;\n  cursor: pointer;\n}\n\n.breadcrumb-item:hover {\n  color: #ffffff;\n}\n\n.breadcrumb-current {\n  color: #e5e5e5;\n  font-weight: 500;\n}\n\n.breadcrumb-separator {\n  margin: 0 0.5rem;\n  color: #606060;\n  user-select: none;\n}\n\n/* Dropdown styles */\n.breadcrumb-dropdown {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.breadcrumb-select {\n  position: relative;\n  display: inline-block;\n}\n\n.breadcrumb-select-summary {\n  cursor: pointer;\n}\n\n.breadcrumb-select-body {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  min-width: 150px;\n  background: #1a1a1a;\n  border: 1px solid #2a2a2a;\n  border-radius: 6px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  padding: 0.5rem 0;\n  margin-top: 0.25rem;\n}\n\n.breadcrumb-select-option {\n  cursor: pointer;\n}\n\n.breadcrumb-option-content {\n  padding: 0.5rem 1rem;\n  color: #e5e5e5;\n  transition: all 0.2s ease;\n  font-size: 0.875rem;\n}\n\n.breadcrumb-option-content:hover {\n  background-color: #2a2a2a;\n  color: #ffffff;\n}\n\n.breadcrumb-option-content.selected {\n  background-color: #ffffff;\n  color: #0a0a0a;\n}\n\n.breadcrumb-option-content.selected:hover {\n  background-color: #f0f0f0;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .breadcrumb {\n    font-size: 0.8rem;\n  }\n  \n  .breadcrumb-separator {\n    margin: 0 0.25rem;\n  }\n}");

/***/ }),

/***/ "./src/component/breadcrumb/breadcrumb.component.html":
/*!************************************************************!*\
  !*** ./src/component/breadcrumb/breadcrumb.component.html ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<div class=\"breadcrumb\">\n  <span dr-for-of=\"@this@.items\">\n    <!-- Single item case -->\n    <span dr-if=\"@this@.isItem(#it#)\">\n      <a\n        dr-if=\"@this@.getSingleItem(#it#).link && #index# < @this@.items.length - 1\"\n        href=\"${@this@.getSingleItem(#it#).link}$\" \n        class=\"breadcrumb-item\"\n        dr-event-click=\"@this@.handleItemClick(@this@.getSingleItem(#it#), $event)\"\n      >\n        ${@this@.getSingleItem(#it#).text}$\n      </a>\n      <span \n        dr-if=\"!@this@.getSingleItem(#it#).link || #index# === @this@.items.length - 1\"\n        class=\"breadcrumb-current\"\n        dr-event-click=\"@this@.handleItemClick(@this@.getSingleItem(#it#), $event)\"\n      >\n        ${@this@.getSingleItem(#it#).text}$\n      </span>\n    </span>\n\n    <!-- Dropdown case -->\n    <span dr-if=\"@this@.isDropdownInComponent(#it#)\">\n      <dr-select class=\"breadcrumb-select\" changeSelected=\"${(data) => @this@?.handleSelectChange?.(data, #it#)}$\">\n        <dr-select-summary class=\"breadcrumb-select-summary\">\n          <dr-select-summary-placeholder>\n            <span class=\"${#index# === @this@.items.length - 1 ? 'breadcrumb-current breadcrumb-dropdown' : 'breadcrumb-item breadcrumb-dropdown'}$\">\n              ${@this@.getSingleItem(#it#)?.text??''}$ ▼\n            </span>\n          </dr-select-summary-placeholder>\n          <dr-select-summary-selected>\n            <span class=\"${#index# === @this@.items.length - 1 ? 'breadcrumb-current breadcrumb-dropdown' : 'breadcrumb-item breadcrumb-dropdown'}$\">\n                ${#it#.selected.text}$ ▼\n            </span>\n          </dr-select-summary-selected>\n        </dr-select-summary>\n\n        <dr-select-body float=\"bottom-left\" class=\"breadcrumb-select-body\">\n          <dr-select-option\n            dr-for-of=\"@this@.getArrayItems(#it#)\"\n            value=\"${#nearForOfIt#.uuid}$\"\n            class=\"breadcrumb-select-option\"\n          >\n              <div class=\"breadcrumb-option-content\">\n                ${#it#.text}$\n              </div>\n          </dr-select-option>\n        </dr-select-body>\n      </dr-select>\n    </span>\n\n    <!-- Separator -->\n    <span dr-if=\"#index# < @this@.items.length - 1\" class=\"breadcrumb-separator\">/</span>\n  </span>\n</div>");

/***/ }),

/***/ "./src/component/breadcrumb/breadcrumb.component.ts":
/*!**********************************************************!*\
  !*** ./src/component/breadcrumb/breadcrumb.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BreadcrumbComponent: () => (/* binding */ BreadcrumbComponent),
/* harmony export */   isBreadcrumbDropdown: () => (/* binding */ isBreadcrumbDropdown),
/* harmony export */   isBreadcrumbItem: () => (/* binding */ isBreadcrumbItem)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _breadcrumb_component_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./breadcrumb.component.html */ "./src/component/breadcrumb/breadcrumb.component.html");
/* harmony import */ var _breadcrumb_component_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./breadcrumb.component.css */ "./src/component/breadcrumb/breadcrumb.component.css");
/* harmony import */ var _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/core/random/RandomUtils */ "../../packages/@dooboostore/core/src/random/RandomUtils.ts");






const isBreadcrumbItem = (item) => {
    return typeof item === 'object' && 'text' in item;
};
const isBreadcrumbDropdown = (item) => {
    return typeof item === 'object' && 'items' in item;
};
let BreadcrumbComponent = class BreadcrumbComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
    items = [];
    onNavigate;
    constructor() {
        super();
    }
    async onInitRender(param, rawSet) {
        await super.onInitRender(param, rawSet);
        // console.log('--------->', this.items);
    }
    setValue(value) {
        if (!value)
            return;
        // console.log('---------v', value);
        this.items = value.map(it => {
            if (this.isBreadcrumbDropdown(it)) {
                const items = it.items.map(sit => ({ ...sit, uuid: _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_5__.RandomUtils.uuid() }));
                const dropdown = {
                    selectedIndex: it.selectedIndex,
                    items,
                    selected: it.selectedIndex !== undefined ? items[it.selectedIndex] : undefined
                };
                return dropdown;
            }
            else {
                return { ...it, uuid: _dooboostore_core_random_RandomUtils__WEBPACK_IMPORTED_MODULE_5__.RandomUtils.uuid() };
            }
        });
    }
    setProps(props) {
        this.setValue(props.items);
        this.onNavigate = props.onNavigate;
    }
    handleItemClick(item, event) {
        event.preventDefault();
        if (this.onNavigate && item) {
            this.onNavigate(item);
        }
    }
    handleSelectChange(selectedValues, item) {
        // console.log('----handleSelectChange-------', selectedValues, item);
        const selectedLink = selectedValues[0];
        const findItem = this.findItemByUUID(selectedLink);
        if (selectedLink && this.onNavigate && findItem) {
            item.selected = findItem;
            this.onNavigate(findItem);
        }
        else {
            item.selected = undefined;
        }
    }
    flatItems() {
        const z = this.items?.map(it => {
            if (this.isDropdownInComponent(it)) {
                return it.items ?? [];
            }
            else {
                return [it];
            }
        }) ?? [];
        return z.flat();
    }
    findItemByUUID(uuid) {
        if (uuid) {
            const items = this.flatItems();
            return items.find((it) => it.uuid === uuid);
        }
    }
    isItem(item) {
        return !this.isDropdownInComponent(item);
    }
    isBreadcrumbDropdown(item) {
        return typeof item === 'object' && 'items' in item;
    }
    isDropdownInComponent(item) {
        return typeof item === 'object' && 'items' in item;
    }
    getSingleItem(item) {
        if (this.isDropdownInComponent(item)) {
            return item.selected || item.items[0];
        }
        else {
            return item;
        }
    }
    getArrayItems(item) {
        if (this.isDropdownInComponent(item)) {
            return item.items ?? [];
        }
        else {
            return [item];
        }
    }
};
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("onNavigate"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Function)
], BreadcrumbComponent.prototype, "onNavigate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("value"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Function),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [Array]),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:returntype", void 0)
], BreadcrumbComponent.prototype, "setValue", null);
BreadcrumbComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({ selector: "breadcrumb", template: _breadcrumb_component_html__WEBPACK_IMPORTED_MODULE_3__["default"], styles: _breadcrumb_component_css__WEBPACK_IMPORTED_MODULE_4__["default"] }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [])
], BreadcrumbComponent);



/***/ }),

/***/ "./src/component/breadcrumb/index.ts":
/*!*******************************************!*\
  !*** ./src/component/breadcrumb/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BreadcrumbComponent: () => (/* reexport safe */ _breadcrumb_component__WEBPACK_IMPORTED_MODULE_0__.BreadcrumbComponent),
/* harmony export */   isBreadcrumbDropdown: () => (/* reexport safe */ _breadcrumb_component__WEBPACK_IMPORTED_MODULE_0__.isBreadcrumbDropdown),
/* harmony export */   isBreadcrumbItem: () => (/* reexport safe */ _breadcrumb_component__WEBPACK_IMPORTED_MODULE_0__.isBreadcrumbItem)
/* harmony export */ });
/* harmony import */ var _breadcrumb_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./breadcrumb.component */ "./src/component/breadcrumb/breadcrumb.component.ts");



/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet-code.component.css":
/*!*************************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet-code.component.css ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("/* Code Snippet - 기존 code-example 스타일과 일치 */\n:host {\n    display: block;\n}\n\n.code-snippet-pre {\n    padding: 1rem;\n    margin: 0;\n    overflow-x: auto;\n    background: #1a1a1a;\n    position: relative;\n}\n\ncode {\n    color: #e5e5e5;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 0.875rem;\n    line-height: 1.6;\n}\n\n.language-indicator:hover {\n    opacity: 1;\n}\n\n@media (max-width: 768px) {\n    .code-snippet-pre {\n        padding: 1rem;\n        overflow-x: auto;\n        font-size: 0.8rem;\n    }\n    \n\n}");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet-code.component.html":
/*!**************************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet-code.component.html ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<pre  class=\"code-snippet-pre\"><code class=\"language-${@this@.type}$\"><p dr-pre>#innerHTML#</p></code></pre>");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet-container.component.css":
/*!******************************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet-container.component.css ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("@keyframes flash {\n  from {\n    background-color: #777;\n  }\n  to {\n    background-color: #0d5126;\n  }\n}\n\n/* Code Snippet Container - 기존 code-example 스타일 기반 */\n.code-snippet-container {\n    background: #1a1a1a;\n    border: 1px solid #2a2a2a;\n    border-radius: 8px;\n    overflow: hidden;\n    /*margin-bottom: 1.5rem;*/\n}\n\n.code-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    background: #2a2a2a;\n    padding: 0;\n    border-bottom: 1px solid #3a3a3a;\n}\n\n.code-copy-btn {\n    background: #575757;\n    color: #d8d8d8;\n    border: none;\n    padding: 2px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease, transform 0.1s ease;\n    margin: 0.3rem;\n    flex-shrink: 0;\n}\n\n.code-copy-btn:active {\n    transform: scale(0.95);\n}\n\n.code-copy-btn.copied {\n    background-color: #0d5126;\n    animation: flash 0.4s ease-out;\n}\n\n/* 탭 스타일 - 헤더 안에 배치 */\n.code-tabs {\n    display: flex;\n    background: transparent;\n    overflow-x: auto;\n    flex: 1;\n}\n\n.tab-btn {\n    background: #2a2a2a;\n    color: #9ca3af;\n    border: none;\n    padding: 0.5rem 0.8rem;\n    cursor: pointer;\n    border-right: 1px solid #222;\n    font-size: 0.875rem;\n    font-family: inherit;\n    transition: all 0.2s ease;\n    border-bottom: 3px solid transparent;\n    white-space: nowrap;\n    min-width: fit-content;\n}\n\n.tab-btn:hover {\n    background: #3a3a3a;\n    color: #e5e5e5;\n}\n\n.tab-btn.active {\n    background: #1a1a1a;\n    color: #e5e5e5;\n    border-bottom-color: #0366d6;\n    font-weight: 500;\n}\n\n.code-content {\n    position: relative;\n    background: #1a1a1a;\n}\n\n@media (max-width: 768px) {\n    .code-tabs {\n        overflow-x: auto;\n        scrollbar-width: thin;\n    }\n    \n    .tab-btn {\n        padding: 0.5rem 0.75rem;\n        font-size: 0.8rem;\n    }\n}");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet-container.component.html":
/*!*******************************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet-container.component.html ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<div class=\"code-snippet-container\">\n    <div class=\"code-header\">\n        <div class=\"code-tabs\" dr-query=\"tabs\">\n            <button dr-for-of=\"@this@.childSnippetComponents\"\n                    class=\"tab-btn\"\n                    data-uuid=\"${#nearForOfIt#.uuid}$\"\n                    dr-event-click=\"@this@.activateSnippet(#nearForOfIt#.uuid)\"\n            >\n                ${#it#.name}$\n            </button>\n        </div>\n\n        <button class=\"code-copy-btn\" dr-event-click=\"@this@.copyCode($element)\"><i class=\"fa-solid fa-floppy-disk\"></i></button>\n    </div>\n    <div class=\"code-content\" dr-query=\"content\">\n        #innerHTML#\n    </div>\n</div>");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet-result.component.css":
/*!***************************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet-result.component.css ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("/* Code Snippet - 기존 code-example 스타일과 일치 */\n:host {\n    display: block;\n}\n\n.code-snippet-pre {\n    padding: 0.5rem;\n    border-radius: 0;\n    border-top: 1px solid #444;\n    border-left: 0.2rem solid #999911;\n    background-color: #111;\n    margin: 0;\n    overflow-x: auto;\n    /*background: #1a1a1a;*/\n    position: relative;\n    font-size: 0.5rem;\n}\n\ncode {\n    color: #e5e5e5;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 0.875rem;\n    line-height: 1.6;\n}\n\n.language-indicator:hover {\n    opacity: 1;\n}\n\n@media (max-width: 768px) {\n    .code-snippet-pre {\n        /*padding: 1rem;*/\n        /*overflow-x: auto;*/\n        /*font-size: 0.5rem;*/\n    }\n    \n\n}");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet-result.component.html":
/*!****************************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet-result.component.html ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<pre style=\"display: none\" class=\"code-snippet-pre\"><code class=\"language-${@this@.type}$\">#innerHTML#</code></pre>");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet.component.css":
/*!********************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet.component.css ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("/* Code Snippet - 기존 code-example 스타일과 일치 */\n\n\n/* 언어 표시 floating 요소 */\n.language-type-indicator {\n    position: absolute;\n    top: 0.1rem;\n    left: 0.1rem;\n    background: rgba(0, 0, 0, 0.7);\n    color: #9ca3af;\n    padding: 0rem 0.2rem;\n    border-radius: 4px;\n    font-size: 0.5rem;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-weight: 500;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    backdrop-filter: blur(4px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    opacity: 0.8;\n    transition: opacity 0.2s ease;\n    z-index: 10;\n    pointer-events: none;\n}\n\n.language-type-indicator:hover {\n    opacity: 1;\n}\n.language-result-indicator {\n    position: absolute;\n    bottom: 0rem;\n    right: 0.1rem;\n    background: rgba(0, 0, 0, 0.7);\n    color: #9ca3af;\n    padding: 0rem 0.2rem;\n    border-radius: 4px;\n    font-size: 0.5rem;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-weight: 500;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    backdrop-filter: blur(4px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    opacity: 0.8;\n    transition: opacity 0.2s ease;\n    z-index: 10;\n}\n\n.language-result-indicator:hover {\n    opacity: 1;\n}\n\n@media (max-width: 768px) {\n}");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet.component.html":
/*!*********************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet.component.html ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<div style=\"display: none;\" class=\"code-snippet\">#innerHTML#</div>\n<button dr-if=\"@this@.hasResult\" style=\"display: none\" class=\"language-result-indicator\" dr-event-click=\"@this@.toggleResultVisible()\">result</button>\n<div style=\"display: none\" class=\"language-type-indicator\">${@this@.type}$</div>");

/***/ }),

/***/ "./src/component/code/code-snippet/code-snippet.component.ts":
/*!*******************************************************************!*\
  !*** ./src/component/code/code-snippet/code-snippet.component.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CodeSnippet: () => (/* binding */ CodeSnippet)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _dooboostore_core_web_clipboard_ClipBoardUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core-web/clipboard/ClipBoardUtils */ "../../packages/@dooboostore/core-web/src/clipboard/ClipBoardUtils.ts");
/* harmony import */ var _code_snippet_container_component_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./code-snippet-container.component.html */ "./src/component/code/code-snippet/code-snippet-container.component.html");
/* harmony import */ var _code_snippet_container_component_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./code-snippet-container.component.css */ "./src/component/code/code-snippet/code-snippet-container.component.css");
/* harmony import */ var _code_snippet_component_html__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./code-snippet.component.html */ "./src/component/code/code-snippet/code-snippet.component.html");
/* harmony import */ var _code_snippet_component_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./code-snippet.component.css */ "./src/component/code/code-snippet/code-snippet.component.css");
/* harmony import */ var _code_snippet_code_component_html__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./code-snippet-code.component.html */ "./src/component/code/code-snippet/code-snippet-code.component.html");
/* harmony import */ var _code_snippet_code_component_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./code-snippet-code.component.css */ "./src/component/code/code-snippet/code-snippet-code.component.css");
/* harmony import */ var _code_snippet_result_component_html__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./code-snippet-result.component.html */ "./src/component/code/code-snippet/code-snippet-result.component.html");
/* harmony import */ var _code_snippet_result_component_css__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./code-snippet-result.component.css */ "./src/component/code/code-snippet/code-snippet-result.component.css");
/* harmony import */ var _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @dooboostore/core/valid/ValidUtils */ "../../packages/@dooboostore/core/src/valid/ValidUtils.ts");













var CodeSnippet;
(function (CodeSnippet) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    let CodeSnippetContainerComponent = class CodeSnippetContainerComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        tabsElement;
        activeSnippetUuid;
        childSnippetComponents;
        tabButtonsElements;
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
        }
        findTabButtonsElements(elements, data) {
            this.tabButtonsElements = data.all;
            const active = this.childSnippetComponents?.find((it) => it.active) ?? this.childSnippetComponents?.[0];
            // console.log('--------->', active, this.tabButtonsElements);
            if (active) {
                this.tabButtonsElements.forEach((it) => {
                    if (it.dataset.uuid === active.uuid) {
                        it.classList.add("active");
                        this.activateSnippet(active.uuid);
                    }
                    else {
                        it.classList.remove("active");
                    }
                });
            }
        }
        onCreatedThisChildDebounce(childrenSet) {
            super.onCreatedThisChildDebounce(childrenSet);
            this.childSnippetComponents = this.getChildren(CodeSnippetComponent);
        }
        activateSnippet(uuid) {
            this.activeSnippetUuid = uuid;
            this.tabButtonsElements?.forEach((it) => {
                if (it.dataset.uuid === uuid) {
                    it.classList.add("active");
                }
                else {
                    it.classList.remove("active");
                }
            });
            const snippets = this.getChildren(CodeSnippetComponent);
            // 모든 스니펫 숨기기
            snippets.forEach((snippet) => {
                snippet.hide();
            });
            // 선택된 스니펫만 보이기
            const activeSnippet = snippets.find((s) => s.uuid === uuid);
            if (activeSnippet) {
                activeSnippet.show();
            }
            // 탭 상태 업데이트
            // this.buildTabs();
        }
        getActiveCodeSnipet() {
            const snippets = this.getChildren(CodeSnippetComponent);
            const activeSnippet = snippets.find((s) => s.uuid === this.activeSnippetUuid);
            return activeSnippet;
        }
        copyCode(e) {
            this.getActiveCodeSnipet()?.copyCode();
            e.classList.add("copied");
            setTimeout(() => {
                e.classList.remove("copied");
            }, 1500);
        }
    };
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)(".tabs"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_a = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _a : Object)
    ], CodeSnippetContainerComponent.prototype, "tabsElement", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)({ selector: ".tab-btn", refreshRawSetRendered: true }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Function),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [Array, Object]),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:returntype", void 0)
    ], CodeSnippetContainerComponent.prototype, "findTabButtonsElements", null);
    CodeSnippetContainerComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({
            selector: "code-snippet-container",
            template: _code_snippet_container_component_html__WEBPACK_IMPORTED_MODULE_4__["default"],
            styles: _code_snippet_container_component_css__WEBPACK_IMPORTED_MODULE_5__["default"],
        })
    ], CodeSnippetContainerComponent);
    CodeSnippet.CodeSnippetContainerComponent = CodeSnippetContainerComponent;
    let CodeSnippetComponent = class CodeSnippetComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        name = "";
        active = false;
        //
        // @attribute("type")
        // type?: "bash" | "javascript" | "typescript" = "javascript";
        //
        codeSnippetElement;
        languageResultIndicatElement;
        languageTypeIndicatoElement;
        type = "text";
        hasResult = false;
        constructor() {
            super({ onlyParentType: CodeSnippetContainerComponent });
        }
        async onInitRender(param, rawSet) {
            await super.onInitRender(param, rawSet);
            // Prism 하이라이트 적용
            // const prism = (this.domRenderConfig?.window as any)?.Prism;
            // if (prism && this.codeElement) {
            //   prism.highlightElement(this.codeElement);
            // }
        }
        onCreatedThisChildDebounce(childrenSet) {
            super.onCreatedThisChildDebounce(childrenSet);
            // console.log("snippet", this.children);
            let firstChild = this.getFirstChild(CodeSnippetCodeComponent);
            this.type = firstChild?.type;
            this.hasResult = !!this.getFirstChild(CodeSnippetResultComponent);
            // console.log('--', this.type);
        }
        copyCode() {
            this.getFirstChild(CodeSnippetCodeComponent)?.copyCode();
        }
        show() {
            if (this.codeSnippetElement) {
                this.codeSnippetElement.style.display = "block";
                if (this.languageResultIndicatElement)
                    this.languageResultIndicatElement.style.display = "block";
                if (this.languageTypeIndicatoElement)
                    this.languageTypeIndicatoElement.style.display = "block";
                this.active = true;
            }
        }
        hide() {
            if (this.codeSnippetElement) {
                this.codeSnippetElement.style.display = "none";
                if (this.languageResultIndicatElement)
                    this.languageResultIndicatElement.style.display = "none";
                if (this.languageTypeIndicatoElement)
                    this.languageTypeIndicatoElement.style.display = "none";
                this.active = false;
            }
        }
        toggleResultVisible() {
            // console.log('toogle',this.hasResult);
            if (this.hasResult) {
                this.getFirstChild(CodeSnippetResultComponent)?.toggleVisible();
            }
        }
    };
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("name"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
    ], CodeSnippetComponent.prototype, "name", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({
            name: "active",
            converter: (d) => _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_12__.ValidUtils.isNotNullUndefined(d),
        }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Boolean)
    ], CodeSnippetComponent.prototype, "active", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)(".code-snippet"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_b = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _b : Object)
    ], CodeSnippetComponent.prototype, "codeSnippetElement", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)(".language-result-indicator"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_c = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _c : Object)
    ], CodeSnippetComponent.prototype, "languageResultIndicatElement", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)(".language-type-indicator"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_d = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _d : Object)
    ], CodeSnippetComponent.prototype, "languageTypeIndicatoElement", void 0);
    CodeSnippetComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({
            selector: "code-snippet",
            template: _code_snippet_component_html__WEBPACK_IMPORTED_MODULE_6__["default"],
            styles: _code_snippet_component_css__WEBPACK_IMPORTED_MODULE_7__["default"],
        }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [])
    ], CodeSnippetComponent);
    CodeSnippet.CodeSnippetComponent = CodeSnippetComponent;
    let CodeSnippetCodeComponent = class CodeSnippetCodeComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        type = "text";
        codeSnippetPreElement;
        codeElement;
        constructor() {
            super({ onlyParentType: CodeSnippetComponent });
        }
        async onInitRender(param, rawSet) {
            const prism = this.domRenderConfig?.window?.Prism;
            // console.log("snippetCode1",this.type, prism, this.codeElement, this.codeElement?.innerHTML);
            await super.onInitRender(param, rawSet);
            // console.log("snippetCode2",this.type, prism, this.codeElement, this.codeElement?.innerHTML);
            setTimeout(() => {
                // Prism 하이라이트 적용
                //   console.log('this.codeElement', this.codeSnippetPreElement,this.codeSnippetPreElement?.innerHTML);
                if (prism && this.codeElement) {
                    // this.codeElement.innerHTML = this.codeElement.innerHTML.replaceAll('&lt;','<').replaceAll('&gt;','>').replaceAll('&amp;','&');
                    // this.codeElement.innerHTML = this.codeElement.innerHTML.replaceAll('&gt;','>');
                    prism.highlightElement(this.codeElement, prism.languages.haml, 'haml');
                }
            }, 1);
        }
        copyCode() {
            if (this.rawSet?.dataSet.render?.innerHTML &&
                this.domRenderConfig?.window) {
                _dooboostore_core_web_clipboard_ClipBoardUtils__WEBPACK_IMPORTED_MODULE_3__.ClipBoardUtils.writeText(this.rawSet.dataSet.render.innerHTML, this.domRenderConfig.window);
            }
        }
    };
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("type"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
    ], CodeSnippetCodeComponent.prototype, "type", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)(".code-snippet-pre"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_e = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _e : Object)
    ], CodeSnippetCodeComponent.prototype, "codeSnippetPreElement", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)("code"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_f = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _f : Object)
    ], CodeSnippetCodeComponent.prototype, "codeElement", void 0);
    CodeSnippetCodeComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({
            selector: "code-snippet-code",
            template: _code_snippet_code_component_html__WEBPACK_IMPORTED_MODULE_8__["default"],
            styles: _code_snippet_code_component_css__WEBPACK_IMPORTED_MODULE_9__["default"],
        }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [])
    ], CodeSnippetCodeComponent);
    CodeSnippet.CodeSnippetCodeComponent = CodeSnippetCodeComponent;
    let CodeSnippetResultComponent = class CodeSnippetResultComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
        name = "";
        open = false;
        type = "text";
        codeSnippetPreElement;
        codeElement;
        constructor() {
            super({ onlyParentType: CodeSnippetComponent });
        }
        async onInitRender(param, rawSet) {
            const prism = this.domRenderConfig?.window?.Prism;
            // console.log("snippetCode1",this.type, prism, this.codeElement, this.codeElement?.innerHTML);
            await super.onInitRender(param, rawSet);
            // console.log("snippetCode2",this.type, prism, this.codeElement, this.codeElement?.innerHTML);
            if (this.open) {
                this.show();
            }
            else {
                this.hide();
            }
            setTimeout(() => {
                // Prism 하이라이트 적용
                if (prism && this.codeElement) {
                    prism.highlightElement(this.codeElement);
                }
            }, 10);
        }
        toggleVisible() {
            // console.log('--?', this.open, this.codeSnippetPreElement);
            if (this.open) {
                this.hide();
            }
            else {
                this.show();
            }
        }
        show() {
            if (this.codeSnippetPreElement) {
                this.codeSnippetPreElement.style.display = "block";
                this.open = true;
            }
        }
        hide() {
            if (this.codeSnippetPreElement) {
                this.codeSnippetPreElement.style.display = "none";
                this.open = false;
            }
        }
    };
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("name"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
    ], CodeSnippetResultComponent.prototype, "name", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)({
            name: "open",
            converter: (d) => _dooboostore_core_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_12__.ValidUtils.isNotNullUndefined(d),
        }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", Boolean)
    ], CodeSnippetResultComponent.prototype, "open", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("type"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
    ], CodeSnippetResultComponent.prototype, "type", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)(".code-snippet-pre"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_g = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _g : Object)
    ], CodeSnippetResultComponent.prototype, "codeSnippetPreElement", void 0);
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)("code"),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_h = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _h : Object)
    ], CodeSnippetResultComponent.prototype, "codeElement", void 0);
    CodeSnippetResultComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
        (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({
            selector: "code-snippet-result",
            template: _code_snippet_result_component_html__WEBPACK_IMPORTED_MODULE_10__["default"],
            styles: _code_snippet_result_component_css__WEBPACK_IMPORTED_MODULE_11__["default"],
        }),
        (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [])
    ], CodeSnippetResultComponent);
    CodeSnippet.CodeSnippetResultComponent = CodeSnippetResultComponent;
})(CodeSnippet || (CodeSnippet = {}));


/***/ }),

/***/ "./src/component/code/code-snippet/index.ts":
/*!**************************************************!*\
  !*** ./src/component/code/code-snippet/index.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CodeSnippet: () => (/* reexport safe */ _code_snippet_component__WEBPACK_IMPORTED_MODULE_0__.CodeSnippet)
/* harmony export */ });
/* harmony import */ var _code_snippet_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./code-snippet.component */ "./src/component/code/code-snippet/code-snippet.component.ts");



/***/ }),

/***/ "./src/component/code/index.ts":
/*!*************************************!*\
  !*** ./src/component/code/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CodeSnippet: () => (/* reexport safe */ _code_snippet__WEBPACK_IMPORTED_MODULE_1__.CodeSnippet),
/* harmony export */   MermaidDiagramComponent: () => (/* reexport safe */ _mermaid_diagram__WEBPACK_IMPORTED_MODULE_0__.MermaidDiagramComponent)
/* harmony export */ });
/* harmony import */ var _mermaid_diagram__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mermaid-diagram */ "./src/component/code/mermaid-diagram/index.ts");
/* harmony import */ var _code_snippet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./code-snippet */ "./src/component/code/code-snippet/index.ts");




/***/ }),

/***/ "./src/component/code/mermaid-diagram/index.ts":
/*!*****************************************************!*\
  !*** ./src/component/code/mermaid-diagram/index.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MermaidDiagramComponent: () => (/* reexport safe */ _mermaid_diagram_component__WEBPACK_IMPORTED_MODULE_0__.MermaidDiagramComponent)
/* harmony export */ });
/* harmony import */ var _mermaid_diagram_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mermaid-diagram.component */ "./src/component/code/mermaid-diagram/mermaid-diagram.component.ts");



/***/ }),

/***/ "./src/component/code/mermaid-diagram/mermaid-diagram.component.css":
/*!**************************************************************************!*\
  !*** ./src/component/code/mermaid-diagram/mermaid-diagram.component.css ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("@keyframes flash {\n  from {\n    background-color: #777;\n  }\n  to {\n    background-color: #22c55e;\n  }\n}\n\n/* Code Examples */\n\n/* Code Examples */\n.code-example {\n    background: #1a1a1a;\n    /*width: 500px;*/\n    /*height: 500px;*/\n    border: 1px solid #2a2a2a;\n    border-radius: 8px;\n    overflow: hidden;\n    margin-bottom: 1.5rem;\n}\n.code-example {\n    overflow-x: auto;\n}\n\n.code-example svg {\n    width: 100%;\n    height: auto;\n    max-width: none;\n}\n\n.code-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    background: #2a2a2a;\n    padding: 0.2rem 0.2rem 0.2rem 1rem;\n    border-bottom: 1px solid #3a3a3a;\n}\n\n.code-title {\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: #e5e5e5;\n}\n\n.code-example pre {\n    padding: 1.5rem;\n    margin: 0;\n    overflow-x: auto;\n    background: transparent;\n}\n\n.code-example code {\n    color: #e5e5e5;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 0.875rem;\n    line-height: 1.6;\n}\n\n\n.code-copy-btn {\n    background: #555;\n    color: white;\n    border: none;\n    padding: 2px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease, transform 0.1s ease;\n}\n\n.code-copy-btn:active {\n    transform: scale(0.95);\n}\n\n.code-copy-btn.copied {\n    background-color: #22c55e;\n    animation: flash 0.4s ease-out;\n}\n\n\n\n.actor {\n    stroke: #ccccff;\n    fill: #ececff;\n}\ntext.actor {\n    fill: black;\n    stroke: none;\n    font-family: Helvetica;\n}\n\n.actor-line {\n    stroke: #c3c3c3;\n}\n\n.messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: '2 2';\n    marker-end: 'url(#arrowhead)';\n    stroke: #d1d1d1;\n}\n\n.messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: '2 2';\n    stroke: #e4e4e4;\n}\n\n#arrowhead {\n    fill: #b3b3b3;\n}\n\n.messageText {\n    fill: #d3d3d3;\n    stroke: none;\n    font-family: 'trebuchet ms', verdana, arial;\n    font-size: 14px;\n}\n\n.labelBox {\n    stroke: #ccccff;\n    fill: #ececff;\n}\n\n.labelText {\n    fill: #d7d7d7;\n    stroke: none;\n    font-family: 'trebuchet ms', verdana, arial;\n}\n\n.loopText {\n    fill: #c5c5c5;\n    stroke: none;\n    font-family: 'trebuchet ms', verdana, arial;\n}\n\n.loopLine {\n    stroke-width: 2;\n    stroke-dasharray: '2 2';\n    marker-end: 'url(#arrowhead)';\n    stroke: #ccccff;\n}\n\n.note {\n    stroke: #decc93;\n    fill: #fff5ad;\n}\n\n.noteText {\n    fill: #c8c8c8;\n    stroke: none;\n    font-family: 'trebuchet ms', verdana, arial;\n    font-size: 14px;\n}\n\n/*.mermaid .customEdge path {*/\n/*    stroke: #ff0000; !* 라인 색상 *!*/\n/*    fill: #ff0000; !* 화살표 채우기 색상 *!*/\n/*}*/\n/*.mermaid .customEdge marker path {*/\n/*    fill: #ff0000; !* 화살표 마커의 채우기 색상 *!*/\n/*}*/\n/*.link, .link path,*/\n/*.edgePath path {*/\n/*    stroke: #b10606 !important;  !* 🔸 원하는 색상 *!*/\n/*    stroke-width: 2px !important;*/\n/*}*/\n@media (max-width: 768px) {\n    .code-example pre {\n        padding: 1rem;\n        overflow-x: auto;\n        font-size: 0.8rem;\n    }\n}");

/***/ }),

/***/ "./src/component/code/mermaid-diagram/mermaid-diagram.component.html":
/*!***************************************************************************!*\
  !*** ./src/component/code/mermaid-diagram/mermaid-diagram.component.html ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<div class=\"code-example\">\n    <div class=\"code-header\">\n        <span class=\"code-title\">${@this@.title}$</span>\n        <button class=\"code-copy-btn\" dr-event-click=\"@this@.copyCode($element)\">Copy</button>\n    </div>\n    <pre class=\"${@this@.codeClass}$\">#innerHTML#</pre>\n</div>");

/***/ }),

/***/ "./src/component/code/mermaid-diagram/mermaid-diagram.component.ts":
/*!*************************************************************************!*\
  !*** ./src/component/code/mermaid-diagram/mermaid-diagram.component.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MermaidDiagramComponent: () => (/* binding */ MermaidDiagramComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _dooboostore_core_web_clipboard_ClipBoardUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/core-web/clipboard/ClipBoardUtils */ "../../packages/@dooboostore/core-web/src/clipboard/ClipBoardUtils.ts");
/* harmony import */ var _mermaid_diagram_component_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mermaid-diagram.component.html */ "./src/component/code/mermaid-diagram/mermaid-diagram.component.html");
/* harmony import */ var _mermaid_diagram_component_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mermaid-diagram.component.css */ "./src/component/code/mermaid-diagram/mermaid-diagram.component.css");
var _a;






let MermaidDiagramComponent = class MermaidDiagramComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
    title = "";
    codeElement;
    codeClass = "";
    async onInitRender(param, rawSet) {
        await super.onInitRender(param, rawSet);
        // console.log('--aa------', this.codesElement);
        // 해당 컴포넌트의 <code> 엘리먼트만 Prism으로 하이라이트 처리
        const mermaid = this.domRenderConfig?.window?.Mermaid;
        // console.log(
        //   "-------",
        //   mermaid,
        //   this.codeElement?.hasAttribute("data-mermaid-processed"),
        // );
        if (mermaid &&
            this.codeElement &&
            !this.codeElement.hasAttribute("data-mermaid-processed")) {
            mermaid.init(undefined, this.codeElement);
            this.codeElement.setAttribute("data-mermaid-processed", "true");
            // mermaid.highlightElement(this.codeElement);
        }
    }
    copyCode(e) {
        if (this.rawSet?.dataSet.render?.innerHTML &&
            this.domRenderConfig?.window) {
            _dooboostore_core_web_clipboard_ClipBoardUtils__WEBPACK_IMPORTED_MODULE_3__.ClipBoardUtils.writeText(this.rawSet.dataSet.render.innerHTML, this.domRenderConfig.window);
            e.classList.add("copied");
            setTimeout(() => {
                e.classList.remove("copied");
            }, 1500);
        }
        // console.log('-----', this.rawSet?.point.innerHTML);
    }
};
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("title"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
], MermaidDiagramComponent.prototype, "title", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)("pre"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_a = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _a : Object)
], MermaidDiagramComponent.prototype, "codeElement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("codeClass"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
], MermaidDiagramComponent.prototype, "codeClass", void 0);
MermaidDiagramComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({
        selector: "mermaid-diagram",
        template: _mermaid_diagram_component_html__WEBPACK_IMPORTED_MODULE_4__["default"],
        styles: _mermaid_diagram_component_css__WEBPACK_IMPORTED_MODULE_5__["default"],
    })
], MermaidDiagramComponent);



/***/ }),

/***/ "./src/component/hello/hello.component.html":
/*!**************************************************!*\
  !*** ./src/component/hello/hello.component.html ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<div>\n    <h2>${@this@.message}$</h2>\n    <button dr-event-click=\"@this@.sayHello()\">Say Hello to Server</button>\n</div>\n");

/***/ }),

/***/ "./src/component/hello/hello.component.ts":
/*!************************************************!*\
  !*** ./src/component/hello/hello.component.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HelloComponent: () => (/* binding */ HelloComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _hello_component_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hello.component.html */ "./src/component/hello/hello.component.html");
/* harmony import */ var _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/simple-boot/fetch/ApiService */ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
var _a;





let HelloComponent = class HelloComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
    apiService;
    message = 'loading...';
    constructor(apiService) {
        super();
        this.apiService = apiService;
    }
    async sayHello() {
        try {
            const res = await this.apiService.get({ target: '/api/hello' });
            this.message = res.message;
        }
        catch (e) {
            this.message = 'Error: ' + e.message;
        }
    }
};
HelloComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_4__.Component)({ template: _hello_component_html__WEBPACK_IMPORTED_MODULE_2__["default"] }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_3__.ApiService !== "undefined" && _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_3__.ApiService) === "function" ? _a : Object])
], HelloComponent);



/***/ }),

/***/ "./src/component/hello/index.ts":
/*!**************************************!*\
  !*** ./src/component/hello/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HelloComponent: () => (/* reexport safe */ _hello_component__WEBPACK_IMPORTED_MODULE_0__.HelloComponent)
/* harmony export */ });
/* harmony import */ var _hello_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hello.component */ "./src/component/hello/hello.component.ts");



/***/ }),

/***/ "./src/component/index.ts":
/*!********************************!*\
  !*** ./src/component/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   breadcrumb: () => (/* reexport module object */ _breadcrumb__WEBPACK_IMPORTED_MODULE_3__),
/* harmony export */   code: () => (/* reexport module object */ _code__WEBPACK_IMPORTED_MODULE_0__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   hello: () => (/* reexport module object */ _hello__WEBPACK_IMPORTED_MODULE_2__),
/* harmony export */   test: () => (/* reexport module object */ _test__WEBPACK_IMPORTED_MODULE_1__)
/* harmony export */ });
/* harmony import */ var _code__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./code */ "./src/component/code/index.ts");
/* harmony import */ var _test__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./test */ "./src/component/test/index.ts");
/* harmony import */ var _hello__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hello */ "./src/component/hello/index.ts");
/* harmony import */ var _breadcrumb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./breadcrumb */ "./src/component/breadcrumb/index.ts");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});


/***/ }),

/***/ "./src/component/test/index.ts":
/*!*************************************!*\
  !*** ./src/component/test/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TestComponent: () => (/* reexport safe */ _test_component__WEBPACK_IMPORTED_MODULE_0__.TestComponent)
/* harmony export */ });
/* harmony import */ var _test_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./test.component */ "./src/component/test/test.component.ts");



/***/ }),

/***/ "./src/component/test/test.component.css":
/*!***********************************************!*\
  !*** ./src/component/test/test.component.css ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("");

/***/ }),

/***/ "./src/component/test/test.component.html":
/*!************************************************!*\
  !*** ./src/component/test/test.component.html ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<div dr-if=\"true\">\n    test #innerHTML# test\n</div>");

/***/ }),

/***/ "./src/component/test/test.component.ts":
/*!**********************************************!*\
  !*** ./src/component/test/test.component.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TestComponent: () => (/* binding */ TestComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _test_component_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./test.component.html */ "./src/component/test/test.component.html");
/* harmony import */ var _test_component_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./test.component.css */ "./src/component/test/test.component.css");
var _a;





let TestComponent = class TestComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBase {
    title = "";
    codeElement;
    codeClass = "";
    onInitRender(param, rawSet) {
        super.onInitRender(param, rawSet);
    }
};
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("title"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
], TestComponent.prototype, "title", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.query)("pre"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", typeof (_a = typeof HTMLElement !== "undefined" && HTMLElement) === "function" ? _a : Object)
], TestComponent.prototype, "codeElement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.attribute)("codeClass"),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:type", String)
], TestComponent.prototype, "codeClass", void 0);
TestComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({
        selector: "test",
        template: _test_component_html__WEBPACK_IMPORTED_MODULE_3__["default"],
        styles: _test_component_css__WEBPACK_IMPORTED_MODULE_4__["default"],
    })
], TestComponent);



/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   environment: () => (/* binding */ environment)
/* harmony export */ });
const environment = {
    packageGithubIoUrl: 'http://localhost:8082/dooboostore-develop.github.io/packages',
    cookie: {
        accessTokenName: 'ACCESS_TOKEN',
        refreshTokenName: 'REFRESH_TOKEN',
    },
    header: {
        authorizationHeaderBearer: 'Bearer'
    }
};


/***/ }),

/***/ "./src/pages/english/english.route.component.css":
/*!*******************************************************!*\
  !*** ./src/pages/english/english.route.component.css ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("/* Content Sections */\n.content-section {\n  margin-bottom: 25px;\n}\n\n.section-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #2c3e50;\n  margin: 0 0 12px 20px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.section-title i {\n  color: #3498db;\n  font-size: 16px;\n}\n\n.section-title .fa-youtube {\n  color: #ff0000;\n}\n\n.movie-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 20px;\n  padding: 0 20px 20px 20px;\n}\n\n.movie-card {\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.movie-poster-link {\n  display: block;\n  text-decoration: none;\n  color: inherit;\n}\n\n.movie-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.movie-card:hover .movie-title {\n  background: #f8f9fa;\n  color: #1976d2;\n  border-top-color: #2196f3;\n}\n\n.movie-poster {\n  position: relative;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n}\n\n/* Default movie poster ratio (2:3) */\n.movie-poster.movie {\n  padding-bottom: 150%;\n  /* 2:3 ratio (3/2 = 1.5 = 150%) - Movie poster ratio */\n}\n\n/* YouTube thumbnail ratio (16:9) */\n.movie-poster.youtube {\n  padding-bottom: 56.25%;\n  /* 16:9 ratio (9/16 = 0.5625 = 56.25%) - YouTube thumbnail ratio */\n}\n\n/* Fallback for items without type - use movie ratio */\n.movie-poster:not(.youtube):not(.movie) {\n  padding-bottom: 150%;\n  /* Default to movie poster ratio */\n}\n\n.movie-poster img {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: center;\n  display: block;\n}\n\n/* Enhanced title card below image */\n.movie-title {\n  margin: 0;\n  padding: 10px 8px;\n  font-size: 13px;\n  font-weight: 600;\n  line-height: 1.3;\n  color: #2c3e50;\n  text-align: center;\n  background: #ffffff;\n  border-top: 1px solid #dee2e6;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  transition: all 0.3s ease;\n  position: relative;\n  word-break: break-word;\n  hyphens: auto;\n}\n\n.movie-actions {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.external-link {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  color: white;\n  text-decoration: none;\n  transition: background-color 0.3s ease;\n}\n\n.external-link:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.external-link i {\n  font-size: 14px;\n}\n\n/* Responsive breakpoints */\n@media (max-width: 768px) {\n  .movie-grid {\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 15px;\n    padding: 15px;\n  }\n\n  .movie-title {\n    font-size: 12px;\n    padding: 8px 6px;\n  }\n}\n\n@media (max-width: 480px) {\n  .movie-grid {\n    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n    gap: 10px;\n    padding: 10px;\n  }\n\n  .movie-overlay {\n    padding: 15px 10px 10px;\n  }\n\n  .movie-title {\n    font-size: 11px;\n    padding: 6px 4px;\n  }\n\n  .external-link {\n    width: 28px;\n    height: 28px;\n  }\n\n  .external-link i {\n    font-size: 12px;\n  }\n}");

/***/ }),

/***/ "./src/pages/english/english.route.component.html":
/*!********************************************************!*\
  !*** ./src/pages/english/english.route.component.html ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<!-- YouTube Section -->\n<section class=\"content-section\" dr-if=\"@this@.youtubeItems && @this@.youtubeItems.length > 0\">\n    <h2 class=\"section-title\">\n        <i class=\"fab fa-youtube\"></i>\n        YouTube Videos\n    </h2>\n    <div class=\"movie-grid\">\n        <div class=\"movie-card\" dr-for-of=\"@this@.youtubeItems\" dr-option-item-variable-name=\"item\">\n            <dr-a href=\"${'/english/' + #item#.name}$\" class=\"movie-poster-link\">\n                <div class=\"movie-poster youtube\">\n                    <img dr-attr=\"{src: #item#.img, alt: #item#.name}\" />\n                    <div class=\"movie-actions\" dr-if=\"#item#.link\">\n                        <a dr-attr=\"{href: #item#.link}\" target=\"_blank\" rel=\"noopener noreferrer\"\n                            class=\"external-link\">\n                            <i class=\"fa-solid fa-link\"></i>\n                        </a>\n                    </div>\n                </div>\n                <h3 class=\"movie-title\">${#item#.name}$</h3>\n            </dr-a>\n        </div>\n    </div>\n</section>\n\n<!-- Movies Section -->\n<section class=\"content-section\" dr-if=\"@this@.movieItems && @this@.movieItems.length > 0\">\n    <h2 class=\"section-title\">\n        <i class=\"fas fa-film\"></i>\n        Movies\n    </h2>\n    <div class=\"movie-grid\">\n        <div class=\"movie-card\" dr-for-of=\"@this@.movieItems\" dr-option-item-variable-name=\"item\">\n            <dr-a href=\"${'/english/' + #item#.name}$\" class=\"movie-poster-link\">\n                <div class=\"movie-poster movie\">\n                    <img dr-attr=\"{src: #item#.img, alt: #item#.name}\" />\n                    <div class=\"movie-actions\" dr-if=\"#item#.link\">\n                        <a dr-attr=\"{href: #item#.link}\" target=\"_blank\" rel=\"noopener noreferrer\"\n                            class=\"external-link\">\n                            <i class=\"fa-solid fa-link\"></i>\n                        </a>\n                    </div>\n                </div>\n                <h3 class=\"movie-title\">${#item#.name}$</h3>\n            </dr-a>\n        </div>\n    </div>\n</section>\n<iframe src=\"https://lazycollect.com/assets/swt/adfit/255x255.html\" width=\"250\" height=\"250\" frameborder=\"0\"></iframe>");

/***/ }),

/***/ "./src/pages/english/english.route.component.ts":
/*!******************************************************!*\
  !*** ./src/pages/english/english.route.component.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EnglishRouteComponent: () => (/* binding */ EnglishRouteComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _english_route_component_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./english.route.component.html */ "./src/pages/english/english.route.component.html");
/* harmony import */ var _english_route_component_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./english.route.component.css */ "./src/pages/english/english.route.component.css");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/simple-boot/fetch/ApiService */ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts");
/* harmony import */ var _dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/core-web/valid/ValidUtils */ "../../packages/@dooboostore/core-web/src/valid/ValidUtils.ts");
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
var _a;








let EnglishRouteComponent = class EnglishRouteComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_7__.ComponentBase {
    apiService;
    items = undefined;
    movieItems = undefined;
    youtubeItems = undefined;
    constructor(apiService) {
        super();
        this.apiService = apiService;
    }
    async onRawSetRendered(rawSet, otherData) {
        await super.onRawSetRendered(rawSet, otherData);
    }
    //
    async onRouting(r) {
        await new Promise((r, j) => setTimeout(r, 0));
        // this.items = [{},{}]
    }
    async onInitRender(param, rawSet) {
        await super.onInitRender(param, rawSet);
        if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser()) {
            this.items = await this.apiService.get({ target: '/datas/english/items.json' });
            // Separate items by type
            this.movieItems = this.items.filter(item => !item.type || item.type === 'movie');
            this.youtubeItems = this.items.filter(item => item.type === 'youtube');
            console.log('Movies:', this.movieItems.length);
            console.log('YouTube videos:', this.youtubeItems.length);
        }
    }
    async add() {
    }
    onDestroy() {
        super.onDestroy();
    }
};
EnglishRouteComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_4__.Sim,
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_1__.Component)({
        template: _english_route_component_html__WEBPACK_IMPORTED_MODULE_2__["default"],
        styles: _english_route_component_css__WEBPACK_IMPORTED_MODULE_3__["default"]
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_5__.ApiService !== "undefined" && _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_5__.ApiService) === "function" ? _a : Object])
], EnglishRouteComponent);



/***/ }),

/***/ "./src/pages/english/english.router.component.css":
/*!********************************************************!*\
  !*** ./src/pages/english/english.router.component.css ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("/* Fixed Header */\n.english-header {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 1000;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.header-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1.5rem;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n  min-width: 0; /* Allow shrinking */\n}\n\n.header-title {\n  font-size: 1.1rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/* Home Button - Always at the left edge */\n.home-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.3s ease;\n  font-size: 1.1rem;\n  min-width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0; /* Don't shrink */\n}\n\n.home-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateY(-1px);\n}\n\n/* Current Item Info - Horizontal layout with image */\n.current-item-info {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  background: rgba(255, 255, 255, 0.1);\n  padding: 0.4rem 0.8rem;\n  border-radius: 8px;\n  min-width: 0; /* Allow shrinking */\n  max-width: 400px; /* Limit max width */\n}\n\n.item-image {\n  width: 32px;\n  height: 32px;\n  border-radius: 4px;\n  object-fit: cover;\n  flex-shrink: 0; /* Don't shrink image */\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.item-details {\n  display: flex;\n  flex-direction: column;\n  gap: 0.1rem;\n  min-width: 0; /* Allow shrinking */\n  flex: 1;\n}\n\n.item-name {\n  font-weight: 500;\n  font-size: 0.9rem;\n  color: white;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis; /* Add ... for long names */\n}\n\n.item-type {\n  font-size: 0.75rem;\n  opacity: 0.8;\n  color: rgba(255, 255, 255, 0.8);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.user-menu {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n}\n\n.menu-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  padding: 0.4rem 0.8rem;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 0.8rem;\n}\n\n.menu-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateY(-1px);\n}\n\n.favorites-count {\n  background: #ff4757;\n  color: white;\n  border-radius: 50%;\n  padding: 0.15rem 0.4rem;\n  font-size: 0.7rem;\n  min-width: 1.2rem;\n  text-align: center;\n}\n\n/* Favorites Panel */\n.favorites-panel {\n  position: absolute;\n  top: 100%;\n  right: 2rem;\n  width: 400px;\n  max-height: 500px;\n  background: white;\n  color: #333;\n  border-radius: 12px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  transform: translateY(-10px);\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s ease;\n}\n\n.favorites-panel.show {\n  transform: translateY(0);\n  opacity: 1;\n  visibility: visible;\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  background: #f8f9fa;\n  border-bottom: 1px solid #e9ecef;\n}\n\n.panel-header h3 {\n  margin: 0;\n  font-size: 1.1rem;\n  color: #495057;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  color: #6c757d;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.close-btn:hover {\n  background: #e9ecef;\n  color: #495057;\n}\n\n.favorites-content {\n  max-height: 400px;\n  overflow-y: auto;\n  padding: 1rem;\n}\n\n.empty-message {\n  text-align: center;\n  color: #6c757d;\n  padding: 2rem;\n  font-style: italic;\n}\n\n.favorite-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem;\n  border-radius: 8px;\n  margin-bottom: 0.5rem;\n  background: #f8f9fa;\n  transition: all 0.2s ease;\n}\n\n.favorite-item:hover {\n  background: #e9ecef;\n}\n\n.word-info {\n  flex: 1;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n  padding: 0.25rem;\n  margin: -0.25rem;\n}\n\n.word-info:hover {\n  background-color: rgba(33, 150, 243, 0.05);\n}\n\n.word-text {\n  font-weight: 600;\n  color: #495057;\n  display: block;\n  margin-bottom: 0.25rem;\n}\n\n.clickable-word {\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border-radius: 3px;\n  padding: 2px 4px;\n  margin: -2px -4px;\n}\n\n.clickable-word:hover {\n  background-color: #e3f2fd;\n  color: #1976d2;\n}\n\n.word-meaning {\n  font-size: 0.9rem;\n  color: #6c757d;\n}\n\n.remove-btn {\n  background: none;\n  border: none;\n  color: #dc3545;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.remove-btn:hover {\n  background: rgba(220, 53, 69, 0.1);\n}\n\n/* Main Content */\n.english-main {\n  margin-top: 60px; /* Header height + some spacing */\n  min-height: calc(100vh - 60px);\n}\n\n/* Mobile Responsive */\n@media (max-width: 768px) {\n  .header-content {\n    padding: 0.6rem 1rem;\n  }\n  \n  .header-left {\n    gap: 0.5rem;\n  }\n  \n  .header-title {\n    font-size: 1rem;\n  }\n  \n  .home-btn {\n    min-width: 36px;\n    height: 36px;\n    font-size: 1rem;\n  }\n  \n  .current-item-info {\n    padding: 0.3rem 0.6rem;\n    gap: 0.5rem;\n    max-width: 250px; /* Smaller max width on mobile */\n  }\n  \n  .item-image {\n    width: 28px;\n    height: 28px;\n  }\n  \n  .item-name {\n    font-size: 0.8rem;\n  }\n  \n  .item-type {\n    display: none; /* Hide type on mobile to save space */\n  }\n  \n  .menu-btn span {\n    display: none;\n  }\n  \n  .menu-btn {\n    padding: 0.4rem;\n    min-width: 36px;\n    justify-content: center;\n  }\n  \n  .favorites-panel {\n    right: 1rem;\n    left: 1rem;\n    width: auto;\n  }\n  \n  .english-main {\n    margin-top: 50px;\n  }\n}");

/***/ }),

/***/ "./src/pages/english/english.router.component.html":
/*!*********************************************************!*\
  !*** ./src/pages/english/english.router.component.html ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<!-- Fixed Header -->\n<header class=\"english-header\">\n    <div class=\"header-content\">\n        <div class=\"header-left\">\n            <!-- Show home button when in sub-route (always at the left edge) -->\n            <dr-a href=\"/english/\" class=\"home-btn\" dr-if=\"@this@.isInSubRoute\" title=\"홈으로 이동\">\n                <i class=\"fas fa-home\"></i>\n            </dr-a>\n            \n            <!-- Show title when on main page -->\n            <h1 class=\"header-title\" dr-if=\"!@this@.isInSubRoute\">English Learning</h1>\n            \n            <!-- Show current item info when in sub-route -->\n            <div class=\"current-item-info\" dr-if=\"@this@.currentItem\">\n                <img class=\"item-image\" dr-attr=\"{src: @this@.currentItem.img}\" alt=\"Item image\">\n                <div class=\"item-details\">\n                    <span class=\"item-name\">${@this@.currentItem.name}$</span>\n                    <span class=\"item-type\" dr-if=\"@this@.currentItem.type\">${@this@.currentItem.type}$</span>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"user-menu\">\n            <button class=\"menu-btn favorites-btn\" dr-event-click=\"@this@.toggleFavorites()\">\n                <i class=\"fas fa-star\"></i>\n                <span>즐겨찾기</span>\n                <span class=\"favorites-count\"\n                    dr-if=\"@this@.favoriteWords.length > 0\">${@this@.favoriteWords.length}$</span>\n            </button>\n        </div>\n    </div>\n\n    <!-- Favorites Panel -->\n    <div class=\"favorites-panel\" dr-if=\"@this@.showFavorites\"\n        dr-attr=\"{class: 'favorites-panel' + (@this@.showFavorites ? ' show' : '')}\">\n        <div class=\"panel-header\">\n            <h3>즐겨찾기 단어</h3>\n            <button class=\"close-btn\" dr-event-click=\"@this@.toggleFavorites()\">\n                <i class=\"fas fa-times\"></i>\n            </button>\n        </div>\n\n        <div class=\"favorites-content\">\n            <div class=\"empty-message\" dr-if=\"@this@.favoriteWords.length === 0\">\n                아직 즐겨찾기한 단어가 없습니다.\n            </div>\n\n            <div class=\"favorite-item\" dr-for-of=\"@this@.favoriteWords\" dr-option-item-variable-name=\"word\">\n                <div class=\"word-info\" dr-event-click=\"@this@.onFavoriteWordClick(#word#.text, $event)\">\n                    <span class=\"word-text clickable-word\">${#word#.text}$</span>\n                    <span class=\"word-meaning\">${#word#.meaning}$</span>\n                </div>\n                <button class=\"remove-btn\" dr-event-click=\"@this@.removeFavorite(#word#.text)\">\n                    <i class=\"fas fa-trash\"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n</header>\n\n<main class=\"english-main\">\n    <dr-router-outlet createArguments=\"${@this@.getChildArguments()}$\"></dr-router-outlet>\n</main>");

/***/ }),

/***/ "./src/pages/english/english.router.component.ts":
/*!*******************************************************!*\
  !*** ./src/pages/english/english.router.component.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EnglishRouterComponent: () => (/* binding */ EnglishRouterComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_simple_boot_decorators_route_Router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/route/Router */ "../../packages/@dooboostore/simple-boot/src/decorators/route/Router.ts");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _english_router_component_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./english.router.component.html */ "./src/pages/english/english.router.component.html");
/* harmony import */ var _english_router_component_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./english.router.component.css */ "./src/pages/english/english.router.component.css");
/* harmony import */ var _dooboostore_simple_boot_front_component_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/simple-boot-front/component/ComponentRouterBase */ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentRouterBase.ts");
/* harmony import */ var _english_route_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./english.route.component */ "./src/pages/english/english.route.component.ts");
/* harmony import */ var _dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @dooboostore/core-web/valid/ValidUtils */ "../../packages/@dooboostore/core-web/src/valid/ValidUtils.ts");
/* harmony import */ var _dooboostore_simple_boot_front_option_SimFrontOption__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @dooboostore/simple-boot-front/option/SimFrontOption */ "../../packages/@dooboostore/simple-boot-front/src/option/SimFrontOption.ts");
/* harmony import */ var _src_pages_english_player_player_route_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @src/pages/english/player/player.route.component */ "./src/pages/english/player/player.route.component.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ "../../node_modules/.pnpm/rxjs@7.8.2/node_modules/rxjs/dist/esm5/internal/operators/window.js");
/* harmony import */ var _src_service_english_VideoItemService__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @src/service/english/VideoItemService */ "./src/service/english/VideoItemService.ts");
var _a, _b;













let EnglishRouterComponent = class EnglishRouterComponent extends _dooboostore_simple_boot_front_component_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_6__.ComponentRouterBase {
    config;
    videoItemService;
    favoriteWords = [];
    showFavorites = false;
    // Current item info
    currentItemName;
    currentItem;
    // items?: Item[];
    isInSubRoute = false; // Track if we're in a sub-route
    constructor(config, videoItemService) {
        super({ sameRouteNoApply: true });
        this.config = config;
        this.videoItemService = videoItemService;
    }
    onCreateRenderData(data) {
        super.onCreateRenderData(data);
        console.log('english.router.component onCreateRenderData-------');
    }
    onCreateRender(...param) {
        console.log('english.router.component onCreateRender-------');
    }
    async onInitRender(param, rawSet) {
        await super.onInitRender(param, rawSet);
        console.log('english.router.component onInitRender-------');
        // Load favorite words from localStorage
        this.loadFavoriteWords();
        // Initialize speech synthesis voices
        this.initializeSpeechSynthesis();
    }
    async onRouting(r) {
        await super.onRouting(r);
        console.log('english.router.component onRouting-------');
        if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_8__.ValidUtils.isBrowser()) {
            // Get current item name from route
            this.currentItemName = decodeURIComponent(r.routerModule.pathData?.name ?? '');
            console.log('------->', r, this.currentItemName);
            // Check if we're in a sub-route (has name parameter)
            this.isInSubRoute = !!this.currentItemName;
            // Find current item info
            if (this.currentItemName) {
                // Load items data
                // try {
                //   this.items = await this.apiService.get<Item[]>({ target: '/datas/english/items.json' });
                //   console.log('Loaded items:', this.items.length);
                // } catch (error) {
                //   console.error('Failed to load items:', error);
                // }
                this.currentItem = await this.videoItemService.item(this.currentItemName);
                console.log('Current item:', this.currentItem);
            }
            else {
                this.currentItem = undefined;
            }
        }
    }
    onCreatedThisChild(child, data) {
        super.onCreatedThisChild(child, data);
    }
    onCreatedThisChildDebounce(childrenSet) {
        super.onCreatedThisChildDebounce(childrenSet);
    }
    onDrThisUnBind() {
        super.onDrThisUnBind();
        this.onDestroyRender();
    }
    onDestroyRender(data) {
        super.onDestroyRender(data);
    }
    onCreatedOutletDebounce(a) {
        // Prism.highlightAll() 전체 하이라이트 제거
    }
    // Load favorite words from localStorage
    loadFavoriteWords() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_8__.ValidUtils.isBrowser())
            return;
        try {
            const stored = localStorage.getItem('english-favorite-words');
            if (stored) {
                this.favoriteWords = JSON.parse(stored);
            }
        }
        catch (error) {
            console.error('Failed to load favorite words:', error);
            this.favoriteWords = [];
        }
    }
    // Save favorite words to localStorage
    saveFavoriteWords() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_8__.ValidUtils.isBrowser())
            return;
        try {
            localStorage.setItem('english-favorite-words', JSON.stringify(this.favoriteWords));
        }
        catch (error) {
            console.error('Failed to save favorite words:', error);
        }
    }
    // Add word to favorites
    addToFavorites = (word, meaning) => {
        // Check if word already exists
        const exists = this.favoriteWords.some(fav => fav.text.toLowerCase() === word.toLowerCase());
        if (exists) {
            console.log('Word already in favorites:', word);
            return false;
        }
        // Add new favorite word
        const newFavorite = {
            text: word,
            meaning: meaning,
            addedAt: Date.now()
        };
        this.favoriteWords.unshift(newFavorite); // Add to beginning
        this.saveFavoriteWords();
        console.log('Added to favorites:', word);
        return true;
    };
    // Remove word from favorites
    removeFavorite(word) {
        this.favoriteWords = this.favoriteWords.filter(fav => fav.text.toLowerCase() !== word.toLowerCase());
        this.saveFavoriteWords();
        console.log('Removed from favorites:', word);
    }
    // Check if word is in favorites
    isWordFavorite = (word) => {
        return this.favoriteWords.some(fav => fav.text.toLowerCase() === word.toLowerCase());
    };
    // Toggle favorites panel
    toggleFavorites() {
        this.showFavorites = !this.showFavorites;
    }
    initializeSpeechSynthesis() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_8__.ValidUtils.isBrowser() || !("speechSynthesis" in rxjs__WEBPACK_IMPORTED_MODULE_11__.window)) {
            console.warn('Speech Synthesis not available');
            return;
        }
        // Load voices (some browsers need this)
        const loadVoices = () => {
            const voices = speechSynthesis.getVoices();
            if (voices.length > 0) {
                const englishVoices = voices.filter(v => v.lang.startsWith('en'));
                console.log('Available English voices:');
                englishVoices.forEach(voice => {
                    console.log(`- ${voice.name} (${voice.lang}) ${voice.localService ? '[Local]' : '[Remote]'}`);
                });
                // Show which voice will be selected
                const selectedVoice = this.selectBestEnglishVoice(voices);
                if (selectedVoice) {
                    console.log(`🎤 Selected voice: ${selectedVoice.name}`);
                }
            }
        };
        // Load voices immediately
        loadVoices();
        // Also load when voices change (for Chrome)
        speechSynthesis.onvoiceschanged = loadVoices;
    }
    // Speak word using TTS
    speakWord(word) {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_8__.ValidUtils.isBrowser()) {
            return;
        }
        // Check if browser supports Speech Synthesis
        // if (!('speechSynthesis' in window)) {
        //   console.warn('Speech Synthesis not supported in this browser');
        //   return;
        // }
        // Stop any ongoing speech
        speechSynthesis.cancel();
        // Clean the word (remove punctuation)
        const cleanWord = word.replace(/[,.":!?;]/g, '').trim();
        if (!cleanWord)
            return;
        // Ensure voices are loaded before speaking
        const speakWithVoices = () => {
            const voices = speechSynthesis.getVoices();
            if (voices.length === 0) {
                // If no voices loaded yet, try again after a short delay
                setTimeout(speakWithVoices, 100);
                return;
            }
            // Create speech utterance
            const utterance = new SpeechSynthesisUtterance(cleanWord);
            // Configure speech settings for most natural sound
            utterance.lang = 'en-US';
            utterance.rate = 0.85; // Slightly slower for better clarity and naturalness
            utterance.pitch = 0.95; // Slightly lower pitch for more natural sound
            utterance.volume = 0.8; // Comfortable volume level
            // Select the best available English voice
            const bestVoice = this.selectBestEnglishVoice(voices);
            if (bestVoice) {
                utterance.voice = bestVoice;
                console.log(`🎤 Using voice: ${bestVoice.name} for word: ${cleanWord}`);
            }
            else {
                console.warn('No suitable English voice found, using default');
            }
            // Handle speech events
            utterance.onstart = () => {
                console.log(`🔊 Speaking word: ${cleanWord}`);
            };
            utterance.onend = () => {
                console.log(`🔊 Word TTS completed: ${cleanWord}`);
            };
            // Error handling
            utterance.onerror = (event) => {
                console.error('Speech synthesis error:', event.error);
            };
            // Speak the word
            speechSynthesis.speak(utterance);
        };
        // Start speaking (will wait for voices if needed)
        speakWithVoices();
    }
    selectBestEnglishVoice(voices) {
        if (!voices || voices.length === 0)
            return null;
        // Enhanced priority order for the most natural-sounding English voices
        const voicePriorities = [
            // macOS voices (extremely natural, human-like)
            { name: 'Samantha', priority: 10 },
            { name: 'Alex', priority: 9 },
            { name: 'Victoria', priority: 8 },
            { name: 'Daniel', priority: 7 },
            { name: 'Karen', priority: 6 },
            // Google voices (high quality neural voices)
            { name: 'Google US English', priority: 8 },
            { name: 'Google UK English Female', priority: 7 },
            { name: 'Google UK English Male', priority: 6 },
            // Microsoft Edge voices (newer, more natural)
            { name: 'Microsoft Aria Online', priority: 8 },
            { name: 'Microsoft Jenny Online', priority: 7 },
            { name: 'Microsoft Guy Online', priority: 6 },
            // Microsoft Desktop voices (good quality)
            { name: 'Microsoft Zira Desktop', priority: 5 },
            { name: 'Microsoft David Desktop', priority: 4 },
            { name: 'Microsoft Mark', priority: 4 },
            { name: 'Microsoft Hazel Desktop', priority: 3 },
            // Chrome OS voices
            { name: 'Chrome OS US English', priority: 5 }
        ];
        // Find the best matching voice with highest priority
        let bestVoice = null;
        let highestPriority = 0;
        for (const voicePriority of voicePriorities) {
            const voice = voices.find(v => v.name.includes(voicePriority.name) &&
                v.lang.startsWith('en'));
            if (voice && voicePriority.priority > highestPriority) {
                bestVoice = voice;
                highestPriority = voicePriority.priority;
            }
        }
        if (bestVoice) {
            console.log(`🎤 Selected high-priority voice: ${bestVoice.name} (Priority: ${highestPriority})`);
            return bestVoice;
        }
        // If no priority voice found, prefer local voices over remote ones
        const localEnglishVoices = voices.filter(v => v.lang.startsWith('en') && v.localService);
        if (localEnglishVoices.length > 0) {
            // Prefer female voices as they tend to sound more natural
            const femaleVoice = localEnglishVoices.find(v => v.name.toLowerCase().includes('female') ||
                v.name.toLowerCase().includes('woman') ||
                v.name.toLowerCase().includes('samantha') ||
                v.name.toLowerCase().includes('victoria') ||
                v.name.toLowerCase().includes('karen'));
            if (femaleVoice) {
                console.log(`🎤 Selected local female voice: ${femaleVoice.name}`);
                return femaleVoice;
            }
            console.log(`🎤 Selected local voice: ${localEnglishVoices[0].name}`);
            return localEnglishVoices[0];
        }
        // Fallback to any English voice, preferring US English
        const usEnglishVoice = voices.find(v => v.lang === 'en-US' || v.lang.startsWith('en-US'));
        if (usEnglishVoice) {
            console.log(`🎤 Selected US English voice: ${usEnglishVoice.name}`);
            return usEnglishVoice;
        }
        // Final fallback to any English voice
        const anyEnglishVoice = voices.find(v => v.lang.startsWith('en'));
        if (anyEnglishVoice) {
            console.log(`🎤 Selected fallback voice: ${anyEnglishVoice.name}`);
            return anyEnglishVoice;
        }
        return null;
    }
    // Handle word click in favorites
    onFavoriteWordClick(word, event) {
        event.preventDefault();
        event.stopPropagation();
        this.speakWord(word);
    }
    // Get arguments to pass to child components
    getChildArguments() {
        return {
            addToFavorites: this.addToFavorites,
            removeFavorite: this.removeFavorite.bind(this),
            isWordFavorite: this.isWordFavorite
        };
    }
};
EnglishRouterComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_2__.Sim,
    (0,_dooboostore_simple_boot_decorators_route_Router__WEBPACK_IMPORTED_MODULE_1__.Router)({
        path: '/english',
        route: {
            '': '/',
            '/': _english_route_component__WEBPACK_IMPORTED_MODULE_7__.EnglishRouteComponent,
            '/{name}': _src_pages_english_player_player_route_component__WEBPACK_IMPORTED_MODULE_10__.PlayerRouteComponent,
            '/{name}/': _src_pages_english_player_player_route_component__WEBPACK_IMPORTED_MODULE_10__.PlayerRouteComponent
        },
        routers: []
    }),
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_3__.Component)({
        template: _english_router_component_html__WEBPACK_IMPORTED_MODULE_4__["default"],
        styles: _english_router_component_css__WEBPACK_IMPORTED_MODULE_5__["default"]
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_simple_boot_front_option_SimFrontOption__WEBPACK_IMPORTED_MODULE_9__.SimFrontOption !== "undefined" && _dooboostore_simple_boot_front_option_SimFrontOption__WEBPACK_IMPORTED_MODULE_9__.SimFrontOption) === "function" ? _a : Object, typeof (_b = typeof _src_service_english_VideoItemService__WEBPACK_IMPORTED_MODULE_12__.VideoItemService !== "undefined" && _src_service_english_VideoItemService__WEBPACK_IMPORTED_MODULE_12__.VideoItemService) === "function" ? _b : Object])
], EnglishRouterComponent);



/***/ }),

/***/ "./src/pages/english/player/player.route.component.css":
/*!*************************************************************!*\
  !*** ./src/pages/english/player/player.route.component.css ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (".player-container {\n  display: flex;\n  height: 100svh;\n  width: 100%;\n}\n\n.player-container.swapped {\n  flex-direction: row-reverse;\n}\n\n.dictionary-section,\n.scripts-section {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  border-right: 1px solid #e0e0e0;\n}\n\n.scripts-section {\n  border-right: none;\n  border-left: 1px solid #e0e0e0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden; /* 전체 섹션은 스크롤 안함 */\n}\n\n/* YouTube Section Styles */\n.youtube-section {\n  height: 65%;\n  padding: 10px;\n  border-bottom: 1px solid #e0e0e0;\n  background: #f8f9fa;\n  flex-shrink: 0;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n\n#youtube-player-container {\n  width: 100%;\n  height: 100%;\n  background: #000;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n#youtube-player-container iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n\n\n\n/* Dictionary Styles */\n.dictionary-content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding-top: 10px;\n  padding-bottom: 80px;\n  /* Space for floating controller */\n}\n\n.dictionary-item {\n  background: #f8f9fa;\n  border-radius: 6px;\n  padding: 12px;\n  border: 1px solid #e9ecef;\n  scroll-margin-top: 80px; /* Account for fixed header */\n}\n\n.clickable-dictionary {\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.clickable-title {\n  cursor: pointer;\n  transition: color 0.2s ease;\n}\n\n.clickable-title:hover {\n  color: #1976d2;\n  text-decoration: underline;\n}\n\n.clickable-example {\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border-radius: 3px;\n  padding: 2px 4px;\n  margin: -2px -4px;\n}\n\n.clickable-example:hover {\n  background-color: #e3f2fd;\n  color: #1976d2;\n}\n\n.word-entry {\n  margin-bottom: 10px;\n}\n\n.entry-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n\n.entry-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: #2c3e50;\n  margin: 0;\n  flex: 1;\n}\n\n/* Favorite Checkbox Styles */\n.favorite-checkbox-label {\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  min-width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.favorite-checkbox {\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.favorite-icon {\n  color: #ccc;\n  font-size: 1.1rem;\n  transition: all 0.2s ease;\n}\n\n.favorite-checkbox-label:hover .favorite-icon {\n  color: #ffc107;\n  transform: scale(1.1);\n}\n\n.favorite-checkbox-label:hover {\n  background: rgba(255, 193, 7, 0.1);\n}\n\n.favorite-checkbox:checked + .favorite-icon {\n  color: #ffc107;\n}\n\n.favorite-checkbox-label:has(.favorite-checkbox:checked) .favorite-icon {\n  color: #ffc107;\n}\n\n.favorite-checkbox-label:has(.favorite-checkbox:checked):hover .favorite-icon {\n  color: #e0a800;\n}\n\n\n\n.pos-type {\n  background: #3498db;\n  color: white;\n  padding: 3px 6px;\n  border-radius: 3px;\n  font-size: 10px;\n  font-weight: 600;\n  display: inline-block;\n  margin-bottom: 6px;\n}\n\n/* Null type styling */\n.pos-type-null {\n  background: #95a5a6 !important;\n}\n\n/* Original word styling */\n.dictionary-item[data-match-type=\"original\"] {\n  background: #f8f9fa;\n  border: 1px dashed #dee2e6;\n  opacity: 0.8;\n}\n\n.dictionary-item[data-match-type=\"original\"] .pos-type {\n  background: #6c757d;\n}\n\n.dictionary-item[data-match-type=\"original\"] .meaning-text {\n  font-style: italic;\n  color: #6c757d;\n}\n\n.meanings {\n  margin-left: 10px;\n}\n\n.meaning-item {\n  margin-bottom: 8px;\n  padding: 6px;\n  background: white;\n  border-radius: 3px;\n  border-left: 3px solid #3498db;\n}\n\n.meaning-text {\n  font-weight: 500;\n  margin-bottom: 6px;\n  color: #2c3e50;\n  font-size: 14px;\n}\n\n.examples {\n  margin-left: 15px;\n}\n\n.example-item {\n  margin-bottom: 6px;\n  padding: 4px;\n  background: #f1f2f6;\n  border-radius: 3px;\n}\n\n.example-text {\n  font-style: italic;\n  color: #34495e;\n  margin-bottom: 3px;\n  font-size: 13px;\n}\n\n.example-translation {\n  color: #7f8c8d;\n  font-size: 12px;\n}\n\n/* Dictionary Examples Section */\n.examples-section {\n  margin-top: 15px;\n  border-top: 1px solid #e9ecef;\n  padding-top: 10px;\n}\n\n.examples-summary {\n  cursor: pointer;\n  padding: 8px 12px;\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 4px;\n  font-size: 13px;\n  font-weight: 600;\n  color: #495057;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.2s ease;\n  user-select: none;\n}\n\n.examples-summary:hover {\n  background: #e9ecef;\n  color: #343a40;\n}\n\n.examples-summary i {\n  color: #6c757d;\n  font-size: 12px;\n}\n\n.examples-content {\n  margin-top: 10px;\n  padding: 0 5px;\n}\n\n.examples-content .example-item {\n  margin-bottom: 12px;\n  padding: 10px;\n  background: #ffffff;\n  border: 1px solid #e9ecef;\n  border-radius: 4px;\n  border-left: 3px solid #17a2b8;\n}\n\n.examples-content .example-text {\n  font-size: 14px;\n  line-height: 1.4;\n  color: #2c3e50;\n  margin-bottom: 6px;\n  cursor: pointer;\n  transition: color 0.2s ease;\n}\n\n.examples-content .example-text:hover {\n  color: #1976d2;\n}\n\n.examples-content .example-translation {\n  font-size: 13px;\n  color: #6c757d;\n  font-style: italic;\n}\n\n/* Scripts Styles */\n.scripts-content {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  padding: 12px;\n  padding-bottom: 80px;\n  /* Space for floating controller */\n  height: 100%;\n  overflow-y: auto;\n}\n\n/* When YouTube is present, scripts take remaining space */\n.scripts-content.with-youtube {\n  height: calc(35vh - 40px); /* YouTube 영역 제외한 정확한 높이 */\n  flex: 1;\n  padding: 0;\n  overflow-y: auto; /* 스크립트 영역만 스크롤 */\n}\n\n/* Script Item Styles - Dictionary와 일관된 디자인 */\n.script-item {\n  background: #ffffff !important;\n  border: 1px solid #e9ecef !important;\n  border-radius: 6px;\n  padding: 0 !important;\n  margin-bottom: 4px;\n  overflow: visible !important;\n  transition: all 0.2s ease;\n  display: block !important;\n  visibility: visible !important;\n  scroll-margin-top: 0 !important;\n}\n\n.script-item:hover {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  border-color: #dee2e6;\n}\n\n.script-item:has(.script-radio:checked) {\n  border-left: 3px solid #2196f3;\n  background-color: #e3f2fd;\n  border-color: #2196f3;\n}\n\n.script-block {\n  display: block !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.2s ease;\n  visibility: visible !important;\n}\n\n.script-radio {\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.script-content {\n  transition: all 0.2s ease;\n  display: block !important;\n  visibility: visible !important;\n}\n\n.english-text {\n  font-size: 14px !important;\n  line-height: 1.3;\n  color: #2c3e50 !important;\n  margin-bottom: 3px;\n  font-weight: 500;\n  display: block !important;\n  visibility: visible !important;\n  padding: 8px 10px !important;\n}\n\n.script-item:has(.script-radio:checked) .english-text {\n  color: #1976d2 !important;\n  font-weight: 600;\n}\n\n.korean-text {\n  font-size: 12px !important;\n  color: #888 !important;\n  line-height: 1.2;\n  margin-top: 2px;\n  font-style: italic;\n  display: none; /* 기본적으로 숨김 */\n  visibility: visible !important;\n  padding: 0 10px 8px 10px !important;\n}\n\n/* 번역이 활성화되었을 때 한글 텍스트 표시 */\n.korean-text.show-translation {\n  display: block !important;\n}\n\n.script-item:has(.script-radio:checked) .korean-text {\n  color: #1565c0 !important;\n}\n\n.script-item {\n  background: #ffffff;\n  border: 1px solid #e9ecef;\n  border-radius: 6px;\n  overflow: hidden;\n  scroll-margin-top: 80px; /* Account for fixed header */\n}\n\n.script-item:hover {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n\n.script-block {\n  display: block;\n  padding: 10px 12px;\n  cursor: pointer;\n  border-radius: 6px;\n  position: relative;\n  transition: background-color 0.2s ease;\n}\n\n.script-block:hover {\n  background-color: #f8f9fa;\n}\n\n.script-radio {\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.script-radio:checked + .script-content,\n.script-radio:checked ~ .script-content {\n  background-color: #e3f2fd;\n}\n\n.script-item:has(.script-radio:checked) {\n  border-left: 3px solid #2196f3;\n  background-color: #e3f2fd;\n}\n\n.script-content {\n  transition: background-color 0.2s ease;\n}\n\n/* Korean text visibility - controlled by JavaScript */\n.korean-text {\n  display: none;\n}\n\n\n\n.english-text {\n  font-size: 15px;\n  line-height: 1.4;\n  color: #2c3e50;\n  margin-bottom: 6px;\n}\n\n.korean-text {\n  font-size: 13px;\n  color: #888;\n  line-height: 1.3;\n  margin-top: 4px;\n  font-style: italic;\n}\n\n/* Mobile Layout */\n@media (max-width: 768px) {\n  .player-container {\n    flex-direction: column;\n    height: 100svh;\n  }\n\n  .dictionary-section,\n  .scripts-section {\n    flex: 1;\n    border-right: none;\n    border-left: none;\n    border-bottom: 1px solid #e0e0e0;\n    padding: 15px;\n  }\n\n  .scripts-section {\n    border-bottom: none;\n    border-top: 1px solid #e0e0e0;\n  }\n\n  .dictionary-section,\n  .scripts-section {\n    /* Remove extra padding since no headers */\n    padding: 15px;\n  }\n\n  .entry-title {\n    font-size: 18px;\n  }\n\n  /* Mobile adjustments for favorite checkbox */\n  .favorite-checkbox-label {\n    min-width: 24px;\n    height: 24px;\n    padding: 0.2rem;\n  }\n  \n  .favorite-icon {\n    font-size: 1rem;\n  }\n\n  .english-text {\n    font-size: 14px;\n  }\n\n  .korean-text {\n    font-size: 12px;\n  }\n\n  /* Better spacing for mobile dictionary items */\n  .dictionary-item {\n    margin-bottom: 15px;\n  }\n\n  /* Extra padding for mobile floating controller */\n  .scripts-content,\n  .dictionary-content {\n    padding-bottom: 80px;\n    /* Space for fixed bottom controller */\n  }\n\n  /* Mobile YouTube adjustments */\n  .youtube-section {\n    height: 55%;\n    padding: 0px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n  }\n\n  .scripts-content.with-youtube {\n    height: calc(45vh - 40px);\n    overflow-y: auto;\n    padding: 0;\n  }\n\n  .script-item {\n    border-radius: 6px;\n    padding: 0 !important;\n    margin-bottom: 3px;\n  }\n\n  .script-block {\n    padding: 0 !important;\n    margin: 0 !important;\n  }\n\n  .english-text {\n    font-size: 13px;\n    margin-bottom: 2px;\n    padding: 6px 8px !important;\n  }\n\n  .korean-text {\n    font-size: 11px;\n    margin-top: 1px;\n    padding: 0 8px 6px 8px !important;\n  }\n\n  .scripts-content {\n    gap: 3px;\n    padding: 8px;\n  }\n}\n\n/* Scrollbar Styling */\n.dictionary-section::-webkit-scrollbar,\n.scripts-section::-webkit-scrollbar {\n  width: 6px;\n}\n\n.dictionary-section::-webkit-scrollbar-track,\n.scripts-section::-webkit-scrollbar-track {\n  background: #f1f1f1;\n}\n\n.dictionary-section::-webkit-scrollbar-thumb,\n.scripts-section::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 3px;\n}\n\n.dictionary-section::-webkit-scrollbar-thumb:hover,\n.scripts-section::-webkit-scrollbar-thumb:hover {\n  background: #a8a8a8;\n}\n\n/* W\nord highlighting */\n.word {\n  display: inline-block;\n  margin-right: 1px;\n  padding: 1px 2px;\n  border-radius: 2px;\n  transition: all 0.3s ease;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  user-select: none;\n  border: 2px solid transparent;\n}\n\n.word.highlighted {\n  background-color: #ffeb3b !important;\n  color: #333 !important;\n  font-weight: 600 !important;\n  box-shadow: 0 2px 4px rgba(255, 235, 59, 0.4) !important;\n  border: 2px solid #fdd835 !important;\n  outline: none !important;\n  -webkit-tap-highlight-color: transparent !important;\n}\n\n.clickable-word {\n  cursor: pointer;\n  transition: all 0.2s ease;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.clickable-word:hover:not(.highlighted) {\n  background-color: #e3f2fd;\n  color: #1976d2;\n  transform: scale(1.05);\n}\n\n/* iOS specific styles */\n@media (max-width: 768px) {\n  .clickable-word:active:not(.highlighted) {\n    background-color: #e3f2fd;\n    color: #1976d2;\n    transform: scale(1.02);\n  }\n}\n\n/* Floating Controller */\n.floating-controller {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  padding: 12px 20px;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  z-index: 1000;\n}\n\n.controller-content {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.control-btn {\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: 50%;\n  background: #f5f5f5;\n  color: #666;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  font-size: 12px;\n}\n\n.control-btn:hover:not(:disabled) {\n  background: #e0e0e0;\n  color: #333;\n  transform: scale(1.05);\n}\n\n.control-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.translation-btn.active {\n  background: #2196f3;\n  color: white;\n}\n\n.translation-btn.active:hover {\n  background: #1976d2;\n}\n\n.sound-btn.active {\n  background: #4caf50;\n  color: white;\n}\n\n.sound-btn.active:hover {\n  background: #388e3c;\n}\n\n.play-btn {\n  background: #f5f5f5;\n  color: #666;\n}\n\n.play-btn:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n.play-btn.playing {\n  background: #ff9800;\n  color: white;\n  animation: pulse 1.5s infinite;\n}\n\n.play-btn.playing:hover {\n  background: #f57c00;\n}\n\n@keyframes pulse {\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.05);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n}\n\n.word-slider-container {\n  flex: 1;\n  min-width: 200px;\n  display: flex;\n  align-items: center;\n}\n\n.word-slider {\n  width: 100%;\n  height: 6px;\n  border-radius: 3px;\n  background: #ddd;\n  outline: none;\n  -webkit-appearance: none;\n  appearance: none;\n}\n\n.word-slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  background: #2196f3;\n  cursor: pointer;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s ease;\n}\n\n.word-slider::-webkit-slider-thumb:hover {\n  transform: scale(1.2);\n  background: #1976d2;\n}\n\n.word-slider::-moz-range-thumb {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  background: #2196f3;\n  cursor: pointer;\n  border: none;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n/* Tablet adjustments (medium screens) */\n@media (max-width: 1024px) and (min-width: 769px) {\n  .floating-controller {\n    padding: 10px 18px;\n  }\n\n  .controller-content {\n    gap: 10px;\n  }\n\n  .control-btn {\n    width: 30px;\n    height: 30px;\n    font-size: 11px;\n  }\n\n  .word-slider-container {\n    flex: 1;\n    min-width: 160px;\n  }\n}\n\n/* Mobile adjustments (small screens) */\n@media (max-width: 768px) {\n  .floating-controller {\n    padding: 10px 15px;\n  }\n\n  .controller-content {\n    gap: 8px;\n  }\n\n  .control-btn {\n    width: 28px;\n    height: 28px;\n    font-size: 10px;\n  }\n\n  .word-slider-container {\n    flex: 1;\n    min-width: 120px;\n  }\n\n  .word {\n    margin-right: 1px;\n    padding: 1px 1px;\n  }\n\n  .script-block {\n    padding: 8px 10px;\n  }\n}\n\n/* Loading Spinner */\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  gap: 20px;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #2196f3;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n  color: #666;\n  font-size: 14px;\n  font-weight: 500;\n  animation: pulse-text 1.5s ease-in-out infinite;\n}\n\n@keyframes pulse-text {\n  0%, 100% { opacity: 0.6; }\n  50% { opacity: 1; }\n}\n\n/* Dictionary highlight effect */\n.dictionary-item.highlighted-dictionary {\n  background: linear-gradient(135deg, #fff3cd, #ffeaa7);\n  border: 2px solid #f39c12;\n  box-shadow: 0 8px 25px rgba(243, 156, 18, 0.3);\n  transform: scale(1.02);\n  transition: all 0.3s ease;\n}\n\n.dictionary-item.highlighted-dictionary .entry-title {\n  color: #d68910;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n/* Swap Button */\n.swap-button {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.95);\n  border: 1px solid #e0e0e0;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);\n  backdrop-filter: blur(10px);\n  z-index: 999;\n  color: #666;\n  transition: all 0.3s ease;\n  font-size: 14px;\n}\n\n.swap-button:hover {\n  background: #2196f3;\n  color: white;\n  transform: translate(-50%, -50%) scale(1.1);\n  box-shadow: 0 6px 16px rgba(33, 150, 243, 0.3);\n}\n\n/* Mobile adjustments for swap button */\n@media (max-width: 768px) {\n  .swap-button {\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 28px;\n    height: 28px;\n    font-size: 12px;\n  }\n\n  .swap-button:hover {\n    transform: translate(-50%, -50%) scale(1.1);\n  }\n\n  .player-container.swapped {\n    flex-direction: column-reverse;\n  }\n\n  /* Maintain borders when swapped on mobile */\n  .player-container.swapped .scripts-section {\n    border-top: none;\n    border-bottom: 1px solid #e0e0e0;\n  }\n\n  .player-container.swapped .dictionary-section {\n    border-bottom: none;\n    border-top: 1px solid #e0e0e0;\n  }\n}\n/* E\nntry Header with Favorite Button */\n.entry-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n\n.entry-title {\n  flex: 1;\n  margin: 0;\n}\n\n.favorite-btn {\n  background: none;\n  border: none;\n  color: #ccc;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  font-size: 1.1rem;\n  min-width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.favorite-btn:hover {\n  color: #ffc107;\n  background: rgba(255, 193, 7, 0.1);\n  transform: scale(1.1);\n}\n\n.favorite-btn.active {\n  color: #ffc107;\n}\n\n.favorite-btn.active:hover {\n  color: #e0a800;\n}\n\n/* Mobile adjustments for favorite button */\n@media (max-width: 768px) {\n  .entry-header {\n    gap: 0.25rem;\n  }\n  \n  .favorite-btn {\n    font-size: 1rem;\n    min-width: 24px;\n    height: 24px;\n    padding: 0.2rem;\n  }\n}/* Respo\nnsive scroll margins for mobile */\n@media (max-width: 768px) {\n  .dictionary-item,\n  .script-item {\n    scroll-margin-top: 60px; /* Smaller margin for mobile header */\n  }\n}");

/***/ }),

/***/ "./src/pages/english/player/player.route.component.html":
/*!**************************************************************!*\
  !*** ./src/pages/english/player/player.route.component.html ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<div class=\"player-container\" dr-attr=\"{class: 'player-container' + (@this@.isSwapped ? ' swapped' : '')}\">\n    <div class=\"dictionary-section\">\n        <!-- Dictionary Loading -->\n        <div class=\"loading-container\" dr-if=\"@this@.isLoadingDictionaries\">\n            <div class=\"loading-spinner\"></div>\n            <div class=\"loading-text\">Loading dictionary...</div>\n        </div>\n        <!-- <button dr-event-click=\"@this@.test()\">zzzzzzzzzzzzzzz</button> -->\n        <div class=\"dictionary-content\" dr-if=\"@this@.dictionaries && !@this@.isLoadingDictionaries\">\n            <div class=\"dictionary-item\" dr-for-of=\"@this@.dictionaries\" dr-option-item-variable-name=\"dict\"\n                dr-attr=\"{'data-original-word': #dict#.originalWord, 'data-match-type': #dict#?.items?.[0].matchType}\">\n                <div class=\"word-items\" dr-for-of=\"#dict#.items\" dr-option-item-variable-name=\"item\">\n                    <div class=\"word-entry\">\n                        <div class=\"entry-header\">\n                            <h3 class=\"entry-title clickable-title\"\n                                dr-event-click=\"@this@.onEntryTitleClick($element, $event)\">\n                                ${#item#.entry}$</h3>\n                            <label class=\"favorite-checkbox-label\" title=\"즐겨찾기에 추가/제거\" dr-if=\"#item#.entry\">\n                                <input type=\"checkbox\" class=\"favorite-checkbox\"\n                                    dr-attr=\"{checked: @this@.checkWordFavorite(#item#.entry || '') ? 'checked' : null}\"\n                                    dr-event-change=\"@this@.toggleFavorite(#item#.entry || '', #item#?.pos?.[0]?.meanings?.[0]?.meaning || #item#.entry || '')\">\n                                <i class=\"fas fa-star favorite-icon\"></i>\n                            </label>\n                        </div>\n                        <div class=\"pos-list\" dr-for-of=\"#item#.pos\" dr-option-item-variable-name=\"pos\">\n                            <div class=\"pos-type\" dr-attr=\"{class: 'pos-type' + (#pos#.type ? '' : ' pos-type-null')}\">\n                                ${#pos#.type || '기타'}$</div>\n                            <div class=\"meanings\" dr-for-of=\"#pos#.meanings\" dr-option-item-variable-name=\"meaning\">\n                                <div class=\"meaning-item\">\n                                    <div class=\"meaning-text\">${#meaning#.meaning}$</div>\n                                    <div class=\"examples\" dr-if=\"#meaning#.examples.length > 0\"\n                                        dr-for-of=\"#meaning#.examples\" dr-option-item-variable-name=\"example\">\n                                        <div class=\"example-item\">\n                                            <div class=\"example-text clickable-example\"\n                                                dr-event-click=\"@this@.onExampleClick($element, $event)\">\n                                                #{#example#.text}#</div>\n                                            <div class=\"example-translation\">#{#example#.translatedText}#</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Dictionary Examples Section -->\n                    <details class=\"examples-section\" dr-if=\"#dict#?.examples && #dict#?.examples.length > 0\">\n                        <summary class=\"examples-summary\">\n                            <i class=\"fas fa-book-open\"></i>\n                            예문 보기 (${#dict#?.examples.length}$개)\n                        </summary>\n                        <div class=\"examples-content\">\n                            <div class=\"example-item\" dr-for-of=\"#dict#?.examples\"\n                                dr-option-item-variable-name=\"example\">\n                                <div class=\"example-text clickable-example\"\n                                    dr-event-click=\"@this@.onExampleClick($element, $event)\">\n                                    #{#example#.text}#</div>\n                                <div class=\"example-translation\">#{#example#.translatedText}#</div>\n                            </div>\n                        </div>\n                    </details>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"scripts-section\">\n        <!-- Scripts Loading -->\n        <div class=\"loading-container\" dr-if=\"@this@.isLoadingScripts\">\n            <div class=\"loading-spinner\"></div>\n            <div class=\"loading-text\">Loading scripts...</div>\n        </div>\n\n        <!-- YouTube Video Section (only for YouTube content) -->\n        <div class=\"youtube-section\" dr-if=\"@this@.currentItem?.type === 'youtube'\">\n            <div id=\"youtube-player-container\">\n                <!-- YouTube iframe will be inserted here -->\n            </div>\n        </div>\n\n\n\n\n        <form class=\"scripts-content\" dr-if=\"@this@.scripts\" dr-event-change=\"@this@.onScriptSelectionChange($event)\"\n            dr-attr=\"{class: 'scripts-content' + (@this@.currentItem?.type === 'youtube' ? ' with-youtube' : '')}\">\n            <!--                       \n            <div class=\"script-item\" dr-for-of=\"@this@.scripts\" dr-option-item-variable-name=\"script\">\n                ${#script#.e}$\n            </div> -->\n            <div class=\"script-item\" dr-for-of=\"@this@.scripts\" dr-option-item-variable-name=\"script\"\n                dr-option-item-index-variable-name=\"index\" dr-attr=\"{'data-index': #index#}\">\n                <label class=\"script-block\">\n                    <input type=\"radio\" name=\"selectedScript\" class=\"script-radio\" dr-attr=\"{value: #index#}\">\n\n                    <div class=\"script-content\">\n                        <!-- English text - always rendered -->\n                        <div class=\"english-text\">\n                            ${#script#.e}$\n                        </div>\n                        <!-- Korean text - always rendered, visibility controlled by CSS -->\n                        <div class=\"korean-text\">\n                            ${#script#.k}$\n                        </div>\n                    </div>\n                </label>\n            </div>\n        </form>\n    </div>\n</div>\n\n<!-- Swap Button -->\n<!-- <button class=\"swap-button\" dr-event-click=\"@this@.swapSections()\" title=\"섹션 위치 바꾸기\">\n    <i class=\"fas fa-rotate\"></i>\n</button> -->\n\n<!-- Floating Controller -->\n<div class=\"floating-controller\" style=\"display: none;\">\n    <div class=\"controller-content\">\n        <button class=\"control-btn prev-btn\" dr-event-click=\"@this@.previousScript()\">\n            <i class=\"fas fa-chevron-left\"></i>\n        </button>\n\n        <button class=\"control-btn translation-btn\" dr-event-click=\"@this@.toggleTranslation()\">\n            <i class=\"fas fa-language\"></i>\n        </button>\n\n        <button class=\"control-btn sound-btn\" dr-event-click=\"@this@.toggleSound()\">\n            <i class=\"fas fa-volume-up\"></i>\n        </button>\n\n        <button class=\"control-btn play-btn\" dr-event-click=\"@this@.playCurrentScript()\">\n            <i class=\"fas fa-play\"></i>\n        </button>\n\n        <div class=\"word-slider-container\">\n            <input type=\"range\" class=\"word-slider\" min=\"-1\" max=\"0\" value=\"-1\"\n                dr-event-input=\"@this@.setWordIndex(parseInt(event.target.value))\">\n        </div>\n\n        <button class=\"control-btn next-btn\" dr-event-click=\"@this@.nextScript()\">\n            <i class=\"fas fa-chevron-right\"></i>\n        </button>\n    </div>\n</div>");

/***/ }),

/***/ "./src/pages/english/player/player.route.component.ts":
/*!************************************************************!*\
  !*** ./src/pages/english/player/player.route.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PlayerRouteComponent: () => (/* binding */ PlayerRouteComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _player_route_component_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./player.route.component.html */ "./src/pages/english/player/player.route.component.html");
/* harmony import */ var _player_route_component_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./player.route.component.css */ "./src/pages/english/player/player.route.component.css");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/simple-boot/fetch/ApiService */ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts");
/* harmony import */ var _dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/core-web/valid/ValidUtils */ "../../packages/@dooboostore/core-web/src/valid/ValidUtils.ts");
/* harmony import */ var _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dooboostore/dom-render/components/ComponentBase */ "../../packages/@dooboostore/dom-render/src/components/ComponentBase.ts");
/* harmony import */ var _src_service_english_VideoItemService__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @src/service/english/VideoItemService */ "./src/service/english/VideoItemService.ts");
var _a, _b;









let PlayerRouteComponent = class PlayerRouteComponent extends _dooboostore_dom_render_components_ComponentBase__WEBPACK_IMPORTED_MODULE_7__.ComponentBase {
    apiService;
    videoItemService;
    name;
    scripts;
    dictionaries;
    currentItem;
    // Favorite functions passed from parent router
    addToFavorites;
    removeFavorite;
    isWordFavorite;
    currentWordIndex1 = 0;
    // currentWordIndex2=0;
    showTranslation = false;
    soundEnabled = true;
    isPlayingScript = false;
    isPlayingWord = false;
    isLoadingScripts = true;
    isLoadingDictionaries = false;
    scrollTimeout;
    dictionaryCache = new Map();
    isSwapped = false;
    wordHighlightInterval;
    youtubePlayer;
    youtubePlayerReady = false;
    userManuallySelected = false;
    lastManualSelectionTime = 0;
    constructor(apiService, videoItemService) {
        super();
        this.apiService = apiService;
        this.videoItemService = videoItemService;
    }
    onCreateRender(param) {
        console.log('PlayerRouteComponent onCreateRender called with params:', param);
        // Get favorite functions from parent router
        console.log('onInitRender param:', param);
        if (param && param) {
            this.addToFavorites = param.addToFavorites;
            this.removeFavorite = param.removeFavorite;
            this.isWordFavorite = param.isWordFavorite;
            console.log('Received favorite functions from parent router');
        }
        else {
            console.warn('No createArguments found in param');
        }
    }
    async onRawSetRendered(rawSet, otherData) {
        await super.onRawSetRendered(rawSet, otherData);
    }
    async onRouting(r) {
        this.name = decodeURIComponent(r.routerModule.pathData?.name ?? '');
        console.log('Routing to PlayerRouteComponent with name:', this.name);
        if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() && this.name) {
            try {
                this.isLoadingScripts = true;
                // Load both scripts and items data in parallel
                const [scriptsData, videoItem] = await Promise.all([
                    this.apiService.get({ target: `/datas/english/scripts/${this.name}.json` }),
                    this.videoItemService.item(this.name)
                ]);
                console.log('!!!!!!!!!!!!!!!');
                this.scripts = scriptsData;
                // Extract current item from items array using this.name
                this.currentItem = videoItem;
                this.isLoadingScripts = false;
                console.log(`🎯 Current item:`, this.currentItem);
                // Initialize YouTube player if current item is YouTube
                if (this.currentItem?.type === 'youtube') {
                    setTimeout(() => {
                        this.createYouTubeEmbed();
                    }, 300); // Wait for DOM to be ready
                }
                // Initialize speech synthesis voices
                this.initializeSpeechSynthesis();
                // Auto-select first script if available
                if (this.scripts && this.scripts.length > 0) {
                    // Set first radio as checked and initialize everything
                    setTimeout(() => {
                        const firstRadio = document.querySelector('input[name="selectedScript"][value="0"]');
                        if (firstRadio && !firstRadio.checked) {
                            firstRadio.checked = true;
                            this.updateSliderRange(0);
                            this.updateTranslationVisibility();
                            // Initialize the first script completely
                            this.setCurrentSelectedIndex(0);
                            console.log('🎯 Auto-selected first script');
                        }
                    }, 200);
                }
            }
            catch (error) {
                console.error('Failed to load data:', error);
                this.isLoadingScripts = false;
            }
        }
    }
    async onInitRender(param, rawSet) {
        await super.onInitRender(param, rawSet);
        console.log('asd');
    }
    initializeSpeechSynthesis() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || !('speechSynthesis' in window)) {
            console.warn('Speech Synthesis not available');
            return;
        }
        // Load voices (some browsers need this)
        const loadVoices = () => {
            const voices = speechSynthesis.getVoices();
            if (voices.length > 0) {
                const englishVoices = voices.filter(v => v.lang.startsWith('en'));
                console.log('Available English voices:');
                englishVoices.forEach(voice => {
                    console.log(`- ${voice.name} (${voice.lang}) ${voice.localService ? '[Local]' : '[Remote]'}`);
                });
                // Show which voice will be selected
                const selectedVoice = this.selectBestEnglishVoice(voices);
                if (selectedVoice) {
                    console.log(`🎤 Selected voice: ${selectedVoice.name}`);
                }
            }
        };
        // Load voices immediately
        loadVoices();
        // Also load when voices change (for Chrome)
        speechSynthesis.onvoiceschanged = loadVoices;
    }
    async setCurrentSelectedIndex(index) {
        const startTime = performance.now();
        console.log(`🎯 setCurrentSelectedIndex(${index}) started`);
        // No need to manage state variables - form handles it
        const immediateTime = performance.now();
        console.log(`⚡ Immediate state update: ${(immediateTime - startTime).toFixed(2)}ms`);
        if (this.scripts && this.scripts[index]) {
            const script = this.scripts[index];
            // Immediate UI update without heavy processing
            requestAnimationFrame(() => {
                this.updateScriptDisplay();
            });
            // Scroll immediately for better UX
            setTimeout(() => {
                this.scrollToSelectedScript(index);
            }, 16);
            // Load dictionaries in background with minimal processing
            setTimeout(async () => {
                const dictStartTime = performance.now();
                // Process words locally when needed for dictionary
                const currentWords = script.e.split(/\s+/) ?? [];
                // Update slider max directly
                const maxIndex = Math.max(0, currentWords.length - 1);
                const slider = document.querySelector('.word-slider');
                if (slider) {
                    slider.max = maxIndex.toString();
                }
                await this.setScript(script.e);
                const dictEndTime = performance.now();
                console.log(`📚 Background dictionary loading: ${(dictEndTime - dictStartTime).toFixed(2)}ms`);
            }, 100); // Increased delay for smoother UX
        }
        const totalTime = performance.now();
        console.log(`🚀 Ultra-fast response: ${(totalTime - startTime).toFixed(2)}ms`);
    }
    scrollToSelectedScript(index) {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser()) {
            return;
        }
        // Clear previous timeout to debounce rapid calls
        if (this.scrollTimeout) {
            clearTimeout(this.scrollTimeout);
        }
        // Use setTimeout to ensure DOM is updated and debounce
        this.scrollTimeout = setTimeout(() => {
            const scriptItems = document.querySelectorAll('.script-item');
            if (scriptItems[index]) {
                const targetElement = scriptItems[index];
                // Use scrollIntoView only - CSS scroll-margin-top will handle the offset
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start',
                    inline: 'nearest'
                });
                console.log(`📍 Scrolling to script ${index} using scrollIntoView with CSS margin`);
            }
        }, 200); // Increased timeout for mobile
    }
    scrollSectionsToTop() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser()) {
            return;
        }
        // Scroll both dictionary and scripts sections to top
        setTimeout(() => {
            const dictionarySection = document.querySelector('.dictionary-section');
            const scriptsSection = document.querySelector('.scripts-section');
            if (dictionarySection) {
                dictionarySection.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
            if (scriptsSection) {
                scriptsSection.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        }, 100);
    }
    setWordIndex(index) {
        const currentSelectedScript = this.getCurrentSelectedIndex();
        console.log(`🎚️ setWordIndex(${index}) - current script: ${currentSelectedScript}`);
        // Mark as manual interaction to prevent auto-selection interference
        this.userManuallySelected = true;
        this.lastManualSelectionTime = Date.now();
        // Stop any ongoing script speech when user interacts with words
        // But allow individual word TTS to continue
        if (this.isPlayingScript) {
            this.stopSpeech();
        }
        // Update slider value directly
        const slider = document.querySelector('.word-slider');
        if (slider) {
            slider.value = index.toString();
        }
        // Update word highlighting in the selected script
        this.updateWordHighlighting();
        // Only process if index is valid (>= 0)
        if (index >= 0) {
            this.scrollToDictionaryWord();
            // Play TTS if sound is enabled
            if (this.soundEnabled) {
                const currentWords = this.getCurrentWords();
                if (currentWords && currentWords[index]) {
                    this.speakWord(currentWords[index]);
                }
            }
        }
        // Reset manual selection flag after a shorter delay for word interactions
        setTimeout(() => {
            this.userManuallySelected = false;
            console.log('✅ Word interaction protection expired - auto-selection re-enabled');
        }, 1500); // 1.5초 후 자동 선택 다시 허용 (스크립트 선택보다 짧게)
    }
    updateWordHighlighting() {
        const currentSelectedIndex = this.getCurrentSelectedIndex();
        const currentWordIndex = this.getCurrentWordIndex();
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || currentSelectedIndex < 0)
            return;
        // Find the selected script item
        const selectedScriptItem = document.querySelector(`input[name="selectedScript"][value="${currentSelectedIndex}"]:checked`)?.closest('.script-item');
        const wordElements = selectedScriptItem?.querySelectorAll('.clickable-word');
        if (wordElements) {
            wordElements.forEach((wordElement, index) => {
                if (index === currentWordIndex) {
                    wordElement.classList.add('highlighted');
                }
                else {
                    wordElement.classList.remove('highlighted');
                }
            });
        }
    }
    clearAllWordHighlights() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return;
        // Remove highlights from all script items
        const allScriptItems = document.querySelectorAll('.script-item');
        allScriptItems.forEach(scriptItem => {
            const wordElements = scriptItem.querySelectorAll('.clickable-word');
            wordElements.forEach(wordElement => {
                wordElement.classList.remove('highlighted');
            });
        });
        // Also reset all scripts to original text to remove clickable functionality
        this.resetAllScriptsToOriginalText();
        console.log('🧹 Cleared all word highlights and reset scripts to non-clickable state');
    }
    resetAllScriptsToOriginalText() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || !this.scripts)
            return;
        // Reset all script items to their original text (non-clickable)
        const allScriptItems = document.querySelectorAll('.script-item');
        allScriptItems.forEach((scriptItem, index) => {
            const englishText = scriptItem.querySelector('.english-text');
            if (englishText && this.scripts && this.scripts[index]) {
                // Remove all event listeners and spans, restore original text
                englishText.innerHTML = this.scripts[index].e;
                console.log(`🔄 Reset script ${index} to original non-clickable text`);
            }
        });
    }
    onWordClick(index, event) {
        event.preventDefault();
        event.stopPropagation();
        this.setWordIndex(index);
    }
    onScriptSelectionChange(event) {
        const target = event.target;
        if (target && target.type === 'radio' && target.name === 'selectedScript') {
            // Mark as manually selected to prevent auto-selection interference
            this.userManuallySelected = true;
            this.lastManualSelectionTime = Date.now();
            const selectedIndex = parseInt(target.value);
            console.log('👆 User manually selected script:', selectedIndex);
            // Stop any ongoing speech when changing scripts
            if (this.isPlayingScript) {
                this.stopSpeech();
            }
            // Clear all word highlights from previous scripts before switching
            this.clearAllWordHighlights();
            // Update slider range FIRST to prepare UI
            this.updateSliderRange(selectedIndex);
            // Update translation visibility for new selection
            this.updateTranslationVisibility();
            // If YouTube type, move to script time position
            if (this.currentItem?.type === 'youtube') {
                console.log('🎥 Moving YouTube to script time for manual selection');
                this.seekYouTubeToScriptTime(selectedIndex);
            }
            // Call script selection to load dictionaries
            this.setCurrentSelectedIndex(selectedIndex);
            // Scroll to selected script (after a small delay to ensure DOM is updated)
            setTimeout(() => {
                const scriptItem = target.closest('.script-item');
                if (scriptItem) {
                    scriptItem.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start',
                        inline: 'nearest'
                    });
                }
            }, 50);
            // Reset manual selection flag after a delay
            setTimeout(() => {
                this.userManuallySelected = false;
                console.log('✅ Manual selection protection expired - auto-selection re-enabled');
            }, 3000); // 3초 후 자동 선택 다시 허용
        }
    }
    // Get current selected script index from form state
    getCurrentSelectedIndex() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return -1;
        const checkedRadio = document.querySelector('input[name="selectedScript"]:checked');
        return checkedRadio ? parseInt(checkedRadio.value) : -1;
    }
    // Get current word index from slider
    getCurrentWordIndex() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return -1;
        const slider = document.querySelector('.word-slider');
        return slider ? parseInt(slider.value) : -1;
    }
    // Get current words from selected script
    getCurrentWords() {
        const currentIndex = this.getCurrentSelectedIndex();
        if (currentIndex < 0 || !this.scripts || !this.scripts[currentIndex])
            return null;
        return this.scripts[currentIndex].e.split(/\s+/);
    }
    updateSliderRange(scriptIndex) {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || !this.scripts || !this.scripts[scriptIndex])
            return;
        const script = this.scripts[scriptIndex];
        const wordCount = script.e.split(/\s+/).length;
        const maxIndex = Math.max(0, wordCount - 1);
        // Direct DOM manipulation for instant update
        const controller = document.querySelector('.floating-controller');
        const slider = document.querySelector('.word-slider');
        if (controller && slider) {
            // Show controller
            controller.style.display = 'block';
            // Update slider
            slider.max = maxIndex.toString();
            slider.value = '-1'; // Reset to no selection
            // Clear word highlights when resetting slider
            this.updateWordHighlighting(); // This will clear highlights since slider value is -1
            // Update button states
            this.updateControllerButtons();
        }
        // Update component state
        // this.maxWordIndex = maxIndex;
        // const start = Date.now();
        // this.currentWordIndex1 = Math.random();
        // // this.currentWordIndex2 = Math.random();
        // console.log('set', Date.now() - start);
        // DOM now manages all state - no component state needed
    }
    test() {
        const start = Date.now();
        this.currentWordIndex1 = Math.random();
        // this.currentWordIndex2 = Math.random();
        console.log('set', Date.now() - start);
    }
    updateControllerButtons() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return;
        // Update translation button
        const translationBtn = document.querySelector('.translation-btn');
        if (translationBtn) {
            translationBtn.className = `control-btn translation-btn${this.showTranslation ? ' active' : ''}`;
        }
        // Update sound button
        const soundBtn = document.querySelector('.sound-btn');
        const soundIcon = soundBtn?.querySelector('i');
        if (soundBtn && soundIcon) {
            soundBtn.className = `control-btn sound-btn${this.soundEnabled ? ' active' : ''}`;
            soundIcon.className = this.soundEnabled ? 'fas fa-volume-up' : 'fas fa-volume-mute';
        }
        // Update play button
        const playBtn = document.querySelector('.play-btn');
        const playIcon = playBtn?.querySelector('i');
        if (playBtn && playIcon) {
            playBtn.className = `control-btn play-btn${this.isPlayingScript ? ' playing' : ''}`;
            playBtn.style.display = this.soundEnabled ? 'flex' : 'none';
            playIcon.className = this.isPlayingScript ? 'fas fa-pause' : 'fas fa-play';
        }
    }
    updateScriptDisplay() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return;
        // Update selected script with word-by-word breakdown
        this.updateSelectedScriptWords();
        // Update translation visibility for current script only
        this.updateTranslationVisibility();
    }
    updateTranslationVisibility() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return;
        const allKoreanTexts = document.querySelectorAll('.korean-text');
        if (this.showTranslation) {
            // Show all korean texts when translation is enabled
            allKoreanTexts.forEach(element => {
                element.classList.add('show-translation');
                element.style.display = 'block';
            });
            console.log('🌐 Translation enabled - showing Korean text');
        }
        else {
            // Hide all korean texts when translation is disabled
            allKoreanTexts.forEach(element => {
                element.classList.remove('show-translation');
                element.style.display = 'none';
            });
            console.log('🌐 Translation disabled - hiding Korean text');
        }
    }
    updateSelectedScriptWords() {
        const currentSelectedIndex = this.getCurrentSelectedIndex();
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return;
        // Reset ALL script items to original text first
        this.resetAllScriptsToOriginalText();
        // Only process if we have a valid selection
        if (currentSelectedIndex < 0)
            return;
        // Find the selected script item
        const selectedScriptItem = document.querySelector(`input[name="selectedScript"][value="${currentSelectedIndex}"]:checked`)?.closest('.script-item');
        const selectedEnglishText = selectedScriptItem?.querySelector('.english-text');
        if (selectedEnglishText) {
            const currentWords = this.getCurrentWords();
            if (currentWords) {
                // Replace with word-by-word breakdown ONLY for selected script
                const htmlContent = currentWords
                    .map((word, index) => {
                    return `<span class="word clickable-word" data-word-index="${index}">${word}</span>`;
                })
                    .join('');
                selectedEnglishText.innerHTML = htmlContent;
                // Add click event listeners to words ONLY for selected script
                selectedEnglishText.querySelectorAll('.clickable-word').forEach((wordElement, index) => {
                    wordElement.addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        this.setWordIndex(index);
                    });
                });
                console.log(`✅ Made script ${currentSelectedIndex} interactive with clickable words`);
            }
        }
    }
    onEntryTitleClick(element, event) {
        event.preventDefault();
        event.stopPropagation();
        if (this.soundEnabled && element) {
            const text = element.innerText || element.textContent;
            if (text) {
                this.speakWord(text);
            }
        }
    }
    onExampleClick(element, event) {
        event.preventDefault();
        event.stopPropagation();
        if (this.soundEnabled && element) {
            const text = element.innerText || element.textContent;
            if (text) {
                this.speakWord(text);
            }
        }
    }
    onDictionaryItemClick(dictionary, event) {
        event.preventDefault();
        event.stopPropagation();
        // Get the first word entry from the dictionary
        if (this.soundEnabled && dictionary.items && dictionary.items.length > 0) {
            const firstItem = dictionary.items[0];
            if (firstItem && firstItem.entry) {
                this.speakWord(firstItem.entry);
            }
        }
    }
    scrollToDictionaryWord() {
        const currentWordIndex = this.getCurrentWordIndex();
        const currentWords = this.getCurrentWords();
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || currentWordIndex < 0 || !currentWords || !this.dictionaries) {
            return;
        }
        // Get the current word and clean it the same way as in setScript
        const currentWord = currentWords[currentWordIndex]?.replace(/[,.":!?;[\]\-]/g, '').toLowerCase();
        if (!currentWord)
            return;
        // Find the dictionary item for this word using originalWord (filename)
        const dictionaryIndex = this.dictionaries.findIndex(dict => dict.originalWord === currentWord);
        if (dictionaryIndex >= 0) {
            // Use setTimeout to ensure DOM is updated
            setTimeout(() => {
                const dictionaryItems = document.querySelectorAll('.dictionary-item');
                if (dictionaryItems[dictionaryIndex]) {
                    const targetElement = dictionaryItems[dictionaryIndex];
                    // Check if mobile (screen width <= 768px)
                    const isMobile = window.innerWidth <= 768;
                    // Use scrollIntoView for more reliable scrolling
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: isMobile ? 'start' : 'center',
                        inline: 'nearest'
                    });
                    // Add highlight effect
                    targetElement.classList.add('highlighted-dictionary');
                    setTimeout(() => {
                        targetElement.classList.remove('highlighted-dictionary');
                    }, 2000);
                }
            }, 100);
        }
    }
    previousScript() {
        // Mark as manual selection
        this.userManuallySelected = true;
        this.lastManualSelectionTime = Date.now();
        // Stop any ongoing speech when navigating
        if (this.isPlayingScript) {
            this.stopSpeech();
        }
        // Clear all word highlights before switching
        this.clearAllWordHighlights();
        const currentIndex = this.getCurrentSelectedIndex();
        if (currentIndex > 0) {
            const newIndex = currentIndex - 1;
            // Update radio selection first
            this.updateRadioSelection(newIndex);
            // Update slider range
            this.updateSliderRange(newIndex);
            // Update translation visibility
            this.updateTranslationVisibility();
            // If YouTube type, move to script time position
            if (this.currentItem?.type === 'youtube') {
                this.seekYouTubeToScriptTime(newIndex);
            }
            // Load dictionaries and update UI
            this.setCurrentSelectedIndex(newIndex);
            // Scroll to selected script
            this.scrollToSelectedScript(newIndex);
        }
        // Reset manual selection flag after delay
        setTimeout(() => {
            this.userManuallySelected = false;
        }, 3000);
    }
    nextScript() {
        // Mark as manual selection
        this.userManuallySelected = true;
        this.lastManualSelectionTime = Date.now();
        // Stop any ongoing speech when navigating
        if (this.isPlayingScript) {
            this.stopSpeech();
        }
        // Clear all word highlights before switching
        this.clearAllWordHighlights();
        const currentIndex = this.getCurrentSelectedIndex();
        if (this.scripts && currentIndex < this.scripts.length - 1) {
            const newIndex = currentIndex + 1;
            // Update radio selection first
            this.updateRadioSelection(newIndex);
            // Update slider range
            this.updateSliderRange(newIndex);
            // Update translation visibility
            this.updateTranslationVisibility();
            // If YouTube type, move to script time position
            if (this.currentItem?.type === 'youtube') {
                this.seekYouTubeToScriptTime(newIndex);
            }
            // Load dictionaries and update UI
            this.setCurrentSelectedIndex(newIndex);
            // Scroll to selected script
            this.scrollToSelectedScript(newIndex);
        }
        // Reset manual selection flag after delay
        setTimeout(() => {
            this.userManuallySelected = false;
        }, 3000);
    }
    updateRadioSelection(index) {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return;
        // Clear all radio selections first
        const allRadios = document.querySelectorAll('input[name="selectedScript"]');
        allRadios.forEach(radio => {
            radio.checked = false;
        });
        // Update radio button selection using value attribute
        const radioInput = document.querySelector(`input[name="selectedScript"][value="${index}"]`);
        if (radioInput) {
            radioInput.checked = true;
            console.log(`✅ Updated radio selection to index ${index}`);
        }
        else {
            console.warn(`❌ Could not find radio input for index ${index}`);
        }
    }
    toggleTranslation() {
        this.showTranslation = !this.showTranslation;
        this.updateTranslationVisibility();
        this.updateControllerButtons();
    }
    toggleSound() {
        this.soundEnabled = !this.soundEnabled;
        this.updateControllerButtons();
        // Stop any ongoing speech when disabling sound
        if (!this.soundEnabled && _dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser()) {
            this.stopSpeech();
        }
    }
    swapSections() {
        this.isSwapped = !this.isSwapped;
    }
    playCurrentScript() {
        const currentSelectedIndex = this.getCurrentSelectedIndex();
        if (!this.soundEnabled || currentSelectedIndex < 0 || !this.scripts) {
            return;
        }
        if (this.isPlayingScript) {
            // Stop current playback
            this.stopSpeech();
            return;
        }
        const currentScript = this.scripts[currentSelectedIndex];
        if (currentScript && currentScript.e) {
            this.speakScript(currentScript.e);
        }
    }
    startYouTubeTimeMonitoring() {
        if (!this.youtubePlayer || !this.youtubePlayerReady) {
            return;
        }
        // Monitor YouTube playback time every 1 second (reduced frequency)
        setInterval(() => {
            if (this.youtubePlayer && this.youtubePlayerReady && this.scripts) {
                try {
                    // Only check time if YouTube is actually playing
                    const playerState = this.youtubePlayer.getPlayerState();
                    if (playerState === 1) { // Only when playing
                        const currentTime = this.youtubePlayer.getCurrentTime();
                        this.updateScriptSelectionByTime(currentTime);
                    }
                }
                catch (error) {
                    // Ignore errors when player is not ready
                }
            }
        }, 1000); // Increased to 1 second to reduce CPU usage
    }
    updateScriptSelectionByTime(currentTime) {
        if (!this.scripts)
            return;
        // Don't auto-select if user manually selected recently
        if (this.userManuallySelected) {
            return;
        }
        // Don't auto-select if time is very early or if YouTube is not playing
        if (currentTime < 1)
            return;
        // Check if YouTube is actually playing to avoid unnecessary processing
        try {
            const playerState = this.youtubePlayer?.getPlayerState();
            // Only process if YouTube is playing (state 1) or paused (state 2)
            // Don't process if unstarted (-1), ended (0), buffering (3), or cued (5)
            if (playerState !== 1 && playerState !== 2) {
                return;
            }
        }
        catch (error) {
            // If we can't get player state, skip auto-selection
            return;
        }
        // Find the script that matches the current time
        let matchingScriptIndex = -1;
        for (let i = 0; i < this.scripts.length; i++) {
            const script = this.scripts[i];
            if (!script.t)
                continue;
            const scriptTime = this.parseTimeString(script.t);
            if (scriptTime === null)
                continue;
            // Check if current time is within this script's range
            const nextScriptTime = i < this.scripts.length - 1 && this.scripts[i + 1].t
                ? this.parseTimeString(this.scripts[i + 1].t)
                : scriptTime + 10; // Default 10 seconds for last script
            if (currentTime >= scriptTime && (nextScriptTime === null || currentTime < nextScriptTime)) {
                matchingScriptIndex = i;
                break;
            }
        }
        // Update script selection if different from current
        const currentSelectedIndex = this.getCurrentSelectedIndex();
        if (matchingScriptIndex !== -1 && matchingScriptIndex !== currentSelectedIndex) {
            this.selectScriptByIndex(matchingScriptIndex);
            console.log(`🎥 Auto-selected script ${matchingScriptIndex} at time ${currentTime.toFixed(1)}s`);
        }
    }
    selectScriptByIndex(index, isAutoSelection = true) {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser())
            return;
        console.log(`🔄 selectScriptByIndex(${index}, isAutoSelection: ${isAutoSelection})`);
        // If this is an auto-selection and user manually selected recently, skip
        if (isAutoSelection && this.userManuallySelected) {
            console.log('🚫 Skipping auto-selection - user manually selected recently');
            return;
        }
        // Update radio button selection
        const radioInput = document.querySelector(`input[name="selectedScript"][value="${index}"]`);
        if (radioInput) {
            console.log(`✅ Changing script selection from ${this.getCurrentSelectedIndex()} to ${index}`);
            radioInput.checked = true;
            // Clear all word highlights before switching
            this.clearAllWordHighlights();
            // Update slider range and other UI elements
            this.updateSliderRange(index);
            this.updateTranslationVisibility();
            this.setCurrentSelectedIndex(index);
            // Scroll to selected script
            this.scrollToSelectedScript(index);
        }
        else {
            console.warn(`❌ Could not find radio input for script index ${index}`);
        }
    }
    parseTimeString(timeStr) {
        // Remove any whitespace
        timeStr = timeStr.trim();
        // Handle MM:SS or H:MM:SS format (e.g., "8:52", "1:23:45")
        const colonMatch = timeStr.match(/^(\d+):(\d+)(?::(\d+))?$/);
        if (colonMatch) {
            const hours = colonMatch[3] ? parseInt(colonMatch[1]) : 0;
            const minutes = colonMatch[3] ? parseInt(colonMatch[2]) : parseInt(colonMatch[1]);
            const seconds = colonMatch[3] ? parseInt(colonMatch[3]) : parseInt(colonMatch[2]);
            const totalSeconds = hours * 3600 + minutes * 60 + seconds;
            return totalSeconds;
        }
        // Handle formats like "10s", "1m30s", "2m", "1h30m", etc.
        let totalSeconds = 0;
        let hasValidTime = false;
        // Extract hours
        const hourMatch = timeStr.match(/(\d+)h/);
        if (hourMatch) {
            totalSeconds += parseInt(hourMatch[1]) * 3600;
            hasValidTime = true;
        }
        // Extract minutes
        const minuteMatch = timeStr.match(/(\d+)m/);
        if (minuteMatch) {
            totalSeconds += parseInt(minuteMatch[1]) * 60;
            hasValidTime = true;
        }
        // Extract seconds
        const secondMatch = timeStr.match(/(\d+)s/);
        if (secondMatch) {
            totalSeconds += parseInt(secondMatch[1]);
            hasValidTime = true;
        }
        // If no units found, try to parse as plain number (assume seconds)
        if (!hasValidTime) {
            const plainNumber = parseInt(timeStr);
            if (!isNaN(plainNumber)) {
                totalSeconds = plainNumber;
                hasValidTime = true;
            }
        }
        // Return totalSeconds if we found valid time (including 0), otherwise null
        return hasValidTime ? totalSeconds : null;
    }
    speakWord(word) {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || !this.soundEnabled) {
            return;
        }
        // Check if browser supports Speech Synthesis
        if (!('speechSynthesis' in window)) {
            console.warn('Speech Synthesis not supported in this browser');
            return;
        }
        // Only stop ongoing speech if it's another word TTS, not script playback
        if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() && 'speechSynthesis' in window) {
            // Only cancel if we're playing individual words, not scripts
            if (this.isPlayingWord && !this.isPlayingScript) {
                speechSynthesis.cancel();
                this.isPlayingWord = false;
            }
        }
        // Clean the word (remove punctuation)
        const cleanWord = word.replace(/[,.":!?;]/g, '').trim();
        if (!cleanWord)
            return;
        // Create speech utterance
        const utterance = new SpeechSynthesisUtterance(cleanWord);
        // Configure speech settings for natural sound
        utterance.lang = 'en-US';
        utterance.rate = 0.9; // Natural speaking rate
        utterance.pitch = 1.0; // Natural pitch
        utterance.volume = 0.9; // Clear volume
        // Select the best available English voice
        const voices = speechSynthesis.getVoices();
        const bestVoice = this.selectBestEnglishVoice(voices);
        if (bestVoice) {
            utterance.voice = bestVoice;
        }
        // Set word playing state
        this.isPlayingWord = true;
        // Handle speech events
        utterance.onstart = () => {
            this.isPlayingWord = true;
        };
        utterance.onend = () => {
            this.isPlayingWord = false;
            console.log(`🔊 Word TTS completed: ${cleanWord} - position maintained`);
            // Explicitly do NOT reset slider position for individual word TTS
            // The slider should stay exactly where the user clicked
        };
        // Error handling
        utterance.onerror = (event) => {
            console.error('Speech synthesis error:', event.error);
            this.isPlayingWord = false;
        };
        // Speak the word
        speechSynthesis.speak(utterance);
    }
    selectBestEnglishVoice(voices) {
        if (!voices || voices.length === 0)
            return null;
        // Priority order for natural-sounding English voices
        const voicePriorities = [
            // macOS voices (very natural)
            'Samantha',
            'Alex',
            'Victoria',
            'Daniel',
            // Google voices (high quality)
            'Google US English',
            'Google UK English Female',
            'Google UK English Male',
            // Microsoft voices (good quality)
            'Microsoft Zira Desktop',
            'Microsoft David Desktop',
            'Microsoft Mark',
            'Microsoft Hazel Desktop',
            // Chrome/Edge voices
            'Chrome OS US English',
            'Microsoft Edge',
            // Fallback to any English voice
            'English'
        ];
        // First, try to find voices by exact name match
        for (const voiceName of voicePriorities) {
            const voice = voices.find(v => v.name.includes(voiceName) && v.lang.startsWith('en'));
            if (voice) {
                console.log('Selected voice:', voice.name);
                return voice;
            }
        }
        // If no priority voice found, select the first local English voice
        const localEnglishVoice = voices.find(v => v.lang.startsWith('en') && v.localService);
        if (localEnglishVoice) {
            console.log('Selected local voice:', localEnglishVoice.name);
            return localEnglishVoice;
        }
        // Fallback to any English voice
        const anyEnglishVoice = voices.find(v => v.lang.startsWith('en'));
        if (anyEnglishVoice) {
            console.log('Selected fallback voice:', anyEnglishVoice.name);
            return anyEnglishVoice;
        }
        return null;
    }
    stopSpeech() {
        if (_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() && 'speechSynthesis' in window) {
            speechSynthesis.cancel();
            // Store previous states
            const wasPlayingScript = this.isPlayingScript;
            const wasPlayingWord = this.isPlayingWord;
            // Reset both playing states
            this.isPlayingScript = false;
            this.isPlayingWord = false;
            this.updateControllerButtons(); // Update button when stopping
            // Only stop range animation if it was a script playback, NOT for individual word TTS
            if (wasPlayingScript) {
                this.stopRangeAnimation();
            }
            // If user manually stopped script playback, reset to initial position
            // But NOT if it was just individual word TTS
            if (wasPlayingScript && !wasPlayingWord) {
                setTimeout(() => {
                    const slider = document.querySelector('.word-slider');
                    if (slider && !this.isPlayingScript && !this.isPlayingWord) {
                        slider.value = '-1';
                        this.updateWordHighlighting();
                        console.log(`🔄 Manual script stop - reset to initial state`);
                    }
                }, 100);
            }
        }
    }
    startRangeSliderAnimation(text, speechRate) {
        const currentWords = this.getCurrentWords();
        if (!currentWords || currentWords.length === 0)
            return;
        // Calculate total speech duration
        const baseWPM = 200;
        const adjustedWPM = baseWPM * speechRate;
        const totalWords = currentWords.length;
        const totalDurationMs = (totalWords / adjustedWPM) * 60 * 1000;
        const maxWordIndex = Math.max(0, totalWords - 1);
        console.log(`🎤 Speech animation:`);
        console.log(`📝 Total words: ${totalWords}`);
        console.log(`⏱️ Estimated duration: ${Math.round(totalDurationMs)}ms`);
        console.log(`🎚️ Range: 0 to ${maxWordIndex}`);
        // Animation starts from index 1 since we already showed index 0
        let currentAnimationIndex = 1;
        // Animate range slider smoothly over the duration
        const startTime = Date.now();
        this.wordHighlightInterval = setInterval(() => {
            if (!this.isPlayingScript) {
                this.stopRangeAnimation();
                return;
            }
            const slider = document.querySelector('.word-slider');
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / totalDurationMs, 1);
            // Start from index 1 and go to maxWordIndex
            const targetIndex = Math.min(currentAnimationIndex + Math.floor(progress * (maxWordIndex - 1)), maxWordIndex);
            const currentSliderValue = parseInt(slider?.value || '0');
            if (targetIndex !== currentSliderValue && targetIndex <= maxWordIndex && slider) {
                slider.value = targetIndex.toString();
                // Update word highlighting during playback
                this.updateWordHighlighting();
                console.log(`🎚️ Range: ${targetIndex}/${maxWordIndex} (${Math.round(progress * 100)}%)`);
            }
            // Stop when complete and highlight last word
            if (progress >= 1) {
                if (slider) {
                    slider.value = maxWordIndex.toString();
                    this.updateWordHighlighting(); // Highlight the last word
                }
                console.log(`🏁 Range animation completed - highlighted last word`);
                this.stopRangeAnimation();
            }
        }, 50); // Update every 50ms for smooth animation
    }
    stopRangeAnimation() {
        if (this.wordHighlightInterval) {
            clearInterval(this.wordHighlightInterval);
            this.wordHighlightInterval = undefined;
        }
        // Only reset position if script playback just completed (not word TTS)
        if (this.isPlayingScript === false && this.isPlayingWord === false) {
            setTimeout(() => {
                const slider = document.querySelector('.word-slider');
                // Triple check: no script playing, no word playing, and this was a script completion
                if (slider && !this.isPlayingScript && !this.isPlayingWord) {
                    slider.value = '-1'; // Reset to no selection
                    this.updateWordHighlighting(); // Clear highlighting
                    console.log(`🏁 Script completed - reset to initial state after delay`);
                }
            }, 800); // 800ms delay to show last word
        }
    }
    stopWordHighlighting() {
        // Legacy method - now handled by stopRangeAnimation
        this.stopRangeAnimation();
    }
    speakScript(scriptText) {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || !this.soundEnabled) {
            return;
        }
        // Check if browser supports Speech Synthesis
        if (!('speechSynthesis' in window)) {
            console.warn('Speech Synthesis not supported in this browser');
            return;
        }
        // Stop any ongoing speech
        this.stopSpeech();
        // Clean the script text
        const cleanText = scriptText.replace(/[""]/g, '"').trim();
        if (!cleanText)
            return;
        // Create speech utterance
        const utterance = new SpeechSynthesisUtterance(cleanText);
        // Configure speech settings for script reading
        utterance.lang = 'en-US';
        utterance.rate = 0.85; // Slightly slower for sentence comprehension
        utterance.pitch = 1.0;
        utterance.volume = 0.9;
        // Select the best available English voice
        const voices = speechSynthesis.getVoices();
        const bestVoice = this.selectBestEnglishVoice(voices);
        if (bestVoice) {
            utterance.voice = bestVoice;
        }
        // Set playing state
        this.isPlayingScript = true;
        this.updateControllerButtons(); // Update button immediately
        // Show first word immediately and hold briefly
        const slider = document.querySelector('.word-slider');
        if (slider) {
            slider.value = '0';
            this.updateWordHighlighting();
        }
        // Start animation after a brief delay to show first word
        setTimeout(() => {
            this.startRangeSliderAnimation(cleanText, utterance.rate);
        }, 300); // 300ms delay to show first word
        // Handle speech events
        utterance.onstart = () => {
            this.isPlayingScript = true;
            this.updateControllerButtons(); // Update button when speech starts
        };
        utterance.onend = () => {
            this.isPlayingScript = false;
            this.updateControllerButtons(); // Update button when speech ends
            // Show the last word highlighted before reset
            const currentWords = this.getCurrentWords();
            if (currentWords) {
                const maxIndex = Math.max(0, currentWords.length - 1);
                const slider = document.querySelector('.word-slider');
                if (slider) {
                    slider.value = maxIndex.toString();
                    this.updateWordHighlighting(); // Highlight last word
                    console.log(`🏁 Speech completed - showing last word: ${maxIndex}`);
                    // Reset after a brief delay
                    setTimeout(() => {
                        if (!this.isPlayingScript) { // Only reset if not playing again
                            slider.value = '-1'; // Reset to no selection
                            this.updateWordHighlighting(); // Clear highlighting
                            console.log(`🔄 Reset to initial state after delay`);
                        }
                    }, 1000); // 1 second delay to show last word
                }
            }
            this.stopRangeAnimation();
        };
        utterance.onerror = (event) => {
            console.error('Speech synthesis error:', event.error);
            this.isPlayingScript = false;
            this.updateControllerButtons(); // Update button on error
            this.stopRangeAnimation();
        };
        // Speak the script
        speechSynthesis.speak(utterance);
    }
    async setScript(script) {
        const startTime = performance.now();
        console.log('📚 setScript started');
        try {
            this.isLoadingDictionaries = true;
            // Ultra-optimized word cleaning with single pass
            const rawWords = script.split(/\s+/);
            const cleanWords = [];
            const punctuationRegex = /[,.":!?;[\]\-]/g;
            for (let i = 0; i < rawWords.length; i++) {
                const word = rawWords[i];
                if (word) {
                    const cleanWord = word.replace(punctuationRegex, '').toLowerCase();
                    if (cleanWord) {
                        cleanWords.push(cleanWord);
                    }
                }
            }
            const cleaningTime = performance.now();
            console.log(`🧹 Word cleaning time: ${(cleaningTime - startTime).toFixed(2)}ms (${cleanWords.length} words)`);
            // Get dictionary data for each word with caching
            const dictionaries = [];
            const wordsToFetch = [];
            // Check cache first
            for (const word of cleanWords) {
                if (this.dictionaryCache.has(word)) {
                    dictionaries.push(this.dictionaryCache.get(word));
                }
                else {
                    wordsToFetch.push(word);
                }
            }
            const cacheTime = performance.now();
            console.log(`💾 Cache check time: ${(cacheTime - cleaningTime).toFixed(2)}ms (${wordsToFetch.length} to fetch, ${dictionaries.length} cached)`);
            // Fetch only uncached words
            if (wordsToFetch.length > 0) {
                const fetchStartTime = performance.now();
                const promises = wordsToFetch.map((word) => this.apiService.get({ target: `/datas/english/dictionary/${word}.json` })
                    .then(dict => {
                    // Check if dictionary has meaningful content
                    if (!dict.items || dict.items.length === 0) {
                        // Create placeholder for empty dictionaries
                        const placeholder = {
                            items: [{
                                    entry: word,
                                    matchType: 'original',
                                    phoneticSigns: [],
                                    pos: [{
                                            type: 'word',
                                            meanings: [{
                                                    meaning: `Original word: ${word}`,
                                                    examples: [],
                                                    originalMeaning: word
                                                }]
                                        }],
                                    source: 'original',
                                    url: '',
                                    mUrl: '',
                                    expDicTypeForm: '',
                                    locale: 'en',
                                    gdid: ''
                                }],
                            examples: [],
                            isWordType: true,
                            originalWord: word
                        };
                        // Cache the placeholder
                        this.dictionaryCache.set(word, placeholder);
                        return placeholder;
                    }
                    else {
                        const dictWithOriginal = { ...dict, originalWord: word };
                        // Cache the result
                        this.dictionaryCache.set(word, dictWithOriginal);
                        return dictWithOriginal;
                    }
                })
                    .catch(() => {
                    // Create placeholder for failed requests
                    const placeholder = {
                        items: [{
                                entry: word,
                                matchType: 'original',
                                phoneticSigns: [],
                                pos: [{
                                        type: 'word',
                                        meanings: [{
                                                meaning: `Original word: ${word}`,
                                                examples: [],
                                                originalMeaning: word
                                            }]
                                    }],
                                source: 'original',
                                url: '',
                                mUrl: '',
                                expDicTypeForm: '',
                                locale: 'en',
                                gdid: ''
                            }],
                        examples: [],
                        isWordType: true,
                        originalWord: word
                    };
                    // Cache the placeholder
                    this.dictionaryCache.set(word, placeholder);
                    return placeholder;
                }));
                const results = await Promise.allSettled(promises);
                const newDictionaries = results
                    .filter((result) => result.status === 'fulfilled')
                    .map((result) => result.value);
                dictionaries.push(...newDictionaries);
                const fetchTime = performance.now();
                console.log(`🌐 API fetch time: ${(fetchTime - fetchStartTime).toFixed(2)}ms (${wordsToFetch.length} requests)`);
            }
            // Create dictionaries for all words, showing original word if dictionary not found
            // Use batch processing for better performance
            const batchSize = 10;
            const resultDictionaries = [];
            for (let i = 0; i < cleanWords.length; i += batchSize) {
                const batch = cleanWords.slice(i, i + batchSize);
                const batchResults = batch.map(word => {
                    const cachedDict = this.dictionaryCache.get(word);
                    if (cachedDict) {
                        return cachedDict;
                    }
                    else {
                        // Create a placeholder dictionary with original word
                        return {
                            items: [{
                                    entry: word,
                                    matchType: 'original',
                                    phoneticSigns: [],
                                    pos: [{
                                            type: 'word',
                                            meanings: [{
                                                    meaning: `Original word: ${word}`,
                                                    examples: [],
                                                    originalMeaning: word
                                                }]
                                        }],
                                    source: 'original',
                                    url: '',
                                    mUrl: '',
                                    expDicTypeForm: '',
                                    locale: 'en',
                                    gdid: ''
                                }],
                            examples: [],
                            isWordType: true,
                            originalWord: word
                        };
                    }
                });
                resultDictionaries.push(...batchResults);
                // Yield control to prevent blocking
                if (i + batchSize < cleanWords.length) {
                    await new Promise(resolve => setTimeout(resolve, 0));
                }
            }
            this.dictionaries = resultDictionaries;
            const mappingTime = performance.now();
            console.log(`🗺️ Dictionary mapping time: ${(mappingTime - cacheTime).toFixed(2)}ms`);
            // No need to store words - they're retrieved from DOM when needed
            const finalTime = performance.now();
            console.log(`🏁 Total setScript time: ${(finalTime - startTime).toFixed(2)}ms`);
        }
        catch (error) {
            console.error('Failed to load dictionaries:', error);
        }
        finally {
            this.isLoadingDictionaries = false;
        }
    }
    async add() {
    }
    seekYouTubeToScriptTime(scriptIndex) {
        if (!this.youtubePlayer || !this.youtubePlayerReady || !this.scripts) {
            return;
        }
        const currentScript = this.scripts[scriptIndex];
        if (!currentScript || !currentScript.t) {
            return;
        }
        // Parse time string
        const timeInSeconds = this.parseTimeString(currentScript.t);
        if (timeInSeconds === null) {
            return;
        }
        console.log(`🎥 Seeking YouTube to ${timeInSeconds}s (${currentScript.t})`);
        try {
            // Check if player is ready for seeking
            const playerState = this.youtubePlayer.getPlayerState();
            // Seek to the time without playing - just move to position
            this.youtubePlayer.seekTo(timeInSeconds, true);
            // Only pause if the video was not already paused/stopped
            if (playerState === 1) { // Only pause if currently playing
                this.youtubePlayer.pauseVideo();
            }
        }
        catch (error) {
            console.error('🎥 Error seeking YouTube player:', error);
        }
    }
    // Toggle favorite status for a word
    toggleFavorite(word, meaning) {
        if (!word || !this.addToFavorites || !this.removeFavorite || !this.isWordFavorite) {
            console.warn('Favorite functions not available or word is empty');
            return;
        }
        const isFavorite = this.isWordFavorite(word);
        if (isFavorite) {
            this.removeFavorite(word);
        }
        else {
            this.addToFavorites(word, meaning);
        }
    }
    // Check if word is favorite (public method for template)
    checkWordFavorite(word) {
        if (!word || !this.isWordFavorite) {
            return false;
        }
        return this.isWordFavorite(word);
    }
    createYouTubeEmbed() {
        if (!_dooboostore_core_web_valid_ValidUtils__WEBPACK_IMPORTED_MODULE_6__.ValidUtils.isBrowser() || !this.currentItem?.link) {
            console.warn('🎥 Cannot create YouTube embed: browser check or link missing');
            return;
        }
        const container = document.getElementById('youtube-player-container');
        if (!container) {
            console.warn('🎥 YouTube container not found, retrying...');
            setTimeout(() => this.createYouTubeEmbed(), 200);
            return;
        }
        // Extract video ID from YouTube URL
        const videoId = this.extractYouTubeVideoId(this.currentItem.link);
        if (!videoId) {
            console.error('🎥 Could not extract YouTube video ID from:', this.currentItem.link);
            return;
        }
        console.log('🎥 Creating YouTube player for video:', videoId);
        // Wait for YouTube API to be ready
        const initPlayer = () => {
            if (typeof window.YT !== 'undefined' && window.YT.Player) {
                this.createYouTubePlayer(videoId);
            }
            else {
                console.log('🎥 YouTube API not ready, waiting...');
                setTimeout(initPlayer, 200);
            }
        };
        // Check if YouTube API is already loaded
        if (typeof window.YT !== 'undefined') {
            if (window.YT.loaded === 1) {
                console.log('🎥 YouTube API already loaded');
                this.createYouTubePlayer(videoId);
            }
            else {
                console.log('🎥 YouTube API loading, setting callback...');
                window.onYouTubeIframeAPIReady = () => {
                    console.log('🎥 YouTube API ready callback triggered');
                    this.createYouTubePlayer(videoId);
                };
            }
        }
        else {
            console.log('🎥 YouTube API not found, waiting for it to load...');
            initPlayer();
        }
    }
    createYouTubePlayer(videoId) {
        const container = document.getElementById('youtube-player-container');
        if (!container) {
            console.error('🎥 YouTube player container not found during creation');
            return;
        }
        // Clear existing content and create player div
        container.innerHTML = '';
        const playerDiv = document.createElement('div');
        playerDiv.id = 'youtube-player-' + Date.now();
        container.appendChild(playerDiv);
        try {
            this.youtubePlayer = new window.YT.Player(playerDiv.id, {
                height: '100%',
                width: '100%',
                videoId: videoId,
                playerVars: {
                    autoplay: 0,
                    controls: 1,
                    disablekb: 0,
                    enablejsapi: 1,
                    fs: 1,
                    iv_load_policy: 3,
                    modestbranding: 1,
                    playsinline: 1,
                    rel: 0,
                    showinfo: 0
                },
                events: {
                    onReady: (event) => {
                        console.log('🎥 YouTube player ready successfully!');
                        this.youtubePlayerReady = true;
                        // Start monitoring playback time
                        this.startYouTubeTimeMonitoring();
                    },
                    onStateChange: (event) => {
                        console.log('🎥 YouTube player state changed:', event.data);
                    },
                    onError: (event) => {
                        console.error('🎥 YouTube player error:', event.data);
                    }
                }
            });
            console.log('🎥 YouTube player instance created:', this.youtubePlayer);
        }
        catch (error) {
            console.error('🎥 Failed to create YouTube player:', error);
        }
    }
    extractYouTubeVideoId(url) {
        console.log('🎥 Extracting video ID from URL:', url);
        const patterns = [
            /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,
            /youtube\.com\/v\/([^&\n?#]+)/,
            /youtube\.com\/watch\?.*v=([^&\n?#]+)/,
            /^([a-zA-Z0-9_-]{11})$/ // Direct video ID
        ];
        for (const pattern of patterns) {
            const match = url.match(pattern);
            if (match && match[1]) {
                const videoId = match[1];
                console.log('🎥 Extracted video ID:', videoId);
                return videoId;
            }
        }
        console.error('🎥 Could not extract video ID from URL:', url);
        return null;
    }
    onDestroy() {
        // Stop any ongoing speech and word highlighting
        this.stopSpeech();
        this.stopWordHighlighting();
        // Reset states
        this.isPlayingScript = false;
        this.isPlayingWord = false;
        // Clear timeouts
        if (this.scrollTimeout) {
            clearTimeout(this.scrollTimeout);
        }
        super.onDestroy();
    }
};
PlayerRouteComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_4__.Sim,
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_1__.Component)({
        template: _player_route_component_html__WEBPACK_IMPORTED_MODULE_2__["default"],
        styles: _player_route_component_css__WEBPACK_IMPORTED_MODULE_3__["default"]
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_5__.ApiService !== "undefined" && _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_5__.ApiService) === "function" ? _a : Object, typeof (_b = typeof _src_service_english_VideoItemService__WEBPACK_IMPORTED_MODULE_8__.VideoItemService !== "undefined" && _src_service_english_VideoItemService__WEBPACK_IMPORTED_MODULE_8__.VideoItemService) === "function" ? _b : Object])
], PlayerRouteComponent);



/***/ }),

/***/ "./src/pages/index.route.component.css":
/*!*********************************************!*\
  !*** ./src/pages/index.route.component.css ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("");

/***/ }),

/***/ "./src/pages/index.route.component.html":
/*!**********************************************!*\
  !*** ./src/pages/index.route.component.html ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<dr-a href=\"/\" >home</dr-a>\n<dr-a href=\"/english\">english</dr-a>");

/***/ }),

/***/ "./src/pages/index.route.component.ts":
/*!********************************************!*\
  !*** ./src/pages/index.route.component.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IndexRouteComponent: () => (/* binding */ IndexRouteComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _index_route_component_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index.route.component.html */ "./src/pages/index.route.component.html");
/* harmony import */ var _index_route_component_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index.route.component.css */ "./src/pages/index.route.component.css");
/* harmony import */ var _dooboostore_dom_render_operators_Appender__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/dom-render/operators/Appender */ "../../packages/@dooboostore/dom-render/src/operators/Appender.ts");
/* harmony import */ var _dooboostore_simple_boot_front_component_ComponentBase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dooboostore/simple-boot-front/component/ComponentBase */ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentBase.ts");







let IndexRouteComponent = class IndexRouteComponent extends _dooboostore_simple_boot_front_component_ComponentBase__WEBPACK_IMPORTED_MODULE_6__.ComponentBase {
    fetchAppender = new _dooboostore_dom_render_operators_Appender__WEBPACK_IMPORTED_MODULE_5__.Appender();
    sw = true;
    constructor() {
        super();
    }
    onCreatedThisChildDebounce(childrenSet) {
        super.onCreatedThisChildDebounce(childrenSet);
        // console.log('vvvvvvvv');
    }
    async onRouting(r) {
        await super.onRouting(r);
        // console.log('index route onRouting??', r);
    }
};
IndexRouteComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    (0,_dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.Sim)({
        scope: _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.Lifecycle.Transient,
    }),
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_2__.Component)({
        template: _index_route_component_html__WEBPACK_IMPORTED_MODULE_3__["default"],
        styles: _index_route_component_css__WEBPACK_IMPORTED_MODULE_4__["default"],
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [])
], IndexRouteComponent);



/***/ }),

/***/ "./src/pages/index.router.component.css":
/*!**********************************************!*\
  !*** ./src/pages/index.router.component.css ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("");

/***/ }),

/***/ "./src/pages/index.router.component.html":
/*!***********************************************!*\
  !*** ./src/pages/index.router.component.html ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("\n<main>\n    <dr-router-outlet></dr-router-outlet>\n</main>");

/***/ }),

/***/ "./src/pages/index.router.component.ts":
/*!*********************************************!*\
  !*** ./src/pages/index.router.component.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IndexRouterComponent: () => (/* binding */ IndexRouterComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_simple_boot_decorators_route_Router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/route/Router */ "../../packages/@dooboostore/simple-boot/src/decorators/route/Router.ts");
/* harmony import */ var _dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @dooboostore/simple-boot-front/decorators/Component */ "../../packages/@dooboostore/simple-boot-front/src/decorators/Component.ts");
/* harmony import */ var _index_route_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index.route.component */ "./src/pages/index.route.component.ts");
/* harmony import */ var _dooboostore_simple_boot_front_component_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dooboostore/simple-boot-front/component/ComponentRouterBase */ "../../packages/@dooboostore/simple-boot-front/src/component/ComponentRouterBase.ts");
/* harmony import */ var _index_router_component_html__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index.router.component.html */ "./src/pages/index.router.component.html");
/* harmony import */ var _index_router_component_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index.router.component.css */ "./src/pages/index.router.component.css");
/* harmony import */ var _dooboostore_dom_render_components_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @dooboostore/dom-render/components/index */ "../../packages/@dooboostore/dom-render/src/components/index.ts");
/* harmony import */ var _src_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @src/component */ "./src/component/index.ts");
/* harmony import */ var _dooboostore_dom_render_routers_Router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @dooboostore/dom-render/routers/Router */ "../../packages/@dooboostore/dom-render/src/routers/Router.ts");
/* harmony import */ var _src_pages_english_english_router_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @src/pages/english/english.router.component */ "./src/pages/english/english.router.component.ts");
var _a;












let IndexRouterComponent = class IndexRouterComponent extends _dooboostore_simple_boot_front_component_ComponentRouterBase__WEBPACK_IMPORTED_MODULE_5__.ComponentRouterBase {
    router;
    constructor(router) {
        super({ sameRouteNoApply: true });
        this.router = router;
    }
    async onInitRender(param, rawSet) {
        super.onInitRender(param, rawSet);
    }
    async canActivate(url, data) {
        super.canActivate(url, data);
    }
    async onRouting(r) {
        await super.onRouting(r);
        console.log("onRouting");
    }
    onCreatedThisChildDebounce(childrenSet) {
        super.onCreatedThisChildDebounce(childrenSet);
    }
    test() { }
};
IndexRouterComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.Sim,
    (0,_dooboostore_simple_boot_decorators_route_Router__WEBPACK_IMPORTED_MODULE_2__.Router)({
        path: "",
        route: {
            "/": _index_route_component__WEBPACK_IMPORTED_MODULE_4__.IndexRouteComponent,
        },
        routers: [_src_pages_english_english_router_component__WEBPACK_IMPORTED_MODULE_11__.EnglishRouterComponent],
    }),
    (0,_dooboostore_simple_boot_front_decorators_Component__WEBPACK_IMPORTED_MODULE_3__.Component)({
        template: _index_router_component_html__WEBPACK_IMPORTED_MODULE_6__["default"],
        styles: _index_router_component_css__WEBPACK_IMPORTED_MODULE_7__["default"],
        using: [_dooboostore_dom_render_components_index__WEBPACK_IMPORTED_MODULE_8__.drComponent, _src_component__WEBPACK_IMPORTED_MODULE_9__["default"]],
    }),
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_dom_render_routers_Router__WEBPACK_IMPORTED_MODULE_10__.Router !== "undefined" && _dooboostore_dom_render_routers_Router__WEBPACK_IMPORTED_MODULE_10__.Router) === "function" ? _a : Object])
], IndexRouterComponent);



/***/ }),

/***/ "./src/service/CodeFetchService.ts":
/*!*****************************************!*\
  !*** ./src/service/CodeFetchService.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CodeFetchService: () => (/* binding */ CodeFetchService)
/* harmony export */ });
var CodeFetchService;
(function (CodeFetchService) {
    CodeFetchService.SYMBOL = Symbol.for("CodeFetchService");
})(CodeFetchService || (CodeFetchService = {}));


/***/ }),

/***/ "./src/service/english/VideoItemService.ts":
/*!*************************************************!*\
  !*** ./src/service/english/VideoItemService.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VideoItemService: () => (/* binding */ VideoItemService)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @dooboostore/simple-boot/decorators/SimDecorator */ "../../packages/@dooboostore/simple-boot/src/decorators/SimDecorator.ts");
/* harmony import */ var _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @dooboostore/simple-boot/fetch/ApiService */ "../../packages/@dooboostore/simple-boot/src/fetch/ApiService.ts");
var _a;



let VideoItemService = class VideoItemService {
    apiService;
    constructor(apiService) {
        this.apiService = apiService;
    }
    async items() {
        return await this.apiService.get({ target: '/datas/english/items.json' });
    }
    async item(name) {
        const items = await this.items();
        return items.find(item => item.name === name);
    }
};
VideoItemService = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate)([
    _dooboostore_simple_boot_decorators_SimDecorator__WEBPACK_IMPORTED_MODULE_1__.Sim,
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__metadata)("design:paramtypes", [typeof (_a = typeof _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_2__.ApiService !== "undefined" && _dooboostore_simple_boot_fetch_ApiService__WEBPACK_IMPORTED_MODULE_2__.ApiService) === "function" ? _a : Object])
], VideoItemService);



/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!****************************!*\
  !*** ./front-end/index.ts ***!
  \****************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var reflect_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reflect-metadata */ "../../node_modules/.pnpm/reflect-metadata@0.2.2/node_modules/reflect-metadata/Reflect.js");
/* harmony import */ var reflect_metadata__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(reflect_metadata__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _src_bootfactory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @src/bootfactory */ "./src/bootfactory.ts");
/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./service */ "./front-end/service/index.ts");

// console.log('----------', require.resolve("reflect-metadata"));
// console.log('---', Object.keys(require.cache).filter(p => p.includes("reflect-metadata")));
// if (!(Reflect as any).__MY_MARK__) {
//   (Reflect as any).__MY_MARK__ = Math.random();
// }
//
// console.log("Reflect mark:", (Reflect as any).__MY_MARK__);


const using = [..._service__WEBPACK_IMPORTED_MODULE_2__.services];
_src_bootfactory__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_src_bootfactory__WEBPACK_IMPORTED_MODULE_1__.MakeSimFrontOption)(window), using).then(it => {
    it.run();
});

})();

/******/ })()
;
//# sourceMappingURL=bundle.js.map